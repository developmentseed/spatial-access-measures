/*! For license information please see main.08320ddb.js.LICENSE.txt */
(()=>{var e={2308:(e,t,r)=>{"use strict";var i,n=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,l=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,u=(e,t,r,i)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let n of s(t))c.call(e,n)||n===r||o(e,n,{get:()=>t[n],enumerable:!(i=a(t,n))||i.enumerable});return e},d=(e,t,r)=>(r=null!=e?n(l(e)):{},u(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),h=(e,t,r)=>new Promise(((i,n)=>{var o=e=>{try{s(r.next(e))}catch(t){n(t)}},a=e=>{try{s(r.throw(e))}catch(t){n(t)}},s=e=>e.done?i(e.value):Promise.resolve(e.value).then(o,a);s((r=r.apply(e,t)).next())})),p={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(p,{ARROW_MIME_TYPE:()=>R,AsyncDuckDB:()=>g.AsyncDuckDB,CSV_MIME_TYPE:()=>N,InsertFileError:()=>q,PARQUET_MIME_TYPE:()=>j,arrayBufferToArrow:()=>z,arrowToArrayBuffer:()=>L,arrowToJSON:()=>F,cardinalities:()=>C,drop:()=>A,exportArrow:()=>V,exportCsv:()=>$,exportParquet:()=>W,getDuckDB:()=>S,getTempFilename:()=>M,initializeDuckDb:()=>x,insertArrow:()=>K,insertArrowTable:()=>J,insertCSV:()=>Y,insertFile:()=>Z,insertParquet:()=>Q,isArrow:()=>B,isArrowFile:()=>D,isParquetFile:()=>U,runQuery:()=>k,useDuckDb:()=>I,useDuckDbQuery:()=>E}),e.exports=(i=p,u(o({},"__esModule",{value:!0}),i));var f,m,g=r(4656),y=r(2892),_=d(r(4656)),b=r(4656),v=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;console.debug(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=(null!=r?r:performance.now())-t;let n;switch(!0){case i>=1e3:n=`${(i/1e3).toFixed(1)}s`;break;case i>=1:n=`${i.toFixed(0)}ms`;break;default:n=`${i.toFixed(3)}ms`}return`\x1b[31m[${n}] \x1b[0m${e}`}(e,t,r))};function x(e){return h(this,null,(function*(){const{debug:t=!1,config:r}=e||{};return f=t,void 0===m&&(m=w(r)),m}))}var w=e=>h(void 0,null,(function*(){const t=performance.now(),r=_.getJsDelivrBundles(),i=yield _.selectBundle(r),n=URL.createObjectURL(new Blob([`importScripts("${i.mainWorker}");`],{type:"text/javascript"})),o=new Worker(n),a=f?new _.ConsoleLogger:new _.VoidLogger,s=new b.AsyncDuckDB(a,o);if(yield s.instantiate(i.mainModule,i.pthreadWorker),URL.revokeObjectURL(n),e){if(e.path){const t=yield fetch(e.path),r=yield t.arrayBuffer(),i=e.path.match(/[^/]*$/);i&&(e.path=i[0]),yield s.registerFileBuffer(e.path,new Uint8Array(r))}yield s.open(e)}return f&&(v("DuckDB initialized",t),e&&console.debug(`DuckDbConfig: ${JSON.stringify(e,null,2)}`)),s})),S=()=>h(void 0,null,(function*(){return m||(yield x())})),I=()=>{const{result:e,loading:t,error:r}=(0,y.useAsync)((()=>h(void 0,null,(function*(){return yield S()}))),[]);return{db:e,loading:t,error:r}},T=r(2892),k=(e,t)=>h(void 0,null,(function*(){const r=performance.now(),i=yield e.connect(),n=yield i.query(t);return yield i.close(),f&&v(`Run query: ${t}`,r),n})),E=e=>{const{db:t}=I(),{result:r,loading:i,error:n}=(0,T.useAsync)((()=>h(void 0,null,(function*(){if(!t||!e)return;return yield k(t,e)}))),[t,e]);return{arrow:r,loading:i,error:n}},A=(e,t)=>h(void 0,null,(function*(){const r=yield((e,t)=>h(void 0,null,(function*(){const r=yield k(e,`select table_type from information_schema.tables where table_name = '${t}'`);if(1===r.numRows){const e=r.get(0),t=null==e?void 0:e.toArray()[0];switch(t){case"BASE TABLE":return"Table";case"VIEW":return"View";default:throw new Error(`Unexpected table type: ${t}`)}}})))(e,t);"Table"===r?yield k(e,`drop table if exists "${t}"`):"View"===r&&(yield k(e,`drop view if exists "${t}"`))})),P=(e,t)=>h(void 0,null,(function*(){const r=yield k(e,`select column_name, data_type from information_schema.columns where table_name = '${t}'`),i=new Map;for(let e=0;e<r.numRows;e++){const t=r.get(e);if(t){const[e,r]=t.toArray();i.set(e,r)}}return i})),C=(e,t)=>h(void 0,null,(function*(){const r=yield P(e,t),i=Array.from(r.keys()),n=(yield k(e,`select count(distinct columns(*)) from "${t}"`)).get(0);if(!n)throw new Error(`Expected a single row of cardinalities: ${t}`);const o=n.toArray();if(o.length!==i.length)throw new Error(`Unexpected length mismatch: ${t}`);const a={};for(let e=0;e<i.length;e++)a[i[e]]=o[e];return a})),M=()=>`file-${Date.now().toString()}-${Math.random().toString(36).substring(2)}`,O=r(8602),R="application/vnd.apache.arrow.file",B=e=>e instanceof O.Table,D=e=>h(void 0,null,(function*(){try{const t=yield e.arrayBuffer();return z(t),!0}catch(t){}return!1})),z=e=>(0,O.tableFromIPC)(new Uint8Array(e)),L=e=>(0,O.tableToIPC)(e,"file").buffer;function F(e){const t=[];for(let r=0;r<e.numRows;r++){const i=e.get(r);i&&t.push(i.toJSON())}return t}var N="text/csv",j="application/vnd.apache.parquet",U=e=>h(void 0,null,(function*(){return(yield e.slice(0,4).text()).startsWith("PAR1")})),V=(e,t,r)=>h(void 0,null,(function*(){r=r||H(t,"arrow");const i=yield k(e,`SELECT * FROM '${t}'`),n=L(i);return new File([n],r,{type:R})})),$=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";return h(void 0,null,(function*(){r=r||H(t,"csv");const n=M();yield k(e,`COPY '${t}' TO '${n}' WITH (HEADER 1, DELIMITER '${i}')`);const o=yield e.copyFileToBuffer(n);return yield e.dropFile(n),new File([o],r,{type:N})}))},W=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"zstd";return h(void 0,null,(function*(){r=r||H(t,"parquet");const n=M();yield k(e,`COPY '${t}' TO '${n}' (FORMAT PARQUET, COMPRESSION ${i})`);const o=yield e.copyFileToBuffer(n);return yield e.dropFile(n),new File([o],r,{type:j})}))},H=(e,t)=>((e,t)=>{const r=e.split("."),i=r.length>1?r.pop():"",n=r.join(".");return t.includes(i)?n:e})(e,["arrow","csv","parquet"])+"."+t,G=d(r(4656)),q=class extends Error{constructor(e,t){super(t),this.title=e,this.name="InsertFileError"}},Z=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return h(void 0,null,(function*(){const n=performance.now();yield X(e,t,r),i&&v(`Imported ${t.name}`,n)}))},X=(e,t,r)=>h(void 0,null,(function*(){try{if(r=r||t.name,yield U(t))return void(yield Q(e,t,r));if(yield D(t))return void(yield K(e,t,r));const i=t.name.toLowerCase();switch(i.split(".").at(-1)){case"arrow":return void(yield K(e,t,r));case"parquet":return void(yield Q(e,t,r));case"csv":return void(yield Y(e,t,r))}return yield Y(e,t,r)}catch(i){throw console.error(i),i instanceof q?i:new q("Invalid file type","Only CSV, Parquet, or Arrow files are supported")}})),Y=(e,t,r)=>h(void 0,null,(function*(){try{const i=yield t.text(),n=M();yield e.registerFileText(n,i);const o=yield e.connect();yield o.insertCSVFromPath(n,{name:r,schema:"main",detect:!0}),yield o.close(),e.dropFile(n),yield((e,t)=>h(void 0,null,(function*(){const r=yield P(e,t),i=Array.from(r.keys());for(let n=0;n<i.length;n++){const r=i[n];r.toLowerCase().includes("year")&&(yield k(e,`ALTER TABLE "${t}" ALTER COLUMN "${r}" SET DATA TYPE VARCHAR`))}})))(e,r)}catch(i){if(console.error(i),"text/csv"===t.type||t.name.toLowerCase().endsWith(".csv"))throw new q("CSV import failed","Sorry, we couldn't import that CSV. Please try again.");throw i}})),K=(e,t,r)=>h(void 0,null,(function*(){try{const i=yield t.arrayBuffer(),n=z(i);yield J(e,n,r)}catch(i){throw console.error(i),new q("Arrow import failed","Sorry, we couldn't import that file")}})),J=(e,t,r)=>h(void 0,null,(function*(){const i=yield e.connect();yield i.insertArrowTable(t,{name:r}),yield i.close()})),Q=(e,t,r)=>h(void 0,null,(function*(){try{const i=M()+".parquet";yield e.registerFileHandle(i,t,G.DuckDBDataProtocol.BROWSER_FILEREADER,!0),yield k(e,`CREATE TABLE '${r}' AS SELECT * FROM '${i}'`),yield e.dropFile(i)}catch(i){throw console.error(i),new q("Parquet import failed","Sorry, we couldn't import that file")}}))},240:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Builder:()=>p,ByteBuffer:()=>h,Encoding:()=>d,FILE_IDENTIFIER_LENGTH:()=>o,SIZEOF_INT:()=>n,SIZEOF_SHORT:()=>i,SIZE_PREFIX_LENGTH:()=>a,float32:()=>l,float64:()=>c,int32:()=>s,isLittleEndian:()=>u});const i=2,n=4,o=4,a=4,s=new Int32Array(2),l=new Float32Array(s.buffer),c=new Float64Array(s.buffer),u=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];var d;!function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(d||(d={}));class h{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new h(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return s[0]=this.readInt32(e),l[0]}readFloat64(e){return s[u?0:1]=this.readInt32(e),s[u?1:0]=this.readInt32(e+4),c[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){l[0]=t,this.writeInt32(e,s[0])}writeFloat64(e,t){c[0]=t,this.writeInt32(e,s[u?0:1]),this.writeInt32(e+4,s[u?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+n+o)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<o;t++)e+=String.fromCharCode(this.readInt8(this.position_+n+t));return e}__offset(e,t){const r=e-this.readInt32(e);return t<this.readInt16(r)?this.readInt16(r+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const r=this.readInt32(e);e+=n;const i=this.bytes_.subarray(e,e+r);return t===d.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(e,t){return"string"===typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+n}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=o)throw new Error("FlatBuffers: file identifier must be length "+o);for(let t=0;t<o;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+n+t))return!1;return!0}createScalarList(e,t){const r=[];for(let i=0;i<t;++i){const t=e(i);null!==t&&r.push(t)}return r}createObjList(e,t){const r=[];for(let i=0;i<t;++i){const t=e(i);null!==t&&r.push(t.unpack())}return r}}class p{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=h.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const r=1+~(this.bb.capacity()-this.space+t)&e-1;for(;this.space<r+e+t;){const e=this.bb.capacity();this.bb=p.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(r)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,r){(this.force_defaults||t!=r)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,r){(this.force_defaults||t!=r)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,r){(this.force_defaults||t!=r)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,r){(this.force_defaults||t!==r)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,r){(this.force_defaults||t!=r)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,r){(this.force_defaults||t!=r)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,r){t!=r&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=t<<1,i=h.allocate(r);return i.setPosition(r-t),i.bytes().set(e.bytes(),r-t),i}addOffset(e){this.prep(n,0),this.writeInt32(this.offset()-e+n)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);const r=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);const n=(r+2)*i;this.addInt16(n);let o=0;const a=this.space;e:for(t=0;t<this.vtables.length;t++){const e=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(e)){for(let t=i;t<n;t+=i)if(this.bb.readInt16(a+t)!=this.bb.readInt16(e+t))continue e;o=this.vtables[t];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,r){const i=r?a:0;if(t){const e=t;if(this.prep(this.minalign,n+o+i),e.length!=o)throw new TypeError("FlatBuffers: file identifier must be length "+o);for(let t=o-1;t>=0;t--)this.writeInt8(e.charCodeAt(t))}this.prep(this.minalign,n+i),this.addOffset(e),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const r=this.bb.capacity()-e,i=r-this.bb.readInt32(r);if(!(t<this.bb.readInt16(i)&&0!=this.bb.readInt16(i+t)))throw new TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,r){this.notNested(),this.vector_num_elems=t,this.prep(n,e*t),this.prep(r,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(null===e||void 0===e)return 0;let t;return t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return null===e||void 0===e?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return null===e?0:"string"===typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let r=0;r<e.length;++r){const i=e[r];if(null===i)throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(i))}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}}},219:(e,t,r)=>{"use strict";var i=r(3763),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return i.isMemo(e)?a:s[e.$$typeof]||n}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=a;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,i){if("string"!==typeof r){if(f){var n=p(r);n&&n!==f&&e(t,n,i)}var a=u(r);d&&(a=a.concat(d(r)));for(var s=l(t),m=l(r),g=0;g<a.length;++g){var y=a[g];if(!o[y]&&(!i||!i[y])&&(!m||!m[y])&&(!s||!s[y])){var _=h(r,y);try{c(t,y,_)}catch(b){}}}}return t}},4983:(e,t)=>{"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,u=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,_=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,v=r?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case o:case s:case a:case p:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case n:return t}}}function w(e){return x(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=i,t.ForwardRef=h,t.Fragment=o,t.Lazy=g,t.Memo=m,t.Portal=n,t.Profiler=s,t.StrictMode=a,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||x(e)===u},t.isConcurrentMode=w,t.isContextConsumer=function(e){return x(e)===c},t.isContextProvider=function(e){return x(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return x(e)===h},t.isFragment=function(e){return x(e)===o},t.isLazy=function(e){return x(e)===g},t.isMemo=function(e){return x(e)===m},t.isPortal=function(e){return x(e)===n},t.isProfiler=function(e){return x(e)===s},t.isStrictMode=function(e){return x(e)===a},t.isSuspense=function(e){return x(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===a||e===p||e===f||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===_||e.$$typeof===b||e.$$typeof===v||e.$$typeof===y)},t.typeOf=x},3763:(e,t,r)=>{"use strict";e.exports=r(4983)},2892:(e,t,r)=>{"use strict";r.r(t),r.d(t,{useAsync:()=>d,useAsyncAbortable:()=>h,useAsyncCallback:()=>p});var i=r(5043);function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n.apply(this,arguments)}"undefined"!==typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!==typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var o="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?i.useLayoutEffect:i.useEffect,a={status:"not-requested",loading:!1,result:void 0,error:void 0},s={status:"loading",loading:!0,result:void 0,error:void 0},l=function(){},c={initialState:function(e){return e&&e.executeOnMount?s:a},executeOnMount:!0,executeOnUpdate:!0,setLoading:function(e){return s},setResult:function(e,t){return{status:"success",loading:!1,result:e,error:void 0}},setError:function(e,t){return{status:"error",loading:!1,result:void 0,error:e}},onSuccess:l,onError:l},u=function(e,t,r){!t&&(t=[]);var a=function(e){return n({},c,{},e)}(r),s=(0,i.useState)(null),l=s[0],u=s[1],d=function(e){var t=(0,i.useState)((function(){return e.initialState(e)})),r=t[0],o=t[1],a=(0,i.useCallback)((function(){return o(e.initialState(e))}),[o,e]),s=(0,i.useCallback)((function(){return o(e.setLoading(r))}),[r,o]),l=(0,i.useCallback)((function(t){return o(e.setResult(t,r))}),[r,o]),c=(0,i.useCallback)((function(t){return o(e.setError(t,r))}),[r,o]),u=(0,i.useCallback)((function(e){return o(n({},r,{},e))}),[r,o]);return{value:r,set:o,merge:u,reset:a,setLoading:s,setResult:l,setError:c}}(a),h=function(){var e=(0,i.useRef)(!1);return(0,i.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),function(){return e.current}}(),p=function(){var e=(0,i.useRef)(null);return{set:function(t){return e.current=t},get:function(){return e.current},is:function(t){return e.current===t}}}(),f=function(e){return h()&&p.is(e)},m=function(e){var t=(0,i.useRef)(e);return o((function(){t.current=e})),(0,i.useCallback)((function(){return t.current}),[t])}((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=function(){try{return Promise.resolve(e.apply(void 0,r))}catch(t){return Promise.reject(t)}}();return u(r),p.set(n),d.setLoading(),n.then((function(e){f(n)&&d.setResult(e),a.onSuccess(e,{isCurrent:function(){return p.is(n)}})}),(function(e){f(n)&&d.setError(e),a.onError(e,{isCurrent:function(){return p.is(n)}})})),n})),g=(0,i.useCallback)((function(){return m().apply(void 0,arguments)}),[m]),y=!h();return(0,i.useEffect)((function(){var e=function(){return m().apply(void 0,t)};y&&a.executeOnMount&&e(),!y&&a.executeOnUpdate&&e()}),t),n({},d.value,{set:d.set,merge:d.merge,reset:d.reset,execute:g,currentPromise:p.get(),currentParams:l})};function d(e,t,r){return u(e,t,r)}var h=function(e,t,r){var n=(0,i.useRef)();return d((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];try{n.current&&n.current.abort();var o=new AbortController;return n.current=o,Promise.resolve(function(e,t){try{var r=e()}catch(i){return t(!0,i)}return r&&r.then?r.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}((function(){return Promise.resolve(e.apply(void 0,[o.signal].concat(r)))}),(function(e,t){if(n.current===o&&(n.current=void 0),e)throw t;return t})))}catch(a){return Promise.reject(a)}}),t,r)},p=function(e,t){return u(e,[],n({},t,{executeOnMount:!1,executeOnUpdate:!1}))}},2730:(e,t,r)=>{"use strict";var i=r(5043),n=r(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,r,i,n,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}function b(e,t,r,i){var n=g.hasOwnProperty(t)?g[t]:null;(null!==n?0!==n.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,i){if(null===t||"undefined"===typeof t||function(e,t,r,i){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,i))return!0;if(i)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,i)&&(r=null),i||null===n?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,i=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,_);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),E=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var B=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=B&&e[B]||e["@@iterator"])?e:null}var z,L=Object.assign;function F(e){if(void 0===z)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var N=!1;function j(e,t){if(!e||N)return"";N=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),o=i.stack.split("\n"),a=n.length-1,s=o.length-1;1<=a&&0<=s&&n[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(n[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||n[a]!==o[s]){var l="\n"+n[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case T:return"Profiler";case I:return"StrictMode";case P:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return V(e(t))}catch(r){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==r&&(t.setValue(e),!0)}function Z(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Y(e,t){var r=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){K(e,t);var r=W(t.value),i=t.type;if(null!=r)"number"===i?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Z(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(i&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(te(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function oe(e,t){var r=W(t.value),i=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),n=me(r,t[r],i);"float"===r&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ie=null;function Te(e){if(e=bn(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=xn(t),we(e.stateNode,e.type,t))}}function ke(e){Se?Ie?Ie.push(e):Ie=[e]:Se=e}function Ee(){if(Se){var e=Se,t=Ie;if(Ie=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ae(e,t){return e(t)}function Pe(){}var Ce=!1;function Me(e,t,r){if(Ce)return e(t,r);Ce=!0;try{return Ae(e,t,r)}finally{Ce=!1,(null!==Se||null!==Ie)&&(Pe(),Ee())}}function Oe(e,t){var r=e.stateNode;if(null===r)return null;var i=xn(r);if(null===i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var Re=!1;if(u)try{var Be={};Object.defineProperty(Be,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Be,Be),window.removeEventListener("test",Be,Be)}catch(ue){Re=!1}function De(e,t,r,i,n,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var ze=!1,Le=null,Fe=!1,Ne=null,je={onError:function(e){ze=!0,Le=e}};function Ue(e,t,r,i,n,o,a,s,l){ze=!1,Le=null,De.apply(je,arguments)}function Ve(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(null===n)break;var a=n.alternate;if(null===a){if(null!==(i=n.return)){r=i;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return We(n),e;if(a===i)return We(n),t;a=a.sibling}throw Error(o(188))}if(r.return!==i.return)r=n,i=a;else{for(var s=!1,l=n.child;l;){if(l===r){s=!0,r=n,i=a;break}if(l===i){s=!0,i=n,r=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===r){s=!0,r=a,i=n;break}if(l===i){s=!0,i=a,r=n;break}l=l.sibling}if(!s)throw Error(o(189))}}if(r.alternate!==i)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var qe=n.unstable_scheduleCallback,Ze=n.unstable_cancelCallback,Xe=n.unstable_shouldYield,Ye=n.unstable_requestPaint,Ke=n.unstable_now,Je=n.unstable_getCurrentPriorityLevel,Qe=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,it=n.unstable_IdlePriority,nt=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var i=0,n=e.suspendedLanes,o=e.pingedLanes,a=268435455&r;if(0!==a){var s=a&~n;0!==s?i=dt(s):0!==(o&=a)&&(i=dt(o))}else 0!==(a=r&~n)?i=dt(a):0!==o&&(i=dt(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&n)&&((n=i&-i)>=(o=t&-t)||16===n&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)n=1<<(r=31-at(t)),i|=e[r],t&=~n;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=r}function _t(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-at(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,St,It,Tt,kt=!1,Et=[],At=null,Pt=null,Ct=null,Mt=new Map,Ot=new Map,Rt=[],Bt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Ct=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function zt(e,t,r,i,n,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[n]},null!==t&&(null!==(t=bn(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Lt(e){var t=_n(e.target);if(null!==t){var r=Ve(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=$e(r)))return e.blockedOn=t,void Tt(e.priority,(function(){St(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bn(r))&&wt(t),e.blockedOn=r,!1;var i=new(r=e.nativeEvent).constructor(r.type,r);ve=i,r.target.dispatchEvent(i),ve=null,t.shift()}return!0}function Nt(e,t,r){Ft(e)&&r.delete(t)}function jt(){kt=!1,null!==At&&Ft(At)&&(At=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Ct&&Ft(Ct)&&(Ct=null),Mt.forEach(Nt),Ot.forEach(Nt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,jt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var r=1;r<Et.length;r++){var i=Et[r];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==At&&Ut(At,e),null!==Pt&&Ut(Pt,e),null!==Ct&&Ut(Ct,e),Mt.forEach(t),Ot.forEach(t),r=0;r<Rt.length;r++)(i=Rt[r]).blockedOn===e&&(i.blockedOn=null);for(;0<Rt.length&&null===(r=Rt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Rt.shift()}var $t=v.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,r,i){var n=bt,o=$t.transition;$t.transition=null;try{bt=1,qt(e,t,r,i)}finally{bt=n,$t.transition=o}}function Gt(e,t,r,i){var n=bt,o=$t.transition;$t.transition=null;try{bt=4,qt(e,t,r,i)}finally{bt=n,$t.transition=o}}function qt(e,t,r,i){if(Wt){var n=Xt(e,t,r,i);if(null===n)$i(e,t,i,Zt,r),Dt(e,i);else if(function(e,t,r,i,n){switch(t){case"focusin":return At=zt(At,e,t,r,i,n),!0;case"dragenter":return Pt=zt(Pt,e,t,r,i,n),!0;case"mouseover":return Ct=zt(Ct,e,t,r,i,n),!0;case"pointerover":var o=n.pointerId;return Mt.set(o,zt(Mt.get(o)||null,e,t,r,i,n)),!0;case"gotpointercapture":return o=n.pointerId,Ot.set(o,zt(Ot.get(o)||null,e,t,r,i,n)),!0}return!1}(n,e,t,r,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Bt.indexOf(e)){for(;null!==n;){var o=bn(n);if(null!==o&&xt(o),null===(o=Xt(e,t,r,i))&&$i(e,t,i,Zt,r),o===n)break;n=o}null!==n&&i.stopPropagation()}else $i(e,t,i,null,r)}}var Zt=null;function Xt(e,t,r,i){if(Zt=null,null!==(e=_n(e=xe(i))))if(null===(t=Ve(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Zt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Kt=null,Jt=null,Qt=null;function er(){if(Qt)return Qt;var e,t,r=Jt,i=r.length,n="value"in Kt?Kt.value:Kt.textContent,o=n.length;for(e=0;e<i&&r[e]===n[e];e++);var a=i-e;for(t=1;t<=a&&r[i-t]===n[o-t];t++);return Qt=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ir(){return!1}function nr(e){function t(t,r,i,n,o){for(var a in this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=n,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(n):n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:ir,this.isPropagationStopped=ir,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var or,ar,sr,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=nr(lr),ur=L({},lr,{view:0,detail:0}),dr=nr(ur),hr=L({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ir,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),pr=nr(hr),fr=nr(L({},hr,{dataTransfer:0})),mr=nr(L({},ur,{relatedTarget:0})),gr=nr(L({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=L({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_r=nr(yr),br=nr(L({},lr,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function Ir(){return Sr}var Tr=L({},ur,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ir,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kr=nr(Tr),Er=nr(L({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ar=nr(L({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ir})),Pr=nr(L({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Cr=L({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=nr(Cr),Or=[9,13,27,32],Rr=u&&"CompositionEvent"in window,Br=null;u&&"documentMode"in document&&(Br=document.documentMode);var Dr=u&&"TextEvent"in window&&!Br,zr=u&&(!Rr||Br&&8<Br&&11>=Br),Lr=String.fromCharCode(32),Fr=!1;function Nr(e,t){switch(e){case"keyup":return-1!==Or.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Vr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $r(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vr[e.type]:"textarea"===t}function Wr(e,t,r,i){ke(i),0<(t=Hi(t,"onChange")).length&&(r=new cr("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var Hr=null,Gr=null;function qr(e){Li(e,0)}function Zr(e){if(q(vn(e)))return e}function Xr(e,t){if("change"===e)return t}var Yr=!1;if(u){var Kr;if(u){var Jr="oninput"in document;if(!Jr){var Qr=document.createElement("div");Qr.setAttribute("oninput","return;"),Jr="function"===typeof Qr.oninput}Kr=Jr}else Kr=!1;Yr=Kr&&(!document.documentMode||9<document.documentMode)}function ei(){Hr&&(Hr.detachEvent("onpropertychange",ti),Gr=Hr=null)}function ti(e){if("value"===e.propertyName&&Zr(Gr)){var t=[];Wr(t,Gr,e,xe(e)),Me(qr,t)}}function ri(e,t,r){"focusin"===e?(ei(),Gr=r,(Hr=t).attachEvent("onpropertychange",ti)):"focusout"===e&&ei()}function ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zr(Gr)}function ni(e,t){if("click"===e)return Zr(t)}function oi(e,t){if("input"===e||"change"===e)return Zr(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function si(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!d.call(t,n)||!ai(e[n],t[n]))return!1}return!0}function li(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ci(e,t){var r,i=li(e);for(e=0;i;){if(3===i.nodeType){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=li(i)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Z();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(i){r=!1}if(!r)break;t=Z((e=t.contentWindow).document)}return t}function hi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ui(r.ownerDocument.documentElement,r)){if(null!==i&&hi(r))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,o=Math.min(i.start,n);i=void 0===i.end?o:Math.min(i.end,n),!e.extend&&o>i&&(n=i,i=o,o=n),n=ci(r,o);var a=ci(r,i);n&&a&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,gi=null,yi=null,_i=!1;function bi(e,t,r){var i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;_i||null==mi||mi!==Z(i)||("selectionStart"in(i=mi)&&hi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&si(yi,i)||(yi=i,0<(i=Hi(gi,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=mi)))}function vi(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xi={animationend:vi("Animation","AnimationEnd"),animationiteration:vi("Animation","AnimationIteration"),animationstart:vi("Animation","AnimationStart"),transitionend:vi("Transition","TransitionEnd")},wi={},Si={};function Ii(e){if(wi[e])return wi[e];if(!xi[e])return e;var t,r=xi[e];for(t in r)if(r.hasOwnProperty(t)&&t in Si)return wi[e]=r[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ti=Ii("animationend"),ki=Ii("animationiteration"),Ei=Ii("animationstart"),Ai=Ii("transitionend"),Pi=new Map,Ci="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mi(e,t){Pi.set(e,t),l(t,[e])}for(var Oi=0;Oi<Ci.length;Oi++){var Ri=Ci[Oi];Mi(Ri.toLowerCase(),"on"+(Ri[0].toUpperCase()+Ri.slice(1)))}Mi(Ti,"onAnimationEnd"),Mi(ki,"onAnimationIteration"),Mi(Ei,"onAnimationStart"),Mi("dblclick","onDoubleClick"),Mi("focusin","onFocus"),Mi("focusout","onBlur"),Mi(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Di=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function zi(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,i,n,a,s,l,c){if(Ue.apply(this,arguments),ze){if(!ze)throw Error(o(198));var u=Le;ze=!1,Le=null,Fe||(Fe=!0,Ne=u)}}(i,t,void 0,e),e.currentTarget=null}function Li(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var a=i.length-1;0<=a;a--){var s=i[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&n.isPropagationStopped())break e;zi(n,s,c),o=l}else for(a=0;a<i.length;a++){if(l=(s=i[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&n.isPropagationStopped())break e;zi(n,s,c),o=l}}}if(Fe)throw e=Ne,Fe=!1,Ne=null,e}function Fi(e,t){var r=t[mn];void 0===r&&(r=t[mn]=new Set);var i=e+"__bubble";r.has(i)||(Vi(t,e,2,!1),r.add(i))}function Ni(e,t,r){var i=0;t&&(i|=4),Vi(r,e,i,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[ji]){e[ji]=!0,a.forEach((function(t){"selectionchange"!==t&&(Di.has(t)||Ni(t,!1,e),Ni(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ji]||(t[ji]=!0,Ni("selectionchange",!1,t))}}function Vi(e,t,r,i){switch(Yt(t)){case 1:var n=Ht;break;case 4:n=Gt;break;default:n=qt}r=n.bind(null,t,r,e),n=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),i?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function $i(e,t,r,i,n){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===n||8===s.nodeType&&s.parentNode===n)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;a=a.return}for(;null!==s;){if(null===(a=_n(s)))return;if(5===(l=a.tag)||6===l){i=o=a;continue e}s=s.parentNode}}i=i.return}Me((function(){var i=o,n=xe(r),a=[];e:{var s=Pi.get(e);if(void 0!==s){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=kr;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ar;break;case Ti:case ki:case Ei:l=gr;break;case Ai:l=Pr;break;case"scroll":l=dr;break;case"wheel":l=Mr;break;case"copy":case"cut":case"paste":l=_r;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Er}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Oe(f,h))&&u.push(Wi(f,m,p)))),d)break;f=f.return}0<u.length&&(s=new l(s,c,null,r,n),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!_n(c)&&!c[fn])&&(l||s)&&(s=n.window===n?n:(s=n.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=i,null!==(c=(c=r.relatedTarget||r.toElement)?_n(c):null)&&(c!==(d=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Er,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:vn(l),p=null==c?s:vn(c),(s=new u(m,f+"leave",l,r,n)).target=d,s.relatedTarget=p,m=null,_n(n)===i&&((u=new u(h,f+"enter",c,r,n)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gi(p))f++;for(p=0,m=h;m;m=Gi(m))p++;for(;0<f-p;)u=Gi(u),f--;for(;0<p-f;)h=Gi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gi(u),h=Gi(h)}u=null}else u=null;null!==l&&qi(a,s,l,u,!1),null!==c&&null!==d&&qi(a,d,c,u,!0)}if("select"===(l=(s=i?vn(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xr;else if($r(s))if(Yr)g=oi;else{g=ii;var y=ri}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ni);switch(g&&(g=g(e,i))?Wr(a,g,r,n):(y&&y(e,s,i),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=i?vn(i):window,e){case"focusin":($r(y)||"true"===y.contentEditable)&&(mi=y,gi=i,yi=null);break;case"focusout":yi=gi=mi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,bi(a,r,n);break;case"selectionchange":if(fi)break;case"keydown":case"keyup":bi(a,r,n)}var _;if(Rr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ur?Nr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(zr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ur&&(_=er()):(Jt="value"in(Kt=n)?Kt.value:Kt.textContent,Ur=!0)),0<(y=Hi(i,b)).length&&(b=new br(b,e,null,r,n),a.push({event:b,listeners:y}),_?b.data=_:null!==(_=jr(r))&&(b.data=_))),(_=Dr?function(e,t){switch(e){case"compositionend":return jr(t);case"keypress":return 32!==t.which?null:(Fr=!0,Lr);case"textInput":return(e=t.data)===Lr&&Fr?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Rr&&Nr(e,t)?(e=er(),Qt=Jt=Kt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(i=Hi(i,"onBeforeInput")).length&&(n=new br("onBeforeInput","beforeinput",null,r,n),a.push({event:n,listeners:i}),n.data=_))}Li(a,t)}))}function Wi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Hi(e,t){for(var r=t+"Capture",i=[];null!==e;){var n=e,o=n.stateNode;5===n.tag&&null!==o&&(n=o,null!=(o=Oe(e,r))&&i.unshift(Wi(e,o,n)),null!=(o=Oe(e,t))&&i.push(Wi(e,o,n))),e=e.return}return i}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qi(e,t,r,i,n){for(var o=t._reactName,a=[];null!==r&&r!==i;){var s=r,l=s.alternate,c=s.stateNode;if(null!==l&&l===i)break;5===s.tag&&null!==c&&(s=c,n?null!=(l=Oe(r,o))&&a.unshift(Wi(r,l,s)):n||null!=(l=Oe(r,o))&&a.push(Wi(r,l,s))),r=r.return}0!==a.length&&e.push({event:t,listeners:a})}var Zi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Yi(e){return("string"===typeof e?e:""+e).replace(Zi,"\n").replace(Xi,"")}function Ki(e,t,r){if(t=Yi(t),Yi(e)!==t&&r)throw Error(o(425))}function Ji(){}var Qi=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,nn="function"===typeof clearTimeout?clearTimeout:void 0,on="function"===typeof Promise?Promise:void 0,an="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof on?function(e){return on.resolve(null).then(e).catch(sn)}:rn;function sn(e){setTimeout((function(){throw e}))}function ln(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===i)return e.removeChild(n),void Vt(t);i--}else"$"!==r&&"$?"!==r&&"$!"!==r||i++;r=n}while(r);Vt(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function un(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var dn=Math.random().toString(36).slice(2),hn="__reactFiber$"+dn,pn="__reactProps$"+dn,fn="__reactContainer$"+dn,mn="__reactEvents$"+dn,gn="__reactListeners$"+dn,yn="__reactHandles$"+dn;function _n(e){var t=e[hn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fn]||r[hn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=un(e);null!==e;){if(r=e[hn])return r;e=un(e)}return t}r=(e=r).parentNode}return null}function bn(e){return!(e=e[hn]||e[fn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xn(e){return e[pn]||null}var wn=[],Sn=-1;function In(e){return{current:e}}function Tn(e){0>Sn||(e.current=wn[Sn],wn[Sn]=null,Sn--)}function kn(e,t){Sn++,wn[Sn]=e.current,e.current=t}var En={},An=In(En),Pn=In(!1),Cn=En;function Mn(e,t){var r=e.type.contextTypes;if(!r)return En;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n,o={};for(n in r)o[n]=t[n];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function On(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rn(){Tn(Pn),Tn(An)}function Bn(e,t,r){if(An.current!==En)throw Error(o(168));kn(An,t),kn(Pn,r)}function Dn(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return r;for(var n in i=i.getChildContext())if(!(n in t))throw Error(o(108,$(e)||"Unknown",n));return L({},r,i)}function zn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,Cn=An.current,kn(An,e),kn(Pn,Pn.current),!0}function Ln(e,t,r){var i=e.stateNode;if(!i)throw Error(o(169));r?(e=Dn(e,t,Cn),i.__reactInternalMemoizedMergedChildContext=e,Tn(Pn),Tn(An),kn(An,e)):Tn(Pn),kn(Pn,r)}var Fn=null,Nn=!1,jn=!1;function Un(e){null===Fn?Fn=[e]:Fn.push(e)}function Vn(){if(!jn&&null!==Fn){jn=!0;var e=0,t=bt;try{var r=Fn;for(bt=1;e<r.length;e++){var i=r[e];do{i=i(!0)}while(null!==i)}Fn=null,Nn=!1}catch(n){throw null!==Fn&&(Fn=Fn.slice(e+1)),qe(Qe,Vn),n}finally{bt=t,jn=!1}}return null}var $n=[],Wn=0,Hn=null,Gn=0,qn=[],Zn=0,Xn=null,Yn=1,Kn="";function Jn(e,t){$n[Wn++]=Gn,$n[Wn++]=Hn,Hn=e,Gn=t}function Qn(e,t,r){qn[Zn++]=Yn,qn[Zn++]=Kn,qn[Zn++]=Xn,Xn=e;var i=Yn;e=Kn;var n=32-at(i)-1;i&=~(1<<n),r+=1;var o=32-at(t)+n;if(30<o){var a=n-n%5;o=(i&(1<<a)-1).toString(32),i>>=a,n-=a,Yn=1<<32-at(t)+n|r<<n|i,Kn=o+e}else Yn=1<<o|r<<n|i,Kn=e}function eo(e){null!==e.return&&(Jn(e,1),Qn(e,1,0))}function to(e){for(;e===Hn;)Hn=$n[--Wn],$n[Wn]=null,Gn=$n[--Wn],$n[Wn]=null;for(;e===Xn;)Xn=qn[--Zn],qn[Zn]=null,Kn=qn[--Zn],qn[Zn]=null,Yn=qn[--Zn],qn[Zn]=null}var ro=null,io=null,no=!1,oo=null;function ao(e,t){var r=Mc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function so(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,io=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Xn?{id:Yn,overflow:Kn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Mc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ro=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(no){var t=io;if(t){var r=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=cn(r.nextSibling);var i=ro;t&&so(e,t)?ao(i,r):(e.flags=-4097&e.flags|2,no=!1,ro=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,no=!1,ro=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function ho(e){if(e!==ro)return!1;if(!no)return uo(e),no=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)ao(e,t),t=cn(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){io=cn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}io=null}}else io=ro?cn(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=cn(e.nextSibling)}function fo(){io=ro=null,no=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=v.ReactCurrentBatchConfig;function yo(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var i=r.stateNode}if(!i)throw Error(o(147,e));var n=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=n.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function _o(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function vo(e){function t(t,r){if(e){var i=t.deletions;null===i?(t.deletions=[r],t.flags|=16):i.push(r)}}function r(r,i){if(!e)return null;for(;null!==i;)t(r,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,r,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<r?(t.flags|=2,r):i:(t.flags|=2,r):(t.flags|=1048576,r)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,i){return null===t||6!==t.tag?((t=Lc(r,e.mode,i)).return=e,t):((t=n(t,r)).return=e,t)}function c(e,t,r,i){var o=r.type;return o===S?d(e,t,r.props.children,i,r.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&bo(o)===t.type)?((i=n(t,r.props)).ref=yo(e,t,r),i.return=e,i):((i=Bc(r.type,r.key,r.props,null,e.mode,i)).ref=yo(e,t,r),i.return=e,i)}function u(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Fc(r,e.mode,i)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function d(e,t,r,i,o){return null===t||7!==t.tag?((t=Dc(r,e.mode,i,o)).return=e,t):((t=n(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(r=Bc(t.type,t.key,t.props,null,e.mode,r)).ref=yo(e,null,t),r.return=e,r;case w:return(t=Fc(t,e.mode,r)).return=e,t;case O:return h(e,(0,t._init)(t._payload),r)}if(te(t)||D(t))return(t=Dc(t,e.mode,r,null)).return=e,t;_o(e,t)}return null}function p(e,t,r,i){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:l(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return r.key===n?c(e,t,r,i):null;case w:return r.key===n?u(e,t,r,i):null;case O:return p(e,t,(n=r._init)(r._payload),i)}if(te(r)||D(r))return null!==n?null:d(e,t,r,i,null);_o(e,r)}return null}function f(e,t,r,i,n){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(r)||null,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case x:return c(t,e=e.get(null===i.key?r:i.key)||null,i,n);case w:return u(t,e=e.get(null===i.key?r:i.key)||null,i,n);case O:return f(e,t,r,(0,i._init)(i._payload),n)}if(te(i)||D(i))return d(t,e=e.get(r)||null,i,n,null);_o(t,i)}return null}function m(n,o,s,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(n,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(n,d),o=a(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return r(n,d),no&&Jn(n,m),c;if(null===d){for(;m<s.length;m++)null!==(d=h(n,s[m],l))&&(o=a(d,o,m),null===u?c=d:u.sibling=d,u=d);return no&&Jn(n,m),c}for(d=i(n,d);m<s.length;m++)null!==(g=f(d,n,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(n,e)})),no&&Jn(n,m),c}function g(n,s,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=s,g=s=0,y=null,_=l.next();null!==m&&!_.done;g++,_=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(n,m,_.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(n,m),s=a(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(_.done)return r(n,m),no&&Jn(n,g),u;if(null===m){for(;!_.done;g++,_=l.next())null!==(_=h(n,_.value,c))&&(s=a(_,s,g),null===d?u=_:d.sibling=_,d=_);return no&&Jn(n,g),u}for(m=i(n,m);!_.done;g++,_=l.next())null!==(_=f(m,n,g,_.value,c))&&(e&&null!==_.alternate&&m.delete(null===_.key?g:_.key),s=a(_,s,g),null===d?u=_:d.sibling=_,d=_);return e&&m.forEach((function(e){return t(n,e)})),no&&Jn(n,g),u}return function e(i,o,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){r(i,u.sibling),(o=n(u,a.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&bo(c)===u.type){r(i,u.sibling),(o=n(u,a.props)).ref=yo(i,u,a),o.return=i,i=o;break e}r(i,u);break}t(i,u),u=u.sibling}a.type===S?((o=Dc(a.props.children,i.mode,l,a.key)).return=i,i=o):((l=Bc(a.type,a.key,a.props,null,i.mode,l)).ref=yo(i,o,a),l.return=i,i=l)}return s(i);case w:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){r(i,o.sibling),(o=n(o,a.children||[])).return=i,i=o;break e}r(i,o);break}t(i,o),o=o.sibling}(o=Fc(a,i.mode,l)).return=i,i=o}return s(i);case O:return e(i,o,(u=a._init)(a._payload),l)}if(te(a))return m(i,o,a,l);if(D(a))return g(i,o,a,l);_o(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(r(i,o.sibling),(o=n(o,a)).return=i,i=o):(r(i,o),(o=Lc(a,i.mode,l)).return=i,i=o),s(i)):r(i,o)}}var xo=vo(!0),wo=vo(!1),So=In(null),Io=null,To=null,ko=null;function Eo(){ko=To=Io=null}function Ao(e){var t=So.current;Tn(So),e._currentValue=t}function Po(e,t,r){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Co(e,t){Io=e,ko=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Mo(e){var t=e._currentValue;if(ko!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===Io)throw Error(o(308));To=e,Io.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Oo=null;function Ro(e){null===Oo?Oo=[e]:Oo.push(e)}function Bo(e,t,r,i){var n=t.interleaved;return null===n?(r.next=r,Ro(t)):(r.next=n.next,n.next=r),t.interleaved=r,Do(e,i)}function Do(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var zo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function No(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function jo(e,t,r){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var n=i.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Do(e,r)}return null===(n=i.interleaved)?(t.next=t,Ro(i)):(t.next=n.next,n.next=t),i.interleaved=t,Do(e,r)}function Uo(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var i=t.lanes;r|=i&=e.pendingLanes,t.lanes=r,_t(e,r)}}function Vo(e,t){var r=e.updateQueue,i=e.alternate;if(null!==i&&r===(i=i.updateQueue)){var n=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?n=o=a:o=o.next=a,r=r.next}while(null!==r);null===o?n=o=t:o=o.next=t}else n=o=t;return r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function $o(e,t,r,i){var n=e.updateQueue;zo=!1;var o=n.firstBaseUpdate,a=n.lastBaseUpdate,s=n.shared.pending;if(null!==s){n.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=n.baseState;for(a=0,u=c=l=null,s=o;;){var h=s.lane,p=s.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=r,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:zo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=n.effects)?n.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,a|=h;if(null===(s=s.next)){if(null===(s=n.shared.pending))break;s=(h=s).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}if(null===u&&(l=d),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=u,null!==(t=n.shared.interleaved)){n=t;do{a|=n.lane,n=n.next}while(n!==t)}else null===o&&(n.shared.lanes=0);zl|=a,e.lanes=a,e.memoizedState=d}}function Wo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(null!==n){if(i.callback=null,i=r,"function"!==typeof n)throw Error(o(191,n));n.call(i)}}}var Ho={},Go=In(Ho),qo=In(Ho),Zo=In(Ho);function Xo(e){if(e===Ho)throw Error(o(174));return e}function Yo(e,t){switch(kn(Zo,t),kn(qo,e),kn(Go,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tn(Go),kn(Go,t)}function Ko(){Tn(Go),Tn(qo),Tn(Zo)}function Jo(e){Xo(Zo.current);var t=Xo(Go.current),r=le(t,e.type);t!==r&&(kn(qo,e),kn(Go,r))}function Qo(e){qo.current===e&&(Tn(Go),Tn(qo))}var ea=In(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ra=[];function ia(){for(var e=0;e<ra.length;e++)ra[e]._workInProgressVersionPrimary=null;ra.length=0}var na=v.ReactCurrentDispatcher,oa=v.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,da=!1,ha=0,pa=0;function fa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ai(e[r],t[r]))return!1;return!0}function ga(e,t,r,i,n,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,na.current=null===e||null===e.memoizedState?Qa:es,e=r(i,n),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,na.current=ts,e=r(i,n)}while(da)}if(na.current=Ja,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function ya(){var e=0!==ha;return ha=0,e}function _a(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function va(e,t){return"function"===typeof t?t(e):t}function xa(e){var t=ba(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var i=la,n=i.baseQueue,a=r.pending;if(null!==a){if(null!==n){var s=n.next;n.next=a.next,a.next=s}i.baseQueue=n=a,r.pending=null}if(null!==n){a=n.next,i=i.baseState;var l=s=null,c=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,s=i):c=c.next=h,sa.lanes|=d,zl|=d}u=u.next}while(null!==u&&u!==a);null===c?s=i:c.next=l,ai(i,t.memoizedState)||(bs=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=c,r.lastRenderedState=i}if(null!==(e=r.interleaved)){n=e;do{a=n.lane,sa.lanes|=a,zl|=a,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function wa(e){var t=ba(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,a=t.memoizedState;if(null!==n){r.pending=null;var s=n=n.next;do{a=e(a,s.action),s=s.next}while(s!==n);ai(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function Sa(){}function Ia(e,t){var r=sa,i=ba(),n=t(),a=!ai(i.memoizedState,n);if(a&&(i.memoizedState=n,bs=!0),i=i.queue,za(Ea.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(r.flags|=2048,Ma(9,ka.bind(null,r,i,n,t),void 0,null),null===Pl)throw Error(o(349));0!==(30&aa)||Ta(r,t,n)}return n}function Ta(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function ka(e,t,r,i){t.value=r,t.getSnapshot=i,Aa(t)&&Pa(e)}function Ea(e,t,r){return r((function(){Aa(t)&&Pa(e)}))}function Aa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ai(e,r)}catch(i){return!0}}function Pa(e){var t=Do(e,1);null!==t&&rc(t,e,1,-1)}function Ca(e){var t=_a();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t.queue=e,e=e.dispatch=Za.bind(null,sa,e),[t.memoizedState,e]}function Ma(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function Oa(){return ba().memoizedState}function Ra(e,t,r,i){var n=_a();sa.flags|=e,n.memoizedState=Ma(1|t,r,void 0,void 0===i?null:i)}function Ba(e,t,r,i){var n=ba();i=void 0===i?null:i;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==i&&ma(i,a.deps))return void(n.memoizedState=Ma(t,r,o,i))}sa.flags|=e,n.memoizedState=Ma(1|t,r,o,i)}function Da(e,t){return Ra(8390656,8,e,t)}function za(e,t){return Ba(2048,8,e,t)}function La(e,t){return Ba(4,2,e,t)}function Fa(e,t){return Ba(4,4,e,t)}function Na(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ja(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ba(4,4,Na.bind(null,t,e),r)}function Ua(){}function Va(e,t){var r=ba();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function $a(e,t){var r=ba();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&ma(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Wa(e,t,r){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=r):(ai(r,t)||(r=mt(),sa.lanes|=r,zl|=r,e.baseState=!0),t)}function Ha(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var i=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=r,oa.transition=i}}function Ga(){return ba().memoizedState}function qa(e,t,r){var i=tc(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Xa(e))Ya(t,r);else if(null!==(r=Bo(e,t,r,i))){rc(r,e,i,ec()),Ka(r,t,i)}}function Za(e,t,r){var i=tc(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xa(e))Ya(t,n);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,r);if(n.hasEagerState=!0,n.eagerState=s,ai(s,a)){var l=t.interleaved;return null===l?(n.next=n,Ro(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(r=Bo(e,t,n,i))&&(rc(r,e,i,n=ec()),Ka(r,t,i))}}function Xa(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ya(e,t){da=ua=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ka(e,t,r){if(0!==(4194240&r)){var i=t.lanes;r|=i&=e.pendingLanes,t.lanes=r,_t(e,r)}}var Ja={readContext:Mo,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Qa={readContext:Mo,useCallback:function(e,t){return _a().memoizedState=[e,void 0===t?null:t],e},useContext:Mo,useEffect:Da,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ra(4194308,4,Na.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var r=_a();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=_a();return t=void 0!==r?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qa.bind(null,sa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},_a().memoizedState=e},useState:Ca,useDebugValue:Ua,useDeferredValue:function(e){return _a().memoizedState=e},useTransition:function(){var e=Ca(!1),t=e[0];return e=Ha.bind(null,e[1]),_a().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=sa,n=_a();if(no){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===Pl)throw Error(o(349));0!==(30&aa)||Ta(i,t,r)}n.memoizedState=r;var a={value:r,getSnapshot:t};return n.queue=a,Da(Ea.bind(null,i,a,e),[e]),i.flags|=2048,Ma(9,ka.bind(null,i,a,r,t),void 0,null),r},useId:function(){var e=_a(),t=Pl.identifierPrefix;if(no){var r=Kn;t=":"+t+"R"+(r=(Yn&~(1<<32-at(Yn)-1)).toString(32)+r),0<(r=ha++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=pa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Mo,useCallback:Va,useContext:Mo,useEffect:za,useImperativeHandle:ja,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:$a,useReducer:xa,useRef:Oa,useState:function(){return xa(va)},useDebugValue:Ua,useDeferredValue:function(e){return Wa(ba(),la.memoizedState,e)},useTransition:function(){return[xa(va)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ia,useId:Ga,unstable_isNewReconciler:!1},ts={readContext:Mo,useCallback:Va,useContext:Mo,useEffect:za,useImperativeHandle:ja,useInsertionEffect:La,useLayoutEffect:Fa,useMemo:$a,useReducer:wa,useRef:Oa,useState:function(){return wa(va)},useDebugValue:Ua,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:Wa(t,la.memoizedState,e)},useTransition:function(){return[wa(va)[0],ba().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ia,useId:Ga,unstable_isNewReconciler:!1};function rs(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function is(e,t,r,i){r=null===(r=r(i,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ns={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=ec(),n=tc(e),o=No(i,n);o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=jo(e,o,n))&&(rc(t,e,n,i),Uo(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=ec(),n=tc(e),o=No(i,n);o.tag=1,o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=jo(e,o,n))&&(rc(t,e,n,i),Uo(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),i=tc(e),n=No(r,i);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=jo(e,n,i))&&(rc(t,e,i,r),Uo(t,e,i))}};function os(e,t,r,i,n,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!si(r,i)||!si(n,o))}function as(e,t,r){var i=!1,n=En,o=t.contextType;return"object"===typeof o&&null!==o?o=Mo(o):(n=On(t)?Cn:An.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Mn(e,n):En),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ns,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,r,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&ns.enqueueReplaceState(t,t.state,null)}function ls(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?n.context=Mo(o):(o=On(t)?Cn:An.current,n.context=Mn(e,o)),n.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(is(e,t,o,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&ns.enqueueReplaceState(n,n.state,null),$o(e,r,n,i),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var r="",i=t;do{r+=U(i),i=i.return}while(i);var n=r}catch(o){n="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:n,digest:null}}function us(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,r){(r=No(-1,r)).tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Wl||(Wl=!0,Hl=i),ds(0,t)},r}function fs(e,t,r){(r=No(-1,r)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){ds(0,t),"function"!==typeof i&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ms(e,t,r){var i=e.pingCache;if(null===i){i=e.pingCache=new hs;var n=new Set;i.set(t,n)}else void 0===(n=i.get(t))&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=Tc.bind(null,e,t,r),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,r,i,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=No(-1,1)).tag=2,jo(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var _s=v.ReactCurrentOwner,bs=!1;function vs(e,t,r,i){t.child=null===e?wo(t,null,r,i):xo(t,e.child,r,i)}function xs(e,t,r,i,n){r=r.render;var o=t.ref;return Co(t,n),i=ga(e,t,r,i,o,n),r=ya(),null===e||bs?(no&&r&&eo(t),t.flags|=1,vs(e,t,i,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ws(e,t,n))}function ws(e,t,r,i,n){if(null===e){var o=r.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Bc(r.type,null,i,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ss(e,t,o,i,n))}if(o=e.child,0===(e.lanes&n)){var a=o.memoizedProps;if((r=null!==(r=r.compare)?r:si)(a,i)&&e.ref===t.ref)return Ws(e,t,n)}return t.flags|=1,(e=Rc(o,i)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,r,i,n){if(null!==e){var o=e.memoizedProps;if(si(o,i)&&e.ref===t.ref){if(bs=!1,t.pendingProps=i=o,0===(e.lanes&n))return t.lanes=e.lanes,Ws(e,t,n);0!==(131072&e.flags)&&(bs=!0)}}return ks(e,t,r,i,n)}function Is(e,t,r){var i=t.pendingProps,n=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kn(Rl,Ol),Ol|=r;else{if(0===(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kn(Rl,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:r,kn(Rl,Ol),Ol|=i}else null!==o?(i=o.baseLanes|r,t.memoizedState=null):i=r,kn(Rl,Ol),Ol|=i;return vs(e,t,n,r),t.child}function Ts(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,r,i,n){var o=On(r)?Cn:An.current;return o=Mn(t,o),Co(t,n),r=ga(e,t,r,i,o,n),i=ya(),null===e||bs?(no&&i&&eo(t),t.flags|=1,vs(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Ws(e,t,n))}function Es(e,t,r,i,n){if(On(r)){var o=!0;zn(t)}else o=!1;if(Co(t,n),null===t.stateNode)$s(e,t),as(t,r,i),ls(t,r,i,n),i=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=r.contextType;"object"===typeof c&&null!==c?c=Mo(c):c=Mn(t,c=On(r)?Cn:An.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||l!==c)&&ss(t,a,i,c),zo=!1;var h=t.memoizedState;a.state=h,$o(t,i,a,n),l=t.memoizedState,s!==i||h!==l||Pn.current||zo?("function"===typeof u&&(is(t,r,u,i),l=t.memoizedState),(s=zo||os(t,r,s,i,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Fo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:rs(t.type,s),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=r.contextType)&&null!==l?l=Mo(l):l=Mn(t,l=On(r)?Cn:An.current);var p=r.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,i,l),zo=!1,h=t.memoizedState,a.state=h,$o(t,i,a,n);var f=t.memoizedState;s!==d||h!==f||Pn.current||zo?("function"===typeof p&&(is(t,r,p,i),f=t.memoizedState),(c=zo||os(t,r,c,i,h,f,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),a.props=i,a.state=f,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return As(e,t,r,i,o,n)}function As(e,t,r,i,n,o){Ts(e,t);var a=0!==(128&t.flags);if(!i&&!a)return n&&Ln(t,r,!1),Ws(e,t,o);i=t.stateNode,_s.current=t;var s=a&&"function"!==typeof r.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=xo(t,e.child,null,o),t.child=xo(t,null,s,o)):vs(e,t,s,o),t.memoizedState=i.state,n&&Ln(t,r,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Bn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Bn(0,t.context,!1),Yo(e,t.containerInfo)}function Cs(e,t,r,i,n){return fo(),mo(n),t.flags|=256,vs(e,t,r,i),t.child}var Ms,Os,Rs,Bs,Ds={dehydrated:null,treeContext:null,retryLane:0};function zs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ls(e,t,r){var i,n=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),kn(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,s?(n=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=zc(l,n,0,null),e=Dc(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zs(r),t.memoizedState=Ds,e):Fs(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,r,i,n,a,s){if(r)return 256&t.flags?(t.flags&=-257,Ns(e,t,s,i=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,n=t.mode,i=zc({mode:"visible",children:i.children},n,0,null),(a=Dc(a,n,s,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&xo(t,e.child,null,s),t.child.memoizedState=zs(s),t.memoizedState=Ds,a);if(0===(1&t.mode))return Ns(e,t,s,null);if("$!"===n.data){if(i=n.nextSibling&&n.nextSibling.dataset)var l=i.dgst;return i=l,Ns(e,t,s,i=us(a=Error(o(419)),i,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(i=Pl)){switch(s&-s){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(i.suspendedLanes|s))?0:n)&&n!==a.retryLane&&(a.retryLane=n,Do(e,n),rc(i,e,n,-1))}return mc(),Ns(e,t,s,i=us(Error(o(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),n._reactRetry=t,null):(e=a.treeContext,io=cn(n.nextSibling),ro=t,no=!0,oo=null,null!==e&&(qn[Zn++]=Yn,qn[Zn++]=Kn,qn[Zn++]=Xn,Yn=e.id,Kn=e.overflow,Xn=t),t=Fs(t,i.children),t.flags|=4096,t)}(e,t,l,n,i,a,r);if(s){s=n.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?s=Rc(i,s):(s=Dc(s,l,r,null)).flags|=2,s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,l=null===(l=e.child.memoizedState)?zs(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Ds,n}return e=(s=e.child).sibling,n=Rc(s,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Fs(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ns(e,t,r,i){return null!==i&&mo(i),xo(t,e.child,null,r),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,r){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Po(e.return,t,r)}function Us(e,t,r,i,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=n)}function Vs(e,t,r){var i=t.pendingProps,n=i.revealOrder,o=i.tail;if(vs(e,t,i.children,r),0!==(2&(i=ea.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,r,t);else if(19===e.tag)js(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(kn(ea,i),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===ta(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Us(t,!1,n,r,o);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ta(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Us(t,!0,r,null,o);break;case"together":Us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $s(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Rc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Rc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Hs(e,t){if(!no)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,i|=14680064&n.subtreeFlags,i|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function qs(e,t,r){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return On(t.type)&&Rn(),Gs(t),null;case 3:return i=t.stateNode,Ko(),Tn(Pn),Tn(An),ia(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Os(e,t),Gs(t),null;case 5:Qo(t);var n=Xo(Zo.current);if(r=t.type,null!==e&&null!=t.stateNode)Rs(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=Xo(Go.current),ho(t)){i=t.stateNode,r=t.type;var a=t.memoizedProps;switch(i[hn]=t,i[pn]=a,e=0!==(1&t.mode),r){case"dialog":Fi("cancel",i),Fi("close",i);break;case"iframe":case"object":case"embed":Fi("load",i);break;case"video":case"audio":for(n=0;n<Bi.length;n++)Fi(Bi[n],i);break;case"source":Fi("error",i);break;case"img":case"image":case"link":Fi("error",i),Fi("load",i);break;case"details":Fi("toggle",i);break;case"input":Y(i,a),Fi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Fi("invalid",i);break;case"textarea":ne(i,a),Fi("invalid",i)}for(var l in _e(r,a),n=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ki(i.textContent,c,e),n=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ki(i.textContent,c,e),n=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fi("scroll",i)}switch(r){case"input":G(i),Q(i,a,!0);break;case"textarea":G(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=Ji)}i=n,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(r,{is:i.is}):(e=l.createElement(r),"select"===r&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,r),e[hn]=t,e[pn]=i,Ms(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,i),r){case"dialog":Fi("cancel",e),Fi("close",e),n=i;break;case"iframe":case"object":case"embed":Fi("load",e),n=i;break;case"video":case"audio":for(n=0;n<Bi.length;n++)Fi(Bi[n],e);n=i;break;case"source":Fi("error",e),n=i;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),n=i;break;case"details":Fi("toggle",e),n=i;break;case"input":Y(e,i),n=X(e,i),Fi("invalid",e);break;case"option":default:n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=L({},i,{value:void 0}),Fi("invalid",e);break;case"textarea":ne(e,i),n=ie(e,i),Fi("invalid",e)}for(a in _e(r,n),c=n)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Fi("scroll",e):null!=u&&b(e,a,u,l))}switch(r){case"input":G(e),Q(e,i,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?re(e,!!i.multiple,a,!1):null!=i.defaultValue&&re(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Ji)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Bs(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(r=Xo(Zo.current),Xo(Go.current),ho(t)){if(i=t.stateNode,r=t.memoizedProps,i[hn]=t,(a=i.nodeValue!==r)&&null!==(e=ro))switch(e.tag){case 3:Ki(i.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ki(i.nodeValue,r,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[hn]=t,t.stateNode=i}return Gs(t),null;case 13:if(Tn(ea),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(no&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,a=!1;else if(a=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hn]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Bl&&(Bl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Ko(),Os(e,t),null===e&&Ui(t.stateNode.containerInfo),Gs(t),null;case 10:return Ao(t.type._context),Gs(t),null;case 19:if(Tn(ea),null===(a=t.memoizedState))return Gs(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Hs(a,!1);else{if(0!==Bl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Hs(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;null!==r;)e=i,(a=r).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return kn(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ke()>Vl&&(t.flags|=128,i=!0,Hs(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ta(l))){if(t.flags|=128,i=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Hs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!no)return Gs(t),null}else 2*Ke()-a.renderingStartTime>Vl&&1073741824!==r&&(t.flags|=128,i=!0,Hs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=a.last)?r.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,r=ea.current,kn(ea,i?1&r|2:1&r),t):(Gs(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Zs(e,t){switch(to(t),t.tag){case 1:return On(t.type)&&Rn(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ko(),Tn(Pn),Tn(An),ia(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qo(t),null;case 13:if(Tn(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tn(ea),null;case 4:return Ko(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ms=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Os=function(){},Rs=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Xo(Go.current);var o,a=null;switch(r){case"input":n=X(e,n),i=X(e,i),a=[];break;case"select":n=L({},n,{value:void 0}),i=L({},i,{value:void 0}),a=[];break;case"textarea":n=ie(e,n),i=ie(e,i),a=[];break;default:"function"!==typeof n.onClick&&"function"===typeof i.onClick&&(e.onclick=Ji)}for(u in _e(r,i),r=null,n)if(!i.hasOwnProperty(u)&&n.hasOwnProperty(u)&&null!=n[u])if("style"===u){var l=n[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=n?n[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fi("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Bs=function(e,t,r,i){r!==i&&(t.flags|=4)};var Xs=!1,Ys=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Js=null;function Qs(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(i){Ic(e,t,i)}else r.current=null}function el(e,t,r){try{r()}catch(i){Ic(e,t,i)}}var tl=!1;function rl(e,t,r){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var n=i=i.next;do{if((n.tag&e)===e){var o=n.destroy;n.destroy=void 0,void 0!==o&&el(t,r,o)}n=n.next}while(n!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function nl(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hn],delete t[pn],delete t[mn],delete t[gn],delete t[yn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Ji));else if(4!==i&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,dl=!1;function hl(e,t,r){for(r=r.child;null!==r;)pl(e,t,r),r=r.sibling}function pl(e,t,r){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(nt,r)}catch(s){}switch(r.tag){case 5:Ys||Qs(r,t);case 6:var i=ul,n=dl;ul=null,hl(e,t,r),dl=n,null!==(ul=i)&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?ln(e.parentNode,r):1===e.nodeType&&ln(e,r),Vt(e)):ln(ul,r.stateNode));break;case 4:i=ul,n=dl,ul=r.stateNode.containerInfo,dl=!0,hl(e,t,r),ul=i,dl=n;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(i=r.updateQueue)&&null!==(i=i.lastEffect))){n=i=i.next;do{var o=n,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(r,t,a),n=n.next}while(n!==i)}hl(e,t,r);break;case 1:if(!Ys&&(Qs(r,t),"function"===typeof(i=r.stateNode).componentWillUnmount))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(s){Ic(r,t,s)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Ys=(i=Ys)||null!==r.memoizedState,hl(e,t,r),Ys=i):hl(e,t,r);break;default:hl(e,t,r)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Ks),t.forEach((function(t){var i=Ac.bind(null,e,t);r.has(t)||(r.add(t),t.then(i,i))}))}}function ml(e,t){var r=t.deletions;if(null!==r)for(var i=0;i<r.length;i++){var n=r[i];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(a,s,n),ul=null,dl=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(u){Ic(n,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&i){try{rl(3,e,e.return),il(3,e)}catch(g){Ic(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&i&&null!==r&&Qs(r,r.return);break;case 5:if(ml(t,e),yl(e),512&i&&null!==r&&Qs(r,r.return),32&e.flags){var n=e.stateNode;try{he(n,"")}catch(g){Ic(e,e.return,g)}}if(4&i&&null!=(n=e.stateNode)){var a=e.memoizedProps,s=null!==r?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(n,a),be(l,s);var u=be(l,a);for(s=0;s<c.length;s+=2){var d=c[s],h=c[s+1];"style"===d?ge(n,h):"dangerouslySetInnerHTML"===d?de(n,h):"children"===d?he(n,h):b(n,d,h,u)}switch(l){case"input":J(n,a);break;case"textarea":oe(n,a);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!a.multiple;var f=a.value;null!=f?re(n,!!a.multiple,f,!1):p!==!!a.multiple&&(null!=a.defaultValue?re(n,!!a.multiple,a.defaultValue,!0):re(n,!!a.multiple,a.multiple?[]:"",!1))}n[pn]=a}catch(g){Ic(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&i){if(null===e.stateNode)throw Error(o(162));n=e.stateNode,a=e.memoizedProps;try{n.nodeValue=a}catch(g){Ic(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&i&&null!==r&&r.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(n=e.child).flags&&(a=null!==n.memoizedState,n.stateNode.isHidden=a,!a||null!==n.alternate&&null!==n.alternate.memoizedState||(Ul=Ke())),4&i&&fl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Ys=(u=Ys)||d,ml(t,e),Ys=u):ml(t,e),yl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(h=Js=d;null!==Js;){switch(f=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:Qs(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,r=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(i,r,g)}}break;case 5:Qs(p,p.return);break;case 22:if(null!==p.memoizedState){xl(h);continue}}null!==f?(f.return=p,Js=f):xl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{n=h.stateNode,u?"function"===typeof(a=n.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ic(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&i&&fl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(al(r)){var i=r;break e}r=r.return}throw Error(o(160))}switch(i.tag){case 5:var n=i.stateNode;32&i.flags&&(he(n,""),i.flags&=-33),cl(e,sl(e),n);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Ic(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,r){Js=e,bl(e,t,r)}function bl(e,t,r){for(var i=0!==(1&e.mode);null!==Js;){var n=Js,o=n.child;if(22===n.tag&&i){var a=null!==n.memoizedState||Xs;if(!a){var s=n.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Xs;var c=Ys;if(Xs=a,(Ys=l)&&!c)for(Js=n;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?wl(n):null!==l?(l.return=a,Js=l):wl(n);for(;null!==o;)Js=o,bl(o,t,r),o=o.sibling;Js=n,Xs=s,Ys=c}vl(e)}else 0!==(8772&n.subtreeFlags)&&null!==o?(o.return=n,Js=o):vl(e)}}function vl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Ys)if(null===r)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:rs(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Wo(t,a,i);break;case 3:var s=t.updateQueue;if(null!==s){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Wo(t,s,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Vt(h)}}}break;default:throw Error(o(163))}Ys||512&t.flags&&nl(t)}catch(p){Ic(t,t.return,p)}}if(t===e){Js=null;break}if(null!==(r=t.sibling)){r.return=t.return,Js=r;break}Js=t.return}}function xl(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Js=r;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{il(4,t)}catch(l){Ic(t,r,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var n=t.return;try{i.componentDidMount()}catch(l){Ic(t,n,l)}}var o=t.return;try{nl(t)}catch(l){Ic(t,o,l)}break;case 5:var a=t.return;try{nl(t)}catch(l){Ic(t,a,l)}}}catch(l){Ic(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Sl,Il=Math.ceil,Tl=v.ReactCurrentDispatcher,kl=v.ReactCurrentOwner,El=v.ReactCurrentBatchConfig,Al=0,Pl=null,Cl=null,Ml=0,Ol=0,Rl=In(0),Bl=0,Dl=null,zl=0,Ll=0,Fl=0,Nl=null,jl=null,Ul=0,Vl=1/0,$l=null,Wl=!1,Hl=null,Gl=null,ql=!1,Zl=null,Xl=0,Yl=0,Kl=null,Jl=-1,Ql=0;function ec(){return 0!==(6&Al)?Ke():-1!==Jl?Jl:Jl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Ml?Ml&-Ml:null!==go.transition?(0===Ql&&(Ql=mt()),Ql):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,r,i){if(50<Yl)throw Yl=0,Kl=null,Error(o(185));yt(e,r,i),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Ll|=r),4===Bl&&sc(e,Ml)),ic(e,i),1===r&&0===Al&&0===(1&t.mode)&&(Vl=Ke()+500,Nn&&Vn()))}function ic(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=n[a];-1===l?0!==(s&r)&&0===(s&i)||(n[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var i=ht(e,e===Pl?Ml:0);if(0===i)null!==r&&Ze(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=r&&Ze(r),1===t)0===e.tag?function(e){Nn=!0,Un(e)}(lc.bind(null,e)):Un(lc.bind(null,e)),an((function(){0===(6&Al)&&Vn()})),r=null;else{switch(vt(i)){case 1:r=Qe;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=it}r=Pc(r,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nc(e,t){if(Jl=-1,Ql=0,0!==(6&Al))throw Error(o(327));var r=e.callbackNode;if(wc()&&e.callbackNode!==r)return null;var i=ht(e,e===Pl?Ml:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var n=Al;Al|=2;var a=fc();for(Pl===e&&Ml===t||($l=null,Vl=Ke()+500,hc(e,t));;)try{_c();break}catch(l){pc(e,l)}Eo(),Tl.current=a,Al=n,null!==Cl?t=0:(Pl=null,Ml=0,t=Bl)}if(0!==t){if(2===t&&(0!==(n=ft(e))&&(i=n,t=oc(e,n))),1===t)throw r=Dl,hc(e,0),sc(e,i),ic(e,Ke()),r;if(6===t)sc(e,i);else{if(n=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var i=0;i<r.length;i++){var n=r[i],o=n.getSnapshot;n=n.value;try{if(!ai(o(),n))return!1}catch(s){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=gc(e,i))&&(0!==(a=ft(e))&&(i=a,t=oc(e,a))),1===t))throw r=Dl,hc(e,0),sc(e,i),ic(e,Ke()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,jl,$l);break;case 3:if(sc(e,i),(130023424&i)===i&&10<(t=Ul+500-Ke())){if(0!==ht(e,0))break;if(((n=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=rn(xc.bind(null,e,jl,$l),t);break}xc(e,jl,$l);break;case 4:if(sc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,n=-1;0<i;){var s=31-at(i);a=1<<s,(s=t[s])>n&&(n=s),i&=~a}if(i=n,10<(i=(120>(i=Ke()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Il(i/1960))-i)){e.timeoutHandle=rn(xc.bind(null,e,jl,$l),i);break}xc(e,jl,$l);break;default:throw Error(o(329))}}}return ic(e,Ke()),e.callbackNode===r?nc.bind(null,e):null}function oc(e,t){var r=Nl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=jl,jl=r,null!==t&&ac(t)),e}function ac(e){null===jl?jl=e:jl.push.apply(jl,e)}function sc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-at(t),i=1<<r;e[r]=-1,t&=~i}}function lc(e){if(0!==(6&Al))throw Error(o(327));wc();var t=ht(e,0);if(0===(1&t))return ic(e,Ke()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var i=ft(e);0!==i&&(t=i,r=oc(e,i))}if(1===r)throw r=Dl,hc(e,0),sc(e,t),ic(e,Ke()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,jl,$l),ic(e,Ke()),null}function cc(e,t){var r=Al;Al|=1;try{return e(t)}finally{0===(Al=r)&&(Vl=Ke()+500,Nn&&Vn())}}function uc(e){null!==Zl&&0===Zl.tag&&0===(6&Al)&&wc();var t=Al;Al|=1;var r=El.transition,i=bt;try{if(El.transition=null,bt=1,e)return e()}finally{bt=i,El.transition=r,0===(6&(Al=t))&&Vn()}}function dc(){Ol=Rl.current,Tn(Rl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,nn(r)),null!==Cl)for(r=Cl.return;null!==r;){var i=r;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rn();break;case 3:Ko(),Tn(Pn),Tn(An),ia();break;case 5:Qo(i);break;case 4:Ko();break;case 13:case 19:Tn(ea);break;case 10:Ao(i.type._context);break;case 22:case 23:dc()}r=r.return}if(Pl=e,Cl=e=Rc(e.current,null),Ml=Ol=t,Bl=0,Dl=null,Fl=Ll=zl=0,jl=Nl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(i=(r=Oo[t]).interleaved)){r.interleaved=null;var n=i.next,o=r.pending;if(null!==o){var a=o.next;o.next=n,i.next=a}r.pending=i}Oo=null}return e}function pc(e,t){for(;;){var r=Cl;try{if(Eo(),na.current=Ja,ua){for(var i=sa.memoizedState;null!==i;){var n=i.queue;null!==n&&(n.pending=null),i=i.next}ua=!1}if(aa=0,ca=la=sa=null,da=!1,ha=0,kl.current=null,null===r||null===r.return){Bl=1,Dl=t,Cl=null;break}e:{var a=e,s=r.return,l=r,c=t;if(t=Ml,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=gs(s);if(null!==f){f.flags&=-257,ys(f,s,l,0,t),1&f.mode&&ms(a,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(no&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==Bl&&(Bl=2),null===Nl?Nl=[a]:Nl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,ps(0,c,t));break e;case 1:l=c;var _=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof _.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Vo(a,fs(a,l,t));break e}}a=a.return}while(null!==a)}vc(r)}catch(v){t=v,Cl===r&&null!==r&&(Cl=r=r.return);continue}break}}function fc(){var e=Tl.current;return Tl.current=Ja,null===e?Ja:e}function mc(){0!==Bl&&3!==Bl&&2!==Bl||(Bl=4),null===Pl||0===(268435455&zl)&&0===(268435455&Ll)||sc(Pl,Ml)}function gc(e,t){var r=Al;Al|=2;var i=fc();for(Pl===e&&Ml===t||($l=null,hc(e,t));;)try{yc();break}catch(n){pc(e,n)}if(Eo(),Al=r,Tl.current=i,null!==Cl)throw Error(o(261));return Pl=null,Ml=0,Bl}function yc(){for(;null!==Cl;)bc(Cl)}function _c(){for(;null!==Cl&&!Xe();)bc(Cl)}function bc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?vc(e):Cl=t,kl.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=qs(r,t,Ol)))return void(Cl=r)}else{if(null!==(r=Zs(r,t)))return r.flags&=32767,void(Cl=r);if(null===e)return Bl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Cl=t);Cl=t=e}while(null!==t);0===Bl&&(Bl=5)}function xc(e,t,r){var i=bt,n=El.transition;try{El.transition=null,bt=1,function(e,t,r,i){do{wc()}while(null!==Zl);if(0!==(6&Al))throw Error(o(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-at(r),o=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~o}}(e,a),e===Pl&&(Cl=Pl=null,Ml=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||ql||(ql=!0,Pc(tt,(function(){return wc(),null}))),a=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||a){a=El.transition,El.transition=null;var s=bt;bt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(Qi=Wt,hi(e=di())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(i&&0!==i.rangeCount){r=i.anchorNode;var n=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch(x){r=null;break e}var s=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==n&&3!==h.nodeType||(l=s+n),h!==a||0!==i&&3!==h.nodeType||(c=s+i),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++u===n&&(l=s),p===a&&++d===i&&(c=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(en={focusedElem:e,selectionRange:r},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,_=t.stateNode,b=_.getSnapshotBeforeUpdate(t.elementType===t.type?g:rs(t.type,g),y);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(o(163))}}catch(x){Ic(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}m=tl,tl=!1}(e,r),gl(r,e),pi(en),Wt=!!Qi,en=Qi=null,e.current=r,_l(r,e,n),Ye(),Al=l,bt=s,El.transition=a}else e.current=r;if(ql&&(ql=!1,Zl=e,Xl=n),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ic(e,Ke()),null!==t)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Xl)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Kl?Yl++:(Yl=0,Kl=e):Yl=0,Vn()}(e,t,r,i)}finally{El.transition=n,bt=i}return null}function wc(){if(null!==Zl){var e=vt(Xl),t=El.transition,r=bt;try{if(El.transition=null,bt=16>e?16:e,null===Zl)var i=!1;else{if(e=Zl,Zl=null,Xl=0,0!==(6&Al))throw Error(o(331));var n=Al;for(Al|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Js=u;null!==Js;){var d=Js;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Js=h;else for(;null!==Js;){var p=(d=Js).sibling,f=d.return;if(ol(d),d===u){Js=null;break}if(null!==p){p.return=f,Js=p;break}Js=f}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var _=a.sibling;if(null!==_){_.return=a.return,Js=_;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var v=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==v)v.return=s,Js=v;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Ic(l,l.return,w)}if(l===s){Js=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break e}Js=l.return}}if(Al=n,Vn(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(nt,e)}catch(w){}i=!0}return i}finally{bt=r,El.transition=t}}return!1}function Sc(e,t,r){e=jo(e,t=ps(0,t=cs(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),ic(e,t))}function Ic(e,t,r){if(3===e.tag)Sc(e,e,r);else for(;null!==t;){if(3===t.tag){Sc(t,e,r);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gl||!Gl.has(i))){t=jo(t,e=fs(t,e=cs(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Pl===e&&(Ml&r)===r&&(4===Bl||3===Bl&&(130023424&Ml)===Ml&&500>Ke()-Ul?hc(e,0):Fl|=r),ic(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=Do(e,t))&&(yt(e,t,r),ic(e,r))}function Ec(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),kc(e,r)}function Ac(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),kc(e,r)}function Pc(e,t){return qe(e,t)}function Cc(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mc(e,t,r,i){return new Cc(e,t,r,i)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var r=e.alternate;return null===r?((r=Mc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Bc(e,t,r,i,n,a){var s=2;if(i=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Dc(r.children,n,a,t);case I:s=8,n|=8;break;case T:return(e=Mc(12,r,t,2|n)).elementType=T,e.lanes=a,e;case P:return(e=Mc(13,r,t,n)).elementType=P,e.lanes=a,e;case C:return(e=Mc(19,r,t,n)).elementType=C,e.lanes=a,e;case R:return zc(r,n,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case E:s=9;break e;case A:s=11;break e;case M:s=14;break e;case O:s=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Mc(s,r,t,n)).elementType=e,t.type=i,t.lanes=a,t}function Dc(e,t,r,i){return(e=Mc(7,e,i,t)).lanes=r,e}function zc(e,t,r,i){return(e=Mc(22,e,i,t)).elementType=R,e.lanes=r,e.stateNode={isHidden:!1},e}function Lc(e,t,r){return(e=Mc(6,e,null,t)).lanes=r,e}function Fc(e,t,r){return(t=Mc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nc(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function jc(e,t,r,i,n,o,a,s,l){return e=new Nc(e,t,r,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function Uc(e){if(!e)return En;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(On(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(On(r))return Dn(e,r,t)}return t}function Vc(e,t,r,i,n,o,a,s,l){return(e=jc(r,i,!0,e,0,o,0,s,l)).context=Uc(null),r=e.current,(o=No(i=ec(),n=tc(r))).callback=void 0!==t&&null!==t?t:null,jo(r,o,n),e.current.lanes=n,yt(e,n,i),ic(e,i),e}function $c(e,t,r,i){var n=t.current,o=ec(),a=tc(n);return r=Uc(r),null===t.context?t.context=r:t.pendingContext=r,(t=No(o,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=jo(n,t,a))&&(rc(e,n,a,o),Uo(e,n,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Sl=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pn.current)bs=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bs=!1,function(e,t,r){switch(t.tag){case 3:Ps(t),fo();break;case 5:Jo(t);break;case 1:On(t.type)&&zn(t);break;case 4:Yo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;kn(So,i._currentValue),i._currentValue=n;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(kn(ea,1&ea.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ls(e,t,r):(kn(ea,1&ea.current),null!==(e=Ws(e,t,r))?e.sibling:null);kn(ea,1&ea.current);break;case 19:if(i=0!==(r&t.childLanes),0!==(128&e.flags)){if(i)return Vs(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),kn(ea,ea.current),i)break;return null;case 22:case 23:return t.lanes=0,Is(e,t,r)}return Ws(e,t,r)}(e,t,r);bs=0!==(131072&e.flags)}else bs=!1,no&&0!==(1048576&t.flags)&&Qn(t,Gn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;$s(e,t),e=t.pendingProps;var n=Mn(t,An.current);Co(t,r),n=ga(null,t,i,e,n,r);var a=ya();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,On(i)?(a=!0,zn(t)):a=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Lo(t),n.updater=ns,t.stateNode=n,n._reactInternals=t,ls(t,i,e,r),t=As(null,t,i,!0,a,r)):(t.tag=0,no&&a&&eo(t),vs(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch($s(e,t),e=t.pendingProps,i=(n=i._init)(i._payload),t.type=i,n=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===M)return 14}return 2}(i),e=rs(i,e),n){case 0:t=ks(null,t,i,e,r);break e;case 1:t=Es(null,t,i,e,r);break e;case 11:t=xs(null,t,i,e,r);break e;case 14:t=ws(null,t,i,rs(i.type,e),r);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,ks(e,t,i,n=t.elementType===i?n:rs(i,n),r);case 1:return i=t.type,n=t.pendingProps,Es(e,t,i,n=t.elementType===i?n:rs(i,n),r);case 3:e:{if(Ps(t),null===e)throw Error(o(387));i=t.pendingProps,n=(a=t.memoizedState).element,Fo(e,t),$o(t,i,null,r);var s=t.memoizedState;if(i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Cs(e,t,i,r,n=cs(Error(o(423)),t));break e}if(i!==n){t=Cs(e,t,i,r,n=cs(Error(o(424)),t));break e}for(io=cn(t.stateNode.containerInfo.firstChild),ro=t,no=!0,oo=null,r=wo(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(fo(),i===n){t=Ws(e,t,r);break e}vs(e,t,i,r)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),i=t.type,n=t.pendingProps,a=null!==e?e.memoizedProps:null,s=n.children,tn(i,n)?s=null:null!==a&&tn(i,a)&&(t.flags|=32),Ts(e,t),vs(e,t,s,r),t.child;case 6:return null===e&&co(t),null;case 13:return Ls(e,t,r);case 4:return Yo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=xo(t,null,i,r):vs(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,xs(e,t,i,n=t.elementType===i?n:rs(i,n),r);case 7:return vs(e,t,t.pendingProps,r),t.child;case 8:case 12:return vs(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,a=t.memoizedProps,s=n.value,kn(So,i._currentValue),i._currentValue=s,null!==a)if(ai(a.value,s)){if(a.children===n.children&&!Pn.current){t=Ws(e,t,r);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=No(-1,r&-r)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,null!==(c=a.alternate)&&(c.lanes|=r),Po(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=r,null!==(l=s.alternate)&&(l.lanes|=r),Po(s,r,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}vs(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Co(t,r),i=i(n=Mo(n)),t.flags|=1,vs(e,t,i,r),t.child;case 14:return n=rs(i=t.type,t.pendingProps),ws(e,t,i,n=rs(i.type,n),r);case 15:return Ss(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rs(i,n),$s(e,t),t.tag=1,On(i)?(e=!0,zn(t)):e=!1,Co(t,r),as(t,i,n),ls(t,i,n,r),As(null,t,i,!0,e,r);case 19:return Vs(e,t,r);case 22:return Is(e,t,r)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Zc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Qc(e,t,r,i,n){var o=r._reactRootContainer;if(o){var a=o;if("function"===typeof n){var s=n;n=function(){var e=Wc(a);s.call(e)}}$c(t,a,e,n)}else a=function(e,t,r,i,n){if(n){if("function"===typeof i){var o=i;i=function(){var e=Wc(a);o.call(e)}}var a=Vc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[fn]=a.current,Ui(8===e.nodeType?e.parentNode:e),uc(),a}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof i){var s=i;i=function(){var e=Wc(l);s.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fn]=l.current,Ui(8===e.nodeType?e.parentNode:e),uc((function(){$c(t,l,r,i)})),l}(r,t,e,n,i);return Wc(a)}Xc.prototype.render=Zc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));$c(e,t,null,null)},Xc.prototype.unmount=Zc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){$c(null,e,null,null)})),t[fn]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Rt.length&&0!==t&&t<Rt[r].priority;r++);Rt.splice(r,0,e),0===r&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(_t(t,1|r),ic(t,Ke()),0===(6&Al)&&(Vl=Ke()+500,Vn()))}break;case 13:uc((function(){var t=Do(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),Gc(e,1)}},wt=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)rc(t,e,134217728,ec());Gc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),r=Do(e,t);if(null!==r)rc(r,e,t,ec());Gc(e,t)}},It=function(){return bt},Tt=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},we=function(e,t,r){switch(t){case"input":if(J(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=xn(i);if(!n)throw Error(o(90));q(i),J(i,n)}}}break;case"textarea":oe(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ae=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[bn,vn,xn,ke,Ee,cc]},tu={findFiberByHostInstance:_n,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{nt=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(o(200));return function(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Yc(e))throw Error(o(299));var r=!1,i="",n=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=jc(e,1,!1,null,0,r,0,i,n),e[fn]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Zc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Kc(t))throw Error(o(200));return Qc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Yc(e))throw Error(o(405));var i=null!=r&&r.hydratedSources||null,n=!1,a="",s=qc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(a=r.identifierPrefix),void 0!==r.onRecoverableError&&(s=r.onRecoverableError)),t=Vc(t,null,e,1,null!=r?r:null,n,0,a,s),e[fn]=t.current,Ui(e),i)for(e=0;e<i.length;e++)n=(n=(r=i[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Xc(t)},t.render=function(e,t,r){if(!Kc(t))throw Error(o(200));return Qc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fn]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Kc(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Qc(e,t,r,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,r)=>{"use strict";var i=r(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},7950:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(2730)},1153:(e,t,r)=>{"use strict";var i=r(5043),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var i,o={},c=null,u=null;for(i in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:n,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var r=Symbol.for("react.element"),i=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}function _(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var v=b.prototype=new _;v.constructor=b,m(v,y.prototype),v.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var n,o={},a=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,n)&&!I.hasOwnProperty(n)&&(o[n]=t[n]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===o[n]&&(o[n]=l[n]);return{$$typeof:r,type:e,key:a,ref:s,props:o,_owner:S.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,n,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case i:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,x(a)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),P(a,t,n,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,n+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+A(s=e[c],c);l+=P(s,t,n,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=P(s=s.value,t,n,u=o+A(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,t,r){if(null==e)return e;var i=[],n=0;return P(e,i,"","",(function(e){return t.call(r,e,n++)})),i}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},R={transition:null},B={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:C,forEach:function(e,t,r){C(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=n,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!I.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:r,type:e.type,key:o,ref:a,props:n,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,r){return O.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,r){return O.current.useReducer(e,t,r)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return O.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},5043:(e,t,r)=>{"use strict";e.exports=r(4202)},579:(e,t,r)=>{"use strict";e.exports=r(1153)},7234:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var i=r-1>>>1,n=e[i];if(!(0<o(n,t)))break e;e[i]=t,e[r]=n,r=i}}function i(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var i=0,n=e.length,a=n>>>1;i<a;){var s=2*(i+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,r))c<n&&0>o(u,l)?(e[i]=u,e[c]=r,i=c):(e[i]=l,e[s]=r,i=s);else{if(!(c<n&&0>o(u,r)))break e;e[i]=u,e[c]=r,i=c}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=i(u);null!==t;){if(null===t.callback)n(u);else{if(!(t.startTime<=e))break;n(u),t.sortIndex=t.expirationTime,r(c,t)}t=i(u)}}function x(e){if(g=!1,v(e),!m)if(null!==i(c))m=!0,R(w);else{var t=i(u);null!==t&&B(x,t.startTime-e)}}function w(e,r){m=!1,g&&(g=!1,_(k),k=-1),f=!0;var o=p;try{for(v(r),h=i(c);null!==h&&(!(h.expirationTime>r)||e&&!P());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof s?h.callback=s:h===i(c)&&n(c),v(r)}else n(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&B(x,d.startTime-r),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,I=!1,T=null,k=-1,E=5,A=-1;function P(){return!(t.unstable_now()-A<E)}function C(){if(null!==T){var e=t.unstable_now();A=e;var r=!0;try{r=T(!0,e)}finally{r?S():(I=!1,T=null)}}else I=!1}if("function"===typeof b)S=function(){b(C)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,O=M.port2;M.port1.onmessage=C,S=function(){O.postMessage(null)}}else S=function(){y(C,0)};function R(e){T=e,I||(I=!0,S())}function B(e,r){k=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,n,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:n,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,r(u,e),null===i(c)&&e===i(u)&&(g?(_(k),k=-1):g=!0,B(x,o-a))):(e.sortIndex=s,r(c,e),m||f||(m=!0,R(w))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},8853:(e,t,r)=>{"use strict";e.exports=r(7234)},4656:(e,t,r)=>{"use strict";var i,n,o=Object.create,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty,d=(e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of l(t))!u.call(e,n)&&n!==r&&a(e,n,{get:()=>t[n],enumerable:!(i=s(t,n))||i.enumerable});return e},h=(e,t,r)=>(r=null!=e?o(c(e)):{},d(!t&&e&&e.__esModule?r:a(r,"default",{value:e,enumerable:!0}),e)),p=(i=(e,t)=>{t.exports=Worker},()=>(n||i((n={exports:{}}).exports,n),n.exports)),f={};((e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})})(f,{AsyncDuckDB:()=>W,AsyncDuckDBConnection:()=>B,AsyncDuckDBDispatcher:()=>H,AsyncPreparedStatement:()=>z,AsyncResultStreamIterator:()=>D,ConsoleLogger:()=>T,DuckDBAccessMode:()=>_,DuckDBDataProtocol:()=>ye,LogEvent:()=>w,LogLevel:()=>v,LogOrigin:()=>S,LogTopic:()=>x,PACKAGE_NAME:()=>K,PACKAGE_VERSION:()=>J,PACKAGE_VERSION_MAJOR:()=>ee,PACKAGE_VERSION_MINOR:()=>te,PACKAGE_VERSION_PATCH:()=>re,StatusCode:()=>O,TokenType:()=>b,VoidLogger:()=>I,WorkerRequestType:()=>L,WorkerResponseType:()=>F,WorkerTask:()=>N,createWorker:()=>ge,getJsDelivrBundles:()=>se,getLogEventLabel:()=>E,getLogLevelLabel:()=>k,getLogOriginLabel:()=>P,getLogTopicLabel:()=>A,getPlatformFeatures:()=>pe,isFirefox:()=>oe,isNode:()=>ie,isSafari:()=>ae,selectBundle:()=>fe}),e.exports=(e=>d(a({},"__esModule",{value:!0}),e))(f);var m,g,y,_=((m=_||{})[m.UNDEFINED=0]="UNDEFINED",m[m.AUTOMATIC=1]="AUTOMATIC",m[m.READ_ONLY=2]="READ_ONLY",m[m.READ_WRITE=3]="READ_WRITE",m),b=((g=b||{})[g.IDENTIFIER=0]="IDENTIFIER",g[g.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",g[g.STRING_CONSTANT=2]="STRING_CONSTANT",g[g.OPERATOR=3]="OPERATOR",g[g.KEYWORD=4]="KEYWORD",g[g.COMMENT=5]="COMMENT",g),v=((y=v||{})[y.NONE=0]="NONE",y[y.DEBUG=1]="DEBUG",y[y.INFO=2]="INFO",y[y.WARNING=3]="WARNING",y[y.ERROR=4]="ERROR",y),x=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(x||{}),w=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(w||{}),S=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(S||{}),I=class{log(e){}},T=class{constructor(e=2){this.level=e}log(e){e.level>=this.level&&console.log(e)}};function k(e){switch(e){case 0:return"NONE";case 1:return"DEBUG";case 2:return"INFO";case 3:return"WARNING";case 4:return"ERROR";default:return"?"}}function E(e){switch(e){case 0:return"NONE";case 1:return"OK";case 2:return"ERROR";case 3:return"START";case 4:return"RUN";case 5:return"CAPTURE";default:return"?"}}function A(e){switch(e){case 1:return"CONNECT";case 2:return"DISCONNECT";case 5:return"INSTANTIATE";case 3:return"OPEN";case 4:return"QUERY";default:return"?"}}function P(e){switch(e){case 0:return"NONE";case 1:return"WEB WORKER";case 2:return"NODE WORKER";case 3:return"DUCKDB BINDINGS";case 4:return"DUCKDB";default:return"?"}}var C,M,O=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(O||{}),R=h(r(8602)),B=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),r=R.RecordBatchReader.from(t);return console.assert(r.isSync(),"Reader is not sync"),console.assert(r.isFile(),"Reader is not file"),new R.Table(r)}async send(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.startPendingQuery(this._conn,e);for(;null==t;)t=await this._bindings.pollPendingQuery(this._conn);let r=new D(this._bindings,this._conn,t),i=await R.RecordBatchReader.from(r);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new z(this._bindings,this._conn,t)}async insertArrowTable(e,t){let r=R.tableToIPC(e,"stream");await this.insertArrowFromIPCStream(r,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},D=class{constructor(e,t,r){this.db=e,this.conn=t,this.header=r,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e;return null!=this._inFlight?(e=await this._inFlight,this._inFlight=null):e=await this.db.fetchQueryResults(this.conn),this._depleted=0==e.length,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},z=class{constructor(e,t,r){this.bindings=e,this.connectionId=t,this.statementId=r}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),r=R.RecordBatchReader.from(t);return console.assert(r.isSync()),console.assert(r.isFile()),new R.Table(r)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),r=new D(this.bindings,this.connectionId,t),i=await R.RecordBatchReader.from(r);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},L=((M=L||{}).CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",M.CLOSE_PREPARED="CLOSE_PREPARED",M.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",M.CONNECT="CONNECT",M.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",M.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",M.CREATE_PREPARED="CREATE_PREPARED",M.DISCONNECT="DISCONNECT",M.DROP_FILE="DROP_FILE",M.DROP_FILES="DROP_FILES",M.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",M.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",M.FLUSH_FILES="FLUSH_FILES",M.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",M.GET_TABLE_NAMES="GET_TABLE_NAMES",M.GET_VERSION="GET_VERSION",M.GLOB_FILE_INFOS="GLOB_FILE_INFOS",M.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",M.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",M.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",M.INSTANTIATE="INSTANTIATE",M.OPEN="OPEN",M.PING="PING",M.POLL_PENDING_QUERY="POLL_PENDING_QUERY",M.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",M.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",M.REGISTER_FILE_URL="REGISTER_FILE_URL",M.RESET="RESET",M.RUN_PREPARED="RUN_PREPARED",M.RUN_QUERY="RUN_QUERY",M.SEND_PREPARED="SEND_PREPARED",M.START_PENDING_QUERY="START_PENDING_QUERY",M.TOKENIZE="TOKENIZE",M),F=((C=F||{}).CONNECTION_INFO="CONNECTION_INFO",C.ERROR="ERROR",C.FEATURE_FLAGS="FEATURE_FLAGS",C.FILE_BUFFER="FILE_BUFFER",C.FILE_INFOS="FILE_INFOS",C.FILE_SIZE="FILE_SIZE",C.FILE_STATISTICS="FILE_STATISTICS",C.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",C.LOG="LOG",C.OK="OK",C.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",C.QUERY_PLAN="QUERY_PLAN",C.QUERY_RESULT="QUERY_RESULT",C.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",C.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",C.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",C.REGISTERED_FILE="REGISTERED_FILE",C.SCRIPT_TOKENS="SCRIPT_TOKENS",C.SUCCESS="SUCCESS",C.TABLE_NAMES="TABLE_NAMES",C.VERSION_STRING="VERSION_STRING",C),N=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise(((e,t)=>{this.promiseResolver=e,this.promiseRejecter=t}))}},j=h(r(8602));function U(e){switch(e.typeId){case j.Type.Binary:return{sqlType:"binary"};case j.Type.Bool:return{sqlType:"bool"};case j.Type.Date:return{sqlType:"date"};case j.Type.DateDay:return{sqlType:"date32[d]"};case j.Type.DateMillisecond:return{sqlType:"date64[ms]"};case j.Type.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case j.Type.Float:return{sqlType:"float"};case j.Type.Float16:return{sqlType:"float16"};case j.Type.Float32:return{sqlType:"float32"};case j.Type.Float64:return{sqlType:"float64"};case j.Type.Int:return{sqlType:"int32"};case j.Type.Int16:return{sqlType:"int16"};case j.Type.Int32:return{sqlType:"int32"};case j.Type.Int64:return{sqlType:"int64"};case j.Type.Uint16:return{sqlType:"uint16"};case j.Type.Uint32:return{sqlType:"uint32"};case j.Type.Uint64:return{sqlType:"uint64"};case j.Type.Uint8:return{sqlType:"uint8"};case j.Type.IntervalDayTime:return{sqlType:"interval[dt]"};case j.Type.IntervalYearMonth:return{sqlType:"interval[m]"};case j.Type.List:return{sqlType:"list",valueType:U(e.valueType)};case j.Type.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case j.Type.Null:return{sqlType:"null"};case j.Type.Utf8:return{sqlType:"utf8"};case j.Type.Struct:return{sqlType:"struct",fields:e.children.map((e=>V(e.name,e.type)))};case j.Type.Map:{let t=e;return{sqlType:"map",keyType:U(t.keyType),valueType:U(t.valueType)}}case j.Type.Time:return{sqlType:"time[s]"};case j.Type.TimeMicrosecond:return{sqlType:"time[us]"};case j.Type.TimeMillisecond:return{sqlType:"time[ms]"};case j.Type.TimeNanosecond:return{sqlType:"time[ns]"};case j.Type.TimeSecond:return{sqlType:"time[s]"};case j.Type.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case j.Type.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case j.Type.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case j.Type.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case j.Type.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function V(e,t){let r=U(t);return r.name=e,r}var $=new TextEncoder,W=class{constructor(e,t=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),null!=t&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise(((e,t)=>{this._workerShutdownResolver=e}))}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker)return void console.error("cannot send a message since the worker is not set!");let r=this._nextMessageId++;return this._pendingRequests.set(r,e),this._worker.postMessage({messageId:r,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let r=e.data;switch(r.type){case"LOG":return void this._logger.log(r.data);case"INSTANTIATE_PROGRESS":for(let e of this._onInstantiationProgress)e(r.data);return}let i=this._pendingRequests.get(r.requestId);if(i){if(this._pendingRequests.delete(r.requestId),"ERROR"==r.type){let e=new Error(r.data.message);return e.name=r.data.name,null!=(t=Object.getOwnPropertyDescriptor(e,"stack"))&&t.writable&&(e.stack=r.data.stack),void i.promiseRejecter(e)}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if("OK"==r.type)return void i.promiseResolver(r.data);break;case"INSTANTIATE":if(this._onInstantiationProgress=[],"OK"==r.type)return void i.promiseResolver(r.data);break;case"GLOB_FILE_INFOS":if("FILE_INFOS"==r.type)return void i.promiseResolver(r.data);break;case"GET_VERSION":if("VERSION_STRING"==r.type)return void i.promiseResolver(r.data);break;case"GET_FEATURE_FLAGS":if("FEATURE_FLAGS"==r.type)return void i.promiseResolver(r.data);break;case"GET_TABLE_NAMES":if("TABLE_NAMES"==r.type)return void i.promiseResolver(r.data);break;case"TOKENIZE":if("SCRIPT_TOKENS"==r.type)return void i.promiseResolver(r.data);break;case"COPY_FILE_TO_BUFFER":if("FILE_BUFFER"==r.type)return void i.promiseResolver(r.data);break;case"EXPORT_FILE_STATISTICS":if("FILE_STATISTICS"==r.type)return void i.promiseResolver(r.data);break;case"CONNECT":if("CONNECTION_INFO"==r.type)return void i.promiseResolver(r.data);break;case"RUN_PREPARED":case"RUN_QUERY":if("QUERY_RESULT"==r.type)return void i.promiseResolver(r.data);break;case"SEND_PREPARED":if("QUERY_RESULT_HEADER"==r.type)return void i.promiseResolver(r.data);break;case"START_PENDING_QUERY":case"POLL_PENDING_QUERY":if("QUERY_RESULT_HEADER_OR_NULL"==r.type)return void i.promiseResolver(r.data);break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],"SUCCESS"==r.type)return void i.promiseResolver(r.data);break;case"FETCH_QUERY_RESULTS":if("QUERY_RESULT_CHUNK"==r.type)return void i.promiseResolver(r.data);break;case"CREATE_PREPARED":if("PREPARED_STATEMENT_ID"==r.type)return void i.promiseResolver(r.data)}i.promiseRejecter(new Error("unexpected response type: ".concat(r.type.toString())))}else console.warn("unassociated response: [".concat(r.requestId,", ").concat(r.type.toString(),"]"))}onError(e){console.error(e),console.error("error in duckdb worker: ".concat(e.message)),this._pendingRequests.clear()}onClose(){this._workerShutdownResolver(null),0==this._pendingRequests.size?this._pendingRequests.clear():console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"))}async reset(){let e=new N("RESET",null);return await this.postTask(e)}async ping(){let e=new N("PING",null);await this.postTask(e)}async dropFile(e){let t=new N("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new N("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new N("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,r=e=>{}){this._onInstantiationProgress.push(r);let i=new N("INSTANTIATE",[e,t]);return await this.postTask(i)}async getVersion(){let e=new N("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new N("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new N("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new N("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new N("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new B(this,e)}async disconnect(e){let t=new N("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let r=new N("RUN_QUERY",[e,t]);return await this.postTask(r)}async startPendingQuery(e,t){let r=new N("START_PENDING_QUERY",[e,t]);return await this.postTask(r)}async pollPendingQuery(e){let t=new N("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new N("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new N("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let r=new N("GET_TABLE_NAMES",[e,t]);return await this.postTask(r)}async createPrepared(e,t){let r=new N("CREATE_PREPARED",[e,t]);return await this.postTask(r)}async closePrepared(e,t){let r=new N("CLOSE_PREPARED",[e,t]);await this.postTask(r)}async runPrepared(e,t,r){let i=new N("RUN_PREPARED",[e,t,r]);return await this.postTask(i)}async sendPrepared(e,t,r){let i=new N("SEND_PREPARED",[e,t,r]);return await this.postTask(i)}async globFiles(e){let t=new N("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let r=$.encode(t);await this.registerFileBuffer(e,r)}async registerFileURL(e,t,r,i){void 0===t&&(t=e);let n=new N("REGISTER_FILE_URL",[e,t,r,i]);await this.postTask(n)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let r=new N("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(r,[t.buffer])}async registerFileHandle(e,t,r,i){let n=new N("REGISTER_FILE_HANDLE",[e,t,r,i]);await this.postTask(n,[])}async collectFileStatistics(e,t){let r=new N("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(r,[])}async exportFileStatistics(e){let t=new N("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new N("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let r=new N("COPY_FILE_TO_PATH",[e,t]);await this.postTask(r)}async insertArrowFromIPCStream(e,t,r){if(0==t.length)return;let i=new N("INSERT_ARROW_FROM_IPC_STREAM",[e,t,r]);await this.postTask(i,[t.buffer])}async insertCSVFromPath(e,t,r){if(void 0!==r.columns){let e=[];for(let t in r.columns){let i=r.columns[t];e.push(V(t,i))}r.columnsFlat=e,delete r.columns}let i=new N("IMPORT_CSV_FROM_PATH",[e,t,r]);await this.postTask(i)}async insertJSONFromPath(e,t,r){if(void 0!==r.columns){let e=[];for(let t in r.columns){let i=r.columns[t];e.push(V(t,i))}r.columnsFlat=e,delete r.columns}let i=new N("IMPORT_JSON_FROM_PATH",[e,t,r]);await this.postTask(i)}},H=class{constructor(){this._bindings=null,this._nextMessageId=0}log(e){this.postMessage({messageId:this._nextMessageId++,requestId:0,type:"LOG",data:e},[])}sendOK(e){this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"OK",data:null},[])}failWith(e,t){let r={name:t.name,message:t.message,stack:t.stack||void 0};this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"ERROR",data:r},[])}async onMessage(e){switch(e.type){case"PING":return void this.sendOK(e);case"INSTANTIATE":null!=this._bindings&&this.failWith(e,new Error("duckdb already initialized"));try{this._bindings=await this.instantiate(e.data[0],e.data[1],(t=>{this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"INSTANTIATE_PROGRESS",data:t},[])})),this.sendOK(e)}catch(t){console.log(t),this._bindings=null,this.failWith(e,t)}return}if(!this._bindings)return this.failWith(e,new Error("duckdb is not initialized"));try{switch(e.type){case"GET_VERSION":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"VERSION_STRING",data:this._bindings.getVersion()},[]);break;case"GET_FEATURE_FLAGS":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FEATURE_FLAGS",data:this._bindings.getFeatureFlags()},[]);break;case"RESET":this._bindings.reset(),this.sendOK(e);break;case"OPEN":this._bindings.open(e.data),this.sendOK(e);break;case"DROP_FILE":this._bindings.dropFile(e.data),this.sendOK(e);break;case"DROP_FILES":this._bindings.dropFiles(),this.sendOK(e);break;case"FLUSH_FILES":this._bindings.flushFiles(),this.sendOK(e);break;case"CONNECT":{let t=this._bindings.connect();this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"CONNECTION_INFO",data:t.useUnsafe(((e,t)=>t))},[]);break}case"DISCONNECT":this._bindings.disconnect(e.data),this.sendOK(e);break;case"CREATE_PREPARED":{let t=this._bindings.createPrepared(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"PREPARED_STATEMENT_ID",data:t},[]);break}case"CLOSE_PREPARED":this._bindings.closePrepared(e.data[0],e.data[1]),this.sendOK(e);break;case"RUN_PREPARED":{let t=this._bindings.runPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"RUN_QUERY":{let t=this._bindings.runQuery(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT",data:t},[t.buffer]);break}case"SEND_PREPARED":{let t=this._bindings.sendPrepared(e.data[0],e.data[1],e.data[2]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER",data:t},[t.buffer]);break}case"START_PENDING_QUERY":{let t=this._bindings.startPendingQuery(e.data[0],e.data[1]),r=[];t&&r.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},r);break}case"POLL_PENDING_QUERY":{let t=this._bindings.pollPendingQuery(e.data),r=[];t&&r.push(t.buffer),this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_HEADER_OR_NULL",data:t},r);break}case"CANCEL_PENDING_QUERY":{let t=this._bindings.cancelPendingQuery(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SUCCESS",data:t},[]);break}case"FETCH_QUERY_RESULTS":{let t=this._bindings.fetchQueryResults(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"QUERY_RESULT_CHUNK",data:t},[t.buffer]);break}case"GET_TABLE_NAMES":{let t=this._bindings.getTableNames(e.data[0],e.data[1]);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"TABLE_NAMES",data:t},[]);break}case"GLOB_FILE_INFOS":{let t=this._bindings.globFiles(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_INFOS",data:t},[]);break}case"REGISTER_FILE_URL":this._bindings.registerFileURL(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"REGISTER_FILE_BUFFER":this._bindings.registerFileBuffer(e.data[0],e.data[1]),this.sendOK(e);break;case"REGISTER_FILE_HANDLE":this._bindings.registerFileHandle(e.data[0],e.data[1],e.data[2],e.data[3]),this.sendOK(e);break;case"COPY_FILE_TO_PATH":this._bindings.copyFileToPath(e.data[0],e.data[1]),this.sendOK(e);break;case"COPY_FILE_TO_BUFFER":{let t=this._bindings.copyFileToBuffer(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_BUFFER",data:t},[]);break}case"COLLECT_FILE_STATISTICS":this._bindings.collectFileStatistics(e.data[0],e.data[1]),this.sendOK(e);break;case"EXPORT_FILE_STATISTICS":this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"FILE_STATISTICS",data:this._bindings.exportFileStatistics(e.data)},[]);break;case"INSERT_ARROW_FROM_IPC_STREAM":this._bindings.insertArrowFromIPCStream(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break;case"IMPORT_CSV_FROM_PATH":this._bindings.insertCSVFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break;case"IMPORT_JSON_FROM_PATH":this._bindings.insertJSONFromPath(e.data[0],e.data[1],e.data[2]),this.sendOK(e);break;case"TOKENIZE":{let t=this._bindings.tokenize(e.data);this.postMessage({messageId:this._nextMessageId++,requestId:e.messageId,type:"SCRIPT_TOKENS",data:t},[]);break}}}catch(t){return console.log(t),this.failWith(e,t)}}},G=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),q=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),Z=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),X=()=>(async e=>{try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(n){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),Y={name:"@duckdb/duckdb-wasm",version:"1.29.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^17.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.2",eslint:"^8.57.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^22.8.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.13",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-node-blocking.d.ts",import:"./dist/duckdb-node-blocking.mjs",require:"./dist/duckdb-node-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},K=Y.name,J=Y.version,Q=Y.version.split("."),ee=Q[0],te=Q[1],re=Q[2],ie=()=>typeof navigator>"u",ne=()=>ie()?"node":navigator.userAgent,oe=()=>ne().includes("Firefox"),ae=()=>/^((?!chrome|android).)*safari/i.test(ne());function se(){let e="https://cdn.jsdelivr.net/npm/".concat(K,"@").concat(J,"/dist/");return{mvp:{mainModule:"".concat(e,"duckdb-mvp.wasm"),mainWorker:"".concat(e,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(e,"duckdb-eh.wasm"),mainWorker:"".concat(e,"duckdb-browser-eh.worker.js")}}}var le=null,ce=null,ue=null,de=null,he=null;async function pe(){return null==le&&(le=typeof BigInt64Array<"u"),null==ce&&(ce=await q()),null==ue&&(ue=await X()),null==de&&(de=await Z()),null==he&&(he=await G()),{bigInt64Array:le,crossOriginIsolated:ie()||globalThis.crossOriginIsolated||!1,wasmExceptions:ce,wasmSIMD:de,wasmThreads:ue,wasmBulkMemory:he}}async function fe(e){let t=await pe();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}var me=h(p());async function ge(e){let t=new Request(e),r=await fetch(t),i=URL.createObjectURL(await r.blob());return new me.default(i)}!function(){let e=new TextDecoder}();var ye=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(ye||{})},8602:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Union=t.StructRow=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.BufferType=t.UnionMode=t.Type=t.TimeUnit=t.Precision=t.MetadataVersion=t.MessageHeader=t.IntervalUnit=t.DateUnit=void 0,t.LargeBinaryBuilder=t.BinaryBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.makeBuilder=t.Builder=t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableToIPC=t.tableFromIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.tableFromJSON=t.vectorFromArray=t.makeVector=t.Vector=t.Visitor=t.Field=t.Schema=t.tableFromArrays=t.makeTable=t.Table=t.MapRow=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=t.DenseUnion=void 0,t.LargeUtf8Builder=t.Utf8Builder=t.SparseUnionBuilder=t.DenseUnionBuilder=t.UnionBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=t.TimeBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.StructBuilder=t.NullBuilder=t.MapBuilder=t.ListBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeListBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.BoolBuilder=void 0;const i=r(5788),n=r(9446),o=r(5337),a=r(7253),s=r(2505),l=r(1544),c=r(5644),u=r(2264);i.default.toDOMStream=s.toDOMStream,n.Builder.throughDOM=l.builderThroughDOMStream,o.RecordBatchReader.throughDOM=c.recordBatchReaderThroughDOMStream,o.RecordBatchFileReader.throughDOM=c.recordBatchReaderThroughDOMStream,o.RecordBatchStreamReader.throughDOM=c.recordBatchReaderThroughDOMStream,a.RecordBatchWriter.throughDOM=u.recordBatchWriterThroughDOMStream,a.RecordBatchFileWriter.throughDOM=u.recordBatchWriterThroughDOMStream,a.RecordBatchStreamWriter.throughDOM=u.recordBatchWriterThroughDOMStream;var d=r(8132);Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return d.DateUnit}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return d.IntervalUnit}}),Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return d.MessageHeader}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return d.MetadataVersion}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return d.Precision}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return d.TimeUnit}}),Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return d.Type}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return d.UnionMode}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return d.BufferType}}),Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return d.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return d.makeData}}),Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return d.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return d.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return d.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return d.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return d.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return d.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return d.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return d.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return d.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return d.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return d.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return d.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return d.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return d.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return d.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return d.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return d.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return d.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return d.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return d.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return d.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return d.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return d.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return d.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return d.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return d.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return d.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return d.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return d.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return d.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return d.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return d.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return d.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return d.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return d.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return d.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return d.Struct}}),Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return d.StructRow}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return d.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return d.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return d.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return d.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return d.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return d.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return d.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return d.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return d.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return d.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return d.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return d.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return d.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return d.Map_}}),Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return d.MapRow}}),Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return d.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return d.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return d.tableFromArrays}}),Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return d.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return d.Field}}),Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return d.Visitor}}),Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return d.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return d.makeVector}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return d.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return d.tableFromJSON}}),Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return d.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return d.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return d.AsyncByteQueue}}),Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return d.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return d.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return d.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return d.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return d.AsyncRecordBatchStreamReader}}),Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return d.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return d.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return d.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return d.RecordBatchJSONWriter}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return d.tableFromIPC}}),Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return d.tableToIPC}}),Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return d.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return d.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return d.JSONMessageReader}}),Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return d.Message}}),Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return d.RecordBatch}}),Object.defineProperty(t,"util",{enumerable:!0,get:function(){return d.util}}),Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return d.Builder}}),Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return d.makeBuilder}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return d.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return d.builderThroughAsyncIterable}});var h=r(8132);Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return h.BinaryBuilder}}),Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return h.LargeBinaryBuilder}}),Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return h.BoolBuilder}}),Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return h.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return h.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return h.DateMillisecondBuilder}}),Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return h.DecimalBuilder}}),Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return h.DictionaryBuilder}}),Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return h.FixedSizeBinaryBuilder}}),Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return h.FixedSizeListBuilder}}),Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return h.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return h.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return h.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return h.Float64Builder}}),Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return h.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return h.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return h.IntervalYearMonthBuilder}}),Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return h.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return h.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return h.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return h.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return h.DurationNanosecondBuilder}}),Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return h.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return h.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return h.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return h.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return h.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return h.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return h.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return h.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return h.Uint64Builder}}),Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return h.ListBuilder}}),Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return h.MapBuilder}}),Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return h.NullBuilder}}),Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return h.StructBuilder}}),Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return h.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return h.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return h.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return h.TimestampNanosecondBuilder}}),Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return h.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return h.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return h.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return h.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return h.TimeNanosecondBuilder}}),Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return h.UnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return h.DenseUnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return h.SparseUnionBuilder}}),Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return h.Utf8Builder}}),Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return h.LargeUtf8Builder}})},8132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DenseUnion=t.Union=t.Struct=t.List=t.Decimal=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.DateMillisecond=t.DateDay=t.Date_=t.FixedSizeBinary=t.LargeBinary=t.Binary=t.LargeUtf8=t.Utf8=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Bool=t.Null=t.DataType=t.makeData=t.Data=t.MetadataVersion=t.IntervalUnit=t.UnionMode=t.Precision=t.TimeUnit=t.DateUnit=t.BufferType=t.Type=t.MessageHeader=void 0,t.TimeBuilder=t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=t.FixedSizeBinaryBuilder=t.DictionaryBuilder=t.DecimalBuilder=t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=t.NullBuilder=t.BoolBuilder=t.builderThroughAsyncIterable=t.builderThroughIterable=t.tableFromJSON=t.vectorFromArray=t.makeBuilder=t.Builder=t.StructRow=t.MapRow=t.Field=t.Schema=t.Visitor=t.makeVector=t.Vector=t.tableFromArrays=t.makeTable=t.Table=t.Map_=t.FixedSizeList=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.Dictionary=t.SparseUnion=void 0,t.util=t.RecordBatch=t.Message=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=t.tableFromIPC=t.tableToIPC=t.RecordBatchJSONWriter=t.RecordBatchStreamWriter=t.RecordBatchFileWriter=t.RecordBatchWriter=t.AsyncRecordBatchStreamReader=t.AsyncRecordBatchFileReader=t.RecordBatchStreamReader=t.RecordBatchFileReader=t.RecordBatchReader=t.AsyncByteQueue=t.AsyncByteStream=t.ByteStream=t.DenseUnionBuilder=t.SparseUnionBuilder=t.UnionBuilder=t.StructBuilder=t.MapBuilder=t.FixedSizeListBuilder=t.ListBuilder=t.LargeBinaryBuilder=t.BinaryBuilder=t.LargeUtf8Builder=t.Utf8Builder=t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=void 0;var i=r(8891);Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return i.MessageHeader}});var n=r(1336);Object.defineProperty(t,"Type",{enumerable:!0,get:function(){return n.Type}}),Object.defineProperty(t,"BufferType",{enumerable:!0,get:function(){return n.BufferType}}),Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return n.DateUnit}}),Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return n.TimeUnit}}),Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return n.Precision}}),Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return n.UnionMode}}),Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return n.IntervalUnit}}),Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return n.MetadataVersion}});var o=r(9061);Object.defineProperty(t,"Data",{enumerable:!0,get:function(){return o.Data}}),Object.defineProperty(t,"makeData",{enumerable:!0,get:function(){return o.makeData}});var a=r(2741);Object.defineProperty(t,"DataType",{enumerable:!0,get:function(){return a.DataType}}),Object.defineProperty(t,"Null",{enumerable:!0,get:function(){return a.Null}}),Object.defineProperty(t,"Bool",{enumerable:!0,get:function(){return a.Bool}}),Object.defineProperty(t,"Int",{enumerable:!0,get:function(){return a.Int}}),Object.defineProperty(t,"Int8",{enumerable:!0,get:function(){return a.Int8}}),Object.defineProperty(t,"Int16",{enumerable:!0,get:function(){return a.Int16}}),Object.defineProperty(t,"Int32",{enumerable:!0,get:function(){return a.Int32}}),Object.defineProperty(t,"Int64",{enumerable:!0,get:function(){return a.Int64}}),Object.defineProperty(t,"Uint8",{enumerable:!0,get:function(){return a.Uint8}}),Object.defineProperty(t,"Uint16",{enumerable:!0,get:function(){return a.Uint16}}),Object.defineProperty(t,"Uint32",{enumerable:!0,get:function(){return a.Uint32}}),Object.defineProperty(t,"Uint64",{enumerable:!0,get:function(){return a.Uint64}}),Object.defineProperty(t,"Float",{enumerable:!0,get:function(){return a.Float}}),Object.defineProperty(t,"Float16",{enumerable:!0,get:function(){return a.Float16}}),Object.defineProperty(t,"Float32",{enumerable:!0,get:function(){return a.Float32}}),Object.defineProperty(t,"Float64",{enumerable:!0,get:function(){return a.Float64}}),Object.defineProperty(t,"Utf8",{enumerable:!0,get:function(){return a.Utf8}}),Object.defineProperty(t,"LargeUtf8",{enumerable:!0,get:function(){return a.LargeUtf8}}),Object.defineProperty(t,"Binary",{enumerable:!0,get:function(){return a.Binary}}),Object.defineProperty(t,"LargeBinary",{enumerable:!0,get:function(){return a.LargeBinary}}),Object.defineProperty(t,"FixedSizeBinary",{enumerable:!0,get:function(){return a.FixedSizeBinary}}),Object.defineProperty(t,"Date_",{enumerable:!0,get:function(){return a.Date_}}),Object.defineProperty(t,"DateDay",{enumerable:!0,get:function(){return a.DateDay}}),Object.defineProperty(t,"DateMillisecond",{enumerable:!0,get:function(){return a.DateMillisecond}}),Object.defineProperty(t,"Timestamp",{enumerable:!0,get:function(){return a.Timestamp}}),Object.defineProperty(t,"TimestampSecond",{enumerable:!0,get:function(){return a.TimestampSecond}}),Object.defineProperty(t,"TimestampMillisecond",{enumerable:!0,get:function(){return a.TimestampMillisecond}}),Object.defineProperty(t,"TimestampMicrosecond",{enumerable:!0,get:function(){return a.TimestampMicrosecond}}),Object.defineProperty(t,"TimestampNanosecond",{enumerable:!0,get:function(){return a.TimestampNanosecond}}),Object.defineProperty(t,"Time",{enumerable:!0,get:function(){return a.Time}}),Object.defineProperty(t,"TimeSecond",{enumerable:!0,get:function(){return a.TimeSecond}}),Object.defineProperty(t,"TimeMillisecond",{enumerable:!0,get:function(){return a.TimeMillisecond}}),Object.defineProperty(t,"TimeMicrosecond",{enumerable:!0,get:function(){return a.TimeMicrosecond}}),Object.defineProperty(t,"TimeNanosecond",{enumerable:!0,get:function(){return a.TimeNanosecond}}),Object.defineProperty(t,"Decimal",{enumerable:!0,get:function(){return a.Decimal}}),Object.defineProperty(t,"List",{enumerable:!0,get:function(){return a.List}}),Object.defineProperty(t,"Struct",{enumerable:!0,get:function(){return a.Struct}}),Object.defineProperty(t,"Union",{enumerable:!0,get:function(){return a.Union}}),Object.defineProperty(t,"DenseUnion",{enumerable:!0,get:function(){return a.DenseUnion}}),Object.defineProperty(t,"SparseUnion",{enumerable:!0,get:function(){return a.SparseUnion}}),Object.defineProperty(t,"Dictionary",{enumerable:!0,get:function(){return a.Dictionary}}),Object.defineProperty(t,"Interval",{enumerable:!0,get:function(){return a.Interval}}),Object.defineProperty(t,"IntervalDayTime",{enumerable:!0,get:function(){return a.IntervalDayTime}}),Object.defineProperty(t,"IntervalYearMonth",{enumerable:!0,get:function(){return a.IntervalYearMonth}}),Object.defineProperty(t,"Duration",{enumerable:!0,get:function(){return a.Duration}}),Object.defineProperty(t,"DurationSecond",{enumerable:!0,get:function(){return a.DurationSecond}}),Object.defineProperty(t,"DurationMillisecond",{enumerable:!0,get:function(){return a.DurationMillisecond}}),Object.defineProperty(t,"DurationMicrosecond",{enumerable:!0,get:function(){return a.DurationMicrosecond}}),Object.defineProperty(t,"DurationNanosecond",{enumerable:!0,get:function(){return a.DurationNanosecond}}),Object.defineProperty(t,"FixedSizeList",{enumerable:!0,get:function(){return a.FixedSizeList}}),Object.defineProperty(t,"Map_",{enumerable:!0,get:function(){return a.Map_}});var s=r(2817);Object.defineProperty(t,"Table",{enumerable:!0,get:function(){return s.Table}}),Object.defineProperty(t,"makeTable",{enumerable:!0,get:function(){return s.makeTable}}),Object.defineProperty(t,"tableFromArrays",{enumerable:!0,get:function(){return s.tableFromArrays}});var l=r(8210);Object.defineProperty(t,"Vector",{enumerable:!0,get:function(){return l.Vector}}),Object.defineProperty(t,"makeVector",{enumerable:!0,get:function(){return l.makeVector}});var c=r(2239);Object.defineProperty(t,"Visitor",{enumerable:!0,get:function(){return c.Visitor}});var u=r(1598);Object.defineProperty(t,"Schema",{enumerable:!0,get:function(){return u.Schema}}),Object.defineProperty(t,"Field",{enumerable:!0,get:function(){return u.Field}});var d=r(5200);Object.defineProperty(t,"MapRow",{enumerable:!0,get:function(){return d.MapRow}});var h=r(7229);Object.defineProperty(t,"StructRow",{enumerable:!0,get:function(){return h.StructRow}});var p=r(9446);Object.defineProperty(t,"Builder",{enumerable:!0,get:function(){return p.Builder}});var f=r(2327);Object.defineProperty(t,"makeBuilder",{enumerable:!0,get:function(){return f.makeBuilder}}),Object.defineProperty(t,"vectorFromArray",{enumerable:!0,get:function(){return f.vectorFromArray}}),Object.defineProperty(t,"tableFromJSON",{enumerable:!0,get:function(){return f.tableFromJSON}}),Object.defineProperty(t,"builderThroughIterable",{enumerable:!0,get:function(){return f.builderThroughIterable}}),Object.defineProperty(t,"builderThroughAsyncIterable",{enumerable:!0,get:function(){return f.builderThroughAsyncIterable}});var m=r(6205);Object.defineProperty(t,"BoolBuilder",{enumerable:!0,get:function(){return m.BoolBuilder}});var g=r(5404);Object.defineProperty(t,"NullBuilder",{enumerable:!0,get:function(){return g.NullBuilder}});var y=r(8949);Object.defineProperty(t,"DateBuilder",{enumerable:!0,get:function(){return y.DateBuilder}}),Object.defineProperty(t,"DateDayBuilder",{enumerable:!0,get:function(){return y.DateDayBuilder}}),Object.defineProperty(t,"DateMillisecondBuilder",{enumerable:!0,get:function(){return y.DateMillisecondBuilder}});var _=r(6086);Object.defineProperty(t,"DecimalBuilder",{enumerable:!0,get:function(){return _.DecimalBuilder}});var b=r(2709);Object.defineProperty(t,"DictionaryBuilder",{enumerable:!0,get:function(){return b.DictionaryBuilder}});var v=r(4375);Object.defineProperty(t,"FixedSizeBinaryBuilder",{enumerable:!0,get:function(){return v.FixedSizeBinaryBuilder}});var x=r(6979);Object.defineProperty(t,"FloatBuilder",{enumerable:!0,get:function(){return x.FloatBuilder}}),Object.defineProperty(t,"Float16Builder",{enumerable:!0,get:function(){return x.Float16Builder}}),Object.defineProperty(t,"Float32Builder",{enumerable:!0,get:function(){return x.Float32Builder}}),Object.defineProperty(t,"Float64Builder",{enumerable:!0,get:function(){return x.Float64Builder}});var w=r(420);Object.defineProperty(t,"IntBuilder",{enumerable:!0,get:function(){return w.IntBuilder}}),Object.defineProperty(t,"Int8Builder",{enumerable:!0,get:function(){return w.Int8Builder}}),Object.defineProperty(t,"Int16Builder",{enumerable:!0,get:function(){return w.Int16Builder}}),Object.defineProperty(t,"Int32Builder",{enumerable:!0,get:function(){return w.Int32Builder}}),Object.defineProperty(t,"Int64Builder",{enumerable:!0,get:function(){return w.Int64Builder}}),Object.defineProperty(t,"Uint8Builder",{enumerable:!0,get:function(){return w.Uint8Builder}}),Object.defineProperty(t,"Uint16Builder",{enumerable:!0,get:function(){return w.Uint16Builder}}),Object.defineProperty(t,"Uint32Builder",{enumerable:!0,get:function(){return w.Uint32Builder}}),Object.defineProperty(t,"Uint64Builder",{enumerable:!0,get:function(){return w.Uint64Builder}});var S=r(5084);Object.defineProperty(t,"TimeBuilder",{enumerable:!0,get:function(){return S.TimeBuilder}}),Object.defineProperty(t,"TimeSecondBuilder",{enumerable:!0,get:function(){return S.TimeSecondBuilder}}),Object.defineProperty(t,"TimeMillisecondBuilder",{enumerable:!0,get:function(){return S.TimeMillisecondBuilder}}),Object.defineProperty(t,"TimeMicrosecondBuilder",{enumerable:!0,get:function(){return S.TimeMicrosecondBuilder}}),Object.defineProperty(t,"TimeNanosecondBuilder",{enumerable:!0,get:function(){return S.TimeNanosecondBuilder}});var I=r(1265);Object.defineProperty(t,"TimestampBuilder",{enumerable:!0,get:function(){return I.TimestampBuilder}}),Object.defineProperty(t,"TimestampSecondBuilder",{enumerable:!0,get:function(){return I.TimestampSecondBuilder}}),Object.defineProperty(t,"TimestampMillisecondBuilder",{enumerable:!0,get:function(){return I.TimestampMillisecondBuilder}}),Object.defineProperty(t,"TimestampMicrosecondBuilder",{enumerable:!0,get:function(){return I.TimestampMicrosecondBuilder}}),Object.defineProperty(t,"TimestampNanosecondBuilder",{enumerable:!0,get:function(){return I.TimestampNanosecondBuilder}});var T=r(392);Object.defineProperty(t,"IntervalBuilder",{enumerable:!0,get:function(){return T.IntervalBuilder}}),Object.defineProperty(t,"IntervalDayTimeBuilder",{enumerable:!0,get:function(){return T.IntervalDayTimeBuilder}}),Object.defineProperty(t,"IntervalYearMonthBuilder",{enumerable:!0,get:function(){return T.IntervalYearMonthBuilder}});var k=r(8877);Object.defineProperty(t,"DurationBuilder",{enumerable:!0,get:function(){return k.DurationBuilder}}),Object.defineProperty(t,"DurationSecondBuilder",{enumerable:!0,get:function(){return k.DurationSecondBuilder}}),Object.defineProperty(t,"DurationMillisecondBuilder",{enumerable:!0,get:function(){return k.DurationMillisecondBuilder}}),Object.defineProperty(t,"DurationMicrosecondBuilder",{enumerable:!0,get:function(){return k.DurationMicrosecondBuilder}}),Object.defineProperty(t,"DurationNanosecondBuilder",{enumerable:!0,get:function(){return k.DurationNanosecondBuilder}});var E=r(2458);Object.defineProperty(t,"Utf8Builder",{enumerable:!0,get:function(){return E.Utf8Builder}});var A=r(6913);Object.defineProperty(t,"LargeUtf8Builder",{enumerable:!0,get:function(){return A.LargeUtf8Builder}});var P=r(1516);Object.defineProperty(t,"BinaryBuilder",{enumerable:!0,get:function(){return P.BinaryBuilder}});var C=r(7535);Object.defineProperty(t,"LargeBinaryBuilder",{enumerable:!0,get:function(){return C.LargeBinaryBuilder}});var M=r(9165);Object.defineProperty(t,"ListBuilder",{enumerable:!0,get:function(){return M.ListBuilder}});var O=r(5569);Object.defineProperty(t,"FixedSizeListBuilder",{enumerable:!0,get:function(){return O.FixedSizeListBuilder}});var R=r(5671);Object.defineProperty(t,"MapBuilder",{enumerable:!0,get:function(){return R.MapBuilder}});var B=r(2296);Object.defineProperty(t,"StructBuilder",{enumerable:!0,get:function(){return B.StructBuilder}});var D=r(6590);Object.defineProperty(t,"UnionBuilder",{enumerable:!0,get:function(){return D.UnionBuilder}}),Object.defineProperty(t,"SparseUnionBuilder",{enumerable:!0,get:function(){return D.SparseUnionBuilder}}),Object.defineProperty(t,"DenseUnionBuilder",{enumerable:!0,get:function(){return D.DenseUnionBuilder}});var z=r(7020);Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return z.ByteStream}}),Object.defineProperty(t,"AsyncByteStream",{enumerable:!0,get:function(){return z.AsyncByteStream}}),Object.defineProperty(t,"AsyncByteQueue",{enumerable:!0,get:function(){return z.AsyncByteQueue}});var L=r(5337);Object.defineProperty(t,"RecordBatchReader",{enumerable:!0,get:function(){return L.RecordBatchReader}}),Object.defineProperty(t,"RecordBatchFileReader",{enumerable:!0,get:function(){return L.RecordBatchFileReader}}),Object.defineProperty(t,"RecordBatchStreamReader",{enumerable:!0,get:function(){return L.RecordBatchStreamReader}}),Object.defineProperty(t,"AsyncRecordBatchFileReader",{enumerable:!0,get:function(){return L.AsyncRecordBatchFileReader}}),Object.defineProperty(t,"AsyncRecordBatchStreamReader",{enumerable:!0,get:function(){return L.AsyncRecordBatchStreamReader}});var F=r(7253);Object.defineProperty(t,"RecordBatchWriter",{enumerable:!0,get:function(){return F.RecordBatchWriter}}),Object.defineProperty(t,"RecordBatchFileWriter",{enumerable:!0,get:function(){return F.RecordBatchFileWriter}}),Object.defineProperty(t,"RecordBatchStreamWriter",{enumerable:!0,get:function(){return F.RecordBatchStreamWriter}}),Object.defineProperty(t,"RecordBatchJSONWriter",{enumerable:!0,get:function(){return F.RecordBatchJSONWriter}});var N=r(7452);Object.defineProperty(t,"tableToIPC",{enumerable:!0,get:function(){return N.tableToIPC}}),Object.defineProperty(t,"tableFromIPC",{enumerable:!0,get:function(){return N.tableFromIPC}});var j=r(2083);Object.defineProperty(t,"MessageReader",{enumerable:!0,get:function(){return j.MessageReader}}),Object.defineProperty(t,"AsyncMessageReader",{enumerable:!0,get:function(){return j.AsyncMessageReader}}),Object.defineProperty(t,"JSONMessageReader",{enumerable:!0,get:function(){return j.JSONMessageReader}});var U=r(2227);Object.defineProperty(t,"Message",{enumerable:!0,get:function(){return U.Message}});var V=r(2618);Object.defineProperty(t,"RecordBatch",{enumerable:!0,get:function(){return V.RecordBatch}});const $=r(5420),W=r(11),H=r(1849),G=r(8086),q=r(5954),Z=r(6367),X=r(5564),Y=r(4853);t.util=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$),W),H),G),q),Z),X),{compareSchemas:Y.compareSchemas,compareFields:Y.compareFields,compareTypes:Y.compareTypes})},9446:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VariableWidthBuilder=t.FixedWidthBuilder=t.Builder=void 0;const i=r(8210),n=r(9061),o=r(5200),a=r(2741),s=r(3215),l=r(2231);class c{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}constructor(e){let{type:t,nullValues:r}=e;this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=r,this.stride=(0,a.strideForType)(t),this._nulls=new l.BitmapBufferBuilder,r&&r.length>0&&(this._isValid=(0,s.createIsValidFunction)(r))}toVector(){return new i.Vector([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:t,_values:r,_nulls:i,_typeIds:n,children:o}=this;return t&&(e+=t.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),n&&(e+=n.byteLength),o.reduce(((e,t)=>e+t.byteLength),e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce(((e,t)=>e+t.reservedByteLength),e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,t){return this.setValid(e,this.isValid(t))&&this.setValue(e,t),this}setValue(e,t){this._setValue(this,e,t)}setValid(e,t){return this.length=this._nulls.set(e,+t).length,t}addChild(e){arguments.length>1&&void 0!==arguments[1]||this.numChildren;throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,t,r,i;const{type:o,length:a,nullCount:s,_typeIds:l,_offsets:c,_values:u,_nulls:d}=this;(t=null===l||void 0===l?void 0:l.flush(a))?i=null===c||void 0===c?void 0:c.flush(a):e=(i=null===c||void 0===c?void 0:c.flush(a))?null===u||void 0===u?void 0:u.flush(c.last()):null===u||void 0===u?void 0:u.flush(a),s>0&&(r=null===d||void 0===d?void 0:d.flush(a));const h=this.children.map((e=>e.flush()));return this.clear(),(0,n.makeData)({type:o,length:a,nullCount:s,children:h,child:h[0],data:e,typeIds:t,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,t,r,i;this.length=0,null===(e=this._nulls)||void 0===e||e.clear(),null===(t=this._values)||void 0===t||t.clear(),null===(r=this._offsets)||void 0===r||r.clear(),null===(i=this._typeIds)||void 0===i||i.clear();for(const n of this.children)n.clear();return this}}t.Builder=c,c.prototype.length=1,c.prototype.stride=1,c.prototype.children=null,c.prototype.finished=!1,c.prototype.nullValues=null,c.prototype._isValid=()=>!0;t.FixedWidthBuilder=class extends c{constructor(e){super(e),this._values=new l.DataBufferBuilder(this.ArrayType,0,this.stride)}setValue(e,t){const r=this._values;return r.reserve(e-r.length+1),super.setValue(e,t)}};t.VariableWidthBuilder=class extends c{constructor(e){super(e),this._pendingLength=0,this._offsets=new l.OffsetsBufferBuilder(e.type)}setValue(e,t){const r=this._pending||(this._pending=new Map),i=r.get(e);i&&(this._pendingLength-=i.length),this._pendingLength+=t instanceof o.MapRow?t[o.kKeys].length:t.length,r.set(e,t)}setValid(e,t){return!!super.setValid(e,t)||((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,t=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,t),this}}},1516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryBuilder=void 0;const i=r(2231),n=r(9446),o=r(5954);class a extends n.VariableWidthBuilder{constructor(e){super(e),this._values=new i.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,(0,o.toUint8Array)(t))}_flushPending(e,t){const r=this._offsets,i=this._values.reserve(t).buffer;let n=0;for(const[o,a]of e)if(void 0===a)r.set(o,0);else{const e=a.length;i.set(a,n),r.set(o,e),n+=e}}}t.BinaryBuilder=a},6205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoolBuilder=void 0;const i=r(2231),n=r(9446);class o extends n.Builder{constructor(e){super(e),this._values=new i.BitmapBufferBuilder}setValue(e,t){this._values.set(e,+t)}}t.BoolBuilder=o},2231:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OffsetsBufferBuilder=t.BitmapBufferBuilder=t.DataBufferBuilder=t.BufferBuilder=void 0;const i=r(5954);function n(e,t){const r=Math.ceil(e)*t-1;return(r-r%64+64||64)/t}function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.length>=t?e.subarray(0,t):(0,i.memcpy)(new e.constructor(t),e,0)}class a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.length=Math.ceil(t/r),this.buffer=new e(this.length),this.stride=r,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,t){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const t=this.stride,r=this.length*t,i=this.buffer.length;r>=i&&this._resize(n(0===i?1*r:2*r,this.BYTES_PER_ELEMENT))}return this}flush(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;e=n(e*this.stride,this.BYTES_PER_ELEMENT);const t=o(this.buffer,e);return this.clear(),t}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(e){return this.buffer=o(this.buffer,e)}}t.BufferBuilder=a;class s extends a{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,t){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=t,this}}t.DataBufferBuilder=s;t.BitmapBufferBuilder=class extends s{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,t){const{buffer:r}=this.reserve(e-this.length+1),i=e>>3,n=e%8,o=r[i]>>n&1;return t?0===o&&(r[i]|=1<<n,++this.numValid):1===o&&(r[i]&=~(1<<n),--this.numValid),this}clear(){return this.numValid=0,super.clear()}};t.OffsetsBufferBuilder=class extends s{constructor(e){super(e.OffsetArrayType,1,1)}append(e){return this.set(this.length-1,e)}set(e,t){const r=this.length-1,i=this.reserve(e-r+1).buffer;return r<e++&&r>=0&&i.fill(i[r],r,e),i[e]=i[e-1]+t,this}flush(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length-1;return e>this.length&&this.set(e-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(e+1)}}},8949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DateMillisecondBuilder=t.DateDayBuilder=t.DateBuilder=void 0;const i=r(9446),n=r(7976);class o extends i.FixedWidthBuilder{}t.DateBuilder=o,o.prototype._setValue=n.setDate;class a extends o{}t.DateDayBuilder=a,a.prototype._setValue=n.setDateDay;class s extends o{}t.DateMillisecondBuilder=s,s.prototype._setValue=n.setDateMillisecond},6086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DecimalBuilder=void 0;const i=r(9446),n=r(7976);class o extends i.FixedWidthBuilder{}t.DecimalBuilder=o,o.prototype._setValue=n.setDecimal},2709:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DictionaryBuilder=void 0;const i=r(2741),n=r(9446),o=r(2327);class a extends n.Builder{constructor(e){let{type:t,nullValues:r,dictionaryHashFunction:n}=e;super({type:new i.Dictionary(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=(0,o.makeBuilder)({type:this.type.indices,nullValues:r}),this.dictionary=(0,o.makeBuilder)({type:this.type.dictionary,nullValues:null}),"function"===typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,t){const r=this.indices;return t=r.setValid(e,t),this.length=r.length,t}setValue(e,t){const r=this._keysToIndices,i=this.valueToKey(t);let n=r[i];return void 0===n&&(r[i]=n=this._dictionaryOffset+this.dictionary.append(t).length-1),this.indices.setValue(e,n)}flush(){const e=this.type,t=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(e);return i.dictionary=t?t.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return"string"===typeof e?e:`${e}`}}t.DictionaryBuilder=a},8877:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DurationNanosecondBuilder=t.DurationMicrosecondBuilder=t.DurationMillisecondBuilder=t.DurationSecondBuilder=t.DurationBuilder=void 0;const i=r(9446),n=r(7976);class o extends i.FixedWidthBuilder{}t.DurationBuilder=o,o.prototype._setValue=n.setDuration;class a extends o{}t.DurationSecondBuilder=a,a.prototype._setValue=n.setDurationSecond;class s extends o{}t.DurationMillisecondBuilder=s,s.prototype._setValue=n.setDurationMillisecond;class l extends o{}t.DurationMicrosecondBuilder=l,l.prototype._setValue=n.setDurationMicrosecond;class c extends o{}t.DurationNanosecondBuilder=c,c.prototype._setValue=n.setDurationNanosecond},4375:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedSizeBinaryBuilder=void 0;const i=r(9446),n=r(7976);class o extends i.FixedWidthBuilder{}t.FixedSizeBinaryBuilder=o,o.prototype._setValue=n.setFixedSizeBinary},5569:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedSizeListBuilder=void 0;const i=r(1598),n=r(9446),o=r(2741);class a extends n.Builder{setValue(e,t){const[r]=this.children,i=e*this.stride;for(let n=-1,o=t.length;++n<o;)r.set(i+n,t[n])}addChild(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(e);return this.type=new o.FixedSizeList(this.type.listSize,new i.Field(t,e.type,!0)),r}}t.FixedSizeListBuilder=a},6979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Float64Builder=t.Float32Builder=t.Float16Builder=t.FloatBuilder=void 0;const i=r(8086),n=r(9446);class o extends n.FixedWidthBuilder{setValue(e,t){this._values.set(e,t)}}t.FloatBuilder=o;t.Float16Builder=class extends o{setValue(e,t){super.setValue(e,(0,i.float64ToUint16)(t))}};t.Float32Builder=class extends o{};t.Float64Builder=class extends o{}},420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Uint64Builder=t.Uint32Builder=t.Uint16Builder=t.Uint8Builder=t.Int64Builder=t.Int32Builder=t.Int16Builder=t.Int8Builder=t.IntBuilder=void 0;const i=r(9446);class n extends i.FixedWidthBuilder{setValue(e,t){this._values.set(e,t)}}t.IntBuilder=n;t.Int8Builder=class extends n{};t.Int16Builder=class extends n{};t.Int32Builder=class extends n{};t.Int64Builder=class extends n{};t.Uint8Builder=class extends n{};t.Uint16Builder=class extends n{};t.Uint32Builder=class extends n{};t.Uint64Builder=class extends n{}},392:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntervalYearMonthBuilder=t.IntervalDayTimeBuilder=t.IntervalBuilder=void 0;const i=r(9446),n=r(7976);class o extends i.FixedWidthBuilder{}t.IntervalBuilder=o,o.prototype._setValue=n.setIntervalValue;class a extends o{}t.IntervalDayTimeBuilder=a,a.prototype._setValue=n.setIntervalDayTime;class s extends o{}t.IntervalYearMonthBuilder=s,s.prototype._setValue=n.setIntervalYearMonth},7535:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LargeBinaryBuilder=void 0;const i=r(5954),n=r(2231),o=r(9446);class a extends o.VariableWidthBuilder{constructor(e){super(e),this._values=new n.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,(0,i.toUint8Array)(t))}_flushPending(e,t){const r=this._offsets,i=this._values.reserve(t).buffer;let n=0;for(const[o,a]of e)if(void 0===a)r.set(o,BigInt(0));else{const e=a.length;i.set(a,n),r.set(o,BigInt(e)),n+=e}}}t.LargeBinaryBuilder=a},6913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LargeUtf8Builder=void 0;const i=r(4779),n=r(2231),o=r(9446),a=r(7535);class s extends o.VariableWidthBuilder{constructor(e){super(e),this._values=new n.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,(0,i.encodeUtf8)(t))}_flushPending(e,t){}}t.LargeUtf8Builder=s,s.prototype._flushPending=a.LargeBinaryBuilder.prototype._flushPending},9165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListBuilder=void 0;const i=r(1598),n=r(2741),o=r(2231),a=r(9446);class s extends a.VariableWidthBuilder{constructor(e){super(e),this._offsets=new o.OffsetsBufferBuilder(e.type)}addChild(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new n.List(new i.Field(t,e.type,!0)),this.numChildren-1}_flushPending(e){const t=this._offsets,[r]=this.children;for(const[i,n]of e)if("undefined"===typeof n)t.set(i,0);else{const e=n,o=e.length,a=t.set(i,o).buffer[i];for(let t=-1;++t<o;)r.set(a+t,e[t])}}}t.ListBuilder=s},5671:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapBuilder=void 0;const i=r(1598),n=r(2741),o=r(9446);class a extends o.VariableWidthBuilder{set(e,t){return super.set(e,t)}setValue(e,t){const r=t instanceof Map?t:new Map(Object.entries(t)),i=this._pending||(this._pending=new Map),n=i.get(e);n&&(this._pendingLength-=n.size),this._pendingLength+=r.size,i.set(e,r)}addChild(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`${this.numChildren}`;if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new n.Map_(new i.Field(t,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const t=this._offsets,[r]=this.children;for(const[i,n]of e)if(void 0===n)t.set(i,0);else{let{[i]:e,[i+1]:o}=t.set(i,n.size).buffer;for(const t of n.entries())if(r.set(e,t),++e>=o)break}}}t.MapBuilder=a},5404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NullBuilder=void 0;const i=r(9446);class n extends i.Builder{setValue(e,t){}setValid(e,t){return this.length=Math.max(e+1,this.length),t}}t.NullBuilder=n},2296:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StructBuilder=void 0;const i=r(1598),n=r(9446),o=r(2741);class a extends n.Builder{setValue(e,t){const{children:r,type:i}=this;switch(Array.isArray(t)||t.constructor){case!0:return i.children.forEach(((i,n)=>r[n].set(e,t[n])));case Map:return i.children.forEach(((i,n)=>r[n].set(e,t.get(i.name))));default:return i.children.forEach(((i,n)=>r[n].set(e,t[i.name])))}}setValid(e,t){return super.setValid(e,t)||this.children.forEach((r=>r.setValid(e,t))),t}addChild(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`${this.numChildren}`;const r=this.children.push(e);return this.type=new o.Struct([...this.type.children,new i.Field(t,e.type,!0)]),r}}t.StructBuilder=a},5084:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeNanosecondBuilder=t.TimeMicrosecondBuilder=t.TimeMillisecondBuilder=t.TimeSecondBuilder=t.TimeBuilder=void 0;const i=r(9446),n=r(7976);class o extends i.FixedWidthBuilder{}t.TimeBuilder=o,o.prototype._setValue=n.setTime;class a extends o{}t.TimeSecondBuilder=a,a.prototype._setValue=n.setTimeSecond;class s extends o{}t.TimeMillisecondBuilder=s,s.prototype._setValue=n.setTimeMillisecond;class l extends o{}t.TimeMicrosecondBuilder=l,l.prototype._setValue=n.setTimeMicrosecond;class c extends o{}t.TimeNanosecondBuilder=c,c.prototype._setValue=n.setTimeNanosecond},1265:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampNanosecondBuilder=t.TimestampMicrosecondBuilder=t.TimestampMillisecondBuilder=t.TimestampSecondBuilder=t.TimestampBuilder=void 0;const i=r(9446),n=r(7976);class o extends i.FixedWidthBuilder{}t.TimestampBuilder=o,o.prototype._setValue=n.setTimestamp;class a extends o{}t.TimestampSecondBuilder=a,a.prototype._setValue=n.setTimestampSecond;class s extends o{}t.TimestampMillisecondBuilder=s,s.prototype._setValue=n.setTimestampMillisecond;class l extends o{}t.TimestampMicrosecondBuilder=l,l.prototype._setValue=n.setTimestampMicrosecond;class c extends o{}t.TimestampNanosecondBuilder=c,c.prototype._setValue=n.setTimestampNanosecond},6590:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DenseUnionBuilder=t.SparseUnionBuilder=t.UnionBuilder=void 0;const i=r(1598),n=r(2231),o=r(9446),a=r(2741);class s extends o.Builder{constructor(e){super(e),this._typeIds=new n.DataBufferBuilder(Int8Array,0,1),"function"===typeof e.valueToChildTypeId&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,t){return this.set(this.length,e,t)}set(e,t,r){return void 0===r&&(r=this._valueToChildTypeId(this,t,e)),this.setValue(e,t,r),this}setValue(e,t,r){this._typeIds.set(e,r);const i=this.type.typeIdToChildIndex[r],n=this.children[i];null===n||void 0===n||n.set(e,t)}addChild(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`${this.children.length}`;const r=this.children.push(e),{type:{children:n,mode:o,typeIds:s}}=this,l=[...n,new i.Field(t,e.type)];return this.type=new a.Union(o,[...s,r],l),r}_valueToChildTypeId(e,t,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}t.UnionBuilder=s;t.SparseUnionBuilder=class extends s{};t.DenseUnionBuilder=class extends s{constructor(e){super(e),this._offsets=new n.DataBufferBuilder(Int32Array)}setValue(e,t,r){const i=this._typeIds.set(e,r).buffer[e],n=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(e,n.length).buffer[e];null===n||void 0===n||n.set(o,t)}}},2458:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8Builder=void 0;const i=r(4779),n=r(1516),o=r(2231),a=r(9446);class s extends a.VariableWidthBuilder{constructor(e){super(e),this._values=new o.BufferBuilder(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,(0,i.encodeUtf8)(t))}_flushPending(e,t){}}t.Utf8Builder=s,s.prototype._flushPending=n.BinaryBuilder.prototype._flushPending},3215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createIsValidFunction=void 0;const i=r(5564);t.createIsValidFunction=function(e){if(!e||e.length<=0)return function(e){return!0};let t="";const r=e.filter((e=>e===e));return r.length>0&&(t=`\n    switch (x) {${r.map((e=>`\n        case ${function(e){if("bigint"!==typeof e)return(0,i.valueToString)(e);return`${(0,i.valueToString)(e)}n`}(e)}:`)).join("")}\n            return false;\n    }`),e.length!==r.length&&(t=`if (x !== x) return false;\n${t}`),new Function("x",`${t}\nreturn true;`)}},9061:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeData=t.Data=t.kUnknownNullCount=void 0;const i=r(8210),n=r(1336),o=r(2741),a=r(1849);t.kUnknownNullCount=-1;class s{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(0!==this._nullCount){const{type:e}=this;return o.DataType.isSparseUnion(e)||o.DataType.isDenseUnion(e)?this.children.some((e=>e.nullable)):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:t,values:r,nullBitmap:i,typeIds:n}=this;return t&&(e+=t.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),n&&(e+=n.byteLength),this.children.reduce(((e,t)=>e+t.byteLength),e)}get nullCount(){if(o.DataType.isUnion(this.type))return this.children.reduce(((e,t)=>e+t.nullCount),0);let e,r=this._nullCount;return r<=t.kUnknownNullCount&&(e=this.nullBitmap)&&(this._nullCount=r=0===e.length?0:this.length-(0,a.popcnt_bit_range)(e,this.offset,this.offset+this.length)),r}constructor(e,t,r,i,n){let a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=arguments.length>6?arguments[6]:void 0;this.type=e,this.children=l,this.dictionary=c,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),n instanceof s?(this.stride=n.stride,this.values=n.values,this.typeIds=n.typeIds,this.nullBitmap=n.nullBitmap,this.valueOffsets=n.valueOffsets):(this.stride=(0,o.strideForType)(e),n&&((a=n[0])&&(this.valueOffsets=a),(a=n[1])&&(this.values=a),(a=n[2])&&(this.nullBitmap=a),(a=n[3])&&(this.typeIds=a)))}getValid(e){const{type:t}=this;if(o.DataType.isUnion(t)){const r=t,i=this.children[r.typeIdToChildIndex[this.typeIds[e]]],o=r.mode===n.UnionMode.Dense?this.valueOffsets[e]:e;return i.getValid(o)}if(this.nullable&&this.nullCount>0){const t=this.offset+e;return 0!==(this.nullBitmap[t>>3]&1<<t%8)}return!0}setValid(e,t){let r;const{type:i}=this;if(o.DataType.isUnion(i)){const o=i,a=this.children[o.typeIdToChildIndex[this.typeIds[e]]],s=o.mode===n.UnionMode.Dense?this.valueOffsets[e]:e;r=a.getValid(s),a.setValid(s,t)}else{let{nullBitmap:i}=this;const{offset:n,length:o}=this,s=n+e,l=1<<s%8,c=s>>3;(!i||i.byteLength<=c)&&(i=new Uint8Array((n+o+63&-64)>>3).fill(255),this.nullCount>0?(i.set((0,a.truncateBitmap)(n,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:i})):Object.assign(this,{nullBitmap:i,_nullCount:0}));const u=i[c];r=0!==(u&l),i[c]=t?u|l:u&~l}return r!==!!t&&(this._nullCount=this.nullCount+(t?-1:1)),t}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.children;return new s(e,t,r,i,n,o,this.dictionary)}slice(e,t){const{stride:r,typeId:i,children:n}=this,o=+(0===this._nullCount)-1,a=16===i?r:1,s=this._sliceBuffers(e,t,r,i);return this.clone(this.type,this.offset+e,t,o,s,0===n.length||this.valueOffsets?n:this._sliceChildren(n,a*e,a*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===n.Type.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:r}=this,i=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);i[t>>3]=(1<<t-(-8&t))-1,r>0&&i.set((0,a.truncateBitmap)(this.offset,t,this.nullBitmap),0);const o=this.buffers;return o[n.BufferType.VALIDITY]=i,this.clone(this.type,0,e,r+(e-t),o)}_sliceBuffers(e,t,r,i){let o;const{buffers:a}=this;return(o=a[n.BufferType.TYPE])&&(a[n.BufferType.TYPE]=o.subarray(e,e+t)),(o=a[n.BufferType.OFFSET])&&(a[n.BufferType.OFFSET]=o.subarray(e,e+t+1))||(o=a[n.BufferType.DATA])&&(a[n.BufferType.DATA]=6===i?o:o.subarray(r*e,r*(e+t))),a}_sliceChildren(e,t,r){return e.map((e=>e.slice(t,r)))}}t.Data=s,s.prototype.children=Object.freeze([]);const l=r(2239),c=r(5954);class u extends l.Visitor{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{type:t,offset:r=0,length:i=0}=e;return new s(t,r,i,i)}visitBool(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:o=n.length>>3,nullCount:a=(e.nullBitmap?-1:0)}=e;return new s(t,r,o,a,[void 0,n,i])}visitInt(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:o=n.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new s(t,r,o,a,[void 0,n,i])}visitFloat(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:o=n.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new s(t,r,o,a,[void 0,n,i])}visitUtf8(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.data),n=(0,c.toUint8Array)(e.nullBitmap),o=(0,c.toInt32Array)(e.valueOffsets),{length:a=o.length-1,nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[o,i,n])}visitLargeUtf8(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.data),n=(0,c.toUint8Array)(e.nullBitmap),o=(0,c.toBigInt64Array)(e.valueOffsets),{length:a=o.length-1,nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[o,i,n])}visitBinary(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.data),n=(0,c.toUint8Array)(e.nullBitmap),o=(0,c.toInt32Array)(e.valueOffsets),{length:a=o.length-1,nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[o,i,n])}visitLargeBinary(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.data),n=(0,c.toUint8Array)(e.nullBitmap),o=(0,c.toBigInt64Array)(e.valueOffsets),{length:a=o.length-1,nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[o,i,n])}visitFixedSizeBinary(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:a=n.length/(0,o.strideForType)(t),nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[void 0,n,i])}visitDate(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:a=n.length/(0,o.strideForType)(t),nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[void 0,n,i])}visitTimestamp(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:a=n.length/(0,o.strideForType)(t),nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[void 0,n,i])}visitTime(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:a=n.length/(0,o.strideForType)(t),nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[void 0,n,i])}visitDecimal(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:a=n.length/(0,o.strideForType)(t),nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[void 0,n,i])}visitList(e){const{type:t,offset:r=0,child:i}=e,n=(0,c.toUint8Array)(e.nullBitmap),o=(0,c.toInt32Array)(e.valueOffsets),{length:a=o.length-1,nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[o,void 0,n],[i])}visitStruct(e){const{type:t,offset:r=0,children:i=[]}=e,n=(0,c.toUint8Array)(e.nullBitmap),{length:o=i.reduce(((e,t)=>{let{length:r}=t;return Math.max(e,r)}),0),nullCount:a=(e.nullBitmap?-1:0)}=e;return new s(t,r,o,a,[void 0,void 0,n],i)}visitUnion(e){const{type:t,offset:r=0,children:i=[]}=e,n=(0,c.toArrayBufferView)(t.ArrayType,e.typeIds),{length:a=n.length,nullCount:l=-1}=e;if(o.DataType.isSparseUnion(t))return new s(t,r,a,l,[void 0,void 0,void 0,n],i);const u=(0,c.toInt32Array)(e.valueOffsets);return new s(t,r,a,l,[u,void 0,void 0,n],i)}visitDictionary(e){const{type:t,offset:r=0}=e,n=(0,c.toUint8Array)(e.nullBitmap),o=(0,c.toArrayBufferView)(t.indices.ArrayType,e.data),{dictionary:a=new i.Vector([(new u).visit({type:t.dictionary})])}=e,{length:l=o.length,nullCount:d=(e.nullBitmap?-1:0)}=e;return new s(t,r,l,d,[void 0,o,n],[],a)}visitInterval(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:a=n.length/(0,o.strideForType)(t),nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[void 0,n,i])}visitDuration(e){const{type:t,offset:r=0}=e,i=(0,c.toUint8Array)(e.nullBitmap),n=(0,c.toArrayBufferView)(t.ArrayType,e.data),{length:o=n.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new s(t,r,o,a,[void 0,n,i])}visitFixedSizeList(e){const{type:t,offset:r=0,child:i=(new u).visit({type:t.valueType})}=e,n=(0,c.toUint8Array)(e.nullBitmap),{length:a=i.length/(0,o.strideForType)(t),nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[void 0,void 0,n],[i])}visitMap(e){const{type:t,offset:r=0,child:i=(new u).visit({type:t.childType})}=e,n=(0,c.toUint8Array)(e.nullBitmap),o=(0,c.toInt32Array)(e.valueOffsets),{length:a=o.length-1,nullCount:l=(e.nullBitmap?-1:0)}=e;return new s(t,r,a,l,[o,void 0,n],[i])}}const d=new u;t.makeData=function(e){return d.visit(e)}},1336:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferType=t.Type=t.MessageHeader=t.IntervalUnit=t.TimeUnit=t.DateUnit=t.Precision=t.UnionMode=t.MetadataVersion=void 0;var i=r(6964);Object.defineProperty(t,"MetadataVersion",{enumerable:!0,get:function(){return i.MetadataVersion}});var n=r(9609);Object.defineProperty(t,"UnionMode",{enumerable:!0,get:function(){return n.UnionMode}});var o=r(1186);Object.defineProperty(t,"Precision",{enumerable:!0,get:function(){return o.Precision}});var a=r(1571);Object.defineProperty(t,"DateUnit",{enumerable:!0,get:function(){return a.DateUnit}});var s=r(6800);Object.defineProperty(t,"TimeUnit",{enumerable:!0,get:function(){return s.TimeUnit}});var l=r(2032);Object.defineProperty(t,"IntervalUnit",{enumerable:!0,get:function(){return l.IntervalUnit}});var c,u,d=r(8891);Object.defineProperty(t,"MessageHeader",{enumerable:!0,get:function(){return d.MessageHeader}}),function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"}(c||(t.Type=c={})),function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"}(u||(t.BufferType=u={}))},2327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.builderThroughAsyncIterable=t.builderThroughIterable=t.tableFromJSON=t.vectorFromArray=t.makeBuilder=void 0;const i=r(6326),n=r(1598),o=r(2741),a=r(9061),s=r(8210),l=r(9657),c=r(2817),u=r(2618),d=r(4853);function h(e){const t=e.type,r=new(l.instance.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const i=e.children||[],n={nullValues:e.nullValues},o=Array.isArray(i)?(e,t)=>i[t]||n:e=>{let{name:t}=e;return i[t]||n};for(const[e,a]of t.children.entries()){const{type:t}=a,i=o(a,e);r.children.push(h(Object.assign(Object.assign({},i),{type:t})))}}return r}function p(e,t){if(e instanceof a.Data||e instanceof s.Vector||e.type instanceof o.DataType||ArrayBuffer.isView(e))return(0,s.makeVector)(e);const r=[...m({type:null!==t&&void 0!==t?t:f(e),nullValues:[null]})(e)],i=1===r.length?r[0]:r.reduce(((e,t)=>e.concat(t)));return o.DataType.isDictionary(i.type)?i.memoize():i}function f(e){if(0===e.length)return new o.Null;let t=0,r=0,i=0,a=0,s=0,l=0,c=0,u=0;for(const n of e){if(null!=n){switch(typeof n){case"bigint":++l;continue;case"boolean":++c;continue;case"number":++a;continue;case"string":++s;continue;case"object":Array.isArray(n)?++r:"[object Date]"===Object.prototype.toString.call(n)?++u:++i;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}++t}if(a+t===e.length)return new o.Float64;if(s+t===e.length)return new o.Dictionary(new o.Utf8,new o.Int32);if(l+t===e.length)return new o.Int64;if(c+t===e.length)return new o.Bool;if(u+t===e.length)return new o.TimestampMillisecond;if(r+t===e.length){const t=e,r=f(t[t.findIndex((e=>null!=e))]);if(t.every((e=>null==e||(0,d.compareTypes)(r,f(e)))))return new o.List(new n.Field("",r,!0))}else if(i+t===e.length){const t=new Map;for(const r of e)for(const e of Object.keys(r))t.has(e)||null==r[e]||t.set(e,new n.Field(e,f([r[e]]),!0));return new o.Struct([...t.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function m(e){const{queueingStrategy:t="count"}=e,{highWaterMark:r=("bytes"!==t?Number.POSITIVE_INFINITY:Math.pow(2,14))}=e,i="bytes"!==t?"length":"byteLength";return function*(t){let n=0;const o=h(e);for(const e of t)o.append(e)[i]>=r&&++n&&(yield o.toVector());(o.finish().length>0||0===n)&&(yield o.toVector())}}t.makeBuilder=h,t.vectorFromArray=p,t.tableFromJSON=function(e){const t=p(e),r=new u.RecordBatch(new n.Schema(t.type.children),t.data[0]);return new c.Table(r)},t.builderThroughIterable=m,t.builderThroughAsyncIterable=function(e){const{queueingStrategy:t="count"}=e,{highWaterMark:r=("bytes"!==t?Number.POSITIVE_INFINITY:Math.pow(2,14))}=e,n="bytes"!==t?"length":"byteLength";return function(t){return i.__asyncGenerator(this,arguments,(function*(){var o,a,s,l;let c=0;const u=h(e);try{for(var d,p=!0,f=i.__asyncValues(t);!(o=(d=yield i.__await(f.next())).done);p=!0){l=d.value,p=!1;const e=l;u.append(e)[n]>=r&&++c&&(yield yield i.__await(u.toVector()))}}catch(m){a={error:m}}finally{try{p||o||!(s=f.return)||(yield i.__await(s.call(f)))}finally{if(a)throw a.error}}(u.finish().length>0||0===c)&&(yield yield i.__await(u.toVector()))}))}}},5285:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Binary=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return n.startBinary(e),n.endBinary(e)}}t.Binary=n},5727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Block=void 0;t.Block=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,r,i){return e.prep(8,24),e.writeInt64(BigInt(null!==i&&void 0!==i?i:0)),e.pad(4),e.writeInt32(r),e.writeInt64(BigInt(null!==t&&void 0!==t?t:0)),e.offset()}}},4337:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.BodyCompressionMethod=void 0,function(e){e[e.BUFFER=0]="BUFFER"}(r||(t.BodyCompressionMethod=r={}))},5855:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BodyCompression=void 0;const i=r(240),n=r(4337),o=r(9881);class a{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new a).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):o.CompressionType.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):n.BodyCompressionMethod.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,o.CompressionType.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,n.BodyCompressionMethod.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,r){return a.startBodyCompression(e),a.addCodec(e,t),a.addMethod(e,r),a.endBodyCompression(e)}}t.BodyCompression=a},7456:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bool=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return n.startBool(e),n.endBool(e)}}t.Bool=n},6382:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Buffer=void 0;t.Buffer=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,r){return e.prep(8,16),e.writeInt64(BigInt(null!==r&&void 0!==r?r:0)),e.writeInt64(BigInt(null!==t&&void 0!==t?t:0)),e.offset()}}},9881:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionType=void 0,function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"}(r||(t.CompressionType=r={}))},1571:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DateUnit=void 0,function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(r||(t.DateUnit=r={}))},9856:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Date=void 0;const i=r(240),n=r(1571);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.DateUnit.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,n.DateUnit.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return o.startDate(e),o.addUnit(e,t),o.endDate(e)}}t.Date=o},5865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Decimal=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,r,i){return n.startDecimal(e),n.addPrecision(e,t),n.addScale(e,r),n.addBitWidth(e,i),n.endDecimal(e)}}t.Decimal=n},7429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DictionaryBatch=void 0;const i=r(240),n=r(4260);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new n.RecordBatch).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}}t.DictionaryBatch=o},4756:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DictionaryEncoding=void 0;const i=r(240),n=r(2423),o=r(207);class a{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new a).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new o.Int).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):n.DictionaryKind.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,n.DictionaryKind.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}t.DictionaryEncoding=a},2423:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DictionaryKind=void 0,function(e){e[e.DenseArray=0]="DenseArray"}(r||(t.DictionaryKind=r={}))},2832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Duration=void 0;const i=r(240),n=r(6800);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDuration(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.TimeUnit.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,n.TimeUnit.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,t){return o.startDuration(e),o.addUnit(e,t),o.endDuration(e)}}t.Duration=o},3804:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Endianness=void 0,function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(r||(t.Endianness=r={}))},2591:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldNode=void 0;t.FieldNode=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,r){return e.prep(8,16),e.writeInt64(BigInt(null!==r&&void 0!==r?r:0)),e.writeInt64(BigInt(null!==t&&void 0!==t?t:0)),e.offset()}}},5770:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Field=void 0;const i=r(240),n=r(4756),o=r(1641),a=r(1276);class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):a.Type.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new n.DictionaryEncoding).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){const r=this.bb.__offset(this.bb_pos,14);return r?(t||new s).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,16);return r?(t||new o.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,a.Type.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}}t.Field=s},3136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedSizeBinary=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return n.startFixedSizeBinary(e),n.addByteWidth(e,t),n.endFixedSizeBinary(e)}}t.FixedSizeBinary=n},1017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FixedSizeList=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return n.startFixedSizeList(e),n.addListSize(e,t),n.endFixedSizeList(e)}}t.FixedSizeList=n},8809:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FloatingPoint=void 0;const i=r(240),n=r(1186);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.Precision.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,n.Precision.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return o.startFloatingPoint(e),o.addPrecision(e,t),o.endFloatingPoint(e)}}t.FloatingPoint=o},3955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Footer=void 0;const i=r(240),n=r(5727),o=r(1641),a=r(6964),s=r(3991);class l{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new l).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new l).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):a.MetadataVersion.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new s.Schema).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new n.Block).__init(this.bb.__vector(this.bb_pos+r)+24*e,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const r=this.bb.__offset(this.bb_pos,10);return r?(t||new n.Block).__init(this.bb.__vector(this.bb_pos+r)+24*e,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,12);return r?(t||new o.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,a.MetadataVersion.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}t.Footer=l},207:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Int=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,r){return n.startInt(e),n.addBitWidth(e,t),n.addIsSigned(e,r),n.endInt(e)}}t.Int=n},2032:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.IntervalUnit=void 0,function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(r||(t.IntervalUnit=r={}))},7497:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Interval=void 0;const i=r(240),n=r(2032);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.IntervalUnit.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,n.IntervalUnit.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return o.startInterval(e),o.addUnit(e,t),o.endInterval(e)}}t.Interval=o},1641:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyValue=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,r){return n.startKeyValue(e),n.addKey(e,t),n.addValue(e,r),n.endKeyValue(e)}}t.KeyValue=n},4131:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LargeBinary=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeBinary(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return n.startLargeBinary(e),n.endLargeBinary(e)}}t.LargeBinary=n},9426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LargeList=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeList(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeList(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startLargeList(e){e.startObject(0)}static endLargeList(e){return e.endObject()}static createLargeList(e){return n.startLargeList(e),n.endLargeList(e)}}t.LargeList=n},5669:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LargeUtf8=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeUtf8(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return n.startLargeUtf8(e),n.endLargeUtf8(e)}}t.LargeUtf8=n},4076:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.List=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return n.startList(e),n.endList(e)}}t.List=n},7540:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Map=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return n.startMap(e),n.addKeysSorted(e,t),n.endMap(e)}}t.Map=n},8891:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unionListToMessageHeader=t.unionToMessageHeader=t.MessageHeader=void 0;const i=r(7429),n=r(4260),o=r(3991),a=r(616),s=r(5769);var l;!function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"}(l||(t.MessageHeader=l={})),t.unionToMessageHeader=function(e,t){switch(l[e]){case"NONE":default:return null;case"Schema":return t(new o.Schema);case"DictionaryBatch":return t(new i.DictionaryBatch);case"RecordBatch":return t(new n.RecordBatch);case"Tensor":return t(new s.Tensor);case"SparseTensor":return t(new a.SparseTensor)}},t.unionListToMessageHeader=function(e,t,r){switch(l[e]){case"NONE":default:return null;case"Schema":return t(r,new o.Schema);case"DictionaryBatch":return t(r,new i.DictionaryBatch);case"RecordBatch":return t(r,new n.RecordBatch);case"Tensor":return t(r,new s.Tensor);case"SparseTensor":return t(r,new a.SparseTensor)}}},7721:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;const i=r(240),n=r(1641),o=r(8891),a=r(6964);class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):a.MetadataVersion.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):o.MessageHeader.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,12);return r?(t||new n.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,a.MetadataVersion.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,o.MessageHeader.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,r,i,n,o){return s.startMessage(e),s.addVersion(e,t),s.addHeaderType(e,r),s.addHeader(e,i),s.addBodyLength(e,n),s.addCustomMetadata(e,o),s.endMessage(e)}}t.Message=s},6964:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataVersion=void 0,function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(r||(t.MetadataVersion=r={}))},2205:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Null=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return n.startNull(e),n.endNull(e)}}t.Null=n},1186:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Precision=void 0,function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(r||(t.Precision=r={}))},4260:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecordBatch=void 0;const i=r(240),n=r(5855),o=r(6382),a=r(2591);class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new a.FieldNode).__init(this.bb.__vector(this.bb_pos+r)+16*e,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new o.Buffer).__init(this.bb.__vector(this.bb_pos+r)+16*e,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new n.BodyCompression).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}}t.RecordBatch=s},5588:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RunEndEncoded=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRunEndEncoded(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRunEndEncoded(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startRunEndEncoded(e){e.startObject(0)}static endRunEndEncoded(e){return e.endObject()}static createRunEndEncoded(e){return n.startRunEndEncoded(e),n.endRunEndEncoded(e)}}t.RunEndEncoded=n},3991:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Schema=void 0;const i=r(240),n=r(3804),o=r(5770),a=r(1641);class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.Endianness.Little}fields(e,t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new o.Field).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new a.KeyValue).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,n.Endianness.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,r,i,n){return s.startSchema(e),s.addEndianness(e,t),s.addFields(e,r),s.addCustomMetadata(e,i),s.addFeatures(e,n),s.endSchema(e)}}t.Schema=s},4400:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SparseMatrixCompressedAxis=void 0,function(e){e[e.Row=0]="Row",e[e.Column=1]="Column"}(r||(t.SparseMatrixCompressedAxis=r={}))},2410:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SparseMatrixIndexCSX=void 0;const i=r(240),n=r(6382),o=r(207),a=r(4400);class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSparseMatrixIndexCSX(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseMatrixIndexCSX(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}compressedAxis(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):a.SparseMatrixCompressedAxis.Row}indptrType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new o.Int).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}indptrBuffer(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new n.Buffer).__init(this.bb_pos+t,this.bb):null}indicesType(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new o.Int).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}indicesBuffer(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new n.Buffer).__init(this.bb_pos+t,this.bb):null}static startSparseMatrixIndexCSX(e){e.startObject(5)}static addCompressedAxis(e,t){e.addFieldInt16(0,t,a.SparseMatrixCompressedAxis.Row)}static addIndptrType(e,t){e.addFieldOffset(1,t,0)}static addIndptrBuffer(e,t){e.addFieldStruct(2,t,0)}static addIndicesType(e,t){e.addFieldOffset(3,t,0)}static addIndicesBuffer(e,t){e.addFieldStruct(4,t,0)}static endSparseMatrixIndexCSX(e){const t=e.endObject();return e.requiredField(t,6),e.requiredField(t,8),e.requiredField(t,10),e.requiredField(t,12),t}}t.SparseMatrixIndexCSX=s},1059:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SparseTensorIndexCOO=void 0;const i=r(240),n=r(6382),o=r(207);class a{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSparseTensorIndexCOO(e,t){return(t||new a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensorIndexCOO(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new a).__init(e.readInt32(e.position())+e.position(),e)}indicesType(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new o.Int).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}indicesStrides(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}indicesStridesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}indicesBuffer(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new n.Buffer).__init(this.bb_pos+t,this.bb):null}isCanonical(){const e=this.bb.__offset(this.bb_pos,10);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startSparseTensorIndexCOO(e){e.startObject(4)}static addIndicesType(e,t){e.addFieldOffset(0,t,0)}static addIndicesStrides(e,t){e.addFieldOffset(1,t,0)}static createIndicesStridesVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startIndicesStridesVector(e,t){e.startVector(8,t,8)}static addIndicesBuffer(e,t){e.addFieldStruct(2,t,0)}static addIsCanonical(e,t){e.addFieldInt8(3,+t,0)}static endSparseTensorIndexCOO(e){const t=e.endObject();return e.requiredField(t,4),e.requiredField(t,8),t}}t.SparseTensorIndexCOO=a},88:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SparseTensorIndexCSF=void 0;const i=r(240),n=r(6382),o=r(207);class a{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSparseTensorIndexCSF(e,t){return(t||new a).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensorIndexCSF(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new a).__init(e.readInt32(e.position())+e.position(),e)}indptrType(e){const t=this.bb.__offset(this.bb_pos,4);return t?(e||new o.Int).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}indptrBuffers(e,t){const r=this.bb.__offset(this.bb_pos,6);return r?(t||new n.Buffer).__init(this.bb.__vector(this.bb_pos+r)+16*e,this.bb):null}indptrBuffersLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}indicesType(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new o.Int).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}indicesBuffers(e,t){const r=this.bb.__offset(this.bb_pos,10);return r?(t||new n.Buffer).__init(this.bb.__vector(this.bb_pos+r)+16*e,this.bb):null}indicesBuffersLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}axisOrder(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}axisOrderLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}axisOrderArray(){const e=this.bb.__offset(this.bb_pos,12);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startSparseTensorIndexCSF(e){e.startObject(5)}static addIndptrType(e,t){e.addFieldOffset(0,t,0)}static addIndptrBuffers(e,t){e.addFieldOffset(1,t,0)}static startIndptrBuffersVector(e,t){e.startVector(16,t,8)}static addIndicesType(e,t){e.addFieldOffset(2,t,0)}static addIndicesBuffers(e,t){e.addFieldOffset(3,t,0)}static startIndicesBuffersVector(e,t){e.startVector(16,t,8)}static addAxisOrder(e,t){e.addFieldOffset(4,t,0)}static createAxisOrderVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startAxisOrderVector(e,t){e.startVector(4,t,4)}static endSparseTensorIndexCSF(e){const t=e.endObject();return e.requiredField(t,4),e.requiredField(t,6),e.requiredField(t,8),e.requiredField(t,10),e.requiredField(t,12),t}}t.SparseTensorIndexCSF=a},729:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unionListToSparseTensorIndex=t.unionToSparseTensorIndex=t.SparseTensorIndex=void 0;const i=r(2410),n=r(1059),o=r(88);var a;!function(e){e[e.NONE=0]="NONE",e[e.SparseTensorIndexCOO=1]="SparseTensorIndexCOO",e[e.SparseMatrixIndexCSX=2]="SparseMatrixIndexCSX",e[e.SparseTensorIndexCSF=3]="SparseTensorIndexCSF"}(a||(t.SparseTensorIndex=a={})),t.unionToSparseTensorIndex=function(e,t){switch(a[e]){case"NONE":default:return null;case"SparseTensorIndexCOO":return t(new n.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return t(new i.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return t(new o.SparseTensorIndexCSF)}},t.unionListToSparseTensorIndex=function(e,t,r){switch(a[e]){case"NONE":default:return null;case"SparseTensorIndexCOO":return t(r,new n.SparseTensorIndexCOO);case"SparseMatrixIndexCSX":return t(r,new i.SparseMatrixIndexCSX);case"SparseTensorIndexCSF":return t(r,new o.SparseTensorIndexCSF)}}},616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SparseTensor=void 0;const i=r(240),n=r(6382),o=r(729),a=r(3038),s=r(1276);class l{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSparseTensor(e,t){return(t||new l).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSparseTensor(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new l).__init(e.readInt32(e.position())+e.position(),e)}typeType(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):s.Type.NONE}type(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__union(e,this.bb_pos+t):null}shape(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new a.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}shapeLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}nonZeroLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}sparseIndexType(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint8(this.bb_pos+e):o.SparseTensorIndex.NONE}sparseIndex(e){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__union(e,this.bb_pos+t):null}data(e){const t=this.bb.__offset(this.bb_pos,16);return t?(e||new n.Buffer).__init(this.bb_pos+t,this.bb):null}static startSparseTensor(e){e.startObject(7)}static addTypeType(e,t){e.addFieldInt8(0,t,s.Type.NONE)}static addType(e,t){e.addFieldOffset(1,t,0)}static addShape(e,t){e.addFieldOffset(2,t,0)}static createShapeVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startShapeVector(e,t){e.startVector(4,t,4)}static addNonZeroLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addSparseIndexType(e,t){e.addFieldInt8(4,t,o.SparseTensorIndex.NONE)}static addSparseIndex(e,t){e.addFieldOffset(5,t,0)}static addData(e,t){e.addFieldStruct(6,t,0)}static endSparseTensor(e){const t=e.endObject();return e.requiredField(t,6),e.requiredField(t,8),e.requiredField(t,14),e.requiredField(t,16),t}static finishSparseTensorBuffer(e,t){e.finish(t)}static finishSizePrefixedSparseTensorBuffer(e,t){e.finish(t,void 0,!0)}}t.SparseTensor=l},6978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Struct_=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return n.startStruct_(e),n.endStruct_(e)}}t.Struct_=n},3038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TensorDim=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTensorDim(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensorDim(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}size(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}name(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTensorDim(e){e.startObject(2)}static addSize(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addName(e,t){e.addFieldOffset(1,t,0)}static endTensorDim(e){return e.endObject()}static createTensorDim(e,t,r){return n.startTensorDim(e),n.addSize(e,t),n.addName(e,r),n.endTensorDim(e)}}t.TensorDim=n},5769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tensor=void 0;const i=r(240),n=r(6382),o=r(3038),a=r(1276);class s{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTensor(e,t){return(t||new s).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTensor(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new s).__init(e.readInt32(e.position())+e.position(),e)}typeType(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint8(this.bb_pos+e):a.Type.NONE}type(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__union(e,this.bb_pos+t):null}shape(e,t){const r=this.bb.__offset(this.bb_pos,8);return r?(t||new o.TensorDim).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*e),this.bb):null}shapeLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}strides(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}stridesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}data(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new n.Buffer).__init(this.bb_pos+t,this.bb):null}static startTensor(e){e.startObject(5)}static addTypeType(e,t){e.addFieldInt8(0,t,a.Type.NONE)}static addType(e,t){e.addFieldOffset(1,t,0)}static addShape(e,t){e.addFieldOffset(2,t,0)}static createShapeVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addOffset(t[r]);return e.endVector()}static startShapeVector(e,t){e.startVector(4,t,4)}static addStrides(e,t){e.addFieldOffset(3,t,0)}static createStridesVector(e,t){e.startVector(8,t.length,8);for(let r=t.length-1;r>=0;r--)e.addInt64(t[r]);return e.endVector()}static startStridesVector(e,t){e.startVector(8,t,8)}static addData(e,t){e.addFieldStruct(4,t,0)}static endTensor(e){const t=e.endObject();return e.requiredField(t,6),e.requiredField(t,8),e.requiredField(t,12),t}static finishTensorBuffer(e,t){e.finish(t)}static finishSizePrefixedTensorBuffer(e,t){e.finish(t,void 0,!0)}}t.Tensor=s},6800:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TimeUnit=void 0,function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(r||(t.TimeUnit=r={}))},9929:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Time=void 0;const i=r(240),n=r(6800);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.TimeUnit.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,n.TimeUnit.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,r){return o.startTime(e),o.addUnit(e,t),o.addBitWidth(e,r),o.endTime(e)}}t.Time=o},7366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timestamp=void 0;const i=r(240),n=r(6800);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.TimeUnit.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,n.TimeUnit.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,r){return o.startTimestamp(e),o.addUnit(e,t),o.addTimezone(e,r),o.endTimestamp(e)}}t.Timestamp=o},1276:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unionListToType=t.unionToType=t.Type=void 0;const i=r(5285),n=r(7456),o=r(9856),a=r(5865),s=r(2832),l=r(3136),c=r(1017),u=r(8809),d=r(207),h=r(7497),p=r(4131),f=r(9426),m=r(5669),g=r(4076),y=r(7540),_=r(2205),b=r(5588),v=r(6978),x=r(9929),w=r(7366),S=r(1697),I=r(4543);var T;!function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"}(T||(t.Type=T={})),t.unionToType=function(e,t){switch(T[e]){case"NONE":default:return null;case"Null":return t(new _.Null);case"Int":return t(new d.Int);case"FloatingPoint":return t(new u.FloatingPoint);case"Binary":return t(new i.Binary);case"Utf8":return t(new I.Utf8);case"Bool":return t(new n.Bool);case"Decimal":return t(new a.Decimal);case"Date":return t(new o.Date);case"Time":return t(new x.Time);case"Timestamp":return t(new w.Timestamp);case"Interval":return t(new h.Interval);case"List":return t(new g.List);case"Struct_":return t(new v.Struct_);case"Union":return t(new S.Union);case"FixedSizeBinary":return t(new l.FixedSizeBinary);case"FixedSizeList":return t(new c.FixedSizeList);case"Map":return t(new y.Map);case"Duration":return t(new s.Duration);case"LargeBinary":return t(new p.LargeBinary);case"LargeUtf8":return t(new m.LargeUtf8);case"LargeList":return t(new f.LargeList);case"RunEndEncoded":return t(new b.RunEndEncoded)}},t.unionListToType=function(e,t,r){switch(T[e]){case"NONE":default:return null;case"Null":return t(r,new _.Null);case"Int":return t(r,new d.Int);case"FloatingPoint":return t(r,new u.FloatingPoint);case"Binary":return t(r,new i.Binary);case"Utf8":return t(r,new I.Utf8);case"Bool":return t(r,new n.Bool);case"Decimal":return t(r,new a.Decimal);case"Date":return t(r,new o.Date);case"Time":return t(r,new x.Time);case"Timestamp":return t(r,new w.Timestamp);case"Interval":return t(r,new h.Interval);case"List":return t(r,new g.List);case"Struct_":return t(r,new v.Struct_);case"Union":return t(r,new S.Union);case"FixedSizeBinary":return t(r,new l.FixedSizeBinary);case"FixedSizeList":return t(r,new c.FixedSizeList);case"Map":return t(r,new y.Map);case"Duration":return t(r,new s.Duration);case"LargeBinary":return t(r,new p.LargeBinary);case"LargeUtf8":return t(r,new m.LargeUtf8);case"LargeList":return t(r,new f.LargeList);case"RunEndEncoded":return t(r,new b.RunEndEncoded)}}},9609:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.UnionMode=void 0,function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(r||(t.UnionMode=r={}))},1697:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Union=void 0;const i=r(240),n=r(9609);class o{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new o).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new o).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):n.UnionMode.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,n.UnionMode.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let r=t.length-1;r>=0;r--)e.addInt32(t[r]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,r){return o.startUnion(e),o.addMode(e,t),o.addTypeIds(e,r),o.endUnion(e)}}t.Union=o},4543:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utf8=void 0;const i=r(240);class n{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+i.SIZE_PREFIX_LENGTH),(t||new n).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return n.startUtf8(e),n.endUtf8(e)}}t.Utf8=n},5788:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=r(6326),n=r(5954);t.default={fromIterable:e=>o(function*(e){let t,r,i,o,a=!1,s=[],l=0;function c(){return"peek"===i?(0,n.joinUint8Arrays)(s,o)[0]:([r,s,l]=(0,n.joinUint8Arrays)(s,o),r)}({cmd:i,size:o}=(yield null)||{cmd:"read",size:0});const u=(0,n.toUint8ArrayIterator)(e)[Symbol.iterator]();try{do{if(({done:t,value:r}=Number.isNaN(o-l)?u.next():u.next(o-l)),!t&&r.byteLength>0&&(s.push(r),l+=r.byteLength),t||o<=l)do{({cmd:i,size:o}=yield c())}while(o<l)}while(!t)}catch(d){(a=!0)&&"function"===typeof u.throw&&u.throw(d)}finally{!1===a&&"function"===typeof u.return&&u.return(null)}return null}(e)),fromAsyncIterable:e=>o(function(e){return i.__asyncGenerator(this,arguments,(function*(){let t,r,o,a,s=!1,l=[],c=0;function u(){return"peek"===o?(0,n.joinUint8Arrays)(l,a)[0]:([r,l,c]=(0,n.joinUint8Arrays)(l,a),r)}({cmd:o,size:a}=(yield yield i.__await(null))||{cmd:"read",size:0});const d=(0,n.toUint8ArrayAsyncIterator)(e)[Symbol.asyncIterator]();try{do{if(({done:t,value:r}=Number.isNaN(a-c)?yield i.__await(d.next()):yield i.__await(d.next(a-c))),!t&&r.byteLength>0&&(l.push(r),c+=r.byteLength),t||a<=c)do{({cmd:o,size:a}=yield yield i.__await(u()))}while(a<c)}while(!t)}catch(h){(s=!0)&&"function"===typeof d.throw&&(yield i.__await(d.throw(h)))}finally{!1===s&&"function"===typeof d.return&&(yield i.__await(d.return(new Uint8Array(0))))}return yield i.__await(null)}))}(e)),fromDOMStream:e=>o(function(e){return i.__asyncGenerator(this,arguments,(function*(){let t,r,o,s=!1,l=!1,c=[],u=0;function d(){return"peek"===r?(0,n.joinUint8Arrays)(c,o)[0]:([t,c,u]=(0,n.joinUint8Arrays)(c,o),t)}({cmd:r,size:o}=(yield yield i.__await(null))||{cmd:"read",size:0});const h=new a(e);try{do{if(({done:s,value:t}=Number.isNaN(o-u)?yield i.__await(h.read()):yield i.__await(h.read(o-u))),!s&&t.byteLength>0&&(c.push((0,n.toUint8Array)(t)),u+=t.byteLength),s||o<=u)do{({cmd:r,size:o}=yield yield i.__await(d()))}while(o<u)}while(!s)}catch(p){(l=!0)&&(yield i.__await(h.cancel(p)))}finally{!1===l?yield i.__await(h.cancel()):e.locked&&h.releaseLock()}return yield i.__await(null)}))}(e)),fromNodeStream:e=>o(function(e){return i.__asyncGenerator(this,arguments,(function*(){const t=[];let r,o,a,l="error",c=!1,u=null,d=0,h=[];function p(){return"peek"===r?(0,n.joinUint8Arrays)(h,o)[0]:([a,h,d]=(0,n.joinUint8Arrays)(h,o),a)}if(({cmd:r,size:o}=(yield yield i.__await(null))||{cmd:"read",size:0}),e.isTTY)return yield yield i.__await(new Uint8Array(0)),yield i.__await(null);try{t[0]=s(e,"end"),t[1]=s(e,"error");do{if(t[2]=s(e,"readable"),[l,u]=yield i.__await(Promise.race(t.map((e=>e[2])))),"error"===l)break;if((c="end"===l)||(Number.isFinite(o-d)?(a=(0,n.toUint8Array)(e.read(o-d)),a.byteLength<o-d&&(a=(0,n.toUint8Array)(e.read()))):a=(0,n.toUint8Array)(e.read()),a.byteLength>0&&(h.push(a),d+=a.byteLength)),c||o<=d)do{({cmd:r,size:o}=yield yield i.__await(p()))}while(o<d)}while(!c)}finally{yield i.__await(f(t,"error"===l?u:null))}return yield i.__await(null);function f(t,r){return a=h=null,new Promise(((i,n)=>{for(const[r,a]of t)e.off(r,a);try{const t=e.destroy;t&&t.call(e,r),r=void 0}catch(o){r=o||r}finally{null!=r?n(r):i()}}))}}))}(e)),toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}};const o=e=>(e.next(),e);class a{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return i.__awaiter(this,void 0,void 0,(function*(){const{reader:t,source:r}=this;t&&(yield t.cancel(e).catch((()=>{}))),r&&r.locked&&this.releaseLock()}))}read(e){return i.__awaiter(this,void 0,void 0,(function*(){if(0===e)return{done:null==this.reader,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=(0,n.toUint8Array)(t)),t}))}}const s=(e,t)=>{const r=e=>i([t,e]);let i;return[t,r,new Promise((n=>(i=n)&&e.once(t,r)))]}},8074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncRandomAccessFile=t.RandomAccessFile=void 0;const i=r(6326),n=r(7020),o=r(5954);class a extends n.ByteStream{constructor(e,t){super(),this.position=0,this.buffer=(0,o.toUint8Array)(e),this.size=void 0===t?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:r}=this.readAt(e,4);return new DataView(t,r).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:r,position:i}=this;return t&&i<r?("number"!==typeof e&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,e)),t.subarray(i,this.position)):null}readAt(e,t){const r=this.buffer,i=Math.min(this.size,e+t);return r?r.subarray(e,i):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}t.RandomAccessFile=a;class s extends n.AsyncByteStream{constructor(e,t){super(),this.position=0,this._handle=e,"number"===typeof t?this.size=t:this._pending=(()=>i.__awaiter(this,void 0,void 0,(function*(){this.size=(yield e.stat()).size,delete this._pending})))()}readInt32(e){return i.__awaiter(this,void 0,void 0,(function*(){const{buffer:t,byteOffset:r}=yield this.readAt(e,4);return new DataView(t,r).getInt32(0,!0)}))}seek(e){return i.__awaiter(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size}))}read(e){return i.__awaiter(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:t,size:r,position:i}=this;if(t&&i<r){"number"!==typeof e&&(e=Number.POSITIVE_INFINITY);let n=i,o=0,a=0;const s=Math.min(r,n+Math.min(r-n,e)),l=new Uint8Array(Math.max(0,(this.position=s)-n));for(;(n+=a)<s&&(o+=a)<l.byteLength;)({bytesRead:a}=yield t.read(l,o,l.byteLength-o,n));return l}return null}))}readAt(e,t){return i.__awaiter(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&e+t<i){const n=Math.min(i,e+t),o=new Uint8Array(n-e);return(yield r.read(o,0,t,e)).buffer}return new Uint8Array(t)}))}close(){return i.__awaiter(this,void 0,void 0,(function*(){const e=this._handle;this._handle=null,e&&(yield e.close())}))}throw(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:e}}))}return(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:e}}))}}t.AsyncRandomAccessFile=s},7348:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncQueue=t.ReadableInterop=t.ArrowJSON=t.ITERATOR_DONE=void 0;const i=r(6326),n=r(5788);t.ITERATOR_DONE=Object.freeze({done:!0,value:void 0});t.ArrowJSON=class{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}};class o{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}t.ReadableInterop=o;class a extends o{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((e=>this._closedPromiseResolve=e))}get closed(){return this._closedPromise}cancel(e){return i.__awaiter(this,void 0,void 0,(function*(){yield this.return(e)}))}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(t.ITERATOR_DONE);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return n.default.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return n.default.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.abort(e),t.ITERATOR_DONE}))}return(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.close(),t.ITERATOR_DONE}))}read(e){return i.__awaiter(this,void 0,void 0,(function*(){return(yield this.next(e,"read")).value}))}peek(e){return i.__awaiter(this,void 0,void 0,(function*(){return(yield this.next(e,"peek")).value}))}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((e,t)=>{this.resolvers.push({resolve:e,reject:t})})):Promise.resolve(t.ITERATOR_DONE)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}t.AsyncQueue=a},7020:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncByteStream=t.ByteStream=t.AsyncByteQueue=void 0;const i=r(6326),n=r(5788),o=r(4779),a=r(7348),s=r(5954),l=r(1198);class c extends a.AsyncQueue{write(e){if((e=(0,s.toUint8Array)(e)).byteLength>0)return super.write(e)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(0,o.decodeUtf8)(this.toUint8Array(!0)):this.toUint8Array(!1).then(o.decodeUtf8)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(0,s.joinUint8Arrays)(this._values)[0]:(()=>i.__awaiter(this,void 0,void 0,(function*(){var e,t,r,n;const o=[];let a=0;try{for(var l,c=!0,u=i.__asyncValues(this);!(e=(l=yield u.next()).done);c=!0){n=l.value,c=!1;const e=n;o.push(e),a+=e.byteLength}}catch(d){t={error:d}}finally{try{c||e||!(r=u.return)||(yield r.call(u))}finally{if(t)throw t.error}}return(0,s.joinUint8Arrays)(o,a)[0]})))()}}t.AsyncByteQueue=c;class u{constructor(e){e&&(this.source=new h(n.default.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}t.ByteStream=u;class d{constructor(e){e instanceof d?this.source=e.source:e instanceof c?this.source=new p(n.default.fromAsyncIterable(e)):(0,l.isReadableNodeStream)(e)?this.source=new p(n.default.fromNodeStream(e)):(0,l.isReadableDOMStream)(e)?this.source=new p(n.default.fromDOMStream(e)):(0,l.isFetchResponse)(e)?this.source=new p(n.default.fromDOMStream(e.body)):(0,l.isIterable)(e)?this.source=new p(n.default.fromIterable(e)):((0,l.isPromise)(e)||(0,l.isAsyncIterable)(e))&&(this.source=new p(n.default.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}t.AsyncByteStream=d;class h{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||a.ITERATOR_DONE)}return(e){return Object.create(this.source.return&&this.source.return(e)||a.ITERATOR_DONE)}}class p{constructor(e){this.source=e,this._closedPromise=new Promise((e=>this._closedPromiseResolve=e))}cancel(e){return i.__awaiter(this,void 0,void 0,(function*(){yield this.return(e)}))}get closed(){return this._closedPromise}read(e){return i.__awaiter(this,void 0,void 0,(function*(){return(yield this.next(e,"read")).value}))}peek(e){return i.__awaiter(this,void 0,void 0,(function*(){return(yield this.next(e,"peek")).value}))}next(e){return i.__awaiter(this,arguments,void 0,(function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return function*(){return yield t.source.next({cmd:r,size:e})}()}))}throw(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=this.source.throw&&(yield this.source.throw(e))||a.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)}))}return(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=this.source.return&&(yield this.source.return(e))||a.ITERATOR_DONE;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)}))}}},1544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuilderTransform=t.builderThroughDOMStream=void 0;const i=r(6326),n=r(2327);t.builderThroughDOMStream=function(e){return new o(e)};class o{constructor(e){this._numChunks=0,this._finished=!1,this._bufferedSize=0;const{readableStrategy:t,writableStrategy:r,queueingStrategy:o="count"}=e,l=i.__rest(e,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null,this._builder=(0,n.makeBuilder)(l),this._getSize="bytes"!==o?a:s;const{highWaterMark:c=("bytes"===o?Math.pow(2,14):1e3)}=Object.assign({},t),{highWaterMark:u=("bytes"===o?Math.pow(2,14):1e3)}=Object.assign({},r);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:e=>{this._maybeFlush(this._builder,this._controller=e)},start:e=>{this._maybeFlush(this._builder,this._controller=e)}},{highWaterMark:c,size:"bytes"!==o?a:s}),this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:u,size:e=>this._writeValueAndReturnChunkSize(e)})}_writeValueAndReturnChunkSize(e){const t=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(e)),this._bufferedSize-t}_maybeFlush(e,t){null!=t&&(this._bufferedSize>=t.desiredSize&&++this._numChunks&&this._enqueue(t,e.toVector()),e.finished&&((e.length>0||0===this._numChunks)&&++this._numChunks&&this._enqueue(t,e.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(t,null)))}_enqueue(e,t){this._bufferedSize=0,this._controller=null,null==t?e.close():e.enqueue(t)}}t.BuilderTransform=o;const a=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.length)&&void 0!==t?t:0},s=e=>{var t;return null!==(t=null===e||void 0===e?void 0:e.byteLength)&&void 0!==t?t:0}},2505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toDOMStream=void 0;const i=r(6326),n=r(5954),o=r(1198);t.toDOMStream=function(e,t){if((0,o.isAsyncIterable)(e))return function(e,t){let r=null;const o="bytes"===(null===t||void 0===t?void 0:t.type)||!1,a=(null===t||void 0===t?void 0:t.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(t){return i.__awaiter(this,void 0,void 0,(function*(){yield s(t,r||(r=e[Symbol.asyncIterator]()))}))},pull(e){return i.__awaiter(this,void 0,void 0,(function*(){r?yield s(e,r):e.close()}))},cancel(){return i.__awaiter(this,void 0,void 0,(function*(){(null===r||void 0===r?void 0:r.return)&&(yield r.return()),r=null}))}}),Object.assign({highWaterMark:o?a:void 0},t));function s(e,t){return i.__awaiter(this,void 0,void 0,(function*(){let r,i=null,a=e.desiredSize||null;for(;!(i=yield t.next(o?a:null)).done;)if(ArrayBuffer.isView(i.value)&&(r=(0,n.toUint8Array)(i.value))&&(null!=a&&o&&(a=a-r.byteLength+1),i.value=r),e.enqueue(i.value),null!=a&&--a<=0)return;e.close()}))}}(e,t);if((0,o.isIterable)(e))return function(e,t){let r=null;const i="bytes"===(null===t||void 0===t?void 0:t.type)||!1,o=(null===t||void 0===t?void 0:t.highWaterMark)||Math.pow(2,24);return new ReadableStream(Object.assign(Object.assign({},t),{start(t){a(t,r||(r=e[Symbol.iterator]()))},pull(e){r?a(e,r):e.close()},cancel(){(null===r||void 0===r?void 0:r.return)&&r.return(),r=null}}),Object.assign({highWaterMark:i?o:void 0},t));function a(e,t){let r,o=null,a=e.desiredSize||null;for(;!(o=t.next(i?a:null)).done;)if(ArrayBuffer.isView(o.value)&&(r=(0,n.toUint8Array)(o.value))&&(null!=a&&i&&(a=a-r.byteLength+1),o.value=r),e.enqueue(o.value),null!=a&&--a<=0)return;e.close()}}(e,t);throw new Error("toDOMStream() must be called with an Iterable or AsyncIterable")}},5644:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordBatchReaderThroughDOMStream=void 0;const i=r(6326),n=r(7020),o=r(5337);t.recordBatchReaderThroughDOMStream=function(e,t){const r=new n.AsyncByteQueue;let a=null;const s=new ReadableStream({cancel(){return i.__awaiter(this,void 0,void 0,(function*(){yield r.close()}))},start(e){return i.__awaiter(this,void 0,void 0,(function*(){yield l(e,a||(a=yield function(){return i.__awaiter(this,void 0,void 0,(function*(){return yield(yield o.RecordBatchReader.from(r)).open(t)}))}()))}))},pull(e){return i.__awaiter(this,void 0,void 0,(function*(){a?yield l(e,a):e.close()}))}});return{writable:new WritableStream(r,Object.assign({highWaterMark:Math.pow(2,14)},e)),readable:s};function l(e,t){return i.__awaiter(this,void 0,void 0,(function*(){let r=e.desiredSize,i=null;for(;!(i=yield t.next()).done;)if(e.enqueue(i.value),null!=r&&--r<=0)return;e.close()}))}}},2264:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordBatchWriterThroughDOMStream=void 0;const i=r(6326),n=r(7020);t.recordBatchWriterThroughDOMStream=function(e,t){const r=new this(e),o=new n.AsyncByteStream(r),a=new ReadableStream({cancel(){return i.__awaiter(this,void 0,void 0,(function*(){yield o.cancel()}))},pull(e){return i.__awaiter(this,void 0,void 0,(function*(){yield s(e)}))},start(e){return i.__awaiter(this,void 0,void 0,(function*(){yield s(e)}))}},Object.assign({highWaterMark:Math.pow(2,14)},t));return{writable:new WritableStream(r,e),readable:a};function s(e){return i.__awaiter(this,void 0,void 0,(function*(){let t=null,r=e.desiredSize;for(;t=yield o.read(r||null);)if(e.enqueue(t),null!=r&&(r-=t.byteLength)<=0)return;e.close()}))}}},2083:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.magicX2AndPadding=t.magicAndPadding=t.magicLength=t.checkForMagicArrowString=t.MAGIC=t.MAGIC_STR=t.PADDING=t.JSONMessageReader=t.AsyncMessageReader=t.MessageReader=void 0;const i=r(6326),n=r(1336),o=r(240),a=r(2227),s=r(1198),l=r(8074),c=r(5954),u=r(7020),d=r(7348),h=e=>`Expected ${n.MessageHeader[e]} Message in stream, but was null or length 0.`,p=e=>`Header pointer of flatbuffer-encoded ${n.MessageHeader[e]} Message is null or length 0.`,f=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,m=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class g{constructor(e){this.source=e instanceof u.ByteStream?e:new u.ByteStream(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||-1===e.value&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?d.ITERATOR_DONE:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(h(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=(0,c.toUint8Array)(this.source.read(e));if(t.byteLength<e)throw new Error(m(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=n.MessageHeader.Schema,r=this.readMessage(t),i=null===r||void 0===r?void 0:r.header();if(e&&!i)throw new Error(p(t));return i}readMetadataLength(){const e=this.source.read(t.PADDING),r=e&&new o.ByteBuffer(e),i=(null===r||void 0===r?void 0:r.readInt32(0))||0;return{done:0===i,value:i}}readMetadata(e){const t=this.source.read(e);if(!t)return d.ITERATOR_DONE;if(t.byteLength<e)throw new Error(f(e,t.byteLength));return{done:!1,value:a.Message.decode(t)}}}t.MessageReader=g;class y{constructor(e,t){this.source=e instanceof u.AsyncByteStream?e:(0,s.isFileHandle)(e)?new l.AsyncRandomAccessFile(e,t):new u.AsyncByteStream(e)}[Symbol.asyncIterator](){return this}next(){return i.__awaiter(this,void 0,void 0,(function*(){let e;return(e=yield this.readMetadataLength()).done||-1===e.value&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?d.ITERATOR_DONE:e}))}throw(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.source.throw(e)}))}return(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this.source.return(e)}))}readMessage(e){return i.__awaiter(this,void 0,void 0,(function*(){let t;if((t=yield this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(h(e));return t.value}))}readMessageBody(e){return i.__awaiter(this,void 0,void 0,(function*(){if(e<=0)return new Uint8Array(0);const t=(0,c.toUint8Array)(yield this.source.read(e));if(t.byteLength<e)throw new Error(m(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}))}readSchema(){return i.__awaiter(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){const r=n.MessageHeader.Schema,i=yield e.readMessage(r),o=null===i||void 0===i?void 0:i.header();if(t&&!o)throw new Error(p(r));return o}()}))}readMetadataLength(){return i.__awaiter(this,void 0,void 0,(function*(){const e=yield this.source.read(t.PADDING),r=e&&new o.ByteBuffer(e),i=(null===r||void 0===r?void 0:r.readInt32(0))||0;return{done:0===i,value:i}}))}readMetadata(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield this.source.read(e);if(!t)return d.ITERATOR_DONE;if(t.byteLength<e)throw new Error(f(e,t.byteLength));return{done:!1,value:a.Message.decode(t)}}))}}t.AsyncMessageReader=y;t.JSONMessageReader=class extends g{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof d.ArrowJSON?e:new d.ArrowJSON(e)}next(){const{_json:e}=this;if(!this._schema){this._schema=!0;return{done:!1,value:a.Message.fromJSON(e.schema,n.MessageHeader.Schema)}}if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];this._body=t.data.columns;return{done:!1,value:a.Message.fromJSON(t,n.MessageHeader.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];this._body=t.columns;return{done:!1,value:a.Message.fromJSON(t,n.MessageHeader.RecordBatch)}}return this._body=[],d.ITERATOR_DONE}readMessageBody(e){return function e(t){return(t||[]).reduce(((t,r)=>[...t,...r.VALIDITY&&[r.VALIDITY]||[],...r.TYPE_ID&&[r.TYPE_ID]||[],...r.OFFSET&&[r.OFFSET]||[],...r.DATA&&[r.DATA]||[],...e(r.children)]),[])}(this._body)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(h(e));return t.value}readSchema(){const e=n.MessageHeader.Schema,t=this.readMessage(e),r=null===t||void 0===t?void 0:t.header();if(!t||!r)throw new Error(p(e));return r}},t.PADDING=4,t.MAGIC_STR="ARROW1",t.MAGIC=new Uint8Array(t.MAGIC_STR.length);for(let _=0;_<t.MAGIC_STR.length;_+=1)t.MAGIC[_]=t.MAGIC_STR.codePointAt(_);t.checkForMagicArrowString=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=-1,n=t.MAGIC.length;++i<n;)if(t.MAGIC[i]!==e[r+i])return!1;return!0},t.magicLength=t.MAGIC.length,t.magicAndPadding=t.magicLength+t.PADDING,t.magicX2AndPadding=2*t.magicLength+t.PADDING},1200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileBlock=t.Footer=void 0;const i=r(5727),n=r(3955),o=r(240);var a=o.Builder,s=o.ByteBuffer;const l=r(1598),c=r(1336),u=r(5954),d=r(4995);class h{static decode(e){e=new s((0,u.toUint8Array)(e));const t=n.Footer.getRootAsFooter(e),r=l.Schema.decode(t.schema(),new Map,t.version());return new p(r,t)}static encode(e){const t=new a,r=l.Schema.encode(t,e.schema);n.Footer.startRecordBatchesVector(t,e.numRecordBatches);for(const n of[...e.recordBatches()].slice().reverse())f.encode(t,n);const i=t.endVector();n.Footer.startDictionariesVector(t,e.numDictionaries);for(const n of[...e.dictionaryBatches()].slice().reverse())f.encode(t,n);const o=t.endVector();return n.Footer.startFooter(t),n.Footer.addSchema(t,r),n.Footer.addVersion(t,c.MetadataVersion.V5),n.Footer.addRecordBatches(t,i),n.Footer.addDictionaries(t,o),n.Footer.finishFooterBuffer(t,n.Footer.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.MetadataVersion.V5,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;this.schema=e,this.version=t,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let e,t=-1,r=this.numRecordBatches;++t<r;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,r=this.numDictionaries;++t<r;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}t.Footer=h;class p extends h{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,t){super(e,t.version()),this._footer=t}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return f.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return f.decode(t)}return null}}class f{static decode(e){return new f(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:r}=t,n=BigInt(t.offset),o=BigInt(t.bodyLength);return i.Block.createBlock(e,n,r,o)}constructor(e,t,r){this.metaDataLength=e,this.offset=(0,d.bigIntToNumber)(r),this.bodyLength=(0,d.bigIntToNumber)(t)}}t.FileBlock=f},8760:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fieldFromJSON=t.dictionaryBatchFromJSON=t.recordBatchFromJSON=t.schemaFromJSON=void 0;const i=r(1598),n=r(2741),o=r(2227),a=r(1336);function s(e){return new o.RecordBatch(e.count,c(e.columns),u(e.columns))}function l(e,t){return(e.children||[]).filter(Boolean).map((e=>i.Field.fromJSON(e,t)))}function c(e){return(e||[]).reduce(((e,t)=>{return[...e,new o.FieldNode(t.count,(r=t.VALIDITY,(r||[]).reduce(((e,t)=>e+ +(0===t)),0))),...c(t.children)];var r}),[])}function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let r=-1,i=(e||[]).length;++r<i;){const i=e[r];i.VALIDITY&&t.push(new o.BufferRegion(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new o.BufferRegion(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new o.BufferRegion(t.length,i.OFFSET.length)),i.DATA&&t.push(new o.BufferRegion(t.length,i.DATA.length)),t=u(i.children,t)}return t}function d(){return new Map((arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{let{key:t,value:r}=e;return[t,r]})))}function h(e){return new n.Int(e.isSigned,e.bitWidth)}function p(e,t){const r=e.type.name;switch(r){case"NONE":case"null":return new n.Null;case"binary":return new n.Binary;case"largebinary":return new n.LargeBinary;case"utf8":return new n.Utf8;case"largeutf8":return new n.LargeUtf8;case"bool":return new n.Bool;case"list":return new n.List((t||[])[0]);case"struct":case"struct_":return new n.Struct(t||[])}switch(r){case"int":{const t=e.type;return new n.Int(t.isSigned,t.bitWidth)}case"floatingpoint":{const t=e.type;return new n.Float(a.Precision[t.precision])}case"decimal":{const t=e.type;return new n.Decimal(t.scale,t.precision,t.bitWidth)}case"date":{const t=e.type;return new n.Date_(a.DateUnit[t.unit])}case"time":{const t=e.type;return new n.Time(a.TimeUnit[t.unit],t.bitWidth)}case"timestamp":{const t=e.type;return new n.Timestamp(a.TimeUnit[t.unit],t.timezone)}case"interval":{const t=e.type;return new n.Interval(a.IntervalUnit[t.unit])}case"duration":{const t=e.type;return new n.Duration(a.TimeUnit[t.unit])}case"union":{const r=e.type,[i,...o]=(r.mode+"").toLowerCase(),s=i.toUpperCase()+o.join("");return new n.Union(a.UnionMode[s],r.typeIds||[],t||[])}case"fixedsizebinary":{const t=e.type;return new n.FixedSizeBinary(t.byteWidth)}case"fixedsizelist":{const r=e.type;return new n.FixedSizeList(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new n.Map_((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${r}"`)}t.schemaFromJSON=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new i.Schema(function(e,t){return(e.fields||[]).filter(Boolean).map((e=>i.Field.fromJSON(e,t)))}(e,t),d(e.metadata),t)},t.recordBatchFromJSON=s,t.dictionaryBatchFromJSON=function(e){return new o.DictionaryBatch(s(e.data),e.id,e.isDelta)},t.fieldFromJSON=function(e,t){let r,o,a,s,c,u;return t&&(s=e.dictionary)?t.has(r=s.id)?(o=(o=s.indexType)?h(o):new n.Int32,u=new n.Dictionary(t.get(r),o,r,s.isOrdered),a=new i.Field(e.name,u,e.nullable,d(e.metadata))):(o=(o=s.indexType)?h(o):new n.Int32,t.set(r,c=p(e,l(e,t))),u=new n.Dictionary(c,o,r,s.isOrdered),a=new i.Field(e.name,u,e.nullable,d(e.metadata))):(c=p(e,l(e,t)),a=new i.Field(e.name,c,e.nullable,d(e.metadata))),a||null}},2227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldNode=t.BufferRegion=t.DictionaryBatch=t.RecordBatch=t.Message=void 0;const i=r(240),n=r(3991),o=r(207),a=r(4260),s=r(7429),l=r(6382),c=r(5770),u=r(2591),d=r(1276),h=r(1641),p=r(3804),f=r(8809),m=r(5865),g=r(9856),y=r(9929),_=r(7366),b=r(7497),v=r(2832),x=r(1697),w=r(3136),S=r(1017),I=r(7540),T=r(7721),k=r(1598),E=r(5954),A=r(4995),P=r(1336),C=r(6042),M=r(8760);var O=i.Builder,R=i.ByteBuffer;const B=r(2741);class D{static fromJSON(e,t){const r=new D(0,P.MetadataVersion.V5,t);return r._createHeader=function(e,t){return()=>{switch(t){case P.MessageHeader.Schema:return k.Schema.fromJSON(e);case P.MessageHeader.RecordBatch:return z.fromJSON(e);case P.MessageHeader.DictionaryBatch:return L.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${P.MessageHeader[t]}, type: ${t} }`)}}(e,t),r}static decode(e){e=new R((0,E.toUint8Array)(e));const t=T.Message.getRootAsMessage(e),r=t.bodyLength(),i=t.version(),o=t.headerType(),l=new D(r,i,o);return l._createHeader=function(e,t){return()=>{switch(t){case P.MessageHeader.Schema:return k.Schema.decode(e.header(new n.Schema),new Map,e.version());case P.MessageHeader.RecordBatch:return z.decode(e.header(new a.RecordBatch),e.version());case P.MessageHeader.DictionaryBatch:return L.decode(e.header(new s.DictionaryBatch),e.version())}throw new Error(`Unrecognized Message type: { name: ${P.MessageHeader[t]}, type: ${t} }`)}}(t,o),l}static encode(e){const t=new O;let r=-1;return e.isSchema()?r=k.Schema.encode(t,e.header()):e.isRecordBatch()?r=z.encode(t,e.header()):e.isDictionaryBatch()&&(r=L.encode(t,e.header())),T.Message.startMessage(t),T.Message.addVersion(t,P.MetadataVersion.V5),T.Message.addHeader(t,r),T.Message.addHeaderType(t,e.headerType),T.Message.addBodyLength(t,BigInt(e.bodyLength)),T.Message.finishMessageBuffer(t,T.Message.endMessage(t)),t.asUint8Array()}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof k.Schema)return new D(0,P.MetadataVersion.V5,P.MessageHeader.Schema,e);if(e instanceof z)return new D(t,P.MetadataVersion.V5,P.MessageHeader.RecordBatch,e);if(e instanceof L)return new D(t,P.MetadataVersion.V5,P.MessageHeader.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===P.MessageHeader.Schema}isRecordBatch(){return this.headerType===P.MessageHeader.RecordBatch}isDictionaryBatch(){return this.headerType===P.MessageHeader.DictionaryBatch}constructor(e,t,r,i){this._version=t,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=(0,A.bigIntToNumber)(e)}}t.Message=D;class z{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,t,r){this._nodes=t,this._buffers=r,this._length=(0,A.bigIntToNumber)(e)}}t.RecordBatch=z;class L{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=e,this._isDelta=r,this._id=(0,A.bigIntToNumber)(t)}}t.DictionaryBatch=L;class F{constructor(e,t){this.offset=(0,A.bigIntToNumber)(e),this.length=(0,A.bigIntToNumber)(t)}}t.BufferRegion=F;class N{constructor(e,t){this.length=(0,A.bigIntToNumber)(e),this.nullCount=(0,A.bigIntToNumber)(t)}}function j(e,t){const r=[];for(let i,n=-1,o=-1,a=e.childrenLength();++n<a;)(i=e.children(n))&&(r[++o]=k.Field.decode(i,t));return r}function U(e){const t=new Map;if(e)for(let r,i,n=-1,o=Math.trunc(e.customMetadataLength());++n<o;)(r=e.customMetadata(n))&&null!=(i=r.key())&&t.set(i,r.value());return t}function V(e){return new B.Int(e.isSigned(),e.bitWidth())}function $(e,t){const r=e.typeType();switch(r){case d.Type.NONE:case d.Type.Null:return new B.Null;case d.Type.Binary:return new B.Binary;case d.Type.LargeBinary:return new B.LargeBinary;case d.Type.Utf8:return new B.Utf8;case d.Type.LargeUtf8:return new B.LargeUtf8;case d.Type.Bool:return new B.Bool;case d.Type.List:return new B.List((t||[])[0]);case d.Type.Struct_:return new B.Struct(t||[])}switch(r){case d.Type.Int:{const t=e.type(new o.Int);return new B.Int(t.isSigned(),t.bitWidth())}case d.Type.FloatingPoint:{const t=e.type(new f.FloatingPoint);return new B.Float(t.precision())}case d.Type.Decimal:{const t=e.type(new m.Decimal);return new B.Decimal(t.scale(),t.precision(),t.bitWidth())}case d.Type.Date:{const t=e.type(new g.Date);return new B.Date_(t.unit())}case d.Type.Time:{const t=e.type(new y.Time);return new B.Time(t.unit(),t.bitWidth())}case d.Type.Timestamp:{const t=e.type(new _.Timestamp);return new B.Timestamp(t.unit(),t.timezone())}case d.Type.Interval:{const t=e.type(new b.Interval);return new B.Interval(t.unit())}case d.Type.Duration:{const t=e.type(new v.Duration);return new B.Duration(t.unit())}case d.Type.Union:{const r=e.type(new x.Union);return new B.Union(r.mode(),r.typeIdsArray()||[],t||[])}case d.Type.FixedSizeBinary:{const t=e.type(new w.FixedSizeBinary);return new B.FixedSizeBinary(t.byteWidth())}case d.Type.FixedSizeList:{const r=e.type(new S.FixedSizeList);return new B.FixedSizeList(r.listSize(),(t||[])[0])}case d.Type.Map:{const r=e.type(new I.Map);return new B.Map_((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${d.Type[r]}" (${r})`)}t.FieldNode=N,k.Field.encode=function(e,t){let r=-1,i=-1,n=-1;const o=t.type;let a=t.typeId;B.DataType.isDictionary(o)?(a=o.dictionary.typeId,n=C.instance.visit(o,e),i=C.instance.visit(o.dictionary,e)):i=C.instance.visit(o,e);const s=(o.children||[]).map((t=>k.Field.encode(e,t))),l=c.Field.createChildrenVector(e,s),u=t.metadata&&t.metadata.size>0?c.Field.createCustomMetadataVector(e,[...t.metadata].map((t=>{let[r,i]=t;const n=e.createString(`${r}`),o=e.createString(`${i}`);return h.KeyValue.startKeyValue(e),h.KeyValue.addKey(e,n),h.KeyValue.addValue(e,o),h.KeyValue.endKeyValue(e)}))):-1;t.name&&(r=e.createString(t.name));c.Field.startField(e),c.Field.addType(e,i),c.Field.addTypeType(e,a),c.Field.addChildren(e,l),c.Field.addNullable(e,!!t.nullable),-1!==r&&c.Field.addName(e,r);-1!==n&&c.Field.addDictionary(e,n);-1!==u&&c.Field.addCustomMetadata(e,u);return c.Field.endField(e)},k.Field.decode=function(e,t){let r,i,n,o,a,s;t&&(s=e.dictionary())?t.has(r=(0,A.bigIntToNumber)(s.id()))?(o=(o=s.indexType())?V(o):new B.Int32,a=new B.Dictionary(t.get(r),o,r,s.isOrdered()),i=new k.Field(e.name(),a,e.nullable(),U(e))):(o=(o=s.indexType())?V(o):new B.Int32,t.set(r,n=$(e,j(e,t))),a=new B.Dictionary(n,o,r,s.isOrdered()),i=new k.Field(e.name(),a,e.nullable(),U(e))):(n=$(e,j(e,t)),i=new k.Field(e.name(),n,e.nullable(),U(e)));return i||null},k.Field.fromJSON=M.fieldFromJSON,k.Schema.encode=function(e,t){const r=t.fields.map((t=>k.Field.encode(e,t)));n.Schema.startFieldsVector(e,r.length);const i=n.Schema.createFieldsVector(e,r),o=t.metadata&&t.metadata.size>0?n.Schema.createCustomMetadataVector(e,[...t.metadata].map((t=>{let[r,i]=t;const n=e.createString(`${r}`),o=e.createString(`${i}`);return h.KeyValue.startKeyValue(e),h.KeyValue.addKey(e,n),h.KeyValue.addValue(e,o),h.KeyValue.endKeyValue(e)}))):-1;n.Schema.startSchema(e),n.Schema.addFields(e,i),n.Schema.addEndianness(e,W?p.Endianness.Little:p.Endianness.Big),-1!==o&&n.Schema.addCustomMetadata(e,o);return n.Schema.endSchema(e)},k.Schema.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:P.MetadataVersion.V5;const i=function(e,t){const r=[];for(let i,n=-1,o=-1,a=e.fieldsLength();++n<a;)(i=e.fields(n))&&(r[++o]=k.Field.decode(i,t));return r}(e,t);return new k.Schema(i,U(e),t,r)},k.Schema.fromJSON=M.schemaFromJSON,z.encode=function(e,t){const r=t.nodes||[],i=t.buffers||[];a.RecordBatch.startNodesVector(e,r.length);for(const a of r.slice().reverse())N.encode(e,a);const n=e.endVector();a.RecordBatch.startBuffersVector(e,i.length);for(const a of i.slice().reverse())F.encode(e,a);const o=e.endVector();return a.RecordBatch.startRecordBatch(e),a.RecordBatch.addLength(e,BigInt(t.length)),a.RecordBatch.addNodes(e,n),a.RecordBatch.addBuffers(e,o),a.RecordBatch.endRecordBatch(e)},z.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.MetadataVersion.V5;if(null!==e.compression())throw new Error("Record batch compression not implemented");return new z(e.length(),function(e){const t=[];for(let r,i=-1,n=-1,o=e.nodesLength();++i<o;)(r=e.nodes(i))&&(t[++n]=N.decode(r));return t}(e),function(e,t){const r=[];for(let i,n=-1,o=-1,a=e.buffersLength();++n<a;)(i=e.buffers(n))&&(t<P.MetadataVersion.V4&&(i.bb_pos+=8*(n+1)),r[++o]=F.decode(i));return r}(e,t))},z.fromJSON=M.recordBatchFromJSON,L.encode=function(e,t){const r=z.encode(e,t.data);return s.DictionaryBatch.startDictionaryBatch(e),s.DictionaryBatch.addId(e,BigInt(t.id)),s.DictionaryBatch.addIsDelta(e,t.isDelta),s.DictionaryBatch.addData(e,r),s.DictionaryBatch.endDictionaryBatch(e)},L.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P.MetadataVersion.V5;return new L(z.decode(e.data(),t),e.id(),e.isDelta())},L.fromJSON=M.dictionaryBatchFromJSON,N.encode=function(e,t){return u.FieldNode.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))},N.decode=function(e){return new N(e.length(),e.nullCount())},F.encode=function(e,t){return l.Buffer.createBuffer(e,BigInt(t.offset),BigInt(t.length))},F.decode=function(e){return new F(e.offset(),e.length())};const W=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})()},5337:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncRecordBatchFileReader=t.RecordBatchFileReader=t.AsyncRecordBatchStreamReader=t.RecordBatchStreamReader=t.RecordBatchReader=void 0;const i=r(6326),n=r(9061),o=r(8210),a=r(2741),s=r(1336),l=r(1200),c=r(5788),u=r(7020),d=r(8074),h=r(4678),p=r(2618),f=r(7348),m=r(2083),g=r(1198);class y extends f.ReadableInterop{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return(0,g.isPromise)(t)?t.then((()=>this)):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return c.default.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return c.default.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof y?e:(0,g.isArrowJSON)(e)?function(e){return new _(new E(e))}(e):(0,g.isFileHandle)(e)?function(e){return i.__awaiter(this,void 0,void 0,(function*(){const{size:t}=yield e.stat(),r=new d.AsyncRandomAccessFile(e,t);return t>=m.magicX2AndPadding&&(0,m.checkForMagicArrowString)(yield r.readAt(0,m.magicLength+7&-8))?new x(new k(r)):new b(new I(r))}))}(e):(0,g.isPromise)(e)?(()=>i.__awaiter(this,void 0,void 0,(function*(){return yield y.from(yield e)})))():(0,g.isFetchResponse)(e)||(0,g.isReadableDOMStream)(e)||(0,g.isReadableNodeStream)(e)||(0,g.isAsyncIterable)(e)?function(e){return i.__awaiter(this,void 0,void 0,(function*(){const t=yield e.peek(m.magicLength+7&-8);return t&&t.byteLength>=4?(0,m.checkForMagicArrowString)(t)?new v(new T(yield e.read())):new b(new I(e)):new b(new I(function(){return i.__asyncGenerator(this,arguments,(function*(){}))}()))}))}(new u.AsyncByteStream(e)):function(e){const t=e.peek(m.magicLength+7&-8);return t&&t.byteLength>=4?(0,m.checkForMagicArrowString)(t)?new v(new T(e.read())):new _(new S(e)):new _(new S(function*(){}()))}(new u.ByteStream(e))}static readAll(e){return e instanceof y?e.isSync()?P(e):C(e):(0,g.isArrowJSON)(e)||ArrayBuffer.isView(e)||(0,g.isIterable)(e)||(0,g.isIteratorResult)(e)?P(e):C(e)}}t.RecordBatchReader=y;class _ extends y{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return i.__asyncGenerator(this,arguments,(function*(){yield i.__await(yield*i.__asyncDelegator(i.__asyncValues(this[Symbol.iterator]())))}))}}t.RecordBatchStreamReader=_;class b extends y{constructor(e){super(e),this._impl=e}readAll(){return i.__awaiter(this,void 0,void 0,(function*(){var e,t,r,n;const o=new Array;try{for(var a,s=!0,l=i.__asyncValues(this);!(e=(a=yield l.next()).done);s=!0){n=a.value,s=!1;const e=n;o.push(e)}}catch(c){t={error:c}}finally{try{s||e||!(r=l.return)||(yield r.call(l))}finally{if(t)throw t.error}}return o}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}t.AsyncRecordBatchStreamReader=b;class v extends _{constructor(e){super(e),this._impl=e}}t.RecordBatchFileReader=v;class x extends b{constructor(e){super(e),this._impl=e}}t.AsyncRecordBatchFileReader=x;class w{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const r=this._loadVectors(e,t,this.schema.fields),i=(0,n.makeData)({type:new a.Struct(this.schema.fields),length:e.length,children:r});return new p.RecordBatch(this.schema,i)}_loadDictionaryBatch(e,t){const{id:r,isDelta:i}=e,{dictionaries:n,schema:a}=this,s=n.get(r),l=a.dictionaries.get(r),c=this._loadVectors(e.data,t,[l]);return(s&&i?s.concat(new o.Vector(c)):new o.Vector(c)).memoize()}_loadVectors(e,t,r){return new h.VectorLoader(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}class S extends w{constructor(e,t){super(t),this._reader=(0,g.isArrowJSON)(e)?new m.JSONMessageReader(this._handle=e):new m.MessageReader(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=A(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):f.ITERATOR_DONE}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):f.ITERATOR_DONE}next(){if(this.closed)return f.ITERATOR_DONE;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=t.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new p._InternalEmptyPlaceholderRecordBatch(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class I extends w{constructor(e,t){super(t),this._reader=new m.AsyncMessageReader(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return i.__awaiter(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(e){return i.__awaiter(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=A(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(e){return i.__awaiter(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):f.ITERATOR_DONE}))}return(e){return i.__awaiter(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):f.ITERATOR_DONE}))}next(){return i.__awaiter(this,void 0,void 0,(function*(){if(this.closed)return f.ITERATOR_DONE;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const r=e.header(),i=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const r=e.header(),i=yield t.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,n)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new p._InternalEmptyPlaceholderRecordBatch(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(e){return i.__awaiter(this,void 0,void 0,(function*(){return yield this._reader.readMessage(e)}))}}class T extends S{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,t){super(e instanceof d.RandomAccessFile?e:new d.RandomAccessFile(e),t)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const r=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(r&&this._handle.seek(r.offset)){const e=this._reader.readMessage(s.MessageHeader.RecordBatch);if(null===e||void 0===e?void 0:e.isRecordBatch()){const t=e.header(),r=this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,r)}}return null}_readDictionaryBatch(e){var t;const r=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(r&&this._handle.seek(r.offset)){const e=this._reader.readMessage(s.MessageHeader.DictionaryBatch);if(null===e||void 0===e?void 0:e.isDictionaryBatch()){const t=e.header(),r=this._reader.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(t,r);this.dictionaries.set(t.id,i)}}}_readFooter(){const{_handle:e}=this,t=e.size-m.magicAndPadding,r=e.readInt32(t),i=e.readAt(t-r,r);return l.Footer.decode(i)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(e)}return null}}class k extends I{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const n="number"!==typeof r[0]?r.shift():void 0,o=r[0]instanceof Map?r.shift():void 0;super(e instanceof d.AsyncRandomAccessFile?e:new d.AsyncRandomAccessFile(e,n),o)}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return i.__awaiter(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)}))}readRecordBatch(e){return i.__awaiter(this,void 0,void 0,(function*(){var t;if(this.closed)return null;this._footer||(yield this.open());const r=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(r&&(yield this._handle.seek(r.offset))){const e=yield this._reader.readMessage(s.MessageHeader.RecordBatch);if(null===e||void 0===e?void 0:e.isRecordBatch()){const t=e.header(),r=yield this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,r)}}return null}))}_readDictionaryBatch(e){return i.__awaiter(this,void 0,void 0,(function*(){var t;const r=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(r&&(yield this._handle.seek(r.offset))){const e=yield this._reader.readMessage(s.MessageHeader.DictionaryBatch);if(null===e||void 0===e?void 0:e.isDictionaryBatch()){const t=e.header(),r=yield this._reader.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(t,r);this.dictionaries.set(t.id,i)}}}))}_readFooter(){return i.__awaiter(this,void 0,void 0,(function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-m.magicAndPadding,r=yield e.readInt32(t),i=yield e.readAt(t-r,r);return l.Footer.decode(i)}))}_readNextMessageAndValidate(e){return i.__awaiter(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null}))}}class E extends S{constructor(e,t){super(e,t)}_loadVectors(e,t,r){return new h.JSONVectorLoader(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(r)}}function A(e,t){return t&&"boolean"===typeof t.autoDestroy?t.autoDestroy:e.autoDestroy}function*P(e){const t=y.from(e);try{if(!t.open({autoDestroy:!1}).closed)do{yield t}while(!t.reset().open().closed)}finally{t.cancel()}}function C(e){return i.__asyncGenerator(this,arguments,(function*(){const t=yield i.__await(y.from(e));try{if(!(yield i.__await(t.open({autoDestroy:!1}))).closed)do{yield yield i.__await(t)}while(!(yield i.__await(t.reset().open())).closed)}finally{yield i.__await(t.cancel())}}))}},7452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableToIPC=t.tableFromIPC=void 0;const i=r(2817),n=r(1198),o=r(5337),a=r(7253);t.tableFromIPC=function e(t){const r=o.RecordBatchReader.from(t);return(0,n.isPromise)(r)?r.then((t=>e(t))):r.isAsync()?r.readAll().then((e=>new i.Table(e))):new i.Table(r.readAll())},t.tableToIPC=function(e){return("stream"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stream")?a.RecordBatchStreamWriter:a.RecordBatchFileWriter).writeAll(e).toUint8Array(!0)}},7253:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecordBatchJSONWriter=t.RecordBatchFileWriter=t.RecordBatchStreamWriter=t.RecordBatchWriter=void 0;const i=r(6326),n=r(2817),o=r(2083),a=r(8210),s=r(2741),l=r(2227),c=r(2227),u=r(1200),d=r(1336),h=r(4853),p=r(7020),f=r(2219),m=r(8616),g=r(7537),y=r(5954),_=r(2618),b=r(7348),v=r(1198);class x extends b.ReadableInterop{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new p.AsyncByteQueue,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(0,v.isObject)(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof e.autoDestroy||e.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(e)}toUint8Array(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(e)}writeAll(e){return(0,v.isPromise)(e)?e.then((e=>this.writeAll(e))):(0,v.isAsyncIterable)(e)?k(this,e):T(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e===this._sink||e instanceof p.AsyncByteQueue?this._sink=e:(this._sink=new p.AsyncByteQueue,e&&(0,v.isWritableDOMStream)(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&(0,v.isWritableNodeStream)(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,t&&(0,h.compareSchemas)(t,this._schema)||(null==t?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==e)return this.finish()&&void 0;if(e instanceof n.Table&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof _.RecordBatch&&!(t=e.schema))return this.finish()&&void 0;if(t&&!(0,h.compareSchemas)(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof _.RecordBatch?e instanceof _._InternalEmptyPlaceholderRecordBatch||this._writeRecordBatch(e):e instanceof n.Table?this.writeAll(e.batches):(0,v.isIterable)(e)&&this.writeAll(e)}_writeMessage(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,r=l.Message.encode(e),i=r.byteLength,n=this._writeLegacyIpcFormat?4:8,o=i+n+t&~t,a=o-i-n;return e.headerType===d.MessageHeader.RecordBatch?this._recordBatchBlocks.push(new u.FileBlock(o,e.bodyLength,this._position)):e.headerType===d.MessageHeader.DictionaryBatch&&this._dictionaryBlocks.push(new u.FileBlock(o,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(o-n)),i>0&&this._write(r),this._writePadding(a)}_write(e){if(this._started){const t=(0,y.toUint8Array)(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(l.Message.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(o.MAGIC)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:r,bufferRegions:i,buffers:n}=f.VectorAssembler.assemble(e),o=new c.RecordBatch(e.numRows,r,i),a=l.Message.from(o,t);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(n)}_writeDictionaryBatch(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{byteLength:i,nodes:n,bufferRegions:o,buffers:s}=f.VectorAssembler.assemble(new a.Vector([e])),u=new c.RecordBatch(e.length,n,o),d=new c.DictionaryBatch(u,t,r),h=l.Message.from(d,i);return this._writeMessage(h)._writeBodyBuffers(s)}_writeBodyBuffers(e){let t,r,i;for(let n=-1,o=e.length;++n<o;)(t=e[n])&&(r=t.byteLength)>0&&(this._write(t),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(e){var t,r;for(const[i,n]of e.dictionaries){const e=null!==(t=null===n||void 0===n?void 0:n.data)&&void 0!==t?t:[],o=this._seenDictionaries.get(i),a=null!==(r=this._dictionaryDeltaOffsets.get(i))&&void 0!==r?r:0;if(o&&o.data[0]===e[0]){if(a<e.length)for(const t of e.slice(a))this._writeDictionaryBatch(t,i,!0)}else for(const[t,r]of e.entries())this._writeDictionaryBatch(r,i,t>0);this._seenDictionaries.set(i,n),this._dictionaryDeltaOffsets.set(i,e.length)}return this}}t.RecordBatchWriter=x;class w extends x{static writeAll(e,t){const r=new w(t);return(0,v.isPromise)(e)?e.then((e=>r.writeAll(e))):(0,v.isAsyncIterable)(e)?k(r,e):T(r,e)}}t.RecordBatchStreamWriter=w;class S extends x{static writeAll(e){const t=new S;return(0,v.isPromise)(e)?e.then((e=>t.writeAll(e))):(0,v.isAsyncIterable)(e)?k(t,e):T(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!r&&this._seenDictionaries.has(t))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,t,r)}_writeFooter(e){const t=u.Footer.encode(new u.Footer(e,d.MetadataVersion.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}t.RecordBatchFileWriter=S;class I extends x{static writeAll(e){return(new I).writeAll(e)}constructor(){super(),this._autoDestroy=!0,this._recordBatches=[],this._recordBatchesWithDictionaries=[]}_writeMessage(){return this}_writeFooter(e){return this}_writeSchema(e){return this._write(`{\n  "schema": ${JSON.stringify({fields:e.fields.map((e=>E(e)))},null,2)}`)}_writeDictionaries(e){return e.dictionaries.size>0&&this._recordBatchesWithDictionaries.push(e),this}_writeDictionaryBatch(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._write(0===this._dictionaryBlocks.length?"    ":",\n    "),this._write(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[i]=g.JSONVectorAssembler.assemble(new _.RecordBatch({[t]:e}));return JSON.stringify({id:t,isDelta:r,data:{count:e.length,columns:i}},null,2)}(e,t,r)),this._dictionaryBlocks.push(new u.FileBlock(0,0,0)),this}_writeRecordBatch(e){return this._writeDictionaries(e),this._recordBatches.push(e),this}close(){if(this._recordBatchesWithDictionaries.length>0){this._write(',\n  "dictionaries": [\n');for(const e of this._recordBatchesWithDictionaries)super._writeDictionaries(e);this._write("\n  ]")}if(this._recordBatches.length>0){for(let e=-1,t=this._recordBatches.length;++e<t;)this._write(0===e?',\n  "batches": [\n    ':",\n    "),this._write(A(this._recordBatches[e])),this._recordBatchBlocks.push(new u.FileBlock(0,0,0));this._write("\n  ]")}return this._schema&&this._write("\n}"),this._recordBatchesWithDictionaries=[],this._recordBatches=[],super.close()}}function T(e,t){let r=t;t instanceof n.Table&&(r=t.batches,e.reset(void 0,t.schema));for(const i of r)e.write(i);return e.finish()}function k(e,t){return i.__awaiter(this,void 0,void 0,(function*(){var r,n,o,a,s,l,c;try{for(r=!0,n=i.__asyncValues(t);!(a=(o=yield n.next()).done);r=!0){c=o.value,r=!1;const t=c;e.write(t)}}catch(u){s={error:u}}finally{try{r||a||!(l=n.return)||(yield l.call(n))}finally{if(s)throw s.error}}return e.finish()}))}function E(e){let{name:t,type:r,nullable:i}=e;const n=new m.JSONTypeAssembler;return{name:t,nullable:i,type:n.visit(r),children:(r.children||[]).map((e=>E(e))),dictionary:s.DataType.isDictionary(r)?{id:r.id,isOrdered:r.isOrdered,indexType:n.visit(r.indices)}:void 0}}function A(e){const[t]=g.JSONVectorAssembler.assemble(e);return JSON.stringify({count:e.numRows,columns:t},null,2)}t.RecordBatchJSONWriter=I},2618:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t._InternalEmptyPlaceholderRecordBatch=t.RecordBatch=void 0;const n=r(9061),o=r(2817),a=r(8210),s=r(1598),l=r(2741),c=r(6367),u=r(2572),d=r(7976),h=r(3761),p=r(4900);class f{constructor(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof s.Schema))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=(0,n.makeData)({nullCount:0,type:new l.Struct(this.schema.fields),children:this.schema.fields.map((e=>(0,n.makeData)({type:e.type,nullCount:0})))})]=t,!(this.data instanceof n.Data))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=g(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:r,children:i,length:o}=Object.keys(e).reduce(((t,r,i)=>(t.children[i]=e[r],t.length=Math.max(t.length,e[r].length),t.fields[i]=s.Field.new({name:r,type:e[r].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),a=new s.Schema(r),c=(0,n.makeData)({type:new l.Struct(r),length:o,children:i,nullCount:0});[this.schema,this.data]=g(a,c.children,o);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=y(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return u.instance.visit(this.data,e)}at(e){return this.get((0,c.wrapIndex)(e,this.numRows))}set(e,t){return d.instance.visit(this.data,e,t)}indexOf(e,t){return h.instance.visit(this.data,e,t)}[Symbol.iterator](){return p.instance.visit(new a.Vector([this.data]))}toArray(){return[...this]}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new o.Table(this.schema,[this,...t])}slice(e,t){const[r]=new a.Vector([this.data]).slice(e,t).data;return new f(this.schema,r)}getChild(e){var t;return this.getChildAt(null===(t=this.schema.fields)||void 0===t?void 0:t.findIndex((t=>t.name===e)))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new a.Vector([this.data.children[e]]):null}setChild(e,t){var r;return this.setChildAt(null===(r=this.schema.fields)||void 0===r?void 0:r.findIndex((t=>t.name===e)),t)}setChildAt(e,t){let r=this.schema,i=this.data;if(e>-1&&e<this.numCols){t||(t=new a.Vector([(0,n.makeData)({type:new l.Null,length:this.numRows})]));const o=r.fields.slice(),c=i.children.slice(),u=o[e].clone({type:t.type});[o[e],c[e]]=[u,t.data[0]],r=new s.Schema(o,new Map(this.schema.metadata)),i=(0,n.makeData)({type:new l.Struct(o),children:c})}return new f(r,i)}select(e){const t=this.schema.select(e),r=new l.Struct(t.fields),i=[];for(const n of e){const e=this.schema.fields.findIndex((e=>e.name===n));~e&&(i[e]=this.data.children[e])}return new f(t,(0,n.makeData)({type:r,length:this.numRows,children:i}))}selectAt(e){const t=this.schema.selectAt(e),r=e.map((e=>this.data.children[e])).filter(Boolean),i=(0,n.makeData)({type:new l.Struct(t.fields),length:this.numRows,children:r});return new f(t,i)}}var m;function g(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.reduce(((e,t)=>Math.max(e,t.length)),0);var i;const o=[...e.fields],a=[...t],s=(r+63&-64)>>3;for(const[l,c]of e.fields.entries()){const e=t[l];e&&e.length===r||(o[l]=c.clone({nullable:!0}),a[l]=null!==(i=null===e||void 0===e?void 0:e._changeLengthAndBackfillNullBitmap(r))&&void 0!==i?i:(0,n.makeData)({type:c.type,length:r,nullCount:r,nullBitmap:new Uint8Array(s)}))}return[e.assign(o),(0,n.makeData)({type:new l.Struct(o),length:r,children:a})]}function y(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;var i,n;if((null!==(i=null===e||void 0===e?void 0:e.length)&&void 0!==i?i:0)>0&&(null===e||void 0===e?void 0:e.length)===(null===t||void 0===t?void 0:t.length))for(let o=-1,a=e.length;++o<a;){const{type:i}=e[o],a=t[o];for(const e of[a,...(null===(n=null===a||void 0===a?void 0:a.dictionary)||void 0===n?void 0:n.data)||[]])y(i.children,null===e||void 0===e?void 0:e.children,r);if(l.DataType.isDictionary(i)){const{id:e}=i;if(r.has(e)){if(r.get(e)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else(null===a||void 0===a?void 0:a.dictionary)&&r.set(e,a.dictionary)}}return r}t.RecordBatch=f,i=Symbol.toStringTag,f[i]=((m=f.prototype)._nullCount=-1,m[Symbol.isConcatSpreadable]=!0,"RecordBatch");t._InternalEmptyPlaceholderRecordBatch=class extends f{constructor(e){const t=e.fields.map((e=>(0,n.makeData)({type:e.type})));super(e,(0,n.makeData)({type:new l.Struct(e.fields),nullCount:0,children:t}))}}},5200:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MapRow=t._kKeysAsStrings=t.kKeysAsStrings=t.kVals=t.kKeys=void 0;const i=r(8210),n=r(5564),o=r(2572),a=r(7976);t.kKeys=Symbol.for("keys"),t.kVals=Symbol.for("vals"),t.kKeysAsStrings=Symbol.for("kKeysAsStrings"),t._kKeysAsStrings=Symbol.for("_kKeysAsStrings");class s{constructor(e){return this[t.kKeys]=new i.Vector([e.children[0]]).memoize(),this[t.kVals]=e.children[1],new Proxy(this,new c)}get[t.kKeysAsStrings](){return this[t._kKeysAsStrings]||(this[t._kKeysAsStrings]=Array.from(this[t.kKeys].toArray(),String))}[Symbol.iterator](){return new l(this[t.kKeys],this[t.kVals])}get size(){return this[t.kKeys].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[t.kKeys],r=this[t.kVals],i={};for(let t=-1,n=e.length;++t<n;)i[e.get(t)]=o.instance.visit(r,t);return i}toString(){return`{${[...this].map((e=>{let[t,r]=e;return`${(0,n.valueToString)(t)}: ${(0,n.valueToString)(r)}`})).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}t.MapRow=s;class l{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),o.instance.visit(this.vals,e)]})}}class c{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[t.kKeysAsStrings]}has(e,r){return e[t.kKeysAsStrings].includes(r)}getOwnPropertyDescriptor(e,r){if(-1!==e[t.kKeysAsStrings].indexOf(r))return{writable:!0,enumerable:!0,configurable:!0}}get(e,r){if(Reflect.has(e,r))return e[r];const i=e[t.kKeysAsStrings].indexOf(r);if(-1!==i){const n=o.instance.visit(Reflect.get(e,t.kVals),i);return Reflect.set(e,r,n),n}}set(e,r,i){const n=e[t.kKeysAsStrings].indexOf(r);return-1!==n?(a.instance.visit(Reflect.get(e,t.kVals),n,i),Reflect.set(e,r,i)):!!Reflect.has(e,r)&&Reflect.set(e,r,i)}}Object.defineProperties(s.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[t.kKeys]:{writable:!0,enumerable:!1,configurable:!1,value:null},[t.kVals]:{writable:!0,enumerable:!1,configurable:!1,value:null},[t._kKeysAsStrings]:{writable:!0,enumerable:!1,configurable:!1,value:null}})},7229:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StructRow=void 0;const i=r(5564),n=r(2572),o=r(7976),a=Symbol.for("parent"),s=Symbol.for("rowIndex");class l{constructor(e,t){return this[a]=e,this[s]=t,new Proxy(this,new u)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[s],t=this[a],r=t.type.children,i={};for(let o=-1,a=r.length;++o<a;)i[r[o].name]=n.instance.visit(t.children[o],e);return i}toString(){return`{${[...this].map((e=>{let[t,r]=e;return`${(0,i.valueToString)(t)}: ${(0,i.valueToString)(r)}`})).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new c(this[a],this[s])}}t.StructRow=l;class c{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,n.instance.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(l.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[a]:{writable:!0,enumerable:!1,configurable:!1,value:null},[s]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class u{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[a].type.children.map((e=>e.name))}has(e,t){return-1!==e[a].type.children.findIndex((e=>e.name===t))}getOwnPropertyDescriptor(e,t){if(-1!==e[a].type.children.findIndex((e=>e.name===t)))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const r=e[a].type.children.findIndex((e=>e.name===t));if(-1!==r){const i=n.instance.visit(e[a].children[r],e[s]);return Reflect.set(e,t,i),i}}set(e,t,r){const i=e[a].type.children.findIndex((e=>e.name===t));return-1!==i?(o.instance.visit(e[a].children[i],e[s],r),Reflect.set(e,t,r)):!(!Reflect.has(e,t)&&"symbol"!==typeof t)&&Reflect.set(e,t,r)}}},1598:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Field=t.Schema=void 0;const i=r(1336),n=r(2741);class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.MetadataVersion.V5;this.fields=e||[],this.metadata=t||new Map,r||(r=l(this.fields)),this.dictionaries=r,this.metadataVersion=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((e=>e.name))}toString(){return`Schema<{ ${this.fields.map(((e,t)=>`${t}: ${e}`)).join(", ")} }>`}select(e){const t=new Set(e),r=this.fields.filter((e=>t.has(e.name)));return new o(r,this.metadata)}selectAt(e){const t=e.map((e=>this.fields[e])).filter(Boolean);return new o(t,this.metadata)}assign(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=t[0]instanceof o?t[0]:Array.isArray(t[0])?new o(t[0]):new o(t),n=[...this.fields],a=s(s(new Map,this.metadata),i.metadata),c=i.fields.filter((e=>{const t=n.findIndex((t=>t.name===e.name));return!~t||(n[t]=e.clone({metadata:s(s(new Map,n[t].metadata),e.metadata)}))&&!1})),u=l(c,new Map);return new o([...n,...c],a,new Map([...this.dictionaries,...u]))}}t.Schema=o,o.prototype.fields=null,o.prototype.metadata=null,o.prototype.dictionaries=null;class a{static new(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let[i,n,o,s]=t;return t[0]&&"object"===typeof t[0]&&(({name:i}=t[0]),void 0===n&&(n=t[0].type),void 0===o&&(o=t[0].nullable),void 0===s&&(s=t[0].metadata)),new a(`${i}`,n,o,s)}constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;this.name=e,this.type=t,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];let[i,n,o,s]=t;return t[0]&&"object"===typeof t[0]?({name:i=this.name,type:n=this.type,nullable:o=this.nullable,metadata:s=this.metadata}=t[0]):[i=this.name,n=this.type,o=this.nullable,s=this.metadata]=t,a.new(i,n,o,s)}}function s(e,t){return new Map([...e||new Map,...t||new Map])}function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let r=-1,i=e.length;++r<i;){const i=e[r].type;if(n.DataType.isDictionary(i))if(t.has(i.id)){if(t.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else t.set(i.id,i.dictionary);i.children&&i.children.length>0&&l(i.children,t)}return t}t.Field=a,a.prototype.type=null,a.prototype.name=null,a.prototype.nullable=null,a.prototype.metadata=null},2817:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.tableFromArrays=t.makeTable=t.Table=void 0;const n=r(1336),o=r(9061),a=r(2327),s=r(8210),l=r(1598),c=r(2741),u=r(4853),d=r(8065),h=r(5511),p=r(2572),f=r(7976),m=r(3761),g=r(4900),y=r(6367),_=r(2618);class b{constructor(){for(var e,t,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];if(0===i.length)return this.batches=[],this.schema=new l.Schema([]),this._offsets=[0],this;let a,p;i[0]instanceof l.Schema&&(a=i.shift()),i.at(-1)instanceof Uint32Array&&(p=i.pop());const f=e=>{if(e){if(e instanceof _.RecordBatch)return[e];if(e instanceof b)return e.batches;if(e instanceof o.Data){if(e.type instanceof c.Struct)return[new _.RecordBatch(new l.Schema(e.type.children),e)]}else{if(Array.isArray(e))return e.flatMap((e=>f(e)));if("function"===typeof e[Symbol.iterator])return[...e].flatMap((e=>f(e)));if("object"===typeof e){const t=Object.keys(e),r=t.map((t=>new s.Vector([e[t]]))),i=null!==a&&void 0!==a?a:new l.Schema(t.map(((e,t)=>new l.Field(String(e),r[t].type,r[t].nullable)))),[,n]=(0,d.distributeVectorsIntoRecordBatches)(i,r);return 0===n.length?[new _.RecordBatch(e)]:n}}}return[]},m=i.flatMap((e=>f(e)));if(a=null!==(t=null!==a&&void 0!==a?a:null===(e=m[0])||void 0===e?void 0:e.schema)&&void 0!==t?t:new l.Schema([]),!(a instanceof l.Schema))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const o of m){if(!(o instanceof _.RecordBatch))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!(0,u.compareSchemas)(a,o.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=a,this.batches=m,this._offsets=null!==p&&void 0!==p?p:(0,h.computeChunkOffsets)(this.data)}get data(){return this.batches.map((e=>{let{data:t}=e;return t}))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((e,t)=>e+t.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=(0,h.computeChunkNullCounts)(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get((0,y.wrapIndex)(e,this.numRows))}set(e,t){}indexOf(e,t){return-1}[Symbol.iterator](){return this.batches.length>0?g.instance.visit(new s.Vector(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(){const e=this.schema;for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];const n=this.data.concat(r.flatMap((e=>{let{data:t}=e;return t})));return new b(e,n.map((t=>new _.RecordBatch(e,t))))}slice(e,t){const r=this.schema;[e,t]=(0,y.clampRange)({length:this.numRows},e,t);const i=(0,h.sliceChunks)(this.data,this._offsets,e,t);return new b(r,i.map((e=>new _.RecordBatch(r,e))))}getChild(e){return this.getChildAt(this.schema.fields.findIndex((t=>t.name===e)))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map((t=>t.children[e]));if(0===t.length){const{type:r}=this.schema.fields[e],i=(0,o.makeData)({type:r,length:0,nullCount:0});t.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new s.Vector(t)}return null}setChild(e,t){var r;return this.setChildAt(null===(r=this.schema.fields)||void 0===r?void 0:r.findIndex((t=>t.name===e)),t)}setChildAt(e,t){let r=this.schema,i=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new s.Vector([(0,o.makeData)({type:new c.Null,length:this.numRows})]));const n=r.fields.slice(),a=n[e].clone({type:t.type}),l=this.schema.fields.map(((e,t)=>this.getChildAt(t)));[n[e],l[e]]=[a,t],[r,i]=(0,d.distributeVectorsIntoRecordBatches)(r,l)}return new b(r,i)}select(e){const t=this.schema.fields.reduce(((e,t,r)=>e.set(t.name,r)),new Map);return this.selectAt(e.map((e=>t.get(e))).filter((e=>e>-1)))}selectAt(e){const t=this.schema.selectAt(e),r=this.batches.map((t=>t.selectAt(e)));return new b(t,r)}assign(e){const t=this.schema.fields,[r,i]=e.schema.fields.reduce(((e,r,i)=>{const[n,o]=e,a=t.findIndex((e=>e.name===r.name));return~a?o[a]=i:n.push(i),e}),[[],[]]),n=this.schema.assign(e.schema),o=[...t.map(((e,t)=>[t,i[t]])).map((t=>{let[r,i]=t;return void 0===i?this.getChildAt(r):e.getChildAt(i)})),...r.map((t=>e.getChildAt(t)))].filter(Boolean);return new b(...(0,d.distributeVectorsIntoRecordBatches)(n,o))}}var v;t.Table=b,i=Symbol.toStringTag,b[i]=((v=b.prototype).schema=null,v.batches=[],v._offsets=new Uint32Array([0]),v._nullCount=-1,v[Symbol.isConcatSpreadable]=!0,v.isValid=(0,h.wrapChunkedCall1)(h.isChunkedValid),v.get=(0,h.wrapChunkedCall1)(p.instance.getVisitFn(n.Type.Struct)),v.set=(0,h.wrapChunkedCall2)(f.instance.getVisitFn(n.Type.Struct)),v.indexOf=(0,h.wrapChunkedIndexOf)(m.instance.getVisitFn(n.Type.Struct)),"Table"),t.makeTable=function(e){const t={},r=Object.entries(e);for(const[i,n]of r)t[i]=(0,s.makeVector)(n);return new b(t)},t.tableFromArrays=function(e){const t={},r=Object.entries(e);for(const[i,n]of r)t[i]=(0,a.vectorFromArray)(n);return new b(t)}},2741:(e,t,r)=>{"use strict";var i,n,o,a,s,l,c,u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.Map_=t.FixedSizeList=t.FixedSizeBinary=t.SparseUnion=t.DenseUnion=t.Union=t.Struct=t.List=t.DurationNanosecond=t.DurationMicrosecond=t.DurationMillisecond=t.DurationSecond=t.Duration=t.IntervalYearMonth=t.IntervalDayTime=t.Interval=t.TimestampNanosecond=t.TimestampMicrosecond=t.TimestampMillisecond=t.TimestampSecond=t.Timestamp=t.TimeNanosecond=t.TimeMicrosecond=t.TimeMillisecond=t.TimeSecond=t.Time=t.DateMillisecond=t.DateDay=t.Date_=t.Decimal=t.Bool=t.LargeUtf8=t.Utf8=t.LargeBinary=t.Binary=t.Float64=t.Float32=t.Float16=t.Float=t.Uint64=t.Uint32=t.Uint16=t.Uint8=t.Int64=t.Int32=t.Int16=t.Int8=t.Int=t.Null=t.DataType=void 0,t.strideForType=t.Dictionary=void 0;const h=r(4995),p=r(1336);class f{static isNull(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Null}static isInt(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Int}static isFloat(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Float}static isBinary(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Binary}static isLargeBinary(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.LargeBinary}static isUtf8(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Utf8}static isLargeUtf8(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.LargeUtf8}static isBool(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Bool}static isDecimal(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Decimal}static isDate(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Date}static isTime(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Time}static isTimestamp(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Timestamp}static isInterval(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Interval}static isDuration(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Duration}static isList(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.List}static isStruct(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Struct}static isUnion(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Union}static isFixedSizeBinary(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.FixedSizeBinary}static isFixedSizeList(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.FixedSizeList}static isMap(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Map}static isDictionary(e){return(null===e||void 0===e?void 0:e.typeId)===p.Type.Dictionary}static isDenseUnion(e){return f.isUnion(e)&&e.mode===p.UnionMode.Dense}static isSparseUnion(e){return f.isUnion(e)&&e.mode===p.UnionMode.Sparse}constructor(e){this.typeId=e}}var m;t.DataType=f,i=Symbol.toStringTag,f[i]=((m=f.prototype).children=null,m.ArrayType=Array,m.OffsetArrayType=Int32Array,m[Symbol.toStringTag]="DataType");class g extends f{constructor(){super(p.Type.Null)}toString(){return"Null"}}t.Null=g,g[Symbol.toStringTag]=(e=>e[Symbol.toStringTag]="Null")(g.prototype);class y extends f{constructor(e,t){super(p.Type.Int),this.isSigned=e,this.bitWidth=t}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}t.Int=y,n=Symbol.toStringTag,y[n]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(y.prototype);class _ extends y{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}t.Int8=_;class b extends y{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}t.Int16=b;class v extends y{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}t.Int32=v;class x extends y{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}t.Int64=x;class w extends y{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}t.Uint8=w;class S extends y{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}t.Uint16=S;class I extends y{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}t.Uint32=I;class T extends y{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}t.Uint64=T,Object.defineProperty(_.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(b.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(v.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(x.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(w.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(S.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(I.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(T.prototype,"ArrayType",{value:BigUint64Array});class k extends f{constructor(e){super(p.Type.Float),this.precision=e}get ArrayType(){switch(this.precision){case p.Precision.HALF:return Uint16Array;case p.Precision.SINGLE:return Float32Array;case p.Precision.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}t.Float=k,o=Symbol.toStringTag,k[o]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(k.prototype);class E extends k{constructor(){super(p.Precision.HALF)}}t.Float16=E;class A extends k{constructor(){super(p.Precision.SINGLE)}}t.Float32=A;class P extends k{constructor(){super(p.Precision.DOUBLE)}}t.Float64=P,Object.defineProperty(E.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(A.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(P.prototype,"ArrayType",{value:Float64Array});class C extends f{constructor(){super(p.Type.Binary)}toString(){return"Binary"}}t.Binary=C,C[Symbol.toStringTag]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(C.prototype);class M extends f{constructor(){super(p.Type.LargeBinary)}toString(){return"LargeBinary"}}t.LargeBinary=M,M[Symbol.toStringTag]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(M.prototype);class O extends f{constructor(){super(p.Type.Utf8)}toString(){return"Utf8"}}t.Utf8=O,O[Symbol.toStringTag]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(O.prototype);class R extends f{constructor(){super(p.Type.LargeUtf8)}toString(){return"LargeUtf8"}}t.LargeUtf8=R,R[Symbol.toStringTag]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(R.prototype);class B extends f{constructor(){super(p.Type.Bool)}toString(){return"Bool"}}t.Bool=B,B[Symbol.toStringTag]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(B.prototype);class D extends f{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;super(p.Type.Decimal),this.scale=e,this.precision=t,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}t.Decimal=D,D[Symbol.toStringTag]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(D.prototype);class z extends f{constructor(e){super(p.Type.Date),this.unit=e}toString(){return`Date${32*(this.unit+1)}<${p.DateUnit[this.unit]}>`}get ArrayType(){return this.unit===p.DateUnit.DAY?Int32Array:BigInt64Array}}t.Date_=z,a=Symbol.toStringTag,z[a]=(e=>(e.unit=null,e[Symbol.toStringTag]="Date"))(z.prototype);t.DateDay=class extends z{constructor(){super(p.DateUnit.DAY)}};t.DateMillisecond=class extends z{constructor(){super(p.DateUnit.MILLISECOND)}};class L extends f{constructor(e,t){super(p.Type.Time),this.unit=e,this.bitWidth=t}toString(){return`Time${this.bitWidth}<${p.TimeUnit[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}t.Time=L,s=Symbol.toStringTag,L[s]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(L.prototype);t.TimeSecond=class extends L{constructor(){super(p.TimeUnit.SECOND,32)}};t.TimeMillisecond=class extends L{constructor(){super(p.TimeUnit.MILLISECOND,32)}};t.TimeMicrosecond=class extends L{constructor(){super(p.TimeUnit.MICROSECOND,64)}};t.TimeNanosecond=class extends L{constructor(){super(p.TimeUnit.NANOSECOND,64)}};class F extends f{constructor(e,t){super(p.Type.Timestamp),this.unit=e,this.timezone=t}toString(){return`Timestamp<${p.TimeUnit[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}t.Timestamp=F,l=Symbol.toStringTag,F[l]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Timestamp"))(F.prototype);t.TimestampSecond=class extends F{constructor(e){super(p.TimeUnit.SECOND,e)}};t.TimestampMillisecond=class extends F{constructor(e){super(p.TimeUnit.MILLISECOND,e)}};t.TimestampMicrosecond=class extends F{constructor(e){super(p.TimeUnit.MICROSECOND,e)}};t.TimestampNanosecond=class extends F{constructor(e){super(p.TimeUnit.NANOSECOND,e)}};class N extends f{constructor(e){super(p.Type.Interval),this.unit=e}toString(){return`Interval<${p.IntervalUnit[this.unit]}>`}}t.Interval=N,c=Symbol.toStringTag,N[c]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(N.prototype);t.IntervalDayTime=class extends N{constructor(){super(p.IntervalUnit.DAY_TIME)}};t.IntervalYearMonth=class extends N{constructor(){super(p.IntervalUnit.YEAR_MONTH)}};class j extends f{constructor(e){super(p.Type.Duration),this.unit=e}toString(){return`Duration<${p.TimeUnit[this.unit]}>`}}t.Duration=j,u=Symbol.toStringTag,j[u]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(j.prototype);t.DurationSecond=class extends j{constructor(){super(p.TimeUnit.SECOND)}};t.DurationMillisecond=class extends j{constructor(){super(p.TimeUnit.MILLISECOND)}};t.DurationMicrosecond=class extends j{constructor(){super(p.TimeUnit.MICROSECOND)}};t.DurationNanosecond=class extends j{constructor(){super(p.TimeUnit.NANOSECOND)}};class U extends f{constructor(e){super(p.Type.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}t.List=U,U[Symbol.toStringTag]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(U.prototype);class V extends f{constructor(e){super(p.Type.Struct),this.children=e}toString(){return`Struct<{${this.children.map((e=>`${e.name}:${e.type}`)).join(", ")}}>`}}t.Struct=V,V[Symbol.toStringTag]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(V.prototype);class $ extends f{constructor(e,t,r){super(p.Type.Union),this.mode=e,this.children=r,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce(((e,t,r)=>(e[t]=r)&&e||e),Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((e=>`${e.type}`)).join(" | ")}>`}}t.Union=$,d=Symbol.toStringTag,$[d]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))($.prototype);t.DenseUnion=class extends ${constructor(e,t){super(p.UnionMode.Dense,e,t)}};t.SparseUnion=class extends ${constructor(e,t){super(p.UnionMode.Sparse,e,t)}};class W extends f{constructor(e){super(p.Type.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}t.FixedSizeBinary=W,W[Symbol.toStringTag]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(W.prototype);class H extends f{constructor(e,t){super(p.Type.FixedSizeList),this.listSize=e,this.children=[t]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}t.FixedSizeList=H,H[Symbol.toStringTag]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(H.prototype);class G extends f{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var r,i,n;if(super(p.Type.Map),this.children=[e],this.keysSorted=t,e&&(e.name="entries",null===(r=null===e||void 0===e?void 0:e.type)||void 0===r?void 0:r.children)){const t=null===(i=null===e||void 0===e?void 0:e.type)||void 0===i?void 0:i.children[0];t&&(t.name="key");const r=null===(n=null===e||void 0===e?void 0:e.type)||void 0===n?void 0:n.children[1];r&&(r.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((e=>`${e.name}:${e.type}`)).join(", ")}}>`}}t.Map_=G,G[Symbol.toStringTag]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(G.prototype);const q=(Z=-1,()=>++Z);var Z;class X extends f{constructor(e,t,r,i){super(p.Type.Dictionary),this.indices=t,this.dictionary=e,this.isOrdered=i||!1,this.id=null==r?q():(0,h.bigIntToNumber)(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}t.Dictionary=X,X[Symbol.toStringTag]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(X.prototype),t.strideForType=function(e){const t=e;switch(e.typeId){case p.Type.Decimal:return e.bitWidth/32;case p.Type.Interval:return 1+t.unit;case p.Type.FixedSizeList:return t.listSize;case p.Type.FixedSizeBinary:return t.byteWidth;default:return 1}}},4995:(e,t)=>{"use strict";function r(e){if("bigint"===typeof e&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.divideBigInts=t.bigIntToNumber=void 0,t.bigIntToNumber=r,t.divideBigInts=function(e,t){return r(e/t)+r(e%t)/r(t)}},1849:(e,t)=>{"use strict";function r(e,t,r,i){return 0!==(r&1<<i)}function i(e,t,r,i){return(r&1<<i)>>i}function n(e){const t=[];let r=0,i=0,n=0;for(const a of e)a&&(n|=1<<i),8===++i&&(t[r++]=n,n=i=0);(0===r||i>0)&&(t[r++]=n);const o=new Uint8Array(t.length+7&-8);return o.set(t),o}Object.defineProperty(t,"__esModule",{value:!0}),t.popcnt_uint32=t.popcnt_array=t.popcnt_bit_range=t.BitIterator=t.packBools=t.truncateBitmap=t.setBool=t.getBit=t.getBool=void 0,t.getBool=r,t.getBit=i,t.setBool=function(e,t,r){return r?!!(e[t>>3]|=1<<t%8)||!0:!(e[t>>3]&=~(1<<t%8))&&!1},t.truncateBitmap=function(e,t,i){const a=i.byteLength+7&-8;if(e>0||i.byteLength<a){const s=new Uint8Array(a);return s.set(e%8===0?i.subarray(e>>3):n(new o(i,e,t,null,r)).subarray(0,a)),s}return i},t.packBools=n;class o{constructor(e,t,r,i,n){this.bytes=e,this.length=r,this.context=i,this.get=n,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function a(e,t,r){let i=0,n=Math.trunc(t);const o=new DataView(e.buffer,e.byteOffset,e.byteLength),a=void 0===r?e.byteLength:n+r;for(;a-n>=4;)i+=s(o.getUint32(n)),n+=4;for(;a-n>=2;)i+=s(o.getUint16(n)),n+=2;for(;a-n>=1;)i+=s(o.getUint8(n)),n+=1;return i}function s(e){let t=Math.trunc(e);return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24}t.BitIterator=o,t.popcnt_bit_range=function e(t,r,n){if(n-r<=0)return 0;if(n-r<8){let e=0;for(const a of new o(t,r,n-r,t,i))e+=a;return e}const s=n>>3<<3,l=r+(r%8===0?0:8-r%8);return e(t,r,l)+e(t,s,n)+a(t,l>>3,s-l>>3)},t.popcnt_array=a,t.popcnt_uint32=s},5420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BN=t.bigNumToBigInt=t.bigNumToString=t.bigNumToNumber=t.isArrowBigNumSymbol=void 0;const i=r(5954),n=r(4995);function o(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return 0===r.length?Object.setPrototypeOf((0,i.toArrayBufferView)(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...r),this.constructor.prototype)}function a(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.apply(this,t)}function s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.apply(this,t)}function l(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return o.apply(this,t)}t.isArrowBigNumSymbol=Symbol.for("isArrowBigNum"),o.prototype[t.isArrowBigNumSymbol]=!0,o.prototype.toJSON=function(){return`"${d(this)}"`},o.prototype.valueOf=function(e){return u(this,e)},o.prototype.toString=function(){return d(this)},o.prototype[Symbol.toPrimitive]=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"number":return u(this);case"string":return d(this);case"default":return h(this)}return d(this)},Object.setPrototypeOf(a.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(s.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(l.prototype,Object.create(Uint32Array.prototype)),Object.assign(a.prototype,o.prototype,{constructor:a,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(s.prototype,o.prototype,{constructor:s,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(l.prototype,o.prototype,{constructor:l,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const c=BigInt(4294967296)*BigInt(4294967296)-BigInt(1);function u(e,t){const{buffer:r,byteOffset:i,byteLength:o,signed:a}=e,s=new BigUint64Array(r,i,o/8),l=a&&s.at(-1)&BigInt(1)<<BigInt(63);let u=BigInt(0),d=0;if(l){for(const e of s)u|=(e^c)*(BigInt(1)<<BigInt(64*d++));u*=BigInt(-1),u-=BigInt(1)}else for(const n of s)u|=n*(BigInt(1)<<BigInt(64*d++));if("number"===typeof t){const e=BigInt(Math.pow(10,t)),r=u/e,i=u%e;return(0,n.bigIntToNumber)(r)+(0,n.bigIntToNumber)(i)/(0,n.bigIntToNumber)(e)}return(0,n.bigIntToNumber)(u)}function d(e){if(8===e.byteLength){return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`}if(!e.signed)return p(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return p(e);t=t.slice();let r=1;for(let i=0;i<t.length;i++){const e=t[i],n=~e+r;t[i]=n,r&=0===e?1:0}return`-${p(t)}`}function h(e){if(8===e.byteLength){return new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}return d(e)}function p(e){let t="";const r=new Uint32Array(2);let i=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const n=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let o=-1;const a=i.length-1;do{for(r[0]=i[o=0];o<a;)i[o++]=r[1]=r[0]/10,r[0]=(r[0]-10*r[1]<<16)+i[o];i[o]=r[1]=r[0]/10,r[0]=r[0]-10*r[1],t=`${r[0]}${t}`}while(n[0]||n[1]||n[2]||n[3]);return null!==t&&void 0!==t?t:"0"}t.bigNumToNumber=u,t.bigNumToString=d,t.bigNumToBigInt=h;class f{static new(e,t){switch(t){case!0:return new a(e);case!1:return new s(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new a(e)}return 16===e.byteLength?new l(e):new s(e)}static signed(e){return new a(e)}static unsigned(e){return new s(e)}static decimal(e){return new l(e)}constructor(e,t){return f.new(e,t)}}t.BN=f},5954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareArrayLike=t.rebaseValueOffsets=t.toUint8ClampedArrayAsyncIterator=t.toFloat64ArrayAsyncIterator=t.toFloat32ArrayAsyncIterator=t.toUint32ArrayAsyncIterator=t.toUint16ArrayAsyncIterator=t.toUint8ArrayAsyncIterator=t.toInt32ArrayAsyncIterator=t.toInt16ArrayAsyncIterator=t.toInt8ArrayAsyncIterator=t.toArrayBufferViewAsyncIterator=t.toUint8ClampedArrayIterator=t.toFloat64ArrayIterator=t.toFloat32ArrayIterator=t.toUint32ArrayIterator=t.toUint16ArrayIterator=t.toUint8ArrayIterator=t.toInt32ArrayIterator=t.toInt16ArrayIterator=t.toInt8ArrayIterator=t.toArrayBufferViewIterator=t.toUint8ClampedArray=t.toFloat64Array=t.toFloat32Array=t.toBigUint64Array=t.toUint32Array=t.toUint16Array=t.toUint8Array=t.toBigInt64Array=t.toInt32Array=t.toInt16Array=t.toInt8Array=t.toArrayBufferView=t.joinUint8Arrays=t.memcpy=void 0;const i=r(6326),n=r(4779),o=r(1198),a="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function s(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength;const n=e.byteLength,o=new Uint8Array(e.buffer,e.byteOffset,n),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(i,n));return o.set(a,r),e}function l(e,t){let r=(0,o.isIteratorResult)(t)?t.value:t;return r instanceof e?e===Uint8Array?new e(r.buffer,r.byteOffset,r.byteLength):r:r?("string"===typeof r&&(r=(0,n.encodeUtf8)(r)),r instanceof ArrayBuffer||r instanceof a?new e(r):(0,o.isFlatbuffersByteBuffer)(r)?l(e,r.bytes()):ArrayBuffer.isView(r)?r.byteLength<=0?new e(0):new e(r.buffer,r.byteOffset,r.byteLength/e.BYTES_PER_ELEMENT):e.from(r)):new e(0)}t.memcpy=s,t.joinUint8Arrays=function(e,t){const r=function(e){const t=e[0]?[e[0]]:[];let r,i,n,o;for(let a,s,l=0,c=0,u=e.length;++l<u;)a=t[c],s=e[l],!a||!s||a.buffer!==s.buffer||s.byteOffset<a.byteOffset?s&&(t[++c]=s):(({byteOffset:r,byteLength:n}=a),({byteOffset:i,byteLength:o}=s),r+n<i||i+o<r?s&&(t[++c]=s):t[c]=new Uint8Array(a.buffer,r,i-r+o));return t}(e),i=r.reduce(((e,t)=>e+t.byteLength),0);let n,o,a,l=0,c=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,i);for(const d=r.length;++c<d;){if(n=r[c],o=n.subarray(0,Math.min(n.length,u-l)),u<=l+o.length){o.length<n.length?r[c]=n.subarray(o.length):o.length===n.length&&c++,a?s(a,o,l):a=o;break}s(a||(a=new Uint8Array(u)),o,l),l+=o.length}return[a||new Uint8Array(0),r.slice(c),i-(a?a.byteLength:0)]},t.toArrayBufferView=l;t.toInt8Array=e=>l(Int8Array,e);t.toInt16Array=e=>l(Int16Array,e);t.toInt32Array=e=>l(Int32Array,e);t.toBigInt64Array=e=>l(BigInt64Array,e);t.toUint8Array=e=>l(Uint8Array,e);t.toUint16Array=e=>l(Uint16Array,e);t.toUint32Array=e=>l(Uint32Array,e);t.toBigUint64Array=e=>l(BigUint64Array,e);t.toFloat32Array=e=>l(Float32Array,e);t.toFloat64Array=e=>l(Float64Array,e);t.toUint8ClampedArray=e=>l(Uint8ClampedArray,e);const c=e=>(e.next(),e);function*u(e,t){const r=function*(e){yield e},i="string"===typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof a?r(t):(0,o.isIterable)(t)?t:r(t);return yield*c(function*(t){let r=null;do{r=t.next(yield l(e,r))}while(!r.done)}(i[Symbol.iterator]())),new e}t.toArrayBufferViewIterator=u;t.toInt8ArrayIterator=e=>u(Int8Array,e);t.toInt16ArrayIterator=e=>u(Int16Array,e);t.toInt32ArrayIterator=e=>u(Int32Array,e);t.toUint8ArrayIterator=e=>u(Uint8Array,e);t.toUint16ArrayIterator=e=>u(Uint16Array,e);t.toUint32ArrayIterator=e=>u(Uint32Array,e);t.toFloat32ArrayIterator=e=>u(Float32Array,e);t.toFloat64ArrayIterator=e=>u(Float64Array,e);function d(e,t){return i.__asyncGenerator(this,arguments,(function*(){if((0,o.isPromise)(t))return yield i.__await(yield i.__await(yield*i.__asyncDelegator(i.__asyncValues(d(e,yield i.__await(t))))));const r=function(e){return i.__asyncGenerator(this,arguments,(function*(){yield yield i.__await(yield i.__await(e))}))},n="string"===typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof a?r(t):(0,o.isIterable)(t)?function(e){return i.__asyncGenerator(this,arguments,(function*(){yield i.__await(yield*i.__asyncDelegator(i.__asyncValues(c(function*(e){let t=null;do{t=e.next(yield null===t||void 0===t?void 0:t.value)}while(!t.done)}(e[Symbol.iterator]())))))}))}(t):(0,o.isAsyncIterable)(t)?t:r(t);return yield i.__await(yield*i.__asyncDelegator(i.__asyncValues(c(function(t){return i.__asyncGenerator(this,arguments,(function*(){let r=null;do{r=yield i.__await(t.next(yield yield i.__await(l(e,r))))}while(!r.done)}))}(n[Symbol.asyncIterator]()))))),yield i.__await(new e)}))}t.toUint8ClampedArrayIterator=e=>u(Uint8ClampedArray,e),t.toArrayBufferViewAsyncIterator=d;t.toInt8ArrayAsyncIterator=e=>d(Int8Array,e);t.toInt16ArrayAsyncIterator=e=>d(Int16Array,e);t.toInt32ArrayAsyncIterator=e=>d(Int32Array,e);t.toUint8ArrayAsyncIterator=e=>d(Uint8Array,e);t.toUint16ArrayAsyncIterator=e=>d(Uint16Array,e);t.toUint32ArrayAsyncIterator=e=>d(Uint32Array,e);t.toFloat32ArrayAsyncIterator=e=>d(Float32Array,e);t.toFloat64ArrayAsyncIterator=e=>d(Float64Array,e);t.toUint8ClampedArrayAsyncIterator=e=>d(Uint8ClampedArray,e),t.rebaseValueOffsets=function(e,t,r){if(0!==e)for(let i=-1,n=(r=r.slice(0,t)).length;++i<n;)r[i]+=e;return r.subarray(0,t)},t.compareArrayLike=function(e,t){let r=0;const i=e.length;if(i!==t.length)return!1;if(i>0)do{if(e[r]!==t[r])return!1}while(++r<i);return!0}},5511:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapChunkedIndexOf=t.wrapChunkedCall2=t.wrapChunkedCall1=t.isChunkedValid=t.binarySearch=t.sliceChunks=t.computeChunkOffsets=t.computeChunkNullCounts=t.computeChunkNullable=t.ChunkedIterator=void 0;class r{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function i(e,t,r,i){let n=0,o=0,a=t.length-1;do{if(n>=a-1)return r<t[a]?i(e,n,r-t[n]):null;o=n+Math.trunc(.5*(a-n)),r<t[o]?a=o:n=o}while(n<a)}t.ChunkedIterator=r,t.computeChunkNullable=function(e){return e.some((e=>e.nullable))},t.computeChunkNullCounts=function(e){return e.reduce(((e,t)=>e+t.nullCount),0)},t.computeChunkOffsets=function(e){return e.reduce(((e,t,r)=>(e[r+1]=e[r]+t.length,e)),new Uint32Array(e.length+1))},t.sliceChunks=function(e,t,r,i){const n=[];for(let o=-1,a=e.length;++o<a;){const a=e[o],s=t[o],{length:l}=a;if(s>=i)break;if(r>=s+l)continue;if(s>=r&&s+l<=i){n.push(a);continue}const c=Math.max(0,r-s),u=Math.min(i-s,l);n.push(a.slice(c,u-c))}return 0===n.length&&n.push(e[0].slice(0,0)),n},t.binarySearch=i,t.isChunkedValid=function(e,t){return e.getValid(t)},t.wrapChunkedCall1=function(e){function t(t,r,i){return e(t[r],i)}return function(e){return i(this.data,this._offsets,e,t)}},t.wrapChunkedCall2=function(e){let t;function r(r,i,n){return e(r[i],n,t)}return function(e,n){const o=this.data;t=n;const a=i(o,this._offsets,e,r);return t=void 0,a}},t.wrapChunkedIndexOf=function(e){let t;function r(r,i,n){let o=n,a=0,s=0;for(let l=i-1,c=r.length;++l<c;){const i=r[l];if(~(a=e(i,t,o)))return s+a;o=0,s+=i.length}return-1}return function(e,n){t=e;const o=this.data,a="number"!==typeof n?r(o,0,0):i(o,this._offsets,n,r);return t=void 0,a}}},1198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFlatbuffersByteBuffer=t.isReadableNodeStream=t.isWritableNodeStream=t.isReadableDOMStream=t.isWritableDOMStream=t.isFetchResponse=t.isFSReadStream=t.isFileHandle=t.isUnderlyingSink=t.isIteratorResult=t.isArrayLike=t.isArrowJSON=t.isAsyncIterable=t.isIterable=t.isObservable=t.isPromise=t.isObject=void 0;const r=e=>"number"===typeof e,i=e=>"boolean"===typeof e,n=e=>"function"===typeof e;t.isObject=e=>null!=e&&Object(e)===e;t.isPromise=e=>(0,t.isObject)(e)&&n(e.then);t.isObservable=e=>(0,t.isObject)(e)&&n(e.subscribe);t.isIterable=e=>(0,t.isObject)(e)&&n(e[Symbol.iterator]);t.isAsyncIterable=e=>(0,t.isObject)(e)&&n(e[Symbol.asyncIterator]);t.isArrowJSON=e=>(0,t.isObject)(e)&&(0,t.isObject)(e.schema);t.isArrayLike=e=>(0,t.isObject)(e)&&r(e.length);t.isIteratorResult=e=>(0,t.isObject)(e)&&"done"in e&&"value"in e;t.isUnderlyingSink=e=>(0,t.isObject)(e)&&n(e.abort)&&n(e.close)&&n(e.start)&&n(e.write);t.isFileHandle=e=>(0,t.isObject)(e)&&n(e.stat)&&r(e.fd);t.isFSReadStream=e=>(0,t.isReadableNodeStream)(e)&&r(e.bytesRead);t.isFetchResponse=e=>(0,t.isObject)(e)&&(0,t.isReadableDOMStream)(e.body);const o=e=>"_getDOMStream"in e&&"_getNodeStream"in e;t.isWritableDOMStream=e=>(0,t.isObject)(e)&&n(e.abort)&&n(e.getWriter)&&!o(e);t.isReadableDOMStream=e=>(0,t.isObject)(e)&&n(e.cancel)&&n(e.getReader)&&!o(e);t.isWritableNodeStream=e=>(0,t.isObject)(e)&&n(e.end)&&n(e.write)&&i(e.writable)&&!o(e);t.isReadableNodeStream=e=>(0,t.isObject)(e)&&n(e.read)&&n(e.pipe)&&i(e.readable)&&!o(e);t.isFlatbuffersByteBuffer=e=>(0,t.isObject)(e)&&n(e.clear)&&n(e.bytes)&&n(e.position)&&n(e.setPosition)&&n(e.capacity)&&n(e.getBufferIdentifier)&&n(e.createLong)},11:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Int128=t.Int64=t.Uint64=t.BaseInt64=void 0;function r(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const i=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class n{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),r=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]);let i=t[3]*r[3];this.buffer[0]=65535&i;let n=i>>>16;return i=t[2]*r[3],n+=i,i=t[3]*r[2]>>>0,n+=i,this.buffer[0]+=n<<16,this.buffer[1]=n>>>0<i?65536:0,this.buffer[1]+=n>>>16,this.buffer[1]+=t[1]*r[3]+t[2]*r[2]+t[3]*r[1],this.buffer[1]+=t[0]*r[3]+t[1]*r[2]+t[2]*r[1]+t[3]*r[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${r(this.buffer[1])} ${r(this.buffer[0])}`}}t.BaseInt64=n;class o extends n{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return o.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return o.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const r=e.length,n=new o(t);for(let a=0;a<r;){const t=8<r-a?8:r-a,s=new o(new Uint32Array([Number.parseInt(e.slice(a,a+t),10),0])),l=new o(new Uint32Array([i[t],0]));n.times(l),n.plus(s),a+=t}return n}static convertArray(e){const t=new Uint32Array(2*e.length);for(let r=-1,i=e.length;++r<i;)o.from(e[r],new Uint32Array(t.buffer,t.byteOffset+2*r*4,2));return t}static multiply(e,t){return new o(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new o(new Uint32Array(e.buffer)).plus(t)}}t.Uint64=o;class a extends n{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]|0,r=e.buffer[1]|0;return t<r||t===r&&this.buffer[0]<e.buffer[0]}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return a.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return a.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const r=e.startsWith("-"),n=e.length,o=new a(t);for(let s=r?1:0;s<n;){const t=8<n-s?8:n-s,r=new a(new Uint32Array([Number.parseInt(e.slice(s,s+t),10),0])),l=new a(new Uint32Array([i[t],0]));o.times(l),o.plus(r),s+=t}return r?o.negate():o}static convertArray(e){const t=new Uint32Array(2*e.length);for(let r=-1,i=e.length;++r<i;)a.from(e[r],new Uint32Array(t.buffer,t.byteOffset+2*r*4,2));return t}static multiply(e,t){return new a(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new a(new Uint32Array(e.buffer)).plus(t)}}t.Int64=a;class s{constructor(e){this.buffer=e}high(){return new a(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new a(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(e){const t=new o(new Uint32Array([this.buffer[3],0])),r=new o(new Uint32Array([this.buffer[2],0])),i=new o(new Uint32Array([this.buffer[1],0])),n=new o(new Uint32Array([this.buffer[0],0])),a=new o(new Uint32Array([e.buffer[3],0])),s=new o(new Uint32Array([e.buffer[2],0])),l=new o(new Uint32Array([e.buffer[1],0])),c=new o(new Uint32Array([e.buffer[0],0]));let u=o.multiply(n,c);this.buffer[0]=u.low();const d=new o(new Uint32Array([u.high(),0]));u=o.multiply(i,c),d.plus(u),u=o.multiply(n,l),d.plus(u),this.buffer[1]=d.low(),this.buffer[3]=d.lessThan(u)?1:0,this.buffer[2]=d.high();return new o(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(o.multiply(r,c)).plus(o.multiply(i,l)).plus(o.multiply(n,s)),this.buffer[3]+=o.multiply(t,c).plus(o.multiply(r,l)).plus(o.multiply(i,s)).plus(o.multiply(n,a)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${r(this.buffer[3])} ${r(this.buffer[2])} ${r(this.buffer[1])} ${r(this.buffer[0])}`}static multiply(e,t){return new s(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new s(new Uint32Array(e.buffer)).plus(t)}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return s.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return s.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const r=e.startsWith("-"),n=e.length,o=new s(t);for(let a=r?1:0;a<n;){const t=8<n-a?8:n-a,r=new s(new Uint32Array([Number.parseInt(e.slice(a,a+t),10),0,0,0])),l=new s(new Uint32Array([i[t],0,0,0]));o.times(l),o.plus(r),a+=t}return r?o.negate():o}static convertArray(e){const t=new Uint32Array(4*e.length);for(let r=-1,i=e.length;++r<i;)s.from(e[r],new Uint32Array(t.buffer,t.byteOffset+16*r,4));return t}}t.Int128=s},8086:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.float64ToUint16=t.uint16ToFloat64=void 0;const r=new Float64Array(1),i=new Uint32Array(r.buffer);t.uint16ToFloat64=function(e){const t=(31744&e)>>10,r=(1023&e)/1024,i=Math.pow(-1,(32768&e)>>15);switch(t){case 31:return i*(r?Number.NaN:1/0);case 0:return i*(r?6103515625e-14*r:0)}return i*Math.pow(2,t-15)*(1+r)},t.float64ToUint16=function(e){if(e!==e)return 32256;r[0]=e;const t=(2147483648&i[1])>>16&65535;let n=2146435072&i[1],o=0;return n>=1089470464?i[0]>0?n=31744:(n=(2080374784&n)>>16,o=(1048575&i[1])>>10):n<=1056964608?(o=1048576+(1048575&i[1]),o=1048576+(o<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,o=512+(1048575&i[1])>>10),t|n|65535&o}},5564:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.valueToString=void 0;t.valueToString=function e(t){if(null===t)return"null";if(undefined===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"===typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map((t=>e(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((e,t)=>"bigint"===typeof t?`${t}`:t))}},8065:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.distributeVectorsIntoRecordBatches=void 0;const i=r(9061),n=r(2741),o=r(2618);function a(e,t,r,n,o){var a;const s=(t+63&-64)>>3;for(let l=-1,c=n.length;++l<c;){const c=r[l],u=null===c||void 0===c?void 0:c.length;if(u>=t)u===t?r[l]=c:(r[l]=c.slice(0,t),o.numBatches=Math.max(o.numBatches,n[l].unshift(c.slice(t,u-t))));else{const n=e[l];e[l]=n.clone({nullable:!0}),r[l]=null!==(a=null===c||void 0===c?void 0:c._changeLengthAndBackfillNullBitmap(t))&&void 0!==a?a:(0,i.makeData)({type:n.type,length:t,nullCount:t,nullBitmap:new Uint8Array(s)})}}return r}t.distributeVectorsIntoRecordBatches=function(e,t){return function(e,t){const r=[...e.fields],s=[],l={numBatches:t.reduce(((e,t)=>Math.max(e,t.length)),0)};let c=0,u=0,d=-1;const h=t.length;let p,f=[];for(;l.numBatches-- >0;){for(u=Number.POSITIVE_INFINITY,d=-1;++d<h;)f[d]=p=t[d].shift(),u=Math.min(u,p?p.length:u);Number.isFinite(u)&&(f=a(r,u,f,t,l),u>0&&(s[c++]=(0,i.makeData)({type:new n.Struct(r),length:u,nullCount:0,children:f.slice()})))}return[e=e.assign(r),s.map((t=>new o.RecordBatch(e,t)))]}(e,t.map((e=>e.data.concat())))}},4779:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeUtf8=t.decodeUtf8=void 0;const r=new TextDecoder("utf-8");t.decodeUtf8=e=>r.decode(e);const i=new TextEncoder;t.encodeUtf8=e=>i.encode(e)},6367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createElementComparator=t.wrapIndex=t.clampRange=void 0;const i=r(8210),n=r(5200),o=r(7229),a=r(5954);let s;t.clampRange=function(e,t,r,i){const{length:n=0}=e;let o="number"!==typeof t?0:t,a="number"!==typeof r?n:r;return o<0&&(o=(o%n+n)%n),a<0&&(a=(a%n+n)%n),a<o&&(s=o,o=a,a=s),a>n&&(a=n),i?i(e,o,a):[o,a]};t.wrapIndex=(e,t)=>e<0?t+e:e;const l=e=>e!==e;function c(e){if("object"!==typeof e||null===e)return l(e)?l:t=>t===e;if(e instanceof Date){const t=e.valueOf();return e=>e instanceof Date&&e.valueOf()===t}return ArrayBuffer.isView(e)?t=>!!t&&(0,a.compareArrayLike)(e,t):e instanceof Map?function(e){let t=-1;const r=[];for(const i of e.values())r[++t]=c(i);return u(r)}(e):Array.isArray(e)?function(e){const t=[];for(let r=-1,i=e.length;++r<i;)t[r]=c(e[r]);return u(t)}(e):e instanceof i.Vector?function(e){const t=[];for(let r=-1,i=e.length;++r<i;)t[r]=c(e.get(r));return u(t)}(e):function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=Object.keys(e);if(!t&&0===r.length)return()=>!1;const i=[];for(let n=-1,o=r.length;++n<o;)i[n]=c(e[r[n]]);return u(i,r)}(e,!0)}function u(e,t){return r=>{if(!r||"object"!==typeof r)return!1;switch(r.constructor){case Array:return function(e,t){const r=e.length;if(t.length!==r)return!1;for(let i=-1;++i<r;)if(!e[i](t[i]))return!1;return!0}(e,r);case Map:return d(e,r,r.keys());case n.MapRow:case o.StructRow:case Object:case void 0:return d(e,r,t||Object.keys(r))}return r instanceof i.Vector&&function(e,t){const r=e.length;if(t.length!==r)return!1;for(let i=-1;++i<r;)if(!e[i](t.get(i)))return!1;return!0}(e,r)}}function d(e,t,r){const i=r[Symbol.iterator](),n=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const s=e.length;let l=o.next(),c=i.next(),u=n.next();for(;a<s&&!c.done&&!u.done&&!l.done&&(c.value===u.value&&e[a](l.value));++a,c=i.next(),u=n.next(),l=o.next());return!!(a===s&&c.done&&u.done&&l.done)||(i.return&&i.return(),n.return&&n.return(),o.return&&o.return(),!1)}t.createElementComparator=c},8210:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.makeVector=t.Vector=void 0;const n=r(1336),o=r(6367),a=r(2741),s=r(9061),l=r(5511),c=r(2572),u=r(7976),d=r(3761),h=r(4900),p={},f={};class m{constructor(e){var t,r,i;const n=e[0]instanceof m?e.flatMap((e=>e.data)):e;if(0===n.length||n.some((e=>!(e instanceof s.Data))))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(t=n[0])||void 0===t?void 0:t.type;switch(n.length){case 0:this._offsets=[0];break;case 1:{const{get:e,set:t,indexOf:r}=p[o.typeId],i=n[0];this.isValid=e=>(0,l.isChunkedValid)(i,e),this.get=t=>e(i,t),this.set=(e,r)=>t(i,e,r),this.indexOf=e=>r(i,e),this._offsets=[0,i.length];break}default:Object.setPrototypeOf(this,f[o.typeId]),this._offsets=(0,l.computeChunkOffsets)(n)}this.data=n,this.type=o,this.stride=(0,a.strideForType)(o),this.numChildren=null!==(i=null===(r=o.children)||void 0===r?void 0:r.length)&&void 0!==i?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce(((e,t)=>e+t.byteLength),0)}get nullable(){return(0,l.computeChunkNullable)(this.data)}get nullCount(){return(0,l.computeChunkNullCounts)(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${n.Type[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get((0,o.wrapIndex)(e,this.length))}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>-1}[Symbol.iterator](){return h.instance.visit(this)}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new m(this.data.concat(t.flatMap((e=>e.data)).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new m((0,o.clampRange)(this,e,t,((e,t,r)=>{let{data:i,_offsets:n}=e;return(0,l.sliceChunks)(i,n,t,r)})))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:r,stride:i,ArrayType:o}=this;switch(e.typeId){case n.Type.Int:case n.Type.Float:case n.Type.Decimal:case n.Type.Time:case n.Type.Timestamp:switch(t.length){case 0:return new o;case 1:return t[0].values.subarray(0,r*i);default:return t.reduce(((e,t)=>{let{values:r,length:n}=t;return e.array.set(r.subarray(0,n*i),e.offset),e.offset+=n*i,e}),{array:new o(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt(null===(t=this.type.children)||void 0===t?void 0:t.findIndex((t=>t.name===e)))}getChildAt(e){return e>-1&&e<this.numChildren?new m(this.data.map((t=>{let{children:r}=t;return r[e]}))):null}get isMemoized(){return!!a.DataType.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(a.DataType.isDictionary(this.type)){const e=new g(this.data[0].dictionary),t=this.data.map((t=>{const r=t.clone();return r.dictionary=e,r}));return new m(t)}return new g(this)}unmemoize(){if(a.DataType.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map((t=>{const r=t.clone();return r.dictionary=e,r}));return new m(t)}return this}}t.Vector=m,i=Symbol.toStringTag,m[i]=(e=>{e.type=a.DataType.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(n.Type).map((e=>n.Type[e])).filter((e=>"number"===typeof e&&e!==n.Type.NONE));for(const r of t){const t=c.instance.getVisitFnByTypeId(r),i=u.instance.getVisitFnByTypeId(r),n=d.instance.getVisitFnByTypeId(r);p[r]={get:t,set:i,indexOf:n},f[r]=Object.create(e,{isValid:{value:(0,l.wrapChunkedCall1)(l.isChunkedValid)},get:{value:(0,l.wrapChunkedCall1)(c.instance.getVisitFnByTypeId(r))},set:{value:(0,l.wrapChunkedCall2)(u.instance.getVisitFnByTypeId(r))},indexOf:{value:(0,l.wrapChunkedIndexOf)(d.instance.getVisitFnByTypeId(r))}})}return"Vector"})(m.prototype);class g extends m{constructor(e){super(e.data);const t=this.get,r=this.set,i=this.slice,n=new Array(this.length);Object.defineProperty(this,"get",{value(e){const r=n[e];if(void 0!==r)return r;const i=t.call(this,e);return n[e]=i,i}}),Object.defineProperty(this,"set",{value(e,t){r.call(this,e,t),n[e]=t}}),Object.defineProperty(this,"slice",{value:(e,t)=>new g(i.call(this,e,t))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new m(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}const y=r(2741);function _(e){if(e){if(e instanceof s.Data)return new m([e]);if(e instanceof m)return new m(e.data);if(e.type instanceof a.DataType)return new m([(0,s.makeData)(e)]);if(Array.isArray(e))return new m(e.flatMap((e=>{return(t=e)instanceof s.Data?[t]:t instanceof m?t.data:_(t).data;var t})));if(ArrayBuffer.isView(e)){e instanceof DataView&&(e=new Uint8Array(e.buffer));const t={offset:0,length:e.length,nullCount:-1,data:e};if(e instanceof Int8Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Int8}))]);if(e instanceof Int16Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Int16}))]);if(e instanceof Int32Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Int32}))]);if(e instanceof BigInt64Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Int64}))]);if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Uint8}))]);if(e instanceof Uint16Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Uint16}))]);if(e instanceof Uint32Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Uint32}))]);if(e instanceof BigUint64Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Uint64}))]);if(e instanceof Float32Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Float32}))]);if(e instanceof Float64Array)return new m([(0,s.makeData)(Object.assign(Object.assign({},t),{type:new y.Float64}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}t.makeVector=_},2239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Visitor=void 0;const i=r(1336),n=r(2741);class o{visitMany(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e.map(((e,t)=>this.visit(e,...r.map((e=>e[t])))))}visit(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(e){return function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"===typeof t)return a(e,t,r);if("string"===typeof t&&t in i.Type)return a(e,i.Type[t],r);if(t&&t instanceof n.DataType)return a(e,s(t),r);if((null===t||void 0===t?void 0:t.type)&&t.type instanceof n.DataType)return a(e,s(t.type),r);return a(e,i.Type.NONE,r)}(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}getVisitFnByTypeId(e){return a(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(e){return null}visitBool(e){return null}visitInt(e){return null}visitFloat(e){return null}visitUtf8(e){return null}visitLargeUtf8(e){return null}visitBinary(e){return null}visitLargeBinary(e){return null}visitFixedSizeBinary(e){return null}visitDate(e){return null}visitTimestamp(e){return null}visitTime(e){return null}visitDecimal(e){return null}visitList(e){return null}visitStruct(e){return null}visitUnion(e){return null}visitDictionary(e){return null}visitInterval(e){return null}visitDuration(e){return null}visitFixedSizeList(e){return null}visitMap(e){return null}}function a(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;switch(t){case i.Type.Null:n=e.visitNull;break;case i.Type.Bool:n=e.visitBool;break;case i.Type.Int:n=e.visitInt;break;case i.Type.Int8:n=e.visitInt8||e.visitInt;break;case i.Type.Int16:n=e.visitInt16||e.visitInt;break;case i.Type.Int32:n=e.visitInt32||e.visitInt;break;case i.Type.Int64:n=e.visitInt64||e.visitInt;break;case i.Type.Uint8:n=e.visitUint8||e.visitInt;break;case i.Type.Uint16:n=e.visitUint16||e.visitInt;break;case i.Type.Uint32:n=e.visitUint32||e.visitInt;break;case i.Type.Uint64:n=e.visitUint64||e.visitInt;break;case i.Type.Float:n=e.visitFloat;break;case i.Type.Float16:n=e.visitFloat16||e.visitFloat;break;case i.Type.Float32:n=e.visitFloat32||e.visitFloat;break;case i.Type.Float64:n=e.visitFloat64||e.visitFloat;break;case i.Type.Utf8:n=e.visitUtf8;break;case i.Type.LargeUtf8:n=e.visitLargeUtf8;break;case i.Type.Binary:n=e.visitBinary;break;case i.Type.LargeBinary:n=e.visitLargeBinary;break;case i.Type.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case i.Type.Date:n=e.visitDate;break;case i.Type.DateDay:n=e.visitDateDay||e.visitDate;break;case i.Type.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case i.Type.Timestamp:n=e.visitTimestamp;break;case i.Type.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case i.Type.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case i.Type.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case i.Type.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case i.Type.Time:n=e.visitTime;break;case i.Type.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case i.Type.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case i.Type.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case i.Type.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case i.Type.Decimal:n=e.visitDecimal;break;case i.Type.List:n=e.visitList;break;case i.Type.Struct:n=e.visitStruct;break;case i.Type.Union:n=e.visitUnion;break;case i.Type.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case i.Type.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case i.Type.Dictionary:n=e.visitDictionary;break;case i.Type.Interval:n=e.visitInterval;break;case i.Type.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case i.Type.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case i.Type.Duration:n=e.visitDuration;break;case i.Type.DurationSecond:n=e.visitDurationSecond||e.visitDuration;break;case i.Type.DurationMillisecond:n=e.visitDurationMillisecond||e.visitDuration;break;case i.Type.DurationMicrosecond:n=e.visitDurationMicrosecond||e.visitDuration;break;case i.Type.DurationNanosecond:n=e.visitDurationNanosecond||e.visitDuration;break;case i.Type.FixedSizeList:n=e.visitFixedSizeList;break;case i.Type.Map:n=e.visitMap}if("function"===typeof n)return n;if(!r)return()=>null;throw new Error(`Unrecognized type '${i.Type[t]}'`)}function s(e){switch(e.typeId){case i.Type.Null:return i.Type.Null;case i.Type.Int:{const{bitWidth:t,isSigned:r}=e;switch(t){case 8:return r?i.Type.Int8:i.Type.Uint8;case 16:return r?i.Type.Int16:i.Type.Uint16;case 32:return r?i.Type.Int32:i.Type.Uint32;case 64:return r?i.Type.Int64:i.Type.Uint64}return i.Type.Int}case i.Type.Float:switch(e.precision){case i.Precision.HALF:return i.Type.Float16;case i.Precision.SINGLE:return i.Type.Float32;case i.Precision.DOUBLE:return i.Type.Float64}return i.Type.Float;case i.Type.Binary:return i.Type.Binary;case i.Type.LargeBinary:return i.Type.LargeBinary;case i.Type.Utf8:return i.Type.Utf8;case i.Type.LargeUtf8:return i.Type.LargeUtf8;case i.Type.Bool:return i.Type.Bool;case i.Type.Decimal:return i.Type.Decimal;case i.Type.Time:switch(e.unit){case i.TimeUnit.SECOND:return i.Type.TimeSecond;case i.TimeUnit.MILLISECOND:return i.Type.TimeMillisecond;case i.TimeUnit.MICROSECOND:return i.Type.TimeMicrosecond;case i.TimeUnit.NANOSECOND:return i.Type.TimeNanosecond}return i.Type.Time;case i.Type.Timestamp:switch(e.unit){case i.TimeUnit.SECOND:return i.Type.TimestampSecond;case i.TimeUnit.MILLISECOND:return i.Type.TimestampMillisecond;case i.TimeUnit.MICROSECOND:return i.Type.TimestampMicrosecond;case i.TimeUnit.NANOSECOND:return i.Type.TimestampNanosecond}return i.Type.Timestamp;case i.Type.Date:switch(e.unit){case i.DateUnit.DAY:return i.Type.DateDay;case i.DateUnit.MILLISECOND:return i.Type.DateMillisecond}return i.Type.Date;case i.Type.Interval:switch(e.unit){case i.IntervalUnit.DAY_TIME:return i.Type.IntervalDayTime;case i.IntervalUnit.YEAR_MONTH:return i.Type.IntervalYearMonth}return i.Type.Interval;case i.Type.Duration:switch(e.unit){case i.TimeUnit.SECOND:return i.Type.DurationSecond;case i.TimeUnit.MILLISECOND:return i.Type.DurationMillisecond;case i.TimeUnit.MICROSECOND:return i.Type.DurationMicrosecond;case i.TimeUnit.NANOSECOND:return i.Type.DurationNanosecond}return i.Type.Duration;case i.Type.Map:return i.Type.Map;case i.Type.List:return i.Type.List;case i.Type.Struct:return i.Type.Struct;case i.Type.Union:switch(e.mode){case i.UnionMode.Dense:return i.Type.DenseUnion;case i.UnionMode.Sparse:return i.Type.SparseUnion}return i.Type.Union;case i.Type.FixedSizeBinary:return i.Type.FixedSizeBinary;case i.Type.FixedSizeList:return i.Type.FixedSizeList;case i.Type.Dictionary:return i.Type.Dictionary}throw new Error(`Unrecognized type '${i.Type[e.typeId]}'`)}t.Visitor=o,o.prototype.visitInt8=null,o.prototype.visitInt16=null,o.prototype.visitInt32=null,o.prototype.visitInt64=null,o.prototype.visitUint8=null,o.prototype.visitUint16=null,o.prototype.visitUint32=null,o.prototype.visitUint64=null,o.prototype.visitFloat16=null,o.prototype.visitFloat32=null,o.prototype.visitFloat64=null,o.prototype.visitDateDay=null,o.prototype.visitDateMillisecond=null,o.prototype.visitTimestampSecond=null,o.prototype.visitTimestampMillisecond=null,o.prototype.visitTimestampMicrosecond=null,o.prototype.visitTimestampNanosecond=null,o.prototype.visitTimeSecond=null,o.prototype.visitTimeMillisecond=null,o.prototype.visitTimeMicrosecond=null,o.prototype.visitTimeNanosecond=null,o.prototype.visitDenseUnion=null,o.prototype.visitSparseUnion=null,o.prototype.visitIntervalDayTime=null,o.prototype.visitIntervalYearMonth=null,o.prototype.visitDuration=null,o.prototype.visitDurationSecond=null,o.prototype.visitDurationMillisecond=null,o.prototype.visitDurationMicrosecond=null,o.prototype.visitDurationNanosecond=null},9657:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.GetBuilderCtor=void 0;const i=r(2239),n=r(1516),o=r(7535),a=r(6205),s=r(8949),l=r(6086),c=r(2709),u=r(4375),d=r(5569),h=r(6979),p=r(392),f=r(8877),m=r(420),g=r(9165),y=r(5671),_=r(5404),b=r(2296),v=r(1265),x=r(5084),w=r(6590),S=r(2458),I=r(6913);class T extends i.Visitor{visitNull(){return _.NullBuilder}visitBool(){return a.BoolBuilder}visitInt(){return m.IntBuilder}visitInt8(){return m.Int8Builder}visitInt16(){return m.Int16Builder}visitInt32(){return m.Int32Builder}visitInt64(){return m.Int64Builder}visitUint8(){return m.Uint8Builder}visitUint16(){return m.Uint16Builder}visitUint32(){return m.Uint32Builder}visitUint64(){return m.Uint64Builder}visitFloat(){return h.FloatBuilder}visitFloat16(){return h.Float16Builder}visitFloat32(){return h.Float32Builder}visitFloat64(){return h.Float64Builder}visitUtf8(){return S.Utf8Builder}visitLargeUtf8(){return I.LargeUtf8Builder}visitBinary(){return n.BinaryBuilder}visitLargeBinary(){return o.LargeBinaryBuilder}visitFixedSizeBinary(){return u.FixedSizeBinaryBuilder}visitDate(){return s.DateBuilder}visitDateDay(){return s.DateDayBuilder}visitDateMillisecond(){return s.DateMillisecondBuilder}visitTimestamp(){return v.TimestampBuilder}visitTimestampSecond(){return v.TimestampSecondBuilder}visitTimestampMillisecond(){return v.TimestampMillisecondBuilder}visitTimestampMicrosecond(){return v.TimestampMicrosecondBuilder}visitTimestampNanosecond(){return v.TimestampNanosecondBuilder}visitTime(){return x.TimeBuilder}visitTimeSecond(){return x.TimeSecondBuilder}visitTimeMillisecond(){return x.TimeMillisecondBuilder}visitTimeMicrosecond(){return x.TimeMicrosecondBuilder}visitTimeNanosecond(){return x.TimeNanosecondBuilder}visitDecimal(){return l.DecimalBuilder}visitList(){return g.ListBuilder}visitStruct(){return b.StructBuilder}visitUnion(){return w.UnionBuilder}visitDenseUnion(){return w.DenseUnionBuilder}visitSparseUnion(){return w.SparseUnionBuilder}visitDictionary(){return c.DictionaryBuilder}visitInterval(){return p.IntervalBuilder}visitIntervalDayTime(){return p.IntervalDayTimeBuilder}visitIntervalYearMonth(){return p.IntervalYearMonthBuilder}visitDuration(){return f.DurationBuilder}visitDurationSecond(){return f.DurationSecondBuilder}visitDurationMillisecond(){return f.DurationMillisecondBuilder}visitDurationMicrosecond(){return f.DurationMicrosecondBuilder}visitDurationNanosecond(){return f.DurationNanosecondBuilder}visitFixedSizeList(){return d.FixedSizeListBuilder}visitMap(){return y.MapBuilder}}t.GetBuilderCtor=T,t.instance=new T},2572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.GetVisitor=void 0;const i=r(5420),n=r(8210),o=r(2239),a=r(5200),s=r(7229),l=r(4995),c=r(4779),u=r(8086),d=r(1336);class h extends o.Visitor{}function p(e){return(t,r)=>t.getValid(r)?e(t,r):null}t.GetVisitor=h;const f=(e,t,r)=>{if(r+1>=t.length)return null;const i=(0,l.bigIntToNumber)(t[r]),n=(0,l.bigIntToNumber)(t[r+1]);return e.subarray(i,n)},m=(e,t)=>{let{values:r}=e;return((e,t)=>864e5*e[t])(r,t)},g=(e,t)=>{let{values:r}=e;return(0,l.bigIntToNumber)(r[t])},y=(e,t)=>{let{stride:r,values:i}=e;return i[r*t]},_=(e,t)=>{let{values:r}=e;return r[t]},b=(e,t)=>{let{values:r,valueOffsets:i}=e;return f(r,i,t)},v=(e,t)=>{let{values:r,valueOffsets:i}=e;const n=f(r,i,t);return null!==n?(0,c.decodeUtf8)(n):null},x=(e,t)=>{let{values:r}=e;return 1e3*(0,l.bigIntToNumber)(r[t])},w=(e,t)=>{let{values:r}=e;return(0,l.bigIntToNumber)(r[t])},S=(e,t)=>{let{values:r}=e;return(0,l.divideBigInts)(r[t],BigInt(1e3))},I=(e,t)=>{let{values:r}=e;return(0,l.divideBigInts)(r[t],BigInt(1e6))},T=(e,t)=>{let{values:r}=e;return r[t]},k=(e,t)=>{let{values:r}=e;return r[t]},E=(e,t)=>{let{values:r}=e;return r[t]},A=(e,t)=>{let{values:r}=e;return r[t]},P=(e,r)=>{const i=e.type.typeIdToChildIndex[e.typeIds[r]],n=e.children[i];return t.instance.visit(n,e.valueOffsets[r])},C=(e,r)=>{const i=e.type.typeIdToChildIndex[e.typeIds[r]],n=e.children[i];return t.instance.visit(n,r)},M=(e,t)=>{let{values:r}=e;return r.subarray(2*t,2*(t+1))},O=(e,t)=>{let{values:r}=e;const i=r[t],n=new Int32Array(2);return n[0]=Math.trunc(i/12),n[1]=Math.trunc(i%12),n},R=(e,t)=>{let{values:r}=e;return r[t]},B=(e,t)=>{let{values:r}=e;return r[t]},D=(e,t)=>{let{values:r}=e;return r[t]},z=(e,t)=>{let{values:r}=e;return r[t]};h.prototype.visitNull=p(((e,t)=>null)),h.prototype.visitBool=p(((e,t)=>{let{offset:r,values:i}=e;const n=r+t;return 0!==(i[n>>3]&1<<n%8)})),h.prototype.visitInt=p(((e,t)=>{let{values:r}=e;return r[t]})),h.prototype.visitInt8=p(y),h.prototype.visitInt16=p(y),h.prototype.visitInt32=p(y),h.prototype.visitInt64=p(_),h.prototype.visitUint8=p(y),h.prototype.visitUint16=p(y),h.prototype.visitUint32=p(y),h.prototype.visitUint64=p(_),h.prototype.visitFloat=p(((e,t)=>{let{type:r,values:i}=e;return r.precision!==d.Precision.HALF?i[t]:(0,u.uint16ToFloat64)(i[t])})),h.prototype.visitFloat16=p(((e,t)=>{let{stride:r,values:i}=e;return(0,u.uint16ToFloat64)(i[r*t])})),h.prototype.visitFloat32=p(y),h.prototype.visitFloat64=p(y),h.prototype.visitUtf8=p(v),h.prototype.visitLargeUtf8=p(v),h.prototype.visitBinary=p(b),h.prototype.visitLargeBinary=p(b),h.prototype.visitFixedSizeBinary=p(((e,t)=>{let{stride:r,values:i}=e;return i.subarray(r*t,r*(t+1))})),h.prototype.visitDate=p(((e,t)=>e.type.unit===d.DateUnit.DAY?m(e,t):g(e,t))),h.prototype.visitDateDay=p(m),h.prototype.visitDateMillisecond=p(g),h.prototype.visitTimestamp=p(((e,t)=>{switch(e.type.unit){case d.TimeUnit.SECOND:return x(e,t);case d.TimeUnit.MILLISECOND:return w(e,t);case d.TimeUnit.MICROSECOND:return S(e,t);case d.TimeUnit.NANOSECOND:return I(e,t)}})),h.prototype.visitTimestampSecond=p(x),h.prototype.visitTimestampMillisecond=p(w),h.prototype.visitTimestampMicrosecond=p(S),h.prototype.visitTimestampNanosecond=p(I),h.prototype.visitTime=p(((e,t)=>{switch(e.type.unit){case d.TimeUnit.SECOND:return T(e,t);case d.TimeUnit.MILLISECOND:return k(e,t);case d.TimeUnit.MICROSECOND:return E(e,t);case d.TimeUnit.NANOSECOND:return A(e,t)}})),h.prototype.visitTimeSecond=p(T),h.prototype.visitTimeMillisecond=p(k),h.prototype.visitTimeMicrosecond=p(E),h.prototype.visitTimeNanosecond=p(A),h.prototype.visitDecimal=p(((e,t)=>{let{values:r,stride:n}=e;return i.BN.decimal(r.subarray(n*t,n*(t+1)))})),h.prototype.visitList=p(((e,t)=>{const{valueOffsets:r,stride:i,children:o}=e,{[t*i]:a,[t*i+1]:s}=r,l=o[0].slice(a,s-a);return new n.Vector([l])})),h.prototype.visitStruct=p(((e,t)=>new s.StructRow(e,t))),h.prototype.visitUnion=p(((e,t)=>e.type.mode===d.UnionMode.Dense?P(e,t):C(e,t))),h.prototype.visitDenseUnion=p(P),h.prototype.visitSparseUnion=p(C),h.prototype.visitDictionary=p(((e,t)=>{var r;return null===(r=e.dictionary)||void 0===r?void 0:r.get(e.values[t])})),h.prototype.visitInterval=p(((e,t)=>e.type.unit===d.IntervalUnit.DAY_TIME?M(e,t):O(e,t))),h.prototype.visitIntervalDayTime=p(M),h.prototype.visitIntervalYearMonth=p(O),h.prototype.visitDuration=p(((e,t)=>{switch(e.type.unit){case d.TimeUnit.SECOND:return R(e,t);case d.TimeUnit.MILLISECOND:return B(e,t);case d.TimeUnit.MICROSECOND:return D(e,t);case d.TimeUnit.NANOSECOND:return z(e,t)}})),h.prototype.visitDurationSecond=p(R),h.prototype.visitDurationMillisecond=p(B),h.prototype.visitDurationMicrosecond=p(D),h.prototype.visitDurationNanosecond=p(z),h.prototype.visitFixedSizeList=p(((e,t)=>{const{stride:r,children:i}=e,o=i[0].slice(t*r,r);return new n.Vector([o])})),h.prototype.visitMap=p(((e,t)=>{const{valueOffsets:r,children:i}=e,{[t]:n,[t+1]:o}=r,s=i[0];return new a.MapRow(s.slice(n,o-n))})),t.instance=new h},3761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.IndexOfVisitor=void 0;const i=r(1336),n=r(2239),o=r(2572),a=r(1849),s=r(6367);class l extends n.Visitor{}function c(e,t,r){if(void 0===t)return-1;if(null===t)switch(e.typeId){case i.Type.Union:case i.Type.Dictionary:break;default:return function(e,t){const{nullBitmap:r}=e;if(!r||e.nullCount<=0)return-1;let i=0;for(const n of new a.BitIterator(r,e.offset+(t||0),e.length,r,a.getBool)){if(!n)return i;++i}return-1}(e,r)}const n=o.instance.getVisitFn(e),l=(0,s.createElementComparator)(t);for(let i=(r||0)-1,o=e.length;++i<o;)if(l(n(e,i)))return i;return-1}function u(e,t,r){const i=o.instance.getVisitFn(e),n=(0,s.createElementComparator)(t);for(let o=(r||0)-1,a=e.length;++o<a;)if(n(i(e,o)))return o;return-1}t.IndexOfVisitor=l,l.prototype.visitNull=function(e,t){return null===t&&e.length>0?0:-1},l.prototype.visitBool=c,l.prototype.visitInt=c,l.prototype.visitInt8=c,l.prototype.visitInt16=c,l.prototype.visitInt32=c,l.prototype.visitInt64=c,l.prototype.visitUint8=c,l.prototype.visitUint16=c,l.prototype.visitUint32=c,l.prototype.visitUint64=c,l.prototype.visitFloat=c,l.prototype.visitFloat16=c,l.prototype.visitFloat32=c,l.prototype.visitFloat64=c,l.prototype.visitUtf8=c,l.prototype.visitLargeUtf8=c,l.prototype.visitBinary=c,l.prototype.visitLargeBinary=c,l.prototype.visitFixedSizeBinary=c,l.prototype.visitDate=c,l.prototype.visitDateDay=c,l.prototype.visitDateMillisecond=c,l.prototype.visitTimestamp=c,l.prototype.visitTimestampSecond=c,l.prototype.visitTimestampMillisecond=c,l.prototype.visitTimestampMicrosecond=c,l.prototype.visitTimestampNanosecond=c,l.prototype.visitTime=c,l.prototype.visitTimeSecond=c,l.prototype.visitTimeMillisecond=c,l.prototype.visitTimeMicrosecond=c,l.prototype.visitTimeNanosecond=c,l.prototype.visitDecimal=c,l.prototype.visitList=c,l.prototype.visitStruct=c,l.prototype.visitUnion=c,l.prototype.visitDenseUnion=u,l.prototype.visitSparseUnion=u,l.prototype.visitDictionary=c,l.prototype.visitInterval=c,l.prototype.visitIntervalDayTime=c,l.prototype.visitIntervalYearMonth=c,l.prototype.visitDuration=c,l.prototype.visitDurationSecond=c,l.prototype.visitDurationMillisecond=c,l.prototype.visitDurationMicrosecond=c,l.prototype.visitDurationNanosecond=c,l.prototype.visitFixedSizeList=c,l.prototype.visitMap=c,t.instance=new l},4900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.IteratorVisitor=void 0;const i=r(2239),n=r(1336),o=r(2741),a=r(5511);class s extends i.Visitor{}function l(e){const{type:t}=e;if(0===e.nullCount&&1===e.stride&&(o.DataType.isInt(t)&&64!==t.bitWidth||o.DataType.isTime(t)&&64!==t.bitWidth||o.DataType.isFloat(t)&&t.precision!==n.Precision.HALF))return new a.ChunkedIterator(e.data.length,(t=>{const r=e.data[t];return r.values.subarray(0,r.length)[Symbol.iterator]()}));let r=0;return new a.ChunkedIterator(e.data.length,(t=>{const i=e.data[t].length,n=e.slice(r,r+i);return r+=i,new c(n)}))}t.IteratorVisitor=s;class c{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}s.prototype.visitNull=l,s.prototype.visitBool=l,s.prototype.visitInt=l,s.prototype.visitInt8=l,s.prototype.visitInt16=l,s.prototype.visitInt32=l,s.prototype.visitInt64=l,s.prototype.visitUint8=l,s.prototype.visitUint16=l,s.prototype.visitUint32=l,s.prototype.visitUint64=l,s.prototype.visitFloat=l,s.prototype.visitFloat16=l,s.prototype.visitFloat32=l,s.prototype.visitFloat64=l,s.prototype.visitUtf8=l,s.prototype.visitLargeUtf8=l,s.prototype.visitBinary=l,s.prototype.visitLargeBinary=l,s.prototype.visitFixedSizeBinary=l,s.prototype.visitDate=l,s.prototype.visitDateDay=l,s.prototype.visitDateMillisecond=l,s.prototype.visitTimestamp=l,s.prototype.visitTimestampSecond=l,s.prototype.visitTimestampMillisecond=l,s.prototype.visitTimestampMicrosecond=l,s.prototype.visitTimestampNanosecond=l,s.prototype.visitTime=l,s.prototype.visitTimeSecond=l,s.prototype.visitTimeMillisecond=l,s.prototype.visitTimeMicrosecond=l,s.prototype.visitTimeNanosecond=l,s.prototype.visitDecimal=l,s.prototype.visitList=l,s.prototype.visitStruct=l,s.prototype.visitUnion=l,s.prototype.visitDenseUnion=l,s.prototype.visitSparseUnion=l,s.prototype.visitDictionary=l,s.prototype.visitInterval=l,s.prototype.visitIntervalDayTime=l,s.prototype.visitIntervalYearMonth=l,s.prototype.visitDuration=l,s.prototype.visitDurationSecond=l,s.prototype.visitDurationMillisecond=l,s.prototype.visitDurationMicrosecond=l,s.prototype.visitDurationNanosecond=l,s.prototype.visitFixedSizeList=l,s.prototype.visitMap=l,t.instance=new s},8616:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONTypeAssembler=void 0;const i=r(2239),n=r(1276),o=r(1336);class a extends i.Visitor{visit(e){return null==e?void 0:super.visit(e)}visitNull(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitInt(e){let{typeId:t,bitWidth:r,isSigned:i}=e;return{name:n.Type[t].toLowerCase(),bitWidth:r,isSigned:i}}visitFloat(e){let{typeId:t,precision:r}=e;return{name:n.Type[t].toLowerCase(),precision:o.Precision[r]}}visitBinary(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitLargeBinary(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitBool(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitUtf8(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitLargeUtf8(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitDecimal(e){let{typeId:t,scale:r,precision:i,bitWidth:o}=e;return{name:n.Type[t].toLowerCase(),scale:r,precision:i,bitWidth:o}}visitDate(e){let{typeId:t,unit:r}=e;return{name:n.Type[t].toLowerCase(),unit:o.DateUnit[r]}}visitTime(e){let{typeId:t,unit:r,bitWidth:i}=e;return{name:n.Type[t].toLowerCase(),unit:o.TimeUnit[r],bitWidth:i}}visitTimestamp(e){let{typeId:t,timezone:r,unit:i}=e;return{name:n.Type[t].toLowerCase(),unit:o.TimeUnit[i],timezone:r}}visitInterval(e){let{typeId:t,unit:r}=e;return{name:n.Type[t].toLowerCase(),unit:o.IntervalUnit[r]}}visitDuration(e){let{typeId:t,unit:r}=e;return{name:n.Type[t].toLocaleLowerCase(),unit:o.TimeUnit[r]}}visitList(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitStruct(e){let{typeId:t}=e;return{name:n.Type[t].toLowerCase()}}visitUnion(e){let{typeId:t,mode:r,typeIds:i}=e;return{name:n.Type[t].toLowerCase(),mode:o.UnionMode[r].toUpperCase(),typeIds:[...i]}}visitDictionary(e){return this.visit(e.dictionary)}visitFixedSizeBinary(e){let{typeId:t,byteWidth:r}=e;return{name:n.Type[t].toLowerCase(),byteWidth:r}}visitFixedSizeList(e){let{typeId:t,listSize:r}=e;return{name:n.Type[t].toLowerCase(),listSize:r}}visitMap(e){let{typeId:t,keysSorted:r}=e;return{name:n.Type[t].toLowerCase(),keysSorted:r}}}t.JSONTypeAssembler=a},7537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONVectorAssembler=void 0;const i=r(5420),n=r(8210),o=r(2239),a=r(1336),s=r(1336),l=r(1849),c=r(2741);class u extends o.Visitor{static assemble(){const e=new u;for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return r.map((t=>{let{schema:r,data:i}=t;return e.visitMany(r.fields,i.children)}))}visit(e,t){let{name:r}=e;const{length:i}=t,{offset:n,nullCount:o,nullBitmap:s}=t,u=c.DataType.isDictionary(t.type)?t.type.indices:t.type,d=Object.assign([],t.buffers,{[a.BufferType.VALIDITY]:void 0});return Object.assign({name:r,count:i,VALIDITY:c.DataType.isNull(u)||c.DataType.isUnion(u)?void 0:o<=0?Array.from({length:i},(()=>1)):[...new l.BitIterator(s,n,i,null,l.getBit)]},super.visit(t.clone(u,n,i,0,d)))}visitNull(){return{}}visitBool(e){let{values:t,offset:r,length:i}=e;return{DATA:[...new l.BitIterator(t,r,i,null,l.getBool)]}}visitInt(e){return{DATA:e.type.bitWidth<64?[...e.values]:[...h(e.values,2)]}}visitFloat(e){return{DATA:[...e.values]}}visitUtf8(e){return{DATA:[...new n.Vector([e])],OFFSET:[...e.valueOffsets]}}visitLargeUtf8(e){return{DATA:[...new n.Vector([e])],OFFSET:[...h(e.valueOffsets,2)]}}visitBinary(e){return{DATA:[...d(new n.Vector([e]))],OFFSET:[...e.valueOffsets]}}visitLargeBinary(e){return{DATA:[...d(new n.Vector([e]))],OFFSET:[...h(e.valueOffsets,2)]}}visitFixedSizeBinary(e){return{DATA:[...d(new n.Vector([e]))]}}visitDate(e){return{DATA:e.type.unit===s.DateUnit.DAY?[...e.values]:[...h(e.values,2)]}}visitTimestamp(e){return{DATA:[...h(e.values,2)]}}visitTime(e){return{DATA:e.type.unit<s.TimeUnit.MICROSECOND?[...e.values]:[...h(e.values,2)]}}visitDecimal(e){return{DATA:[...h(e.values,4)]}}visitList(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}visitStruct(e){return{children:this.visitMany(e.type.children,e.children)}}visitUnion(e){return{TYPE_ID:[...e.typeIds],OFFSET:e.type.mode===s.UnionMode.Dense?[...e.valueOffsets]:void 0,children:this.visitMany(e.type.children,e.children)}}visitInterval(e){return{DATA:[...e.values]}}visitDuration(e){return{DATA:[...h(e.values,2)]}}visitFixedSizeList(e){return{children:this.visitMany(e.type.children,e.children)}}visitMap(e){return{OFFSET:[...e.valueOffsets],children:this.visitMany(e.type.children,e.children)}}}function*d(e){for(const t of e)yield t.reduce(((e,t)=>`${e}${("0"+(255&t).toString(16)).slice(-2)}`),"").toUpperCase()}function*h(e,t){const r=new Uint32Array(e.buffer);for(let n=-1,o=r.length/t;++n<o;)yield`${i.BN.new(r.subarray((n+0)*t,(n+1)*t),!1)}`}t.JSONVectorAssembler=u},7976:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.setDuration=t.setDurationNanosecond=t.setDurationMicrosecond=t.setDurationMillisecond=t.setDurationSecond=t.setIntervalYearMonth=t.setIntervalDayTime=t.setIntervalValue=t.setDecimal=t.setTime=t.setTimeNanosecond=t.setTimeMicrosecond=t.setTimeMillisecond=t.setTimeSecond=t.setTimestamp=t.setTimestampNanosecond=t.setTimestampMicrosecond=t.setTimestampMillisecond=t.setTimestampSecond=t.setDate=t.setFixedSizeBinary=t.setDateMillisecond=t.setDateDay=t.setAnyFloat=t.setFloat16=t.setFloat=t.setInt=t.setVariableWidthBytes=t.setEpochMsToDays=t.SetVisitor=void 0;const i=r(8210),n=r(2239),o=r(4995),a=r(4779),s=r(8086),l=r(1336);class c extends n.Visitor{}function u(e){return(t,r,i)=>{if(t.setValid(r,null!=i))return e(t,r,i)}}t.SetVisitor=c;t.setEpochMsToDays=(e,t,r)=>{e[t]=Math.floor(r/864e5)};t.setVariableWidthBytes=(e,t,r,i)=>{if(r+1<t.length){const n=(0,o.bigIntToNumber)(t[r]),a=(0,o.bigIntToNumber)(t[r+1]);e.set(i.subarray(0,a-n),n)}};t.setInt=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setFloat=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setFloat16=(e,t,r)=>{let{values:i}=e;i[t]=(0,s.float64ToUint16)(r)};t.setAnyFloat=(e,r,i)=>{switch(e.type.precision){case l.Precision.HALF:return(0,t.setFloat16)(e,r,i);case l.Precision.SINGLE:case l.Precision.DOUBLE:return(0,t.setFloat)(e,r,i)}};t.setDateDay=(e,r,i)=>{let{values:n}=e;(0,t.setEpochMsToDays)(n,r,i.valueOf())};t.setDateMillisecond=(e,t,r)=>{let{values:i}=e;i[t]=BigInt(r)};t.setFixedSizeBinary=(e,t,r)=>{let{stride:i,values:n}=e;n.set(r.subarray(0,i),i*t)};const d=(e,r,i)=>{let{values:n,valueOffsets:o}=e;return(0,t.setVariableWidthBytes)(n,o,r,i)},h=(e,r,i)=>{let{values:n,valueOffsets:o}=e;return(0,t.setVariableWidthBytes)(n,o,r,(0,a.encodeUtf8)(i))};t.setDate=(e,r,i)=>{e.type.unit===l.DateUnit.DAY?(0,t.setDateDay)(e,r,i):(0,t.setDateMillisecond)(e,r,i)};t.setTimestampSecond=(e,t,r)=>{let{values:i}=e;i[t]=BigInt(r/1e3)};t.setTimestampMillisecond=(e,t,r)=>{let{values:i}=e;i[t]=BigInt(r)};t.setTimestampMicrosecond=(e,t,r)=>{let{values:i}=e;i[t]=BigInt(1e3*r)};t.setTimestampNanosecond=(e,t,r)=>{let{values:i}=e;i[t]=BigInt(1e6*r)};t.setTimestamp=(e,r,i)=>{switch(e.type.unit){case l.TimeUnit.SECOND:return(0,t.setTimestampSecond)(e,r,i);case l.TimeUnit.MILLISECOND:return(0,t.setTimestampMillisecond)(e,r,i);case l.TimeUnit.MICROSECOND:return(0,t.setTimestampMicrosecond)(e,r,i);case l.TimeUnit.NANOSECOND:return(0,t.setTimestampNanosecond)(e,r,i)}};t.setTimeSecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setTimeMillisecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setTimeMicrosecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setTimeNanosecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setTime=(e,r,i)=>{switch(e.type.unit){case l.TimeUnit.SECOND:return(0,t.setTimeSecond)(e,r,i);case l.TimeUnit.MILLISECOND:return(0,t.setTimeMillisecond)(e,r,i);case l.TimeUnit.MICROSECOND:return(0,t.setTimeMicrosecond)(e,r,i);case l.TimeUnit.NANOSECOND:return(0,t.setTimeNanosecond)(e,r,i)}};t.setDecimal=(e,t,r)=>{let{values:i,stride:n}=e;i.set(r.subarray(0,n),n*t)};const p=(e,r,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[r]],o=e.children[n];t.instance.visit(o,e.valueOffsets[r],i)},f=(e,r,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[r]],o=e.children[n];t.instance.visit(o,r,i)};t.setIntervalValue=(e,r,i)=>{e.type.unit===l.IntervalUnit.DAY_TIME?(0,t.setIntervalDayTime)(e,r,i):(0,t.setIntervalYearMonth)(e,r,i)};t.setIntervalDayTime=(e,t,r)=>{let{values:i}=e;i.set(r.subarray(0,2),2*t)};t.setIntervalYearMonth=(e,t,r)=>{let{values:i}=e;i[t]=12*r[0]+r[1]%12};t.setDurationSecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setDurationMillisecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setDurationMicrosecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setDurationNanosecond=(e,t,r)=>{let{values:i}=e;i[t]=r};t.setDuration=(e,r,i)=>{switch(e.type.unit){case l.TimeUnit.SECOND:return(0,t.setDurationSecond)(e,r,i);case l.TimeUnit.MILLISECOND:return(0,t.setDurationMillisecond)(e,r,i);case l.TimeUnit.MICROSECOND:return(0,t.setDurationMicrosecond)(e,r,i);case l.TimeUnit.NANOSECOND:return(0,t.setDurationNanosecond)(e,r,i)}};c.prototype.visitBool=u(((e,t,r)=>{let{offset:i,values:n}=e;const o=i+t;r?n[o>>3]|=1<<o%8:n[o>>3]&=~(1<<o%8)})),c.prototype.visitInt=u(t.setInt),c.prototype.visitInt8=u(t.setInt),c.prototype.visitInt16=u(t.setInt),c.prototype.visitInt32=u(t.setInt),c.prototype.visitInt64=u(t.setInt),c.prototype.visitUint8=u(t.setInt),c.prototype.visitUint16=u(t.setInt),c.prototype.visitUint32=u(t.setInt),c.prototype.visitUint64=u(t.setInt),c.prototype.visitFloat=u(t.setAnyFloat),c.prototype.visitFloat16=u(t.setFloat16),c.prototype.visitFloat32=u(t.setFloat),c.prototype.visitFloat64=u(t.setFloat),c.prototype.visitUtf8=u(h),c.prototype.visitLargeUtf8=u(h),c.prototype.visitBinary=u(d),c.prototype.visitLargeBinary=u(d),c.prototype.visitFixedSizeBinary=u(t.setFixedSizeBinary),c.prototype.visitDate=u(t.setDate),c.prototype.visitDateDay=u(t.setDateDay),c.prototype.visitDateMillisecond=u(t.setDateMillisecond),c.prototype.visitTimestamp=u(t.setTimestamp),c.prototype.visitTimestampSecond=u(t.setTimestampSecond),c.prototype.visitTimestampMillisecond=u(t.setTimestampMillisecond),c.prototype.visitTimestampMicrosecond=u(t.setTimestampMicrosecond),c.prototype.visitTimestampNanosecond=u(t.setTimestampNanosecond),c.prototype.visitTime=u(t.setTime),c.prototype.visitTimeSecond=u(t.setTimeSecond),c.prototype.visitTimeMillisecond=u(t.setTimeMillisecond),c.prototype.visitTimeMicrosecond=u(t.setTimeMicrosecond),c.prototype.visitTimeNanosecond=u(t.setTimeNanosecond),c.prototype.visitDecimal=u(t.setDecimal),c.prototype.visitList=u(((e,r,i)=>{const n=e.children[0],o=e.valueOffsets,a=t.instance.getVisitFn(n);if(Array.isArray(i))for(let t=-1,s=o[r],l=o[r+1];s<l;)a(n,s++,i[++t]);else for(let t=-1,s=o[r],l=o[r+1];s<l;)a(n,s++,i.get(++t))})),c.prototype.visitStruct=u(((e,r,n)=>{const o=e.type.children.map((e=>t.instance.getVisitFn(e.type))),a=n instanceof Map?(s=r,l=n,(e,t,r,i)=>t&&e(t,s,l.get(r.name))):n instanceof i.Vector?((e,t)=>(r,i,n,o)=>i&&r(i,e,t.get(o)))(r,n):Array.isArray(n)?((e,t)=>(r,i,n,o)=>i&&r(i,e,t[o]))(r,n):((e,t)=>(r,i,n,o)=>i&&r(i,e,t[n.name]))(r,n);var s,l;e.type.children.forEach(((t,r)=>a(o[r],e.children[r],t,r)))})),c.prototype.visitUnion=u(((e,t,r)=>{e.type.mode===l.UnionMode.Dense?p(e,t,r):f(e,t,r)})),c.prototype.visitDenseUnion=u(p),c.prototype.visitSparseUnion=u(f),c.prototype.visitDictionary=u(((e,t,r)=>{var i;null===(i=e.dictionary)||void 0===i||i.set(e.values[t],r)})),c.prototype.visitInterval=u(t.setIntervalValue),c.prototype.visitIntervalDayTime=u(t.setIntervalDayTime),c.prototype.visitIntervalYearMonth=u(t.setIntervalYearMonth),c.prototype.visitDuration=u(t.setDuration),c.prototype.visitDurationSecond=u(t.setDurationSecond),c.prototype.visitDurationMillisecond=u(t.setDurationMillisecond),c.prototype.visitDurationMicrosecond=u(t.setDurationMicrosecond),c.prototype.visitDurationNanosecond=u(t.setDurationNanosecond),c.prototype.visitFixedSizeList=u(((e,r,i)=>{const{stride:n}=e,o=e.children[0],a=t.instance.getVisitFn(o);if(Array.isArray(i))for(let t=-1,s=r*n;++t<n;)a(o,s+t,i[t]);else for(let t=-1,s=r*n;++t<n;)a(o,s+t,i.get(t))})),c.prototype.visitMap=u(((e,r,i)=>{const n=e.children[0],{valueOffsets:o}=e,a=t.instance.getVisitFn(n);let{[r]:s,[r+1]:l}=o;const c=i instanceof Map?i.entries():Object.entries(i);for(const t of c)if(a(n,s,t),++s>=l)break})),t.instance=new c},6042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.instance=t.TypeAssembler=void 0;const i=r(2239),n=r(2205),o=r(207),a=r(8809),s=r(5285),l=r(4131),c=r(7456),u=r(4543),d=r(5669),h=r(5865),p=r(9856),f=r(9929),m=r(7366),g=r(7497),y=r(2832),_=r(4076),b=r(6978),v=r(1697),x=r(4756),w=r(3136),S=r(1017),I=r(7540);class T extends i.Visitor{visit(e,t){return null==e||null==t?void 0:super.visit(e,t)}visitNull(e,t){return n.Null.startNull(t),n.Null.endNull(t)}visitInt(e,t){return o.Int.startInt(t),o.Int.addBitWidth(t,e.bitWidth),o.Int.addIsSigned(t,e.isSigned),o.Int.endInt(t)}visitFloat(e,t){return a.FloatingPoint.startFloatingPoint(t),a.FloatingPoint.addPrecision(t,e.precision),a.FloatingPoint.endFloatingPoint(t)}visitBinary(e,t){return s.Binary.startBinary(t),s.Binary.endBinary(t)}visitLargeBinary(e,t){return l.LargeBinary.startLargeBinary(t),l.LargeBinary.endLargeBinary(t)}visitBool(e,t){return c.Bool.startBool(t),c.Bool.endBool(t)}visitUtf8(e,t){return u.Utf8.startUtf8(t),u.Utf8.endUtf8(t)}visitLargeUtf8(e,t){return d.LargeUtf8.startLargeUtf8(t),d.LargeUtf8.endLargeUtf8(t)}visitDecimal(e,t){return h.Decimal.startDecimal(t),h.Decimal.addScale(t,e.scale),h.Decimal.addPrecision(t,e.precision),h.Decimal.addBitWidth(t,e.bitWidth),h.Decimal.endDecimal(t)}visitDate(e,t){return p.Date.startDate(t),p.Date.addUnit(t,e.unit),p.Date.endDate(t)}visitTime(e,t){return f.Time.startTime(t),f.Time.addUnit(t,e.unit),f.Time.addBitWidth(t,e.bitWidth),f.Time.endTime(t)}visitTimestamp(e,t){const r=e.timezone&&t.createString(e.timezone)||void 0;return m.Timestamp.startTimestamp(t),m.Timestamp.addUnit(t,e.unit),void 0!==r&&m.Timestamp.addTimezone(t,r),m.Timestamp.endTimestamp(t)}visitInterval(e,t){return g.Interval.startInterval(t),g.Interval.addUnit(t,e.unit),g.Interval.endInterval(t)}visitDuration(e,t){return y.Duration.startDuration(t),y.Duration.addUnit(t,e.unit),y.Duration.endDuration(t)}visitList(e,t){return _.List.startList(t),_.List.endList(t)}visitStruct(e,t){return b.Struct_.startStruct_(t),b.Struct_.endStruct_(t)}visitUnion(e,t){v.Union.startTypeIdsVector(t,e.typeIds.length);const r=v.Union.createTypeIdsVector(t,e.typeIds);return v.Union.startUnion(t),v.Union.addMode(t,e.mode),v.Union.addTypeIds(t,r),v.Union.endUnion(t)}visitDictionary(e,t){const r=this.visit(e.indices,t);return x.DictionaryEncoding.startDictionaryEncoding(t),x.DictionaryEncoding.addId(t,BigInt(e.id)),x.DictionaryEncoding.addIsOrdered(t,e.isOrdered),void 0!==r&&x.DictionaryEncoding.addIndexType(t,r),x.DictionaryEncoding.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return w.FixedSizeBinary.startFixedSizeBinary(t),w.FixedSizeBinary.addByteWidth(t,e.byteWidth),w.FixedSizeBinary.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return S.FixedSizeList.startFixedSizeList(t),S.FixedSizeList.addListSize(t,e.listSize),S.FixedSizeList.endFixedSizeList(t)}visitMap(e,t){return I.Map.startMap(t),I.Map.addKeysSorted(t,e.keysSorted),I.Map.endMap(t)}}t.TypeAssembler=T,t.instance=new T},4853:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareTypes=t.compareFields=t.compareSchemas=t.instance=t.TypeComparator=void 0;const i=r(2239);class n extends i.Visitor{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,r)=>this.compareFields(e,t[r])))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function o(e,t){return t instanceof e.constructor}function a(e,t){return e===t||o(e,t)}function s(e,t){return e===t||o(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function l(e,t){return e===t||o(e,t)&&e.precision===t.precision}function c(e,t){return e===t||o(e,t)&&e.unit===t.unit}function u(e,t){return e===t||o(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function d(e,t){return e===t||o(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function h(e,r){return e===r||o(e,r)&&e.mode===r.mode&&e.typeIds.every(((e,t)=>e===r.typeIds[t]))&&t.instance.compareManyFields(e.children,r.children)}function p(e,t){return e===t||o(e,t)&&e.unit===t.unit}function f(e,t){return e===t||o(e,t)&&e.unit===t.unit}t.TypeComparator=n,n.prototype.visitNull=a,n.prototype.visitBool=a,n.prototype.visitInt=s,n.prototype.visitInt8=s,n.prototype.visitInt16=s,n.prototype.visitInt32=s,n.prototype.visitInt64=s,n.prototype.visitUint8=s,n.prototype.visitUint16=s,n.prototype.visitUint32=s,n.prototype.visitUint64=s,n.prototype.visitFloat=l,n.prototype.visitFloat16=l,n.prototype.visitFloat32=l,n.prototype.visitFloat64=l,n.prototype.visitUtf8=a,n.prototype.visitLargeUtf8=a,n.prototype.visitBinary=a,n.prototype.visitLargeBinary=a,n.prototype.visitFixedSizeBinary=function(e,t){return e===t||o(e,t)&&e.byteWidth===t.byteWidth},n.prototype.visitDate=c,n.prototype.visitDateDay=c,n.prototype.visitDateMillisecond=c,n.prototype.visitTimestamp=u,n.prototype.visitTimestampSecond=u,n.prototype.visitTimestampMillisecond=u,n.prototype.visitTimestampMicrosecond=u,n.prototype.visitTimestampNanosecond=u,n.prototype.visitTime=d,n.prototype.visitTimeSecond=d,n.prototype.visitTimeMillisecond=d,n.prototype.visitTimeMicrosecond=d,n.prototype.visitTimeNanosecond=d,n.prototype.visitDecimal=a,n.prototype.visitList=function(e,r){return e===r||o(e,r)&&e.children.length===r.children.length&&t.instance.compareManyFields(e.children,r.children)},n.prototype.visitStruct=function(e,r){return e===r||o(e,r)&&e.children.length===r.children.length&&t.instance.compareManyFields(e.children,r.children)},n.prototype.visitUnion=h,n.prototype.visitDenseUnion=h,n.prototype.visitSparseUnion=h,n.prototype.visitDictionary=function(e,r){return e===r||o(e,r)&&e.id===r.id&&e.isOrdered===r.isOrdered&&t.instance.visit(e.indices,r.indices)&&t.instance.visit(e.dictionary,r.dictionary)},n.prototype.visitInterval=p,n.prototype.visitIntervalDayTime=p,n.prototype.visitIntervalYearMonth=p,n.prototype.visitDuration=f,n.prototype.visitDurationSecond=f,n.prototype.visitDurationMillisecond=f,n.prototype.visitDurationMicrosecond=f,n.prototype.visitDurationNanosecond=f,n.prototype.visitFixedSizeList=function(e,r){return e===r||o(e,r)&&e.listSize===r.listSize&&e.children.length===r.children.length&&t.instance.compareManyFields(e.children,r.children)},n.prototype.visitMap=function(e,r){return e===r||o(e,r)&&e.keysSorted===r.keysSorted&&e.children.length===r.children.length&&t.instance.compareManyFields(e.children,r.children)},t.instance=new n,t.compareSchemas=function(e,r){return t.instance.compareSchemas(e,r)},t.compareFields=function(e,r){return t.instance.compareFields(e,r)},t.compareTypes=function(e,r){return t.instance.visit(e,r)}},2219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VectorAssembler=void 0;const i=r(8210),n=r(2239),o=r(1336),a=r(2618),s=r(5954),l=r(1849),c=r(2227),u=r(2741),d=r(4995);class h extends n.Visitor{static assemble(){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof a.RecordBatch?t.data.children:t.data)),t=new h;for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return t.visitMany(e(i)),t}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof i.Vector)return this.visitMany(e.data),this;const{type:t}=e;if(!u.DataType.isDictionary(t)){const{length:r}=e;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(u.DataType.isUnion(t))this.nodes.push(new c.FieldNode(r,0));else{const{nullCount:i}=e;u.DataType.isNull(t)||p.call(this,i<=0?new Uint8Array(0):(0,l.truncateBitmap)(e.offset,r,e.nullBitmap)),this.nodes.push(new c.FieldNode(r,i))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function p(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new c.BufferRegion(this._byteLength,t)),this._byteLength+=t,this}function f(e){return p.call(this,e.values.subarray(0,e.length*e.stride))}function m(e){const{length:t,values:r,valueOffsets:i}=e,n=(0,d.bigIntToNumber)(i[0]),o=(0,d.bigIntToNumber)(i[t]),a=Math.min(o-n,r.byteLength-n);return p.call(this,(0,s.rebaseValueOffsets)(-n,t+1,i)),p.call(this,r.subarray(n,n+a)),this}function g(e){const{length:t,valueOffsets:r}=e;if(r){const{0:i,[t]:n}=r;return p.call(this,(0,s.rebaseValueOffsets)(-i,t+1,r)),this.visit(e.children[0].slice(i,n-i))}return this.visit(e.children[0])}function y(e){return this.visitMany(e.type.children.map(((t,r)=>e.children[r])).filter(Boolean))[0]}t.VectorAssembler=h,h.prototype.visitBool=function(e){let t;return e.nullCount>=e.length?p.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?p.call(this,(0,l.truncateBitmap)(e.offset,e.length,t)):p.call(this,(0,l.packBools)(e.values))},h.prototype.visitInt=f,h.prototype.visitFloat=f,h.prototype.visitUtf8=m,h.prototype.visitLargeUtf8=m,h.prototype.visitBinary=m,h.prototype.visitLargeBinary=m,h.prototype.visitFixedSizeBinary=f,h.prototype.visitDate=f,h.prototype.visitTimestamp=f,h.prototype.visitTime=f,h.prototype.visitDecimal=f,h.prototype.visitList=g,h.prototype.visitStruct=y,h.prototype.visitUnion=function(e){var t;const{type:r,length:i,typeIds:n,valueOffsets:a}=e;if(p.call(this,n),r.mode===o.UnionMode.Sparse)return y.call(this,e);if(r.mode===o.UnionMode.Dense){if(e.offset<=0)return p.call(this,a),y.call(this,e);{const o=new Int32Array(i),s=Object.create(null),l=Object.create(null);for(let e,r,c=-1;++c<i;)void 0!==(e=n[c])&&(void 0===(r=s[e])&&(r=s[e]=a[c]),o[c]=a[c]-r,l[e]=(null!==(t=l[e])&&void 0!==t?t:0)+1);p.call(this,o),this.visitMany(e.children.map(((e,t)=>{const n=r.typeIds[t],o=s[n],a=l[n];return e.slice(o,Math.min(i,a))})))}}return this},h.prototype.visitInterval=f,h.prototype.visitDuration=f,h.prototype.visitFixedSizeList=g,h.prototype.visitMap=g},4678:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONVectorLoader=t.VectorLoader=void 0;const i=r(9061),n=r(1598),o=r(2741),a=r(2239),s=r(1849),l=r(4779),c=r(11),u=r(1336),d=r(5954);class h extends a.Visitor{constructor(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.MetadataVersion.V5;super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=r,this.dictionaries=i,this.metadataVersion=n}visit(e){return super.visit(e instanceof n.Field?e.type:e)}visitNull(e){let{length:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t})}visitBool(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitInt(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFloat(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitUtf8(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDate(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTimestamp(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitTime(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDecimal(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitList(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),children:this.visitMany(e.children)})}visitUnion(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return this.metadataVersion<u.MetadataVersion.V5&&this.readNullBitmap(e,r),e.mode===u.UnionMode.Sparse?this.visitSparseUnion(e,{length:t,nullCount:r}):this.visitDenseUnion(e,{length:t,nullCount:r})}visitDenseUnion(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitDuration(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),data:this.readData(e)})}visitFixedSizeList(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),child:this.visit(e.children[0])})}visitMap(e){let{length:t,nullCount:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return(0,i.makeData)({type:e,length:t,nullCount:r,nullBitmap:this.readNullBitmap(e,r),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return t>0&&this.readData(e,r)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e){let{length:t,offset:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(r,r+t)}readDictionary(e){return this.dictionaries.get(e.id)}}t.VectorLoader=h;t.JSONVectorLoader=class extends h{constructor(e,t,r,i,n){super(new Uint8Array(0),t,r,i,n),this.sources=e}readNullBitmap(e,t){let{offset:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return t<=0?new Uint8Array(0):(0,s.packBools)(this.sources[r])}readOffsets(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return(0,d.toArrayBufferView)(Uint8Array,(0,d.toArrayBufferView)(e.OffsetArrayType,this.sources[t]))}readTypeIds(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return(0,d.toArrayBufferView)(Uint8Array,(0,d.toArrayBufferView)(e.ArrayType,this.sources[t]))}readData(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:r}=this;return o.DataType.isTimestamp(e)||(o.DataType.isInt(e)||o.DataType.isTime(e))&&64===e.bitWidth||o.DataType.isDuration(e)||o.DataType.isDate(e)&&e.unit===u.DateUnit.MILLISECOND?(0,d.toArrayBufferView)(Uint8Array,c.Int64.convertArray(r[t])):o.DataType.isDecimal(e)?(0,d.toArrayBufferView)(Uint8Array,c.Int128.convertArray(r[t])):o.DataType.isBinary(e)||o.DataType.isLargeBinary(e)||o.DataType.isFixedSizeBinary(e)?function(e){const t=e.join(""),r=new Uint8Array(t.length/2);for(let i=0;i<t.length;i+=2)r[i>>1]=Number.parseInt(t.slice(i,i+2),16);return r}(r[t]):o.DataType.isBool(e)?(0,s.packBools)(r[t]):o.DataType.isUtf8(e)||o.DataType.isLargeUtf8(e)?(0,l.encodeUtf8)(r[t].join("")):(0,d.toArrayBufferView)(Uint8Array,(0,d.toArrayBufferView)(e.ArrayType,r[t].map((e=>+e))))}}},4066:function(e){e.exports=function(){"use strict";var e={},t={};function r(r,i,n){if(t[r]=n,"index"===r){var o="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",a={};return t.shared(a),t.index(e,a),"undefined"!==typeof window&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))),e}}return r("shared",["exports"],(function(e){function t(e,t,r,i){return new(r||(r=Promise))((function(n,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}"function"==typeof SuppressedError&&SuppressedError;var i=n;function n(e,t){this.x=e,this.y=t}n.prototype={clone:function(){return new n(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),r=Math.sin(e),i=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=i,this},_rotateAround:function(e,t){var r=Math.cos(e),i=Math.sin(e),n=t.y+i*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-i*(this.y-t.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(e){return e instanceof n?e:Array.isArray(e)?new n(e[0],e[1]):e};var o=r(i),a=s;function s(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}s.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var n=this.sampleCurveX(r)-e;if(Math.abs(n)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r-=n/o}var a=0,s=1;for(r=e,i=0;i<20&&(n=this.sampleCurveX(r),!(Math.abs(n-e)<t));i++)e>n?a=r:s=r,r=.5*(s-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var l=r(a);let c,u;function d(){return null==c&&(c="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),c}function h(){if(null==u&&(u=!1,d())){const e=5,t=new OffscreenCanvas(e,e).getContext("2d",{willReadFrequently:!0});if(t){for(let i=0;i<e*e;i++){const r=4*i;t.fillStyle=`rgb(${r},${r+1},${r+2})`,t.fillRect(i%e,Math.floor(i/e),1,1)}const r=t.getImageData(0,0,e,e).data;for(let t=0;t<e*e*4;t++)if(t%4!=3&&r[t]!==t){u=!0;break}}}return u||!1}function p(e,t,r,i){const n=new l(e,t,r,i);return e=>n.solve(e)}const f=p(.25,.1,.25,1);function m(e,t,r){return Math.min(r,Math.max(t,e))}function g(e,t,r){const i=r-t,n=((e-t)%i+i)%i+t;return n===t?r:n}function y(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(const n of r)for(const t in n)e[t]=n[t];return e}let _=1;function b(e,t,r){const i={};for(const n in e)i[n]=t.call(this,e[n],n,e);return i}function v(e,t,r){const i={};for(const n in e)t.call(this,e[n],n,e)&&(i[n]=e[n]);return i}function x(e){return Array.isArray(e)?e.map(x):"object"==typeof e&&e?b(e,x):e}const w={};function S(e){w[e]||("undefined"!=typeof console&&console.warn(e),w[e]=!0)}function I(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}function T(e){return"undefined"!=typeof WorkerGlobalScope&&void 0!==e&&e instanceof WorkerGlobalScope}let k=null;function E(e){return"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap}const A="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function P(e,r,i,n,o){return t(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const t=new VideoFrame(e,{timestamp:0});try{const a=null==t?void 0:t.format;if(!a||!a.startsWith("BGR")&&!a.startsWith("RGB"))throw new Error(`Unrecognized format ${a}`);const s=a.startsWith("BGR"),l=new Uint8ClampedArray(n*o*4);if(yield t.copyTo(l,function(e,t,r,i,n){const o=4*Math.max(-t,0),a=(Math.max(0,r)-r)*i*4+o,s=4*i,l=Math.max(0,t),c=Math.max(0,r);return{rect:{x:l,y:c,width:Math.min(e.width,t+i)-l,height:Math.min(e.height,r+n)-c},layout:[{offset:a,stride:s}]}}(e,r,i,n,o)),s)for(let e=0;e<l.length;e+=4){const t=l[e];l[e]=l[e+2],l[e+2]=t}return l}finally{t.close()}}))}let C,M;const O="AbortError";function R(){return new Error(O)}const B={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function D(e){return B.REGISTERED_PROTOCOLS[e.substring(0,e.indexOf("://"))]}const z="global-dispatcher";class L extends Error{constructor(e,t,r,i){super(`AJAXError: ${t} (${e}): ${r}`),this.status=e,this.statusText=t,this.url=r,this.body=i}}const F=()=>T(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,N=function(e,r){if(/:\/\//.test(e.url)&&!/^https?:|^file:/.test(e.url)){const t=D(e.url);if(t)return t(e,r);if(T(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,targetMapId:z},r)}if(!(/^file:/.test(i=e.url)||/^file:/.test(F())&&!/^\w+:/.test(i))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(e,r){return t(this,void 0,void 0,(function*(){const t=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,cache:e.cache,referrer:F(),signal:r.signal});"json"!==e.type||t.headers.has("Accept")||t.headers.set("Accept","application/json");const i=yield fetch(t);if(!i.ok){const t=yield i.blob();throw new L(i.status,i.statusText,e.url,t)}let n;n="arrayBuffer"===e.type||"image"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text();const o=yield n;if(r.signal.aborted)throw R();return{data:o,cacheControl:i.headers.get("Cache-Control"),expires:i.headers.get("Expires")}}))}(e,r);if(T(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:e,mustQueue:!0,targetMapId:z},r)}var i;return function(e,t){return new Promise(((r,i)=>{var n;const o=new XMLHttpRequest;o.open(e.method||"GET",e.url,!0),"arrayBuffer"!==e.type&&"image"!==e.type||(o.responseType="arraybuffer");for(const t in e.headers)o.setRequestHeader(t,e.headers[t]);"json"===e.type&&(o.responseType="text",(null===(n=e.headers)||void 0===n?void 0:n.Accept)||o.setRequestHeader("Accept","application/json")),o.withCredentials="include"===e.credentials,o.onerror=()=>{i(new Error(o.statusText))},o.onload=()=>{if(!t.signal.aborted)if((o.status>=200&&o.status<300||0===o.status)&&null!==o.response){let t=o.response;if("json"===e.type)try{t=JSON.parse(o.response)}catch(e){return void i(e)}r({data:t,cacheControl:o.getResponseHeader("Cache-Control"),expires:o.getResponseHeader("Expires")})}else{const t=new Blob([o.response],{type:o.getResponseHeader("Content-Type")});i(new L(o.status,o.statusText,e.url,t))}},t.signal.addEventListener("abort",(()=>{o.abort(),i(R())})),o.send(e.body)}))}(e,r)};function j(e){if(!e||e.indexOf("://")<=0||0===e.indexOf("data:image/")||0===e.indexOf("blob:"))return!0;const t=new URL(e),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function U(e,t,r){r[e]&&-1!==r[e].indexOf(t)||(r[e]=r[e]||[],r[e].push(t))}function V(e,t,r){if(r&&r[e]){const i=r[e].indexOf(t);-1!==i&&r[e].splice(i,1)}}class ${constructor(e){y(this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),this.type=e}}class W extends ${constructor(e){super("error",y({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}class H{on(e,t){return this._listeners=this._listeners||{},U(e,t,this._listeners),this}off(e,t){return V(e,t,this._listeners),V(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},U(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new $(e,t||{}));const r=e.type;if(this.listens(r)){e.target=this;const t=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of t)r.call(this,e);const i=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const o of i)V(r,o,this._oneTimeListeners),o.call(this,e);const n=this._eventedParent;n&&(y(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),n.fire(e))}else e instanceof W&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var G={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const q=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Z(e,t){const r={};for(const i in e)"ref"!==i&&(r[i]=e[i]);return q.forEach((e=>{e in t&&(r[e]=t[e])})),r}function X(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!X(e[r],t[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!X(e[r],t[r]))return!1;return!0}return e===t}function Y(e,t){e.push(t)}function K(e,t,r){Y(r,{command:"addSource",args:[e,t[e]]})}function J(e,t,r){Y(t,{command:"removeSource",args:[e]}),r[e]=!0}function Q(e,t,r,i){J(e,r,i),K(e,t,r)}function ee(e,t,r){let i;for(i in e[r])if(Object.prototype.hasOwnProperty.call(e[r],i)&&"data"!==i&&!X(e[r][i],t[r][i]))return!1;for(i in t[r])if(Object.prototype.hasOwnProperty.call(t[r],i)&&"data"!==i&&!X(e[r][i],t[r][i]))return!1;return!0}function te(e,t,r,i,n,o){e=e||{},t=t||{};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(X(e[a],t[a])||r.push({command:o,args:[i,a,t[a],n]}));for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&!Object.prototype.hasOwnProperty.call(e,a)&&(X(e[a],t[a])||r.push({command:o,args:[i,a,t[a],n]}))}function re(e){return e.id}function ie(e,t){return e[t.id]=t,e}class ne{constructor(e,t,r,i){this.message=(e?`${e}: `:"")+r,i&&(this.identifier=i),null!=t&&t.__line__&&(this.line=t.__line__)}}function oe(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(const n of r)for(const t in n)e[t]=n[t];return e}class ae extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class se{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[r,i]of t)this.bindings[r]=i}concat(e){return new se(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const le={kind:"null"},ce={kind:"number"},ue={kind:"string"},de={kind:"boolean"},he={kind:"color"},pe={kind:"object"},fe={kind:"value"},me={kind:"collator"},ge={kind:"formatted"},ye={kind:"padding"},_e={kind:"resolvedImage"},be={kind:"variableAnchorOffsetCollection"};function ve(e,t){return{kind:"array",itemType:e,N:t}}function xe(e){if("array"===e.kind){const t=xe(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const we=[le,ce,ue,de,he,ge,pe,ve(fe),ye,_e,be];function Se(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Se(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of we)if(!Se(e,t))return null}return`Expected ${xe(e)} but found ${xe(t)} instead.`}function Ie(e,t){return t.some((t=>t.kind===e.kind))}function Te(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}function ke(e,t){return"array"===e.kind&&"array"===t.kind?e.itemType.kind===t.itemType.kind&&"number"==typeof e.N:e.kind===t.kind}const Ee=.96422,Ae=.82521,Pe=4/29,Ce=6/29,Me=3*Ce*Ce,Oe=Ce*Ce*Ce,Re=Math.PI/180,Be=180/Math.PI;function De(e){return(e%=360)<0&&(e+=360),e}function ze(e){let t,r,[i,n,o,a]=e;const s=Fe((.2225045*(i=Le(i))+.7168786*(n=Le(n))+.0606169*(o=Le(o)))/1);i===n&&n===o?t=r=s:(t=Fe((.4360747*i+.3850649*n+.1430804*o)/Ee),r=Fe((.0139322*i+.0971045*n+.7141733*o)/Ae));const l=116*s-16;return[l<0?0:l,500*(t-s),200*(s-r),a]}function Le(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fe(e){return e>Oe?Math.pow(e,1/3):e/Me+Pe}function Ne(e){let[t,r,i,n]=e,o=(t+16)/116,a=isNaN(r)?o:o+r/500,s=isNaN(i)?o:o-i/200;return o=1*Ue(o),a=Ee*Ue(a),s=Ae*Ue(s),[je(3.1338561*a-1.6168667*o-.4906146*s),je(-.9787684*a+1.9161415*o+.033454*s),je(.0719453*a-.2289914*o+1.4052427*s),n]}function je(e){return(e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055)<0?0:e>1?1:e}function Ue(e){return e>Ce?e*e*e:Me*(e-Pe)}function Ve(e){return parseInt(e.padEnd(2,e),16)/255}function $e(e,t){return We(t?e/100:e,0,1)}function We(e,t,r){return Math.min(Math.max(t,e),r)}function He(e){return!e.some(Number.isNaN)}const Ge={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class qe{constructor(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];this.r=e,this.g=t,this.b=r,this.a=i,n||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[e,t,r,i]))}static parse(e){if(e instanceof qe)return e;if("string"!=typeof e)return;const t=function(e){if("transparent"===(e=e.toLowerCase().trim()))return[0,0,0,0];const t=Ge[e];if(t){const[e,r,i]=t;return[e/255,r/255,i/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const t=e.length<6?1:2;let r=1;return[Ve(e.slice(r,r+=t)),Ve(e.slice(r,r+=t)),Ve(e.slice(r,r+=t)),Ve(e.slice(r,r+t)||"ff")]}if(e.startsWith("rgb")){const t=e.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(t){const[e,r,i,n,o,a,s,l,c,u,d,h]=t,p=[n||" ",s||" ",u].join("");if("  "===p||"  /"===p||",,"===p||",,,"===p){const e=[i,a,c].join(""),t="%%%"===e?100:""===e?255:0;if(t){const e=[We(+r/t,0,1),We(+o/t,0,1),We(+l/t,0,1),d?$e(+d,h):1];if(He(e))return e}}return}}const r=e.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(r){const[e,t,i,n,o,a,s,l,c]=r,u=[i||" ",o||" ",s].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const e=[+t,We(+n,0,100),We(+a,0,100),l?$e(+l,c):1];if(He(e))return function(e){let[t,r,i,n]=e;function o(e){const n=(e+t/30)%12,o=r*Math.min(i,1-i);return i-o*Math.max(-1,Math.min(n-3,9-n,1))}return t=De(t),r/=100,i/=100,[o(0),o(8),o(4),n]}(e)}}}(e);return t?new qe(...t,!1):void 0}get rgb(){const{r:e,g:t,b:r,a:i}=this,n=i||1/0;return this.overwriteGetter("rgb",[e/n,t/n,r/n,i])}get hcl(){return this.overwriteGetter("hcl",function(e){const[t,r,i,n]=ze(e),o=Math.sqrt(r*r+i*i);return[Math.round(1e4*o)?De(Math.atan2(i,r)*Be):NaN,o,t,n]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ze(this.rgb))}overwriteGetter(e,t){return Object.defineProperty(this,e,{value:t}),t}toString(){const[e,t,r,i]=this.rgb;return`rgba(${[e,t,r].map((e=>Math.round(255*e))).join(",")},${i})`}}qe.black=new qe(0,0,0,1),qe.white=new qe(1,1,1,1),qe.transparent=new qe(0,0,0,0),qe.red=new qe(1,0,0,1);class Ze{constructor(e,t,r){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xe{constructor(e,t,r,i,n){this.text=e,this.image=t,this.scale=r,this.fontStack=i,this.textColor=n}}class Ye{constructor(e){this.sections=e}static fromString(e){return new Ye([new Xe(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Ye?e:Ye.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}}class Ke{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Ke)return e;if("number"==typeof e)return new Ke([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const t of e)if("number"!=typeof t)return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Ke(e)}}toString(){return JSON.stringify(this.values)}}const Je=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qe{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Qe)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let t=0;t<e.length;t+=2){const r=e[t],i=e[t+1];if("string"!=typeof r||!Je.has(r))return;if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])return}return new Qe(e)}}toString(){return JSON.stringify(this.values)}}class et{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new et({name:e,available:!1}):null}}function tt(e,t,r,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof r&&r>=0&&r<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[e,t,r,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[e,t,r,i]:[e,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rt(e){if(null===e||"string"==typeof e||"boolean"==typeof e||"number"==typeof e||e instanceof qe||e instanceof Ze||e instanceof Ye||e instanceof Ke||e instanceof Qe||e instanceof et)return!0;if(Array.isArray(e)){for(const t of e)if(!rt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!rt(e[t]))return!1;return!0}return!1}function it(e){if(null===e)return le;if("string"==typeof e)return ue;if("boolean"==typeof e)return de;if("number"==typeof e)return ce;if(e instanceof qe)return he;if(e instanceof Ze)return me;if(e instanceof Ye)return ge;if(e instanceof Ke)return ye;if(e instanceof Qe)return be;if(e instanceof et)return _e;if(Array.isArray(e)){const t=e.length;let r;for(const i of e){const e=it(i);if(r){if(r===e)continue;r=fe;break}r=e}return ve(r||fe,t)}return pe}function nt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof qe||e instanceof Ye||e instanceof Ke||e instanceof Qe||e instanceof et?e.toString():JSON.stringify(e)}class ot{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!rt(e[1]))return t.error("invalid value");const r=e[1];let i=it(r);const n=t.expectedType;return"array"!==i.kind||0!==i.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(i=n),new ot(i,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class at{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const st={string:ue,number:ce,boolean:de,object:pe};class lt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let r,i=1;const n=e[0];if("array"===n){let n,o;if(e.length>2){const r=e[1];if("string"!=typeof r||!(r in st)||"object"===r)return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=st[r],i++}else n=fe;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],i++}r=ve(n,o)}else{if(!st[n])throw new Error(`Types doesn't contain name = ${n}`);r=st[n]}const o=[];for(;i<e.length;i++){const r=t.parse(e[i],i,fe);if(!r)return null;o.push(r)}return new lt(r,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const r=this.args[t].evaluate(e);if(!Se(this.type,it(r)))return r;if(t===this.args.length-1)throw new at(`Expected value to be of type ${xe(this.type)}, but found ${xe(it(r))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const ct={"to-boolean":de,"to-color":he,"to-number":ce,"to-string":ue};class ut{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[0];if(!ct[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if(("to-boolean"===r||"to-string"===r)&&2!==e.length)return t.error("Expected one argument.");const i=ct[r],n=[];for(let o=1;o<e.length;o++){const r=t.parse(e[o],o,fe);if(!r)return null;n.push(r)}return new ut(i,n)}evaluate(e){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(e));case"color":{let t,r;for(const i of this.args){if(t=i.evaluate(e),r=null,t instanceof qe)return t;if("string"==typeof t){const r=e.parseColor(t);if(r)return r}else if(Array.isArray(t)&&(r=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:tt(t[0],t[1],t[2],t[3]),!r))return new qe(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new at(r||`Could not parse color from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"padding":{let t;for(const r of this.args){t=r.evaluate(e);const i=Ke.parse(t);if(i)return i}throw new at(`Could not parse padding from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"variableAnchorOffsetCollection":{let t;for(const r of this.args){t=r.evaluate(e);const i=Qe.parse(t);if(i)return i}throw new at(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof t?t:JSON.stringify(t)}'`)}case"number":{let t=null;for(const r of this.args){if(t=r.evaluate(e),null===t)return 0;const i=Number(t);if(!isNaN(i))return i}throw new at(`Could not convert ${JSON.stringify(t)} to number.`)}case"formatted":return Ye.fromString(nt(this.args[0].evaluate(e)));case"resolvedImage":return et.fromString(nt(this.args[0].evaluate(e)));default:return nt(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}const dt=["Unknown","Point","LineString","Polygon"];class ht{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?dt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=qe.parse(e)),t}}class pt{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new se,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];this.registry=e,this.path=r,this.key=r.map((e=>`[${e}]`)).join(""),this.scope=n,this.errors=o,this.expectedType=i,this._isConstant=t}parse(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,r,i)._parse(e,n):this._parse(e,n)}_parse(e,t){function r(e,t,r){return"assert"===r?new lt(t,[e]):"coerce"===r?new ut(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const n=this.registry[i];if(n){let i=n.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,n=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==n.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==n.kind&&"string"!==n.kind)if("padding"!==e.kind||"value"!==n.kind&&"number"!==n.kind&&"array"!==n.kind)if("variableAnchorOffsetCollection"!==e.kind||"value"!==n.kind&&"array"!==n.kind){if(this.checkSubtype(e,n))return null}else i=r(i,e,t.typeAnnotation||"coerce");else i=r(i,e,t.typeAnnotation||"coerce");else i=r(i,e,t.typeAnnotation||"coerce");else i=r(i,e,t.typeAnnotation||"assert")}if(!(i instanceof ot)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const t=new ht;try{i=new ot(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,r){const i="number"==typeof e?this.path.concat(e):this.path,n=r?this.scope.concat(r):this.scope;return new pt(this.registry,this._isConstant,i,t||null,n,this.errors)}error(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];const n=`${this.key}${r.map((e=>`[${e}]`)).join("")}`;this.errors.push(new ae(n,e))}checkSubtype(e,t){const r=Se(e,t);return r&&this.error(r),r}}class ft{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const r=[];for(let n=1;n<e.length-1;n+=2){const i=e[n];if("string"!=typeof i)return t.error(`Expected string, but found ${typeof i} instead.`,n);if(/[^a-zA-Z0-9_]/.test(i))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=t.parse(e[n+1],n+1);if(!o)return null;r.push([i,o])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,r);return i?new ft(r,i):null}outputDefined(){return this.result.outputDefined()}}class mt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const r=e[1];return t.scope.has(r)?new mt(r,t.scope.get(r)):t.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class gt{constructor(e,t,r){this.type=e,this.index=t,this.input=r}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,ce),i=t.parse(e[2],2,ve(t.expectedType||fe));return r&&i?new gt(i.type.itemType,r,i):null}evaluate(e){const t=this.index.evaluate(e),r=this.input.evaluate(e);if(t<0)throw new at(`Array index out of bounds: ${t} < 0.`);if(t>=r.length)throw new at(`Array index out of bounds: ${t} > ${r.length-1}.`);if(t!==Math.floor(t))throw new at(`Array index must be an integer, but found ${t} instead.`);return r[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class yt{constructor(e,t){this.type=de,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,fe),i=t.parse(e[2],2,fe);return r&&i?Ie(r.type,[de,ue,ce,le,fe])?new yt(r,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${xe(r.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!r)return!1;if(!Te(t,["boolean","string","number","null"]))throw new at(`Expected first argument to be of type boolean, string, number or null, but found ${xe(it(t))} instead.`);if(!Te(r,["string","array"]))throw new at(`Expected second argument to be of type array or string, but found ${xe(it(r))} instead.`);return r.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class _t{constructor(e,t,r){this.type=ce,this.needle=e,this.haystack=t,this.fromIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,fe),i=t.parse(e[2],2,fe);if(!r||!i)return null;if(!Ie(r.type,[de,ue,ce,le,fe]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${xe(r.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,ce);return n?new _t(r,i,n):null}return new _t(r,i)}evaluate(e){const t=this.needle.evaluate(e),r=this.haystack.evaluate(e);if(!Te(t,["boolean","string","number","null"]))throw new at(`Expected first argument to be of type boolean, string, number or null, but found ${xe(it(t))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(e)),Te(r,["string"])){const e=r.indexOf(t,i);return-1===e?-1:[...r.slice(0,e)].length}if(Te(r,["array"]))return r.indexOf(t,i);throw new at(`Expected second argument to be of type array or string, but found ${xe(it(r))} instead.`)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class bt{constructor(e,t,r,i,n,o){this.inputType=e,this.type=t,this.input=r,this.cases=i,this.outputs=n,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let r,i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const n={},o=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const c=t.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,it(e)))return null}else r=it(e);if(void 0!==n[String(e)])return c.error("Branch labels must be unique.");n[String(e)]=o.length}const u=t.parse(s,l,i);if(!u)return null;i=i||u.type,o.push(u)}const a=t.parse(e[1],1,fe);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,i);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(r,a.type)?null:new bt(r,i,a,n,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(it(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}}class vt{constructor(e,t,r){this.type=e,this.branches=t,this.otherwise=r}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i=[];for(let o=1;o<e.length-1;o+=2){const n=t.parse(e[o],o,de);if(!n)return null;const a=t.parse(e[o+1],o+1,r);if(!a)return null;i.push([n,a]),r=r||a.type}const n=t.parse(e[e.length-1],e.length-1,r);if(!n)return null;if(!r)throw new Error("Can't infer output type");return new vt(r,i,n)}evaluate(e){for(const[t,r]of this.branches)if(t.evaluate(e))return r.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,r]of this.branches)e(t),e(r);e(this.otherwise)}outputDefined(){return this.branches.every((e=>{let[t,r]=e;return r.outputDefined()}))&&this.otherwise.outputDefined()}}class xt{constructor(e,t,r,i){this.type=e,this.input=t,this.beginIndex=r,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const r=t.parse(e[1],1,fe),i=t.parse(e[2],2,ce);if(!r||!i)return null;if(!Ie(r.type,[ve(fe),ue,fe]))return t.error(`Expected first argument to be of type array or string, but found ${xe(r.type)} instead`);if(4===e.length){const n=t.parse(e[3],3,ce);return n?new xt(r.type,r,i,n):null}return new xt(r.type,r,i)}evaluate(e){const t=this.input.evaluate(e),r=this.beginIndex.evaluate(e);let i;if(this.endIndex&&(i=this.endIndex.evaluate(e)),Te(t,["string"]))return[...t].slice(r,i).join("");if(Te(t,["array"]))return t.slice(r,i);throw new at(`Expected first argument to be of type array or string, but found ${xe(it(t))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function wt(e,t){const r=e.length-1;let i,n,o=0,a=r,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),i=e[s],n=e[s+1],i<=t){if(s===r||t<n)return s;o=s+1}else{if(!(i>t))throw new at("Input is not a number.");a=s-1}return 0}class St{constructor(e,t,r){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[i,n]of r)this.labels.push(i),this.outputs.push(n)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const r=t.parse(e[1],1,ce);if(!r)return null;const i=[];let n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let o=1;o<e.length;o+=2){const r=1===o?-1/0:e[o],a=e[o+1],s=o,l=o+1;if("number"!=typeof r)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=r)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,n);if(!c)return null;n=n||c.type,i.push([r,c])}return new St(n,r,i)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const n=t.length;return i>=t[n-1]?r[n-1].evaluate(e):r[wt(t,i)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function It(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tt=kt;function kt(e,t,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=r,this.p2y=i}kt.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var n=this.sampleCurveX(r)-e;if(Math.abs(n)<t)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r-=n/o}var a=0,s=1;for(r=e,i=0;i<20&&(n=this.sampleCurveX(r),!(Math.abs(n-e)<t));i++)e>n?a=r:s=r,r=.5*(s-a)+a;return r},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var Et=It(Tt);function At(e,t,r){return e+r*(t-e)}function Pt(e,t,r){return e.map(((e,i)=>At(e,t[i],r)))}const Ct={number:At,color:function(e,t,r){switch(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb"){case"rgb":{const[i,n,o,a]=Pt(e.rgb,t.rgb,r);return new qe(i,n,o,a,!1)}case"hcl":{const[i,n,o,a]=e.hcl,[s,l,c,u]=t.hcl;let d,h;if(isNaN(i)||isNaN(s))isNaN(i)?isNaN(s)?d=NaN:(d=s,1!==o&&0!==o||(h=l)):(d=i,1!==c&&0!==c||(h=n));else{let e=s-i;s>i&&e>180?e-=360:s<i&&i-s>180&&(e+=360),d=i+r*e}const[p,f,m,g]=function(e){let[t,r,i,n]=e;return t=isNaN(t)?0:t*Re,Ne([i,Math.cos(t)*r,Math.sin(t)*r,n])}([d,null!=h?h:At(n,l,r),At(o,c,r),At(a,u,r)]);return new qe(p,f,m,g,!1)}case"lab":{const[i,n,o,a]=Ne(Pt(e.lab,t.lab,r));return new qe(i,n,o,a,!1)}}},array:Pt,padding:function(e,t,r){return new Ke(Pt(e.values,t.values,r))},variableAnchorOffsetCollection:function(e,t,r){const i=e.values,n=t.values;if(i.length!==n.length)throw new at(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const o=[];for(let a=0;a<i.length;a+=2){if(i[a]!==n[a])throw new at(`Cannot interpolate values containing mismatched anchors. from[${a}]: ${i[a]}, to[${a}]: ${n[a]}`);o.push(i[a]);const[e,t]=i[a+1],[s,l]=n[a+1];o.push([At(e,s,r),At(t,l,r)])}return new Qe(o)}};class Mt{constructor(e,t,r,i,n){this.type=e,this.operator=t,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];for(const[o,a]of n)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,r,i){let n=0;if("exponential"===e.name)n=Ot(t,e.base,r,i);else if("linear"===e.name)n=Ot(t,1,r,i);else if("cubic-bezier"===e.name){const o=e.controlPoints;n=new Et(o[0],o[1],o[2],o[3]).solve(Ot(t,1,r,i))}return n}static parse(e,t){let[r,i,n,...o]=e;if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const e=i[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return t.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const e=i.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(n=t.parse(n,2,ce),!n)return null;const a=[];let s=null;"interpolate-hcl"===r||"interpolate-lab"===r?s=he:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<o.length;l+=2){const e=o[l],r=o[l+1],i=l+3,n=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',i);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',i);const c=t.parse(r,n,s);if(!c)return null;s=s||c.type,a.push([e,c])}return ke(s,ce)||ke(s,he)||ke(s,ye)||ke(s,be)||ke(s,ve(ce))?new Mt(s,r,i,n,a):t.error(`Type ${xe(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,r=this.outputs;if(1===t.length)return r[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return r[0].evaluate(e);const n=t.length;if(i>=t[n-1])return r[n-1].evaluate(e);const o=wt(t,i),a=Mt.interpolationFactor(this.interpolation,i,t[o],t[o+1]),s=r[o].evaluate(e),l=r[o+1].evaluate(e);switch(this.operator){case"interpolate":return Ct[this.type.kind](s,l,a);case"interpolate-hcl":return Ct.color(s,l,a,"hcl");case"interpolate-lab":return Ct.color(s,l,a,"lab")}}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}}function Ot(e,t,r,i){const n=i-r,o=e-r;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}class Rt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let r=null;const i=t.expectedType;i&&"value"!==i.kind&&(r=i);const n=[];for(const a of e.slice(1)){const e=t.parse(a,1+n.length,r,void 0,{typeAnnotation:"omit"});if(!e)return null;r=r||e.type,n.push(e)}if(!r)throw new Error("No output type");const o=i&&n.some((e=>Se(i,e.type)));return new Rt(o?fe:r,n)}evaluate(e){let t,r=null,i=0;for(const n of this.args)if(i++,r=n.evaluate(e),r&&r instanceof et&&!r.available&&(t||(t=r.name),r=null,i===this.args.length&&(r=t)),null!==r)break;return r}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}}function Bt(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function Dt(e,t,r,i){return 0===i.compare(t,r)}function zt(e,t,r){const i="=="!==e&&"!="!==e;return class n{constructor(e,t,r){this.type=de,this.lhs=e,this.rhs=t,this.collator=r,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const r=e[0];let o=t.parse(e[1],1,fe);if(!o)return null;if(!Bt(r,o.type))return t.concat(1).error(`"${r}" comparisons are not supported for type '${xe(o.type)}'.`);let a=t.parse(e[2],2,fe);if(!a)return null;if(!Bt(r,a.type))return t.concat(2).error(`"${r}" comparisons are not supported for type '${xe(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${xe(o.type)}' and '${xe(a.type)}'.`);i&&("value"===o.type.kind&&"value"!==a.type.kind?o=new lt(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new lt(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,me),!s)return null}return new n(o,a,s)}evaluate(n){const o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(i&&this.hasUntypedArgument){const t=it(o),r=it(a);if(t.kind!==r.kind||"string"!==t.kind&&"number"!==t.kind)throw new at(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${r.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const e=it(o),r=it(a);if("string"!==e.kind||"string"!==r.kind)return t(n,o,a)}return this.collator?r(n,o,a,this.collator.evaluate(n)):t(n,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}}}const Lt=zt("==",(function(e,t,r){return t===r}),Dt),Ft=zt("!=",(function(e,t,r){return t!==r}),(function(e,t,r,i){return!Dt(0,t,r,i)})),Nt=zt("<",(function(e,t,r){return t<r}),(function(e,t,r,i){return i.compare(t,r)<0})),jt=zt(">",(function(e,t,r){return t>r}),(function(e,t,r,i){return i.compare(t,r)>0})),Ut=zt("<=",(function(e,t,r){return t<=r}),(function(e,t,r,i){return i.compare(t,r)<=0})),Vt=zt(">=",(function(e,t,r){return t>=r}),(function(e,t,r,i){return i.compare(t,r)>=0}));class $t{constructor(e,t,r){this.type=me,this.locale=r,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const r=e[1];if("object"!=typeof r||Array.isArray(r))return t.error("Collator options argument must be an object.");const i=t.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,de);if(!i)return null;const n=t.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,de);if(!n)return null;let o=null;return r.locale&&(o=t.parse(r.locale,1,ue),!o)?null:new $t(i,n,o)}evaluate(e){return new Ze(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class Wt{constructor(e,t,r,i,n){this.type=ue,this.number=e,this.locale=t,this.currency=r,this.minFractionDigits=i,this.maxFractionDigits=n}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ce);if(!r)return null;const i=e[2];if("object"!=typeof i||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let n=null;if(i.locale&&(n=t.parse(i.locale,1,ue),!n))return null;let o=null;if(i.currency&&(o=t.parse(i.currency,1,ue),!o))return null;let a=null;if(i["min-fraction-digits"]&&(a=t.parse(i["min-fraction-digits"],1,ce),!a))return null;let s=null;return i["max-fraction-digits"]&&(s=t.parse(i["max-fraction-digits"],1,ce),!s)?null:new Wt(r,n,o,a,s)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Ht{constructor(e){this.type=ge,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const r=e[1];if(!Array.isArray(r)&&"object"==typeof r)return t.error("First argument must be an image or text section.");const i=[];let n=!1;for(let o=1;o<=e.length-1;++o){const r=e[o];if(n&&"object"==typeof r&&!Array.isArray(r)){n=!1;let e=null;if(r["font-scale"]&&(e=t.parse(r["font-scale"],1,ce),!e))return null;let o=null;if(r["text-font"]&&(o=t.parse(r["text-font"],1,ve(ue)),!o))return null;let a=null;if(r["text-color"]&&(a=t.parse(r["text-color"],1,he),!a))return null;const s=i[i.length-1];s.scale=e,s.font=o,s.textColor=a}else{const r=t.parse(e[o],1,fe);if(!r)return null;const a=r.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,i.push({content:r,scale:null,font:null,textColor:null})}}return new Ht(i)}evaluate(e){return new Ye(this.sections.map((t=>{const r=t.content.evaluate(e);return it(r)===_e?new Xe("",r,null,null,null):new Xe(nt(r),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}}class Gt{constructor(e){this.type=_e,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const r=t.parse(e[1],1,ue);return r?new Gt(r):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),r=et.fromString(t);return r&&e.availableImages&&(r.available=e.availableImages.indexOf(t)>-1),r}eachChild(e){e(this.input)}outputDefined(){return!1}}class qt{constructor(e){this.type=ce,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const r=t.parse(e[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?t.error(`Expected argument of type string or array, but found ${xe(r.type)} instead.`):new qt(r):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return[...t].length;if(Array.isArray(t))return t.length;throw new at(`Expected value to be of type string or array, but found ${xe(it(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Zt=8192;function Xt(e,t){const r=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,n=Math.pow(2,t.z);return[Math.round(r*n*Zt),Math.round(i*n*Zt)]}function Yt(e,t){const r=Math.pow(2,t.z);return[(n=(e[0]/Zt+t.x)/r,360*n-180),(i=(e[1]/Zt+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*i)*Math.PI/180))-90)];var i,n}function Kt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Jt(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Qt(e,t,r){const i=e[0]-t[0],n=e[1]-t[1],o=e[0]-r[0],a=e[1]-r[1];return i*a-o*n==0&&i*o<=0&&n*a<=0}function er(e,t,r,i){return 0!=(n=[i[0]-r[0],i[1]-r[1]])[0]*(o=[t[0]-e[0],t[1]-e[1]])[1]-n[1]*o[0]&&!(!ar(e,t,r,i)||!ar(r,i,e,t));var n,o}function tr(e,t,r){for(const i of r)for(let r=0;r<i.length-1;++r)if(er(e,t,i[r],i[r+1]))return!0;return!1}function rr(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!1;for(const s of t)for(let t=0;t<s.length-1;t++){if(Qt(e,s[t],s[t+1]))return r;(o=s[t])[1]>(n=e)[1]!=(a=s[t+1])[1]>n[1]&&n[0]<(a[0]-o[0])*(n[1]-o[1])/(a[1]-o[1])+o[0]&&(i=!i)}var n,o,a;return i}function ir(e,t){for(const r of t)if(rr(e,r))return!0;return!1}function nr(e,t){for(const r of e)if(!rr(r,t))return!1;for(let r=0;r<e.length-1;++r)if(tr(e[r],e[r+1],t))return!1;return!0}function or(e,t){for(const r of t)if(nr(e,r))return!0;return!1}function ar(e,t,r,i){const n=i[0]-r[0],o=i[1]-r[1],a=(e[0]-r[0])*o-n*(e[1]-r[1]),s=(t[0]-r[0])*o-n*(t[1]-r[1]);return a>0&&s<0||a<0&&s>0}function sr(e,t,r){const i=[];for(let n=0;n<e.length;n++){const o=[];for(let i=0;i<e[n].length;i++){const a=Xt(e[n][i],r);Kt(t,a),o.push(a)}i.push(o)}return i}function lr(e,t,r){const i=[];for(let n=0;n<e.length;n++){const o=sr(e[n],t,r);i.push(o)}return i}function cr(e,t,r,i){if(e[0]<r[0]||e[0]>r[2]){const t=.5*i;let n=e[0]-r[0]>t?-i:r[0]-e[0]>t?i:0;0===n&&(n=e[0]-r[2]>t?-i:r[2]-e[0]>t?i:0),e[0]+=n}Kt(t,e)}function ur(e,t,r,i){const n=Math.pow(2,i.z)*Zt,o=[i.x*Zt,i.y*Zt],a=[];for(const s of e)for(const e of s){const i=[e.x+o[0],e.y+o[1]];cr(i,t,r,n),a.push(i)}return a}function dr(e,t,r,i){const n=Math.pow(2,i.z)*Zt,o=[i.x*Zt,i.y*Zt],a=[];for(const l of e){const e=[];for(const r of l){const i=[r.x+o[0],r.y+o[1]];Kt(t,i),e.push(i)}a.push(e)}if(t[2]-t[0]<=n/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const i of e)cr(i,t,r,n)}var s;return a}class hr{constructor(e,t){this.type=de,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(rt(e[1])){const t=e[1];if("FeatureCollection"===t.type){const e=[];for(const r of t.features){const{type:t,coordinates:i}=r.geometry;"Polygon"===t&&e.push(i),"MultiPolygon"===t&&e.push(...i)}if(e.length)return new hr(t,{type:"MultiPolygon",coordinates:e})}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new hr(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new hr(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const o=sr(t.coordinates,i,n),a=ur(e.geometry(),r,i,n);if(!Jt(r,i))return!1;for(const e of a)if(!rr(e,o))return!1}if("MultiPolygon"===t.type){const o=lr(t.coordinates,i,n),a=ur(e.geometry(),r,i,n);if(!Jt(r,i))return!1;for(const e of a)if(!ir(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if("Polygon"===t.type){const o=sr(t.coordinates,i,n),a=dr(e.geometry(),r,i,n);if(!Jt(r,i))return!1;for(const e of a)if(!nr(e,o))return!1}if("MultiPolygon"===t.type){const o=lr(t.coordinates,i,n),a=dr(e.geometry(),r,i,n);if(!Jt(r,i))return!1;for(const e of a)if(!or(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let pr=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const n=e-1>>1,o=t[n];if(r(i,o)>=0)break;t[e]=o,e=n}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,n=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&r(t[o],t[i])<0&&(i=o),r(t[i],n)>=0)break;t[e]=t[i],e=i}t[e]=n}};function fr(e,t,r,i,n){mr(e,t,r,i||e.length-1,n||yr)}function mr(e,t,r,i,n){for(;i>r;){if(i-r>600){var o=i-r+1,a=t-r+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);mr(e,t,Math.max(r,Math.floor(t-a*l/o+c)),Math.min(i,Math.floor(t+(o-a)*l/o+c)),n)}var u=e[t],d=r,h=i;for(gr(e,r,t),n(e[i],u)>0&&gr(e,r,i);d<h;){for(gr(e,d,h),d++,h--;n(e[d],u)<0;)d++;for(;n(e[h],u)>0;)h--}0===n(e[r],u)?gr(e,r,h):gr(e,++h,i),h<=t&&(r=h+1),t<=h&&(i=h-1)}}function gr(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function yr(e,t){return e<t?-1:e>t?1:0}function _r(e,t){if(e.length<=1)return[e];const r=[];let i,n;for(const o of e){const e=vr(o);0!==e&&(o.area=Math.abs(e),void 0===n&&(n=e<0),n===e<0?(i&&r.push(i),i=[o]):i.push(o))}if(i&&r.push(i),t>1)for(let o=0;o<r.length;o++)r[o].length<=t||(fr(r[o],t,1,r[o].length-1,br),r[o]=r[o].slice(0,t));return r}function br(e,t){return t.area-e.area}function vr(e){let t=0;for(let r,i,n=0,o=e.length,a=o-1;n<o;a=n++)r=e[n],i=e[a],t+=(i.x-r.x)*(r.y+i.y);return t}const xr=1/298.257223563,wr=xr*(2-xr),Sr=Math.PI/180;class Ir{constructor(e){const t=6378.137*Sr*1e3,r=Math.cos(e*Sr),i=1/(1-wr*(1-r*r)),n=Math.sqrt(i);this.kx=t*n*r,this.ky=t*n*i*(1-wr)}distance(e,t){const r=this.wrap(e[0]-t[0])*this.kx,i=(e[1]-t[1])*this.ky;return Math.sqrt(r*r+i*i)}pointOnLine(e,t){let r,i,n,o,a=1/0;for(let s=0;s<e.length-1;s++){let l=e[s][0],c=e[s][1],u=this.wrap(e[s+1][0]-l)*this.kx,d=(e[s+1][1]-c)*this.ky,h=0;0===u&&0===d||(h=(this.wrap(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*d)/(u*u+d*d),h>1?(l=e[s+1][0],c=e[s+1][1]):h>0&&(l+=u/this.kx*h,c+=d/this.ky*h)),u=this.wrap(t[0]-l)*this.kx,d=(t[1]-c)*this.ky;const p=u*u+d*d;p<a&&(a=p,r=l,i=c,n=s,o=h)}return{point:[r,i],index:n,t:Math.max(0,Math.min(1,o))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}function Tr(e,t){return t[0]-e[0]}function kr(e){return e[1]-e[0]+1}function Er(e,t){return e[1]>=e[0]&&e[1]<t}function Ar(e,t){if(e[0]>e[1])return[null,null];const r=kr(e);if(t){if(2===r)return[e,null];const t=Math.floor(r/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}if(1===r)return[e,null];const i=Math.floor(r/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}function Pr(e,t){if(!Er(t,e.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let i=t[0];i<=t[1];++i)Kt(r,e[i]);return r}function Cr(e){const t=[1/0,1/0,-1/0,-1/0];for(const r of e)for(const e of r)Kt(t,e);return t}function Mr(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function Or(e,t,r){if(!Mr(e)||!Mr(t))return NaN;let i=0,n=0;return e[2]<t[0]&&(i=t[0]-e[2]),e[0]>t[2]&&(i=e[0]-t[2]),e[1]>t[3]&&(n=e[1]-t[3]),e[3]<t[1]&&(n=t[1]-e[3]),r.distance([0,0],[i,n])}function Rr(e,t,r){const i=r.pointOnLine(t,e);return r.distance(e,i.point)}function Br(e,t,r,i,n){const o=Math.min(Rr(e,[r,i],n),Rr(t,[r,i],n)),a=Math.min(Rr(r,[e,t],n),Rr(i,[e,t],n));return Math.min(o,a)}function Dr(e,t,r,i,n){if(!Er(t,e.length)||!Er(i,r.length))return 1/0;let o=1/0;for(let a=t[0];a<t[1];++a){const t=e[a],s=e[a+1];for(let e=i[0];e<i[1];++e){const i=r[e],a=r[e+1];if(er(t,s,i,a))return 0;o=Math.min(o,Br(t,s,i,a,n))}}return o}function zr(e,t,r,i,n){if(!Er(t,e.length)||!Er(i,r.length))return NaN;let o=1/0;for(let a=t[0];a<=t[1];++a)for(let t=i[0];t<=i[1];++t)if(o=Math.min(o,n.distance(e[a],r[t])),0===o)return o;return o}function Lr(e,t,r){if(rr(e,t,!0))return 0;let i=1/0;for(const n of t){const t=n[0],o=n[n.length-1];if(t!==o&&(i=Math.min(i,Rr(e,[o,t],r)),0===i))return i;const a=r.pointOnLine(n,e);if(i=Math.min(i,r.distance(e,a.point)),0===i)return i}return i}function Fr(e,t,r,i){if(!Er(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(rr(e[o],r,!0))return 0;let n=1/0;for(let o=t[0];o<t[1];++o){const t=e[o],a=e[o+1];for(const e of r)for(let r=0,o=e.length,s=o-1;r<o;s=r++){const o=e[s],l=e[r];if(er(t,a,o,l))return 0;n=Math.min(n,Br(t,a,o,l,i))}}return n}function Nr(e,t){for(const r of e)for(const e of r)if(rr(e,t,!0))return!0;return!1}function jr(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const n=Cr(e),o=Cr(t);if(i!==1/0&&Or(n,o,r)>=i)return i;if(Jt(n,o)){if(Nr(e,t))return 0}else if(Nr(t,e))return 0;let a=1/0;for(const s of e)for(let e=0,i=s.length,n=i-1;e<i;n=e++){const i=s[n],o=s[e];for(const e of t)for(let t=0,n=e.length,s=n-1;t<n;s=t++){const n=e[s],l=e[t];if(er(i,o,n,l))return 0;a=Math.min(a,Br(i,o,n,l,r))}}return a}function Ur(e,t,r,i,n,o){if(!o)return;const a=Or(Pr(i,o),n,r);a<t&&e.push([a,o,[0,0]])}function Vr(e,t,r,i,n,o,a){if(!o||!a)return;const s=Or(Pr(i,o),Pr(n,a),r);s<t&&e.push([s,o,a])}function $r(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=Math.min(i.distance(e[0],r[0][0]),n);if(0===o)return o;const a=new pr([[0,[0,e.length-1],[0,0]]],Tr),s=Cr(r);for(;a.length>0;){const n=a.pop();if(n[0]>=o)continue;const l=n[1],c=t?50:100;if(kr(l)<=c){if(!Er(l,e.length))return NaN;if(t){const t=Fr(e,l,r,i);if(isNaN(t)||0===t)return t;o=Math.min(o,t)}else for(let t=l[0];t<=l[1];++t){const n=Lr(e[t],r,i);if(o=Math.min(o,n),0===o)return 0}}else{const r=Ar(l,t);Ur(a,o,i,e,s,r[0]),Ur(a,o,i,e,s,r[1])}}return o}function Wr(e,t,r,i,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=Math.min(o,n.distance(e[0],r[0]));if(0===a)return a;const s=new pr([[0,[0,e.length-1],[0,r.length-1]]],Tr);for(;s.length>0;){const o=s.pop();if(o[0]>=a)continue;const l=o[1],c=o[2],u=t?50:100,d=i?50:100;if(kr(l)<=u&&kr(c)<=d){if(!Er(l,e.length)&&Er(c,r.length))return NaN;let o;if(t&&i)o=Dr(e,l,r,c,n),a=Math.min(a,o);else if(t&&!i){const t=e.slice(l[0],l[1]+1);for(let e=c[0];e<=c[1];++e)if(o=Rr(r[e],t,n),a=Math.min(a,o),0===a)return a}else if(!t&&i){const t=r.slice(c[0],c[1]+1);for(let r=l[0];r<=l[1];++r)if(o=Rr(e[r],t,n),a=Math.min(a,o),0===a)return a}else o=zr(e,l,r,c,n),a=Math.min(a,o)}else{const o=Ar(l,t),u=Ar(c,i);Vr(s,a,n,e,r,o[0],u[0]),Vr(s,a,n,e,r,o[0],u[1]),Vr(s,a,n,e,r,o[1],u[0]),Vr(s,a,n,e,r,o[1],u[1])}}return a}function Hr(e){return"MultiPolygon"===e.type?e.coordinates.map((e=>({type:"Polygon",coordinates:e}))):"MultiLineString"===e.type?e.coordinates.map((e=>({type:"LineString",coordinates:e}))):"MultiPoint"===e.type?e.coordinates.map((e=>({type:"Point",coordinates:e}))):[e]}class Gr{constructor(e,t){this.type=ce,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(rt(e[1])){const t=e[1];if("FeatureCollection"===t.type)return new Gr(t,t.features.map((e=>Hr(e.geometry))).flat());if("Feature"===t.type)return new Gr(t,Hr(t.geometry));if("type"in t&&"coordinates"in t)return new Gr(t,Hr(t))}return t.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const r=e.geometry(),i=r.flat().map((t=>Yt([t.x,t.y],e.canonical)));if(0===r.length)return NaN;const n=new Ir(i[0][1]);let o=1/0;for(const a of t){switch(a.type){case"Point":o=Math.min(o,Wr(i,!1,[a.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,Wr(i,!1,a.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,$r(i,!1,a.coordinates,n,o))}if(0===o)return o}return o}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const r=e.geometry(),i=r.flat().map((t=>Yt([t.x,t.y],e.canonical)));if(0===r.length)return NaN;const n=new Ir(i[0][1]);let o=1/0;for(const a of t){switch(a.type){case"Point":o=Math.min(o,Wr(i,!0,[a.coordinates],!1,n,o));break;case"LineString":o=Math.min(o,Wr(i,!0,a.coordinates,!0,n,o));break;case"Polygon":o=Math.min(o,$r(i,!0,a.coordinates,n,o))}if(0===o)return o}return o}(e,this.geometries);if("Polygon"===e.geometryType())return function(e,t){const r=e.geometry();if(0===r.length||0===r[0].length)return NaN;const i=_r(r,0).map((t=>t.map((t=>t.map((t=>Yt([t.x,t.y],e.canonical))))))),n=new Ir(i[0][0][0][1]);let o=1/0;for(const a of t)for(const e of i){switch(a.type){case"Point":o=Math.min(o,$r([a.coordinates],!1,e,n,o));break;case"LineString":o=Math.min(o,$r(a.coordinates,!0,e,n,o));break;case"Polygon":o=Math.min(o,jr(e,a.coordinates,n,o))}if(0===o)return o}return o}(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const qr={"==":Lt,"!=":Ft,">":jt,"<":Nt,">=":Vt,"<=":Ut,array:lt,at:gt,boolean:lt,case:vt,coalesce:Rt,collator:$t,format:Ht,image:Gt,in:yt,"index-of":_t,interpolate:Mt,"interpolate-hcl":Mt,"interpolate-lab":Mt,length:qt,let:ft,literal:ot,match:bt,number:lt,"number-format":Wt,object:lt,slice:xt,step:St,string:lt,"to-boolean":ut,"to-color":ut,"to-number":ut,"to-string":ut,var:mt,within:hr,distance:Gr};class Zr{constructor(e,t,r,i){this.name=e,this.type=t,this._evaluate=r,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,t){const r=e[0],i=Zr.definitions[r];if(!i)return t.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const n=Array.isArray(i)?i[0]:i.type,o=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,a=o.filter((t=>{let[r]=t;return!Array.isArray(r)||r.length===e.length-1}));let s=null;for(const[l,c]of a){s=new pt(t.registry,Qr,t.path,null,t.scope);const i=[];let o=!1;for(let t=1;t<e.length;t++){const r=e[t],n=Array.isArray(l)?l[t-1]:l.type,a=s.parse(r,1+i.length,n);if(!a){o=!0;break}i.push(a)}if(!o)if(Array.isArray(l)&&l.length!==i.length)s.error(`Expected ${l.length} arguments, but found ${i.length} instead.`);else{for(let e=0;e<i.length;e++){const t=Array.isArray(l)?l[e]:l.type,r=i[e];s.concat(e+1).checkSubtype(t,r.type)}if(0===s.errors.length)return new Zr(r,n,c,i)}}if(1===a.length)t.errors.push(...s.errors);else{const r=(a.length?a:o).map((e=>{let[t]=e;return r=t,Array.isArray(r)?`(${r.map(xe).join(", ")})`:`(${xe(r.type)}...)`;var r})).join(" | "),i=[];for(let n=1;n<e.length;n++){const r=t.parse(e[n],1+i.length);if(!r)return null;i.push(xe(r.type))}t.error(`Expected arguments of type ${r}, but found (${i.join(", ")}) instead.`)}return null}static register(e,t){Zr.definitions=t;for(const r in t)e[r]=Zr}}function Xr(e,t){let[r,i,n,o]=t;r=r.evaluate(e),i=i.evaluate(e),n=n.evaluate(e);const a=o?o.evaluate(e):1,s=tt(r,i,n,a);if(s)throw new at(s);return new qe(r/255,i/255,n/255,a,!1)}function Yr(e,t){return e in t}function Kr(e,t){const r=t[e];return void 0===r?null:r}function Jr(e){return{type:e}}function Qr(e){if(e instanceof mt)return Qr(e.boundExpression);if(e instanceof Zr&&"error"===e.name)return!1;if(e instanceof $t)return!1;if(e instanceof hr)return!1;if(e instanceof Gr)return!1;const t=e instanceof ut||e instanceof lt;let r=!0;return e.eachChild((e=>{r=t?r&&Qr(e):r&&e instanceof ot})),!!r&&ei(e)&&ri(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function ei(e){if(e instanceof Zr){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof hr)return!1;if(e instanceof Gr)return!1;let t=!0;return e.eachChild((e=>{t&&!ei(e)&&(t=!1)})),t}function ti(e){if(e instanceof Zr&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!ti(e)&&(t=!1)})),t}function ri(e,t){if(e instanceof Zr&&t.indexOf(e.name)>=0)return!1;let r=!0;return e.eachChild((e=>{r&&!ri(e,t)&&(r=!1)})),r}function ii(e){return{result:"success",value:e}}function ni(e){return{result:"error",value:e}}function oi(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function ai(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function si(e){return!!e.expression&&e.expression.interpolated}function li(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ci(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function ui(e){return e}function di(e,t){const r="color"===t.type,i=e.stops&&"object"==typeof e.stops[0][0],n=i||!(i||void 0!==e.property),o=e.type||(si(t)?"exponential":"interval");if(r||"padding"===t.type){const i=r?qe.parse:Ke.parse;(e=oe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],i(e[1])]))),e.default=i(e.default?e.default:t.default)}if(e.colorSpace&&"rgb"!==(a=e.colorSpace)&&"hcl"!==a&&"lab"!==a)throw new Error(`Unknown color space: "${e.colorSpace}"`);var a;let s,l,c;if("exponential"===o)s=mi;else if("interval"===o)s=fi;else if("categorical"===o){s=pi,l=Object.create(null);for(const t of e.stops)l[t[0]]=t[1];c=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);s=gi}if(i){const r={},i=[];for(let t=0;t<e.stops.length;t++){const n=e.stops[t],o=n[0].zoom;void 0===r[o]&&(r[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},i.push(o)),r[o].stops.push([n[0].value,n[1]])}const n=[];for(const e of i)n.push([r[e].zoom,di(r[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Mt.interpolationFactor.bind(void 0,o),zoomStops:n.map((e=>e[0])),evaluate:(r,i)=>{let{zoom:o}=r;return mi({stops:n,base:e.base},t,o).evaluate(o,i)}}}if(n){const r="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:r,interpolationFactor:Mt.interpolationFactor.bind(void 0,r),zoomStops:e.stops.map((e=>e[0])),evaluate:r=>{let{zoom:i}=r;return s(e,t,i,l,c)}}}return{kind:"source",evaluate(r,i){const n=i&&i.properties?i.properties[e.property]:void 0;return void 0===n?hi(e.default,t.default):s(e,t,n,l,c)}}}function hi(e,t,r){return void 0!==e?e:void 0!==t?t:void 0!==r?r:void 0}function pi(e,t,r,i,n){return hi(typeof r===n?i[r]:void 0,e.default,t.default)}function fi(e,t,r){if("number"!==li(r))return hi(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[i-1][0])return e.stops[i-1][1];const n=wt(e.stops.map((e=>e[0])),r);return e.stops[n][1]}function mi(e,t,r){const i=void 0!==e.base?e.base:1;if("number"!==li(r))return hi(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(r<=e.stops[0][0])return e.stops[0][1];if(r>=e.stops[n-1][0])return e.stops[n-1][1];const o=wt(e.stops.map((e=>e[0])),r),a=function(e,t,r,i){const n=i-r,o=e-r;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}(r,i,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1],c=Ct[t.type]||ui;return"function"==typeof s.evaluate?{evaluate(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];const n=s.evaluate.apply(void 0,r),o=l.evaluate.apply(void 0,r);if(void 0!==n&&void 0!==o)return c(n,o,a,e.colorSpace)}}:c(s,l,a,e.colorSpace)}function gi(e,t,r){switch(t.type){case"color":r=qe.parse(r);break;case"formatted":r=Ye.fromString(r.toString());break;case"resolvedImage":r=et.fromString(r.toString());break;case"padding":r=Ke.parse(r);break;default:li(r)===t.type||"enum"===t.type&&t.values[r]||(r=void 0)}return hi(r,e.default,t.default)}Zr.register(qr,{error:[{kind:"error"},[ue],(e,t)=>{let[r]=t;throw new at(r.evaluate(e))}],typeof:[ue,[fe],(e,t)=>{let[r]=t;return xe(it(r.evaluate(e)))}],"to-rgba":[ve(ce,4),[he],(e,t)=>{let[r]=t;const[i,n,o,a]=r.evaluate(e).rgb;return[255*i,255*n,255*o,a]}],rgb:[he,[ce,ce,ce],Xr],rgba:[he,[ce,ce,ce,ce],Xr],has:{type:de,overloads:[[[ue],(e,t)=>{let[r]=t;return Yr(r.evaluate(e),e.properties())}],[[ue,pe],(e,t)=>{let[r,i]=t;return Yr(r.evaluate(e),i.evaluate(e))}]]},get:{type:fe,overloads:[[[ue],(e,t)=>{let[r]=t;return Kr(r.evaluate(e),e.properties())}],[[ue,pe],(e,t)=>{let[r,i]=t;return Kr(r.evaluate(e),i.evaluate(e))}]]},"feature-state":[fe,[ue],(e,t)=>{let[r]=t;return Kr(r.evaluate(e),e.featureState||{})}],properties:[pe,[],e=>e.properties()],"geometry-type":[ue,[],e=>e.geometryType()],id:[fe,[],e=>e.id()],zoom:[ce,[],e=>e.globals.zoom],"heatmap-density":[ce,[],e=>e.globals.heatmapDensity||0],"line-progress":[ce,[],e=>e.globals.lineProgress||0],accumulated:[fe,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ce,Jr(ce),(e,t)=>{let r=0;for(const i of t)r+=i.evaluate(e);return r}],"*":[ce,Jr(ce),(e,t)=>{let r=1;for(const i of t)r*=i.evaluate(e);return r}],"-":{type:ce,overloads:[[[ce,ce],(e,t)=>{let[r,i]=t;return r.evaluate(e)-i.evaluate(e)}],[[ce],(e,t)=>{let[r]=t;return-r.evaluate(e)}]]},"/":[ce,[ce,ce],(e,t)=>{let[r,i]=t;return r.evaluate(e)/i.evaluate(e)}],"%":[ce,[ce,ce],(e,t)=>{let[r,i]=t;return r.evaluate(e)%i.evaluate(e)}],ln2:[ce,[],()=>Math.LN2],pi:[ce,[],()=>Math.PI],e:[ce,[],()=>Math.E],"^":[ce,[ce,ce],(e,t)=>{let[r,i]=t;return Math.pow(r.evaluate(e),i.evaluate(e))}],sqrt:[ce,[ce],(e,t)=>{let[r]=t;return Math.sqrt(r.evaluate(e))}],log10:[ce,[ce],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))/Math.LN10}],ln:[ce,[ce],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))}],log2:[ce,[ce],(e,t)=>{let[r]=t;return Math.log(r.evaluate(e))/Math.LN2}],sin:[ce,[ce],(e,t)=>{let[r]=t;return Math.sin(r.evaluate(e))}],cos:[ce,[ce],(e,t)=>{let[r]=t;return Math.cos(r.evaluate(e))}],tan:[ce,[ce],(e,t)=>{let[r]=t;return Math.tan(r.evaluate(e))}],asin:[ce,[ce],(e,t)=>{let[r]=t;return Math.asin(r.evaluate(e))}],acos:[ce,[ce],(e,t)=>{let[r]=t;return Math.acos(r.evaluate(e))}],atan:[ce,[ce],(e,t)=>{let[r]=t;return Math.atan(r.evaluate(e))}],min:[ce,Jr(ce),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ce,Jr(ce),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ce,[ce],(e,t)=>{let[r]=t;return Math.abs(r.evaluate(e))}],round:[ce,[ce],(e,t)=>{let[r]=t;const i=r.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[ce,[ce],(e,t)=>{let[r]=t;return Math.floor(r.evaluate(e))}],ceil:[ce,[ce],(e,t)=>{let[r]=t;return Math.ceil(r.evaluate(e))}],"filter-==":[de,[ue,fe],(e,t)=>{let[r,i]=t;return e.properties()[r.value]===i.value}],"filter-id-==":[de,[fe],(e,t)=>{let[r]=t;return e.id()===r.value}],"filter-type-==":[de,[ue],(e,t)=>{let[r]=t;return e.geometryType()===r.value}],"filter-<":[de,[ue,fe],(e,t)=>{let[r,i]=t;const n=e.properties()[r.value],o=i.value;return typeof n==typeof o&&n<o}],"filter-id-<":[de,[fe],(e,t)=>{let[r]=t;const i=e.id(),n=r.value;return typeof i==typeof n&&i<n}],"filter->":[de,[ue,fe],(e,t)=>{let[r,i]=t;const n=e.properties()[r.value],o=i.value;return typeof n==typeof o&&n>o}],"filter-id->":[de,[fe],(e,t)=>{let[r]=t;const i=e.id(),n=r.value;return typeof i==typeof n&&i>n}],"filter-<=":[de,[ue,fe],(e,t)=>{let[r,i]=t;const n=e.properties()[r.value],o=i.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[de,[fe],(e,t)=>{let[r]=t;const i=e.id(),n=r.value;return typeof i==typeof n&&i<=n}],"filter->=":[de,[ue,fe],(e,t)=>{let[r,i]=t;const n=e.properties()[r.value],o=i.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[de,[fe],(e,t)=>{let[r]=t;const i=e.id(),n=r.value;return typeof i==typeof n&&i>=n}],"filter-has":[de,[fe],(e,t)=>{let[r]=t;return r.value in e.properties()}],"filter-has-id":[de,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[de,[ve(ue)],(e,t)=>{let[r]=t;return r.value.indexOf(e.geometryType())>=0}],"filter-id-in":[de,[ve(fe)],(e,t)=>{let[r]=t;return r.value.indexOf(e.id())>=0}],"filter-in-small":[de,[ue,ve(fe)],(e,t)=>{let[r,i]=t;return i.value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[de,[ue,ve(fe)],(e,t)=>{let[r,i]=t;return function(e,t,r,i){for(;r<=i;){const n=r+i>>1;if(t[n]===e)return!0;t[n]>e?i=n-1:r=n+1}return!1}(e.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:de,overloads:[[[de,de],(e,t)=>{let[r,i]=t;return r.evaluate(e)&&i.evaluate(e)}],[Jr(de),(e,t)=>{for(const r of t)if(!r.evaluate(e))return!1;return!0}]]},any:{type:de,overloads:[[[de,de],(e,t)=>{let[r,i]=t;return r.evaluate(e)||i.evaluate(e)}],[Jr(de),(e,t)=>{for(const r of t)if(r.evaluate(e))return!0;return!1}]]},"!":[de,[de],(e,t)=>{let[r]=t;return!r.evaluate(e)}],"is-supported-script":[de,[ue],(e,t)=>{let[r]=t;const i=e.globals&&e.globals.isSupportedScript;return!i||i(r.evaluate(e))}],upcase:[ue,[ue],(e,t)=>{let[r]=t;return r.evaluate(e).toUpperCase()}],downcase:[ue,[ue],(e,t)=>{let[r]=t;return r.evaluate(e).toLowerCase()}],concat:[ue,Jr(fe),(e,t)=>t.map((t=>nt(t.evaluate(e)))).join("")],"resolved-locale":[ue,[me],(e,t)=>{let[r]=t;return r.evaluate(e).resolvedLocale()}]});class yi{constructor(e,t){var r;this.expression=e,this._warningHistory={},this._evaluator=new ht,this._defaultValue=t?"color"===(r=t).type&&ci(r.default)?new qe(0,0,0,0):"color"===r.type?qe.parse(r.default)||null:"padding"===r.type?Ke.parse(r.default)||null:"variableAnchorOffsetCollection"===r.type?Qe.parse(r.default)||null:void 0===r.default?null:r.default:null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,r,i,n,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=r,this._evaluator.canonical=i,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,r,i,n,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=r||null,this._evaluator.canonical=i,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new at(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function _i(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in qr}function bi(e,t){const r=new pt(qr,Qr,[],t?function(e){const t={color:he,string:ue,number:ce,enum:ue,boolean:de,formatted:ge,padding:ye,resolvedImage:_e,variableAnchorOffsetCollection:be};return"array"===e.type?ve(t[e.value]||fe,e.length):t[e.type]}(t):void 0),i=r.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?ii(new yi(i,t)):ni(r.errors)}class vi{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!ti(t.expression)}evaluateWithoutErrorHandling(e,t,r,i,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,n,o)}evaluate(e,t,r,i,n,o){return this._styleExpression.evaluate(e,t,r,i,n,o)}}class xi{constructor(e,t,r,i){this.kind=e,this.zoomStops=r,this._styleExpression=t,this.isStateDependent="camera"!==e&&!ti(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,r,i,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,r,i,n,o)}evaluate(e,t,r,i,n,o){return this._styleExpression.evaluate(e,t,r,i,n,o)}interpolationFactor(e,t,r){return this.interpolationType?Mt.interpolationFactor(this.interpolationType,e,t,r):0}}function wi(e,t){const r=bi(e,t);if("error"===r.result)return r;const i=r.value.expression,n=ei(i);if(!n&&!oi(t))return ni([new ae("","data expressions not supported")]);const o=ri(i,["zoom"]);if(!o&&!ai(t))return ni([new ae("","zoom expressions not supported")]);const a=Ii(i);return a||o?a instanceof ae?ni([a]):a instanceof Mt&&!si(t)?ni([new ae("",'"interpolate" expressions cannot be used with this property')]):ii(a?new xi(n?"camera":"composite",r.value,a.labels,a instanceof Mt?a.interpolation:void 0):new vi(n?"constant":"source",r.value)):ni([new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Si{constructor(e,t){this._parameters=e,this._specification=t,oe(this,di(this._parameters,this._specification))}static deserialize(e){return new Si(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ii(e){let t=null;if(e instanceof ft)t=Ii(e.result);else if(e instanceof Rt){for(const r of e.args)if(t=Ii(r),t)break}else(e instanceof St||e instanceof Mt)&&e.input instanceof Zr&&"zoom"===e.input.name&&(t=e);return t instanceof ae||e.eachChild((e=>{const r=Ii(e);r instanceof ae?t=r:!t&&r?t=new ae("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new ae("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Ti(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Ti(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const ki={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ei(e){if(null==e)return{filter:()=>!0,needGeometry:!1};Ti(e)||(e=Ci(e));const t=bi(e,ki);if("error"===t.result)throw new Error(t.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return{filter:(e,r,i)=>t.value.evaluate(e,r,{},i),needGeometry:Pi(e)}}function Ai(e,t){return e<t?-1:e>t?1:0}function Pi(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(Pi(e[t]))return!0;return!1}function Ci(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?Mi(e[1],e[2],"=="):"!="===t?Bi(Mi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?Mi(e[1],e[2],t):"any"===t?(r=e.slice(1),["any"].concat(r.map(Ci))):"all"===t?["all"].concat(e.slice(1).map(Ci)):"none"===t?["all"].concat(e.slice(1).map(Ci).map(Bi)):"in"===t?Oi(e[1],e.slice(2)):"!in"===t?Bi(Oi(e[1],e.slice(2))):"has"===t?Ri(e[1]):"!has"!==t||Bi(Ri(e[1]));var r}function Mi(e,t,r){switch(e){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,e,t]}}function Oi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(Ai)]]:["filter-in-small",e,["literal",t]]}}function Ri(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Bi(e){return["!",e]}function Di(e){const t=typeof e;if("number"===t||"boolean"===t||"string"===t||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const r of e)t+=`${Di(r)},`;return`${t}]`}const r=Object.keys(e).sort();let i="{";for(let n=0;n<r.length;n++)i+=`${JSON.stringify(r[n])}:${Di(e[r[n]])},`;return`${i}}`}function zi(e){let t="";for(const r of q)t+=`/${Di(e[r])}`;return t}function Li(e){const t=e.value;return t?[new ne(e.key,t,"constants have been deprecated as of v8")]:[]}function Fi(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ni(e){if(Array.isArray(e))return e.map(Ni);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const r in e)t[r]=Ni(e[r]);return t}return Fi(e)}function ji(e){const t=e.key,r=e.value,i=e.valueSpec||{},n=e.objectElementValidators||{},o=e.style,a=e.styleSpec,s=e.validateSpec;let l=[];const c=li(r);if("object"!==c)return[new ne(t,r,`object expected, ${c} found`)];for(const u in r){const e=u.split(".")[0],c=i[e]||i["*"];let d;if(n[e])d=n[e];else if(i[e])d=s;else if(n["*"])d=n["*"];else{if(!i["*"]){l.push(new ne(t,r[u],`unknown property "${u}"`));continue}d=s}l=l.concat(d({key:(t?`${t}.`:t)+u,value:r[u],valueSpec:c,style:o,styleSpec:a,object:r,objectKey:u,validateSpec:s},r))}for(const u in i)n[u]||i[u].required&&void 0===i[u].default&&void 0===r[u]&&l.push(new ne(t,r,`missing required property "${u}"`));return l}function Ui(e){const t=e.value,r=e.valueSpec,i=e.style,n=e.styleSpec,o=e.key,a=e.arrayElementValidator||e.validateSpec;if("array"!==li(t))return[new ne(o,t,`array expected, ${li(t)} found`)];if(r.length&&t.length!==r.length)return[new ne(o,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new ne(o,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let s={type:r.value,values:r.values};n.$version<7&&(s.function=r.function),"object"===li(r.value)&&(s=r.value);let l=[];for(let c=0;c<t.length;c++)l=l.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,validateSpec:e.validateSpec,style:i,styleSpec:n,key:`${o}[${c}]`}));return l}function Vi(e){const t=e.key,r=e.value,i=e.valueSpec;let n=li(r);return"number"===n&&r!=r&&(n="NaN"),"number"!==n?[new ne(t,r,`number expected, ${n} found`)]:"minimum"in i&&r<i.minimum?[new ne(t,r,`${r} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&r>i.maximum?[new ne(t,r,`${r} is greater than the maximum value ${i.maximum}`)]:[]}function $i(e){const t=e.valueSpec,r=Fi(e.value.type);let i,n,o,a={};const s="categorical"!==r&&void 0===e.value.property,l=!s,c="array"===li(e.value.stops)&&"array"===li(e.value.stops[0])&&"object"===li(e.value.stops[0][0]),u=ji({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===r)return[new ne(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const i=e.value;return t=t.concat(Ui({key:e.key,value:i,valueSpec:e.valueSpec,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===li(i)&&0===i.length&&t.push(new ne(e.key,i,"array must have at least one stop")),t},default:function(e){return e.validateSpec({key:e.key,value:e.value,valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&s&&u.push(new ne(e.key,e.value,'missing required property "property"')),"identity"===r||e.value.stops||u.push(new ne(e.key,e.value,'missing required property "stops"')),"exponential"===r&&e.valueSpec.expression&&!si(e.valueSpec)&&u.push(new ne(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!oi(e.valueSpec)?u.push(new ne(e.key,e.value,"property functions not supported")):s&&!ai(e.valueSpec)&&u.push(new ne(e.key,e.value,"zoom functions not supported"))),"categorical"!==r&&!c||void 0!==e.value.property||u.push(new ne(e.key,e.value,'"property" property is required')),u;function d(e){let r=[];const i=e.value,s=e.key;if("array"!==li(i))return[new ne(s,i,`array expected, ${li(i)} found`)];if(2!==i.length)return[new ne(s,i,`array length 2 expected, length ${i.length} found`)];if(c){if("object"!==li(i[0]))return[new ne(s,i,`object expected, ${li(i[0])} found`)];if(void 0===i[0].zoom)return[new ne(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new ne(s,i,"object stop key must have value")];if(o&&o>Fi(i[0].zoom))return[new ne(s,i[0].zoom,"stop zoom values must appear in ascending order")];Fi(i[0].zoom)!==o&&(o=Fi(i[0].zoom),n=void 0,a={}),r=r.concat(ji({key:`${s}[0]`,value:i[0],valueSpec:{zoom:{}},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Vi,value:h}}))}else r=r.concat(h({key:`${s}[0]`,value:i[0],valueSpec:{},validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec},i));return _i(Ni(i[1]))?r.concat([new ne(`${s}[1]`,i[1],"expressions are not allowed in function stops.")]):r.concat(e.validateSpec({key:`${s}[1]`,value:i[1],valueSpec:t,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec}))}function h(e,o){const s=li(e.value),l=Fi(e.value),c=null!==e.value?e.value:o;if(i){if(s!==i)return[new ne(e.key,c,`${s} stop domain type must match previous stop domain type ${i}`)]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new ne(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==r){let i=`number expected, ${s} found`;return oi(t)&&void 0===r&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ne(e.key,c,i)]}return"categorical"!==r||"number"!==s||isFinite(l)&&Math.floor(l)===l?"categorical"!==r&&"number"===s&&void 0!==n&&l<n?[new ne(e.key,c,"stop domain values must appear in ascending order")]:(n=l,"categorical"===r&&l in a?[new ne(e.key,c,"stop domain values must be unique")]:(a[l]=!0,[])):[new ne(e.key,c,`integer expected, found ${l}`)]}}function Wi(e){const t=("property"===e.expressionContext?wi:bi)(Ni(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new ne(`${e.key}${t.key}`,e.value,t.message)));const r=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!r.outputDefined())return[new ne(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!ti(r))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!ti(r))return[new ne(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!ri(r,["zoom","feature-state"]))return[new ne(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!ei(r))return[new ne(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Hi(e){const t=e.key,r=e.value,i=e.valueSpec,n=[];return Array.isArray(i.values)?-1===i.values.indexOf(Fi(r))&&n.push(new ne(t,r,`expected one of [${i.values.join(", ")}], ${JSON.stringify(r)} found`)):-1===Object.keys(i.values).indexOf(Fi(r))&&n.push(new ne(t,r,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(r)} found`)),n}function Gi(e){return Ti(Ni(e.value))?Wi(oe({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qi(e)}function qi(e){const t=e.value,r=e.key;if("array"!==li(t))return[new ne(r,t,`array expected, ${li(t)} found`)];const i=e.styleSpec;let n,o=[];if(t.length<1)return[new ne(r,t,"filter array must have at least 1 element")];switch(o=o.concat(Hi({key:`${r}[0]`,value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Fi(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===Fi(t[1])&&o.push(new ne(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new ne(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(n=li(t[1]),"string"!==n&&o.push(new ne(`${r}[1]`,t[1],`string expected, ${n} found`)));for(let a=2;a<t.length;a++)n=li(t[a]),"$type"===Fi(t[1])?o=o.concat(Hi({key:`${r}[${a}]`,value:t[a],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==n&&"number"!==n&&"boolean"!==n&&o.push(new ne(`${r}[${a}]`,t[a],`string, number, or boolean expected, ${n} found`));break;case"any":case"all":case"none":for(let i=1;i<t.length;i++)o=o.concat(qi({key:`${r}[${i}]`,value:t[i],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=li(t[1]),2!==t.length?o.push(new ne(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==n&&o.push(new ne(`${r}[1]`,t[1],`string expected, ${n} found`))}return o}function Zi(e,t){const r=e.key,i=e.validateSpec,n=e.style,o=e.styleSpec,a=e.value,s=e.objectKey,l=o[`${t}_${e.layerType}`];if(!l)return[];const c=s.match(/^(.*)-transition$/);if("paint"===t&&c&&l[c[1]]&&l[c[1]].transition)return i({key:r,value:a,valueSpec:o.transition,style:n,styleSpec:o});const u=e.valueSpec||l[s];if(!u)return[new ne(r,a,`unknown property "${s}"`)];let d;if("string"===li(a)&&oi(u)&&!u.tokens&&(d=/^{([^}]+)}$/.exec(a)))return[new ne(r,a,`"${s}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(d[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===s&&n&&!n.glyphs&&h.push(new ne(r,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===s&&ci(Ni(a))&&"identity"===Fi(a.type)&&h.push(new ne(r,a,'"text-font" does not support identity functions'))),h.concat(i({key:e.key,value:a,valueSpec:u,style:n,styleSpec:o,expressionContext:"property",propertyType:t,propertyKey:s}))}function Xi(e){return Zi(e,"paint")}function Yi(e){return Zi(e,"layout")}function Ki(e){let t=[];const r=e.value,i=e.key,n=e.style,o=e.styleSpec;r.type||r.ref||t.push(new ne(i,r,'either "type" or "ref" is required'));let a=Fi(r.type);const s=Fi(r.ref);if(r.id){const o=Fi(r.id);for(let a=0;a<e.arrayIndex;a++){const e=n.layers[a];Fi(e.id)===o&&t.push(new ne(i,r.id,`duplicate layer id "${r.id}", previously used at line ${e.id.__line__}`))}}if("ref"in r){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in r&&t.push(new ne(i,r[e],`"${e}" is prohibited for ref layers`))})),n.layers.forEach((t=>{Fi(t.id)===s&&(e=t)})),e?e.ref?t.push(new ne(i,r.ref,"ref cannot reference another ref layer")):a=Fi(e.type):t.push(new ne(i,r.ref,`ref layer "${s}" not found`))}else if("background"!==a)if(r.source){const e=n.sources&&n.sources[r.source],o=e&&Fi(e.type);e?"vector"===o&&"raster"===a?t.push(new ne(i,r.source,`layer "${r.id}" requires a raster source`)):"raster-dem"!==o&&"hillshade"===a?t.push(new ne(i,r.source,`layer "${r.id}" requires a raster-dem source`)):"raster"===o&&"raster"!==a?t.push(new ne(i,r.source,`layer "${r.id}" requires a vector source`)):"vector"!==o||r["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new ne(i,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!r.paint||!r.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new ne(i,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ne(i,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new ne(i,r.source,`source "${r.source}" not found`))}else t.push(new ne(i,r,'missing required property "source"'));return t=t.concat(ji({key:i,value:r,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":()=>[],type:()=>e.validateSpec({key:`${i}.type`,value:r.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:r,objectKey:"type"}),filter:Gi,layout:e=>ji({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Yi(oe({layerType:a},e))}}),paint:e=>ji({layer:r,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*":e=>Xi(oe({layerType:a},e))}})}})),t}function Ji(e){const t=e.value,r=e.key,i=li(t);return"string"!==i?[new ne(r,t,`string expected, ${i} found`)]:[]}const Qi={promoteId:function(e){let{key:t,value:r}=e;if("string"===li(r))return Ji({key:t,value:r});{const e=[];for(const i in r)e.push(...Ji({key:`${t}.${i}`,value:r[i]}));return e}}};function en(e){const t=e.value,r=e.key,i=e.styleSpec,n=e.style,o=e.validateSpec;if(!t.type)return[new ne(r,t,'"type" is required')];const a=Fi(t.type);let s;switch(a){case"vector":case"raster":return s=ji({key:r,value:t,valueSpec:i[`source_${a.replace("-","_")}`],style:e.style,styleSpec:i,objectElementValidators:Qi,validateSpec:o}),s;case"raster-dem":return s=function(e){var t;const r=null!==(t=e.sourceName)&&void 0!==t?t:"",i=e.value,n=e.styleSpec,o=n.source_raster_dem,a=e.style;let s=[];const l=li(i);if(void 0===i)return s;if("object"!==l)return s.push(new ne("source_raster_dem",i,`object expected, ${l} found`)),s;const c="custom"===Fi(i.encoding),u=["redFactor","greenFactor","blueFactor","baseShift"],d=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const h in i)!c&&u.includes(h)?s.push(new ne(h,i[h],`In "${r}": "${h}" is only valid when "encoding" is set to "custom". ${d} encoding found`)):o[h]?s=s.concat(e.validateSpec({key:h,value:i[h],valueSpec:o[h],validateSpec:e.validateSpec,style:a,styleSpec:n})):s.push(new ne(h,i[h],`unknown property "${h}"`));return s}({sourceName:r,value:t,style:e.style,styleSpec:i,validateSpec:o}),s;case"geojson":if(s=ji({key:r,value:t,valueSpec:i.source_geojson,style:n,styleSpec:i,validateSpec:o,objectElementValidators:Qi}),t.cluster)for(const e in t.clusterProperties){const[i,n]=t.clusterProperties[e],a="string"==typeof i?[i,["accumulated"],["get",e]]:i;s.push(...Wi({key:`${r}.${e}.map`,value:n,validateSpec:o,expressionContext:"cluster-map"})),s.push(...Wi({key:`${r}.${e}.reduce`,value:a,validateSpec:o,expressionContext:"cluster-reduce"}))}return s;case"video":return ji({key:r,value:t,valueSpec:i.source_video,style:n,validateSpec:o,styleSpec:i});case"image":return ji({key:r,value:t,valueSpec:i.source_image,style:n,validateSpec:o,styleSpec:i});case"canvas":return[new ne(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Hi({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:n,validateSpec:o,styleSpec:i})}}function tn(e){const t=e.value,r=e.styleSpec,i=r.light,n=e.style;let o=[];const a=li(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ne("light",t,`object expected, ${a} found`)]),o;for(const s in t){const a=s.match(/^(.*)-transition$/);o=o.concat(a&&i[a[1]]&&i[a[1]].transition?e.validateSpec({key:s,value:t[s],valueSpec:r.transition,validateSpec:e.validateSpec,style:n,styleSpec:r}):i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],validateSpec:e.validateSpec,style:n,styleSpec:r}):[new ne(s,t[s],`unknown property "${s}"`)])}return o}function rn(e){const t=e.value,r=e.styleSpec,i=r.sky,n=e.style,o=li(t);if(void 0===t)return[];if("object"!==o)return[new ne("sky",t,`object expected, ${o} found`)];let a=[];for(const s in t)a=a.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new ne(s,t[s],`unknown property "${s}"`)]);return a}function nn(e){const t=e.value,r=e.styleSpec,i=r.terrain,n=e.style;let o=[];const a=li(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new ne("terrain",t,`object expected, ${a} found`)]),o;for(const s in t)o=o.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],validateSpec:e.validateSpec,style:n,styleSpec:r}):[new ne(s,t[s],`unknown property "${s}"`)]);return o}function on(e){let t=[];const r=e.value,i=e.key;if(Array.isArray(r)){const n=[],o=[];for(const a in r)r[a].id&&n.includes(r[a].id)&&t.push(new ne(i,r,`all the sprites' ids must be unique, but ${r[a].id} is duplicated`)),n.push(r[a].id),r[a].url&&o.includes(r[a].url)&&t.push(new ne(i,r,`all the sprites' URLs must be unique, but ${r[a].url} is duplicated`)),o.push(r[a].url),t=t.concat(ji({key:`${i}[${a}]`,value:r[a],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:e.validateSpec}));return t}return Ji({key:i,value:r})}const an={"*":()=>[],array:Ui,boolean:function(e){const t=e.value,r=e.key,i=li(t);return"boolean"!==i?[new ne(r,t,`boolean expected, ${i} found`)]:[]},number:Vi,color:function(e){const t=e.key,r=e.value,i=li(r);return"string"!==i?[new ne(t,r,`color expected, ${i} found`)]:qe.parse(String(r))?[]:[new ne(t,r,`color expected, "${r}" found`)]},constants:Li,enum:Hi,filter:Gi,function:$i,layer:Ki,object:ji,source:en,light:tn,sky:rn,terrain:nn,projection:function(e){const t=e.value,r=e.styleSpec,i=r.projection,n=e.style,o=li(t);if(void 0===t)return[];if("object"!==o)return[new ne("projection",t,`object expected, ${o} found`)];let a=[];for(const s in t)a=a.concat(i[s]?e.validateSpec({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new ne(s,t[s],`unknown property "${s}"`)]);return a},string:Ji,formatted:function(e){return 0===Ji(e).length?[]:Wi(e)},resolvedImage:function(e){return 0===Ji(e).length?[]:Wi(e)},padding:function(e){const t=e.key,r=e.value;if("array"===li(r)){if(r.length<1||r.length>4)return[new ne(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const i={type:"number"};let n=[];for(let o=0;o<r.length;o++)n=n.concat(e.validateSpec({key:`${t}[${o}]`,value:r[o],validateSpec:e.validateSpec,valueSpec:i}));return n}return Vi({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(e){const t=e.key,r=e.value,i=li(r),n=e.styleSpec;if("array"!==i||r.length<1||r.length%2!=0)return[new ne(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let o=[];for(let a=0;a<r.length;a+=2)o=o.concat(Hi({key:`${t}[${a}]`,value:r[a],valueSpec:n.layout_symbol["text-anchor"]})),o=o.concat(Ui({key:`${t}[${a+1}]`,value:r[a+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:n}));return o},sprite:on};function sn(e){const t=e.value,r=e.valueSpec,i=e.styleSpec;return e.validateSpec=sn,r.expression&&ci(Fi(t))?$i(e):r.expression&&_i(Ni(t))?Wi(e):r.type&&an[r.type]?an[r.type](e):ji(oe({},e,{valueSpec:r.type?i[r.type]:r}))}function ln(e){const t=e.value,r=e.key,i=Ji(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new ne(r,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new ne(r,t,'"glyphs" url must include a "{range}" token'))),i}function cn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,r=[];return r=r.concat(sn({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:sn,objectElementValidators:{glyphs:ln,"*":()=>[]}})),e.constants&&(r=r.concat(Li({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:sn}))),dn(r)}function un(e){return function(t){return e({...t,validateSpec:sn})}}function dn(e){return[].concat(e).sort(((e,t)=>e.line-t.line))}function hn(e){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return dn(e.apply(this,r))}}cn.source=hn(un(en)),cn.sprite=hn(un(on)),cn.glyphs=hn(un(ln)),cn.light=hn(un(tn)),cn.sky=hn(un(rn)),cn.terrain=hn(un(nn)),cn.layer=hn(un(Ki)),cn.filter=hn(un(Gi)),cn.paintProperty=hn(un(Xi)),cn.layoutProperty=hn(un(Yi));const pn=cn,fn=pn.light,mn=pn.sky,gn=pn.paintProperty,yn=pn.layoutProperty;function _n(e,t){let r=!1;if(t&&t.length)for(const i of t)e.fire(new W(new Error(i.message))),r=!0;return r}class bn{constructor(e,t,r){const i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const n=new Int32Array(this.arrayBuffer);e=n[0],this.d=(t=n[1])+2*(r=n[2]);for(let e=0;e<this.d*this.d;e++){const t=n[3+e],r=n[3+e+1];i.push(t===r?null:n.subarray(t,r))}const o=n[3+i.length+1];this.keys=n.subarray(n[3+i.length],o),this.bboxes=n.subarray(o),this.insert=this._insertReadonly}else{this.d=t+2*r;for(let e=0;e<this.d*this.d;e++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=r,this.scale=t/e,this.uid=0;const n=r/t*e;this.min=-n,this.max=e+n}insert(e,t,r,i,n){this._forEachCell(t,r,i,n,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,t,r,i,n,o){this.cells[n].push(o)}query(e,t,r,i,n){const o=this.min,a=this.max;if(e<=o&&t<=o&&a<=r&&a<=i&&!n)return Array.prototype.slice.call(this.keys);{const o=[];return this._forEachCell(e,t,r,i,this._queryCell,o,{},n),o}}_queryCell(e,t,r,i,n,o,a,s){const l=this.cells[n];if(null!==l){const n=this.keys,c=this.bboxes;for(let u=0;u<l.length;u++){const d=l[u];if(void 0===a[d]){const l=4*d;(s?s(c[l+0],c[l+1],c[l+2],c[l+3]):e<=c[l+2]&&t<=c[l+3]&&r>=c[l+0]&&i>=c[l+1])?(a[d]=!0,o.push(n[d])):a[d]=!1}}}}_forEachCell(e,t,r,i,n,o,a,s){const l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(r),d=this._convertToCellCoord(i);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++){const c=this.d*l+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(l),this._convertFromCellCoord(h+1),this._convertFromCellCoord(l+1)))&&n.call(this,e,t,r,i,c,o,a,s))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,t=3+this.cells.length+1+1;let r=0;for(let o=0;o<this.cells.length;o++)r+=this.cells[o].length;const i=new Int32Array(t+r+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;let n=t;for(let o=0;o<e.length;o++){const t=e[o];i[3+o]=n,i.set(t,n),n+=t.length}return i[3+e.length]=n,i.set(this.keys,n),n+=this.keys.length,i[3+e.length+1]=n,i.set(this.bboxes,n),n+=this.bboxes.length,i.buffer}static serialize(e,t){const r=e.toArrayBuffer();return t&&t.push(r),{buffer:r}}static deserialize(e){return new bn(e.buffer)}}const vn={};function xn(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(vn[e])throw new Error(`${e} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),vn[e]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}xn("Object",Object),xn("TransferableGridIndex",bn),xn("Color",qe),xn("Error",Error),xn("AJAXError",L),xn("ResolvedImage",et),xn("StylePropertyFunction",Si),xn("StyleExpression",yi,{omit:["_evaluator"]}),xn("ZoomDependentExpression",xi),xn("ZoomConstantExpression",vi),xn("CompoundExpression",Zr,{omit:["_evaluate"]});for(const Nd in qr)qr[Nd]._classRegistryKey||xn(`Expression_${Nd}`,qr[Nd]);function wn(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Sn(e){return e.$name||e.constructor._classRegistryKey}function In(e){return!function(e){if(null===e||"object"!=typeof e)return!1;const t=Sn(e);return!(!t||"Object"===t)}(e)&&(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof Blob||e instanceof Error||wn(e)||E(e)||ArrayBuffer.isView(e)||e instanceof ImageData)}function Tn(e,t){if(In(e))return(wn(e)||E(e))&&t&&t.push(e),ArrayBuffer.isView(e)&&t&&t.push(e.buffer),e instanceof ImageData&&t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const r=[];for(const i of e)r.push(Tn(i,t));return r}if("object"!=typeof e)throw new Error("can't serialize object of type "+typeof e);const r=Sn(e);if(!r)throw new Error(`can't serialize object of unregistered class ${e.constructor.name}`);if(!vn[r])throw new Error(`${r} is not registered.`);const{klass:i}=vn[r],n=i.serialize?i.serialize(e,t):{};if(i.serialize){if(t&&n===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const i in e){if(!e.hasOwnProperty(i))continue;if(vn[r].omit.indexOf(i)>=0)continue;const o=e[i];n[i]=vn[r].shallow.indexOf(i)>=0?o:Tn(o,t)}e instanceof Error&&(n.message=e.message)}if(n.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(n.$name=r),n}function kn(e){if(In(e))return e;if(Array.isArray(e))return e.map(kn);if("object"!=typeof e)throw new Error("can't deserialize object of type "+typeof e);const t=Sn(e)||"Object";if(!vn[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=vn[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(e);const i=Object.create(r.prototype);for(const n of Object.keys(e)){if("$name"===n)continue;const r=e[n];i[n]=vn[t].shallow.indexOf(n)>=0?r:kn(r)}return i}class En{constructor(){this.first=!0}update(e,t){const r=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=r,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=r,!0):(this.lastFloorZoom>r?(this.lastIntegerZoom=r+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<r&&(this.lastIntegerZoom=r,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=r,!0))}}const An={"Latin-1 Supplement":e=>e>=128&&e<=255,"Hangul Jamo":e=>e>=4352&&e<=4607,Khmer:e=>e>=6016&&e<=6143,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Katakana:e=>e>=12448&&e<=12543,Kanbun:e=>e>=12688&&e<=12703,"CJK Strokes":e=>e>=12736&&e<=12783,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"Private Use Area":e=>e>=57344&&e<=63743,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Pn(e){for(const t of e)if(Dn(t.charCodeAt(0)))return!0;return!1}function Cn(e){for(const t of e)if(!Rn(t.charCodeAt(0)))return!1;return!0}function Mn(e){const t=e.map((e=>{try{return new RegExp(`\\p{sc=${e}}`,"u").source}catch(e){return null}})).filter((e=>e));return new RegExp(t.join("|"),"u")}const On=Mn(["Arab","Dupl","Mong","Ougr","Syrc"]);function Rn(e){return!On.test(String.fromCodePoint(e))}const Bn=Mn(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Dn(e){return!(746!==e&&747!==e&&(e<4352||!(An["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||An["CJK Compatibility"](e)||An["CJK Strokes"](e)||!(!An["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||An["Enclosed CJK Letters and Months"](e)||An["Ideographic Description Characters"](e)||An.Kanbun(e)||An.Katakana(e)&&12540!==e||!(!An["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!An["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||An["Vertical Forms"](e)||An["Yijing Hexagram Symbols"](e)||/\p{sc=Cans}/u.test(String.fromCodePoint(e))||/\p{sc=Hang}/u.test(String.fromCodePoint(e))||Bn.test(String.fromCodePoint(e)))))}function zn(e){return!(Dn(e)||function(e){return!!(An["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||An["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||An["Letterlike Symbols"](e)||An["Number Forms"](e)||An["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||An["Control Pictures"](e)&&9251!==e||An["Optical Character Recognition"](e)||An["Enclosed Alphanumerics"](e)||An["Geometric Shapes"](e)||An["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||An["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||An["CJK Symbols and Punctuation"](e)||An.Katakana(e)||An["Private Use Area"](e)||An["CJK Compatibility Forms"](e)||An["Small Form Variants"](e)||An["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}const Ln=Mn(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Fn(e){return Ln.test(String.fromCodePoint(e))}function Nn(e,t){return!(!t&&Fn(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||An.Khmer(e))}function jn(e){for(const t of e)if(Fn(t.charCodeAt(0)))return!0;return!1}const Un=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(e){this.pluginStatus=e.pluginStatus,this.pluginURL=e.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(e){this.applyArabicShaping=e.applyArabicShaping,this.processBidirectionalText=e.processBidirectionalText,this.processStyledBidirectionalText=e.processStyledBidirectionalText}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Vn{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new En,this.transition={})}isSupportedScript(e){return function(e,t){for(const r of e)if(!Nn(r.charCodeAt(0),t))return!1;return!0}(e,"loaded"===Un.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),r=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*r}:{fromScale:.5,toScale:1,t:1-(1-r)*t}}}class $n{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(ci(e))return new Si(e,t);if(_i(e)){const r=wi(e,t);if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return r.value}{let r=e;return"color"===t.type&&"string"==typeof e?r=qe.parse(e):"padding"!==t.type||"number"!=typeof e&&!Array.isArray(e)?"variableAnchorOffsetCollection"===t.type&&Array.isArray(e)&&(r=Qe.parse(e)):r=Ke.parse(e),{kind:"constant",evaluate:()=>r}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,r){return this.property.possiblyEvaluate(this,e,t,r)}}class Wn{constructor(e){this.property=e,this.value=new $n(e,void 0)}transitioned(e,t){return new Gn(this.property,this.value,t,y({},e.transition,this.transition),e.now)}untransitioned(){return new Gn(this.property,this.value,null,{},0)}}class Hn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return x(this._values[e].value.value)}setValue(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Wn(this._values[e].property)),this._values[e].value=new $n(this._values[e].property,null===t?void 0:x(t))}getTransition(e){return x(this._values[e].transition)}setTransition(e,t){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new Wn(this._values[e].property)),this._values[e].transition=x(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r);const i=this.getTransition(t);void 0!==i&&(e[`${t}-transition`]=i)}return e}transitioned(e,t){const r=new qn(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].transitioned(e,t._values[i]);return r}untransitioned(){const e=new qn(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Gn{constructor(e,t,r,i,n){this.property=e,this.value=t,this.begin=n+i.delay||0,this.end=this.begin+i.duration||0,e.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}possiblyEvaluate(e,t,r){const i=e.now||0,n=this.value.possiblyEvaluate(e,t,r),o=this.prior;if(o){if(i>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(i<this.begin)return o.possiblyEvaluate(e,t,r);{const a=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,r),n,function(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,r=t*e;return 4*(e<.5?r:3*(e-t)+r-.75)}(a))}}return n}}class qn{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,r){const i=new Yn(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].possiblyEvaluate(e,t,r);return i}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Zn{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return void 0!==this._values[e].value}getValue(e){return x(this._values[e].value)}setValue(e,t){this._values[e]=new $n(this._values[e].property,null===t?void 0:x(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const r=this.getValue(t);void 0!==r&&(e[t]=r)}return e}possiblyEvaluate(e,t,r){const i=new Yn(this._properties);for(const n of Object.keys(this._values))i._values[n]=this._values[n].possiblyEvaluate(e,t,r);return i}}class Xn{constructor(e,t,r){this.property=e,this.value=t,this.parameters=r}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,r,i){return this.property.evaluate(this.value,this.parameters,e,t,r,i)}}class Yn{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Kn{constructor(e){this.specification=e}possiblyEvaluate(e,t){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(t)}interpolate(e,t,r){const i=Ct[this.specification.type];return i?i(e,t,r):e}}class Jn{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,r,i){return new Xn(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},r,i)}:e.expression,t)}interpolate(e,t,r){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Xn(this,{kind:"constant",value:void 0},e.parameters);const i=Ct[this.specification.type];if(i){const n=i(e.value.value,t.value.value,r);return new Xn(this,{kind:"constant",value:n},e.parameters)}return e}evaluate(e,t,r,i,n,o){return"constant"===e.kind?e.value:e.evaluate(t,r,i,n,o)}}class Qn extends Jn{possiblyEvaluate(e,t,r,i){if(void 0===e.value)return new Xn(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const n=e.expression.evaluate(t,null,{},r,i),o="resolvedImage"===e.property.specification.type&&"string"!=typeof n?n.name:n,a=this._calculate(o,o,o,t);return new Xn(this,{kind:"constant",value:a},t)}if("camera"===e.expression.kind){const r=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new Xn(this,{kind:"constant",value:r},t)}return new Xn(this,e.expression,t)}evaluate(e,t,r,i,n,o){if("source"===e.kind){const a=e.evaluate(t,r,i,n,o);return this._calculate(a,a,a,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},r,i),e.evaluate({zoom:Math.floor(t.zoom)},r,i),e.evaluate({zoom:Math.floor(t.zoom)+1},r,i),t):e.value}_calculate(e,t,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class eo{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,i){if(void 0!==e.value){if("constant"===e.expression.kind){const n=e.expression.evaluate(t,null,{},r,i);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate(new Vn(Math.floor(t.zoom-1),t)),e.expression.evaluate(new Vn(Math.floor(t.zoom),t)),e.expression.evaluate(new Vn(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,r,i){return i.zoom>i.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:r,to:t}}interpolate(e){return e}}class to{constructor(e){this.specification=e}possiblyEvaluate(e,t,r,i){return!!e.expression.evaluate(t,null,{},r,i)}interpolate(){return!1}}class ro{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const r=e[t];r.specification.overridable&&this.overridableProperties.push(t);const i=this.defaultPropertyValues[t]=new $n(r,void 0),n=this.defaultTransitionablePropertyValues[t]=new Wn(r);this.defaultTransitioningPropertyValues[t]=n.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=i.possiblyEvaluate({})}}}xn("DataDrivenProperty",Jn),xn("DataConstantProperty",Kn),xn("CrossFadedDataDrivenProperty",Qn),xn("CrossFadedProperty",eo),xn("ColorRampProperty",to);const io="-transition";class no extends H{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Zn(t.layout)),t.paint)){this._transitionablePaint=new Hn(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yn(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(yn,`layers.${this.id}.layout.${e}`,e,t,r)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return e.endsWith(io)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(gn,`layers.${this.id}.paint.${e}`,e,t,r))return!1;if(e.endsWith(io))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const r=this._transitionablePaint._values[e],i="cross-faded-data-driven"===r.property.specification["property-type"],n=r.value.isDataDriven(),o=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value;return a.isDataDriven()||n||i||this._handleOverridablePaintPropertyUpdate(e,o,a)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,t,r){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),v(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!n||!1!==n.validate)&&_n(this,e.call(pn,{key:t,layerType:this.type,objectKey:r,value:i,styleSpec:G,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Xn&&oi(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const oo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ao{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class so{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function lo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=0,i=0;return{members:e.map((e=>{const n=oo[e.type].BYTES_PER_ELEMENT,o=r=co(r,Math.max(t,n)),a=e.components||1;return i=Math.max(i,n),r+=n*a,{name:e.name,type:e.type,components:a,offset:o}})),size:co(r,Math.max(i,t)),alignment:t}}function co(e,t){return Math.ceil(e/t)*t}class uo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const i=2*e;return this.int16[i+0]=t,this.int16[i+1]=r,e}}uo.prototype.bytesPerElement=4,xn("StructArrayLayout2i4",uo);class ho extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=3*e;return this.int16[n+0]=t,this.int16[n+1]=r,this.int16[n+2]=i,e}}ho.prototype.bytesPerElement=6,xn("StructArrayLayout3i6",ho);class po extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r,i)}emplace(e,t,r,i,n){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=r,this.int16[o+2]=i,this.int16[o+3]=n,e}}po.prototype.bytesPerElement=8,xn("StructArrayLayout4i8",po);class fo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,i,n,o)}emplace(e,t,r,i,n,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,e}}fo.prototype.bytesPerElement=12,xn("StructArrayLayout2i4i12",fo);class mo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,i,n,o)}emplace(e,t,r,i,n,o,a){const s=4*e,l=8*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.uint8[l+4]=i,this.uint8[l+5]=n,this.uint8[l+6]=o,this.uint8[l+7]=a,e}}mo.prototype.bytesPerElement=8,xn("StructArrayLayout2i4ub8",mo);class go extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const i=2*e;return this.float32[i+0]=t,this.float32[i+1]=r,e}}go.prototype.bytesPerElement=8,xn("StructArrayLayout2f8",go);class yo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,s,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,r,i,n,o,a,s,l,c)}emplace(e,t,r,i,n,o,a,s,l,c,u){const d=10*e;return this.uint16[d+0]=t,this.uint16[d+1]=r,this.uint16[d+2]=i,this.uint16[d+3]=n,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=l,this.uint16[d+8]=c,this.uint16[d+9]=u,e}}yo.prototype.bytesPerElement=20,xn("StructArrayLayout10ui20",yo);class _o extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,s,l,c,u,d){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,r,i,n,o,a,s,l,c,u,d)}emplace(e,t,r,i,n,o,a,s,l,c,u,d,h){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=r,this.int16[p+2]=i,this.int16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=d,this.int16[p+11]=h,e}}_o.prototype.bytesPerElement=24,xn("StructArrayLayout4i4ui4i24",_o);class bo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=3*e;return this.float32[n+0]=t,this.float32[n+1]=r,this.float32[n+2]=i,e}}bo.prototype.bytesPerElement=12,xn("StructArrayLayout3f12",bo);class vo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}vo.prototype.bytesPerElement=4,xn("StructArrayLayout1ul4",vo);class xo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,r,i,n,o,a,s,l)}emplace(e,t,r,i,n,o,a,s,l,c){const u=10*e,d=5*e;return this.int16[u+0]=t,this.int16[u+1]=r,this.int16[u+2]=i,this.int16[u+3]=n,this.int16[u+4]=o,this.int16[u+5]=a,this.uint32[d+3]=s,this.uint16[u+8]=l,this.uint16[u+9]=c,e}}xo.prototype.bytesPerElement=20,xn("StructArrayLayout6i1ul2ui20",xo);class wo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,i,n,o)}emplace(e,t,r,i,n,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=r,this.int16[s+2]=i,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,e}}wo.prototype.bytesPerElement=12,xn("StructArrayLayout2i2i2i12",wo);class So extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,r,i,n)}emplace(e,t,r,i,n,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=r,this.float32[a+2]=i,this.int16[s+6]=n,this.int16[s+7]=o,e}}So.prototype.bytesPerElement=16,xn("StructArrayLayout2f1f2i16",So);class Io extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,r,i,n,o)}emplace(e,t,r,i,n,o,a){const s=16*e,l=4*e,c=8*e;return this.uint8[s+0]=t,this.uint8[s+1]=r,this.float32[l+1]=i,this.float32[l+2]=n,this.int16[c+6]=o,this.int16[c+7]=a,e}}Io.prototype.bytesPerElement=16,xn("StructArrayLayout2ub2f2i16",Io);class To extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=3*e;return this.uint16[n+0]=t,this.uint16[n+1]=r,this.uint16[n+2]=i,e}}To.prototype.bytesPerElement=6,xn("StructArrayLayout3ui6",To);class ko extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g)}emplace(e,t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g,y){const _=24*e,b=12*e,v=48*e;return this.int16[_+0]=t,this.int16[_+1]=r,this.uint16[_+2]=i,this.uint16[_+3]=n,this.uint32[b+2]=o,this.uint32[b+3]=a,this.uint32[b+4]=s,this.uint16[_+10]=l,this.uint16[_+11]=c,this.uint16[_+12]=u,this.float32[b+7]=d,this.float32[b+8]=h,this.uint8[v+36]=p,this.uint8[v+37]=f,this.uint8[v+38]=m,this.uint32[b+10]=g,this.int16[_+22]=y,e}}ko.prototype.bytesPerElement=48,xn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ko);class Eo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g,y,_,b,v,x,w,S,I,T,k,E){const A=this.length;return this.resize(A+1),this.emplace(A,e,t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g,y,_,b,v,x,w,S,I,T,k,E)}emplace(e,t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g,y,_,b,v,x,w,S,I,T,k,E,A){const P=32*e,C=16*e;return this.int16[P+0]=t,this.int16[P+1]=r,this.int16[P+2]=i,this.int16[P+3]=n,this.int16[P+4]=o,this.int16[P+5]=a,this.int16[P+6]=s,this.int16[P+7]=l,this.uint16[P+8]=c,this.uint16[P+9]=u,this.uint16[P+10]=d,this.uint16[P+11]=h,this.uint16[P+12]=p,this.uint16[P+13]=f,this.uint16[P+14]=m,this.uint16[P+15]=g,this.uint16[P+16]=y,this.uint16[P+17]=_,this.uint16[P+18]=b,this.uint16[P+19]=v,this.uint16[P+20]=x,this.uint16[P+21]=w,this.uint16[P+22]=S,this.uint32[C+12]=I,this.float32[C+13]=T,this.float32[C+14]=k,this.uint16[P+30]=E,this.uint16[P+31]=A,e}}Eo.prototype.bytesPerElement=64,xn("StructArrayLayout8i15ui1ul2f2ui64",Eo);class Ao extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ao.prototype.bytesPerElement=4,xn("StructArrayLayout1f4",Ao);class Po extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=3*e;return this.uint16[6*e+0]=t,this.float32[n+1]=r,this.float32[n+2]=i,e}}Po.prototype.bytesPerElement=12,xn("StructArrayLayout1ui2f12",Po);class Co extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,r)}emplace(e,t,r,i){const n=4*e;return this.uint32[2*e+0]=t,this.uint16[n+2]=r,this.uint16[n+3]=i,e}}Co.prototype.bytesPerElement=8,xn("StructArrayLayout1ul2ui8",Co);class Mo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const r=this.length;return this.resize(r+1),this.emplace(r,e,t)}emplace(e,t,r){const i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=r,e}}Mo.prototype.bytesPerElement=4,xn("StructArrayLayout2ui4",Mo);class Oo extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Oo.prototype.bytesPerElement=2,xn("StructArrayLayout1ui2",Oo);class Ro extends so{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,r,i){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,r,i)}emplace(e,t,r,i,n){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=r,this.float32[o+2]=i,this.float32[o+3]=n,e}}Ro.prototype.bytesPerElement=16,xn("StructArrayLayout4f16",Ro);class Bo extends ao{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new o(this.anchorPointX,this.anchorPointY)}}Bo.prototype.size=20;class Do extends xo{get(e){return new Bo(this,e)}}xn("CollisionBoxArray",Do);class zo extends ao{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}zo.prototype.size=48;class Lo extends ko{get(e){return new zo(this,e)}}xn("PlacedSymbolArray",Lo);class Fo extends ao{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Fo.prototype.size=64;class No extends Eo{get(e){return new Fo(this,e)}}xn("SymbolInstanceArray",No);class jo extends Ao{getoffsetX(e){return this.float32[1*e+0]}}xn("GlyphOffsetArray",jo);class Uo extends ho{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}xn("SymbolLineVertexArray",Uo);class Vo extends ao{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Vo.prototype.size=12;class $o extends Po{get(e){return new Vo(this,e)}}xn("TextAnchorOffsetArray",$o);class Wo extends ao{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Wo.prototype.size=8;class Ho extends Co{get(e){return new Wo(this,e)}}xn("FeatureIndexArray",Ho);class Go extends uo{}class qo extends uo{}class Zo extends uo{}class Xo extends fo{}class Yo extends mo{}class Ko extends go{}class Jo extends yo{}class Qo extends _o{}class ea extends bo{}class ta extends vo{}class ra extends wo{}class ia extends Io{}class na extends To{}class oa extends Mo{}const aa=lo([{name:"a_pos",components:2,type:"Int16"}],4),{members:sa}=aa;class la{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=e}prepareSegment(e,t,r,i){let n=this.segments[this.segments.length-1];return e>la.MAX_VERTEX_ARRAY_LENGTH&&S(`Max vertices per segment is ${la.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!n||n.vertexLength+e>la.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==i)&&(n={vertexOffset:t.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(n.sortKey=i),this.segments.push(n)),n}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,r,i){return new la([{vertexOffset:e,primitiveOffset:t,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}function ca(e,t){return 256*(e=m(Math.floor(e),0,255))+m(Math.floor(t),0,255)}la.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,xn("SegmentVector",la);const ua=lo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var da={exports:{}},ha={exports:{}};ha.exports=function(e,t){var r,i,n,o,a,s,l,c;for(i=e.length-(r=3&e.length),n=t,a=3432918353,s=461845907,c=0;c<i;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,n=27492+(65535&(o=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,r){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0};var pa=ha.exports,fa={exports:{}};fa.exports=function(e,t){for(var r,i=e.length,n=t^i,o=0;i>=4;)r=1540483477*(65535&(r=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(r>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),i-=4,++o;switch(i){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0};var ma=pa,ga=fa.exports;da.exports=ma,da.exports.murmur3=ma,da.exports.murmur2=ga;var ya=r(da.exports);class _a{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,r,i){this.ids.push(ba(e)),this.positions.push(t,r,i)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const t=ba(e);let r=0,i=this.ids.length-1;for(;r<i;){const e=r+i>>1;this.ids[e]>=t?i=e:r=e+1}const n=[];for(;this.ids[r]===t;)n.push({index:this.positions[3*r],start:this.positions[3*r+1],end:this.positions[3*r+2]}),r++;return n}static serialize(e,t){const r=new Float64Array(e.ids),i=new Uint32Array(e.positions);return va(r,i,0,r.length-1),t&&t.push(r.buffer,i.buffer),{ids:r,positions:i}}static deserialize(e){const t=new _a;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function ba(e){const t=+e;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:ya(String(e))}function va(e,t,r,i){for(;r<i;){const n=e[r+i>>1];let o=r-1,a=i+1;for(;;){do{o++}while(e[o]<n);do{a--}while(e[a]>n);if(o>=a)break;xa(e,o,a),xa(t,3*o,3*a),xa(t,3*o+1,3*a+1),xa(t,3*o+2,3*a+2)}a-r<i-a?(va(e,t,r,a),r=a+1):(va(e,t,a+1,i),i=a)}}function xa(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}xn("FeaturePositionMap",_a);class wa{constructor(e,t){this.gl=e.gl,this.location=t}}class Sa extends wa{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class Ia extends wa{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Ta extends wa{constructor(e,t){super(e,t),this.current=qe.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const ka=new Float32Array(16);function Ea(e){return[ca(255*e.r,255*e.g),ca(255*e.b,255*e.a)]}class Aa{constructor(e,t,r){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=r}setUniform(e,t,r){e.set(r.constantOr(this.value))}getBinding(e,t,r){return"color"===this.type?new Ta(e,t):new Sa(e,t)}}class Pa{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,r,i){const n="u_pattern_to"===i?this.patternTo:"u_pattern_from"===i?this.patternFrom:"u_pixel_ratio_to"===i?this.pixelRatioTo:"u_pixel_ratio_from"===i?this.pixelRatioFrom:null;n&&e.set(n)}getBinding(e,t,r){return"u_pattern"===r.substr(0,9)?new Ia(e,t):new Sa(e,t)}}class Ca{constructor(e,t,r,i){this.expression=e,this.type=r,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?2:1,offset:0}))),this.paintVertexArray=new i}populatePaintArray(e,t,r,i,n){const o=this.paintVertexArray.length,a=this.expression.evaluate(new Vn(0),t,{},i,[],n);this.paintVertexArray.resize(e),this._setPaintValue(o,e,a)}updatePaintArray(e,t,r,i){const n=this.expression.evaluate({zoom:0},r,i);this._setPaintValue(e,t,n)}_setPaintValue(e,t,r){if("color"===this.type){const i=Ea(r);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i[0],i[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r);this.maxValue=Math.max(this.maxValue,Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ma{constructor(e,t,r,i,n,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=r,this.useIntegerZoom=i,this.zoom=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===r?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,r,i,n){const o=this.expression.evaluate(new Vn(this.zoom),t,{},i,[],n),a=this.expression.evaluate(new Vn(this.zoom+1),t,{},i,[],n),s=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(s,e,o,a)}updatePaintArray(e,t,r,i){const n=this.expression.evaluate({zoom:this.zoom},r,i),o=this.expression.evaluate({zoom:this.zoom+1},r,i);this._setPaintValue(e,t,n,o)}_setPaintValue(e,t,r,i){if("color"===this.type){const n=Ea(r),o=Ea(i);for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n[0],n[1],o[0],o[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r,i);this.maxValue=Math.max(this.maxValue,Math.abs(r),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const r=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,i=m(this.expression.interpolationFactor(r,this.zoom,this.zoom+1),0,1);e.set(i)}getBinding(e,t,r){return new Sa(e,t)}}class Oa{constructor(e,t,r,i,n,o){this.expression=e,this.type=t,this.useIntegerZoom=r,this.zoom=i,this.layerId=o,this.zoomInPaintVertexArray=new n,this.zoomOutPaintVertexArray=new n}populatePaintArray(e,t,r){const i=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],r)}updatePaintArray(e,t,r,i,n){this._setPaintValues(e,t,r.patterns&&r.patterns[this.layerId],n)}_setPaintValues(e,t,r,i){if(!i||!r)return;const{min:n,mid:o,max:a}=r,s=i[n],l=i[o],c=i[a];if(s&&l&&c)for(let u=e;u<t;u++)this.zoomInPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],s.tl[0],s.tl[1],s.br[0],s.br[1],l.pixelRatio,s.pixelRatio),this.zoomOutPaintVertexArray.emplace(u,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ua.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ua.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Ra{constructor(e,t,r){this.binders={},this._buffers=[];const i=[];for(const n in e.paint._values){if(!r(n))continue;const o=e.paint.get(n);if(!(o instanceof Xn&&oi(o.property.specification)))continue;const a=Da(n,e.type),s=o.value,l=o.property.specification.type,c=o.property.useIntegerZoom,u=o.property.specification["property-type"],d="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===s.kind)this.binders[n]=d?new Pa(s.value,a):new Aa(s.value,a,l),i.push(`/u_${n}`);else if("source"===s.kind||d){const r=za(n,l,"source");this.binders[n]=d?new Oa(s,l,c,t,r,e.id):new Ca(s,a,l,r),i.push(`/a_${n}`)}else{const e=za(n,l,"composite");this.binders[n]=new Ma(s,a,l,c,t,e),i.push(`/z_${n}`)}}this.cacheKey=i.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Ca||t instanceof Ma?t.maxValue:0}populatePaintArrays(e,t,r,i,n){for(const o in this.binders){const a=this.binders[o];(a instanceof Ca||a instanceof Ma||a instanceof Oa)&&a.populatePaintArray(e,t,r,i,n)}}setConstantPatternPositions(e,t){for(const r in this.binders){const i=this.binders[r];i instanceof Pa&&i.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,r,i,n){let o=!1;for(const a in e){const s=t.getPositions(a);for(const t of s){const s=r.feature(t.index);for(const r in this.binders){const l=this.binders[r];if((l instanceof Ca||l instanceof Ma||l instanceof Oa)&&!0===l.expression.isStateDependent){const c=i.paint.get(r);l.expression=c.value,l.updatePaintArray(t.start,t.end,s,e[a],n),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const r=this.binders[t];(r instanceof Aa||r instanceof Pa)&&e.push(...r.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof Ca||r instanceof Ma)for(let t=0;t<r.paintVertexAttributes.length;t++)e.push(r.paintVertexAttributes[t].name);else if(r instanceof Oa)for(let t=0;t<ua.members.length;t++)e.push(ua.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const r=this.binders[t];if(r instanceof Aa||r instanceof Pa||r instanceof Ma)for(const t of r.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const r=[];for(const i in this.binders){const n=this.binders[i];if(n instanceof Aa||n instanceof Pa||n instanceof Ma)for(const o of n.uniformNames)if(t[o]){const a=n.getBinding(e,t[o],o);r.push({name:o,property:i,binding:a})}}return r}setUniforms(e,t,r,i){for(const{name:n,property:o,binding:a}of t)this.binders[o].setUniform(a,i,r.get(o),n)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const r=this.binders[t];if(e&&r instanceof Oa){const t=2===e.fromScale?r.zoomInPaintVertexBuffer:r.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(r instanceof Ca||r instanceof Ma)&&r.paintVertexBuffer&&this._buffers.push(r.paintVertexBuffer)}}upload(e){for(const t in this.binders){const r=this.binders[t];(r instanceof Ca||r instanceof Ma||r instanceof Oa)&&r.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Ca||t instanceof Ma||t instanceof Oa)&&t.destroy()}}}class Ba{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new Ra(i,t,r);this.needsUpload=!1,this._featureMap=new _a,this._bufferOffset=0}populatePaintArrays(e,t,r,i,n,o){for(const a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(e,t,i,n,o);void 0!==t.id&&this._featureMap.add(t.id,r,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,r,i){for(const n of r)this.needsUpload=this.programConfigurations[n.id].updatePaintArrays(e,this._featureMap,t,n,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Da(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}function za(e,t,r){const i={color:{source:go,composite:Ro},number:{source:Ao,composite:go}},n=function(e){return{"line-pattern":{source:Jo,composite:Jo},"fill-pattern":{source:Jo,composite:Jo},"fill-extrusion-pattern":{source:Jo,composite:Jo}}[e]}(e);return n&&n[r]||i[t][r]}xn("ConstantBinder",Aa),xn("CrossFadedConstantBinder",Pa),xn("SourceExpressionBinder",Ca),xn("CrossFadedCompositeBinder",Oa),xn("CompositeExpressionBinder",Ma),xn("ProgramConfiguration",Ra,{omit:["_buffers"]}),xn("ProgramConfigurationSet",Ba);const La=8192,Fa=Math.pow(2,14)-1,Na=-Fa-1;function ja(e){const t=La/e.extent,r=e.loadGeometry();for(let i=0;i<r.length;i++){const e=r[i];for(let r=0;r<e.length;r++){const i=e[r],n=Math.round(i.x*t),o=Math.round(i.y*t);i.x=m(n,Na,Fa),i.y=m(o,Na,Fa),(n<i.x||n>i.x+1||o<i.y||o>i.y+1)&&S("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function Ua(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ja(e):[]}}function Va(e,t,r,i,n){e.emplaceBack(2*t+(i+1)/2,2*r+(n+1)/2)}class $a{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new qo,this.indexArray=new na,this.segments=new la,this.programConfigurations=new Ba(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){const i=this.layers[0],n=[];let o=null,a=!1;"circle"===i.type&&(o=i.layout.get("circle-sort-key"),a=!o.isConstant());for(const{feature:s,id:l,index:c,sourceLayerIndex:u}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Ua(s,e);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),t,r))continue;const i=a?o.evaluate(t,{},r):void 0,d={id:l,properties:s.properties,type:s.type,sourceLayerIndex:u,index:c,geometry:e?t.geometry:ja(s),patterns:{},sortKey:i};n.push(d)}a&&n.sort(((e,t)=>e.sortKey-t.sortKey));for(const s of n){const{geometry:i,index:n,sourceLayerIndex:o}=s,a=e[n].feature;this.addFeature(s,i,n,r),t.featureIndex.insert(a,i,n,o,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,sa),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,r,i){for(const n of t)for(const t of n){const r=t.x,i=t.y;if(r<0||r>=La||i<0||i>=La)continue;const n=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=n.vertexLength;Va(this.layoutVertexArray,r,i,-1,-1),Va(this.layoutVertexArray,r,i,1,-1),Va(this.layoutVertexArray,r,i,1,1),Va(this.layoutVertexArray,r,i,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),n.vertexLength+=4,n.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,{},i)}}function Wa(e,t){for(let r=0;r<e.length;r++)if(Qa(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Qa(e,t[r]))return!0;return!!Za(e,t)}function Ha(e,t,r){return!!Qa(e,t)||!!Ya(t,e,r)}function Ga(e,t){if(1===e.length)return Ja(t,e[0]);for(let r=0;r<t.length;r++){const i=t[r];for(let t=0;t<i.length;t++)if(Qa(e,i[t]))return!0}for(let r=0;r<e.length;r++)if(Ja(t,e[r]))return!0;for(let r=0;r<t.length;r++)if(Za(e,t[r]))return!0;return!1}function qa(e,t,r){if(e.length>1){if(Za(e,t))return!0;for(let i=0;i<t.length;i++)if(Ya(t[i],e,r))return!0}for(let i=0;i<e.length;i++)if(Ya(e[i],t,r))return!0;return!1}function Za(e,t){if(0===e.length||0===t.length)return!1;for(let r=0;r<e.length-1;r++){const i=e[r],n=e[r+1];for(let e=0;e<t.length-1;e++)if(Xa(i,n,t[e],t[e+1]))return!0}return!1}function Xa(e,t,r,i){return I(e,r,i)!==I(t,r,i)&&I(e,t,r)!==I(e,t,i)}function Ya(e,t,r){const i=r*r;if(1===t.length)return e.distSqr(t[0])<i;for(let n=1;n<t.length;n++)if(Ka(e,t[n-1],t[n])<i)return!0;return!1}function Ka(e,t,r){const i=t.distSqr(r);if(0===i)return e.distSqr(t);const n=((e.x-t.x)*(r.x-t.x)+(e.y-t.y)*(r.y-t.y))/i;return e.distSqr(n<0?t:n>1?r:r.sub(t)._mult(n)._add(t))}function Ja(e,t){let r,i,n,o=!1;for(let a=0;a<e.length;a++){r=e[a];for(let e=0,a=r.length-1;e<r.length;a=e++)i=r[e],n=r[a],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(o=!o)}return o}function Qa(e,t){let r=!1;for(let i=0,n=e.length-1;i<e.length;n=i++){const o=e[i],a=e[n];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(r=!r)}return r}function es(e,t,r){const i=r[0],n=r[2];if(e.x<i.x&&t.x<i.x||e.x>n.x&&t.x>n.x||e.y<i.y&&t.y<i.y||e.y>n.y&&t.y>n.y)return!1;const o=I(e,t,r[0]);return o!==I(e,t,r[1])||o!==I(e,t,r[2])||o!==I(e,t,r[3])}function ts(e,t,r){const i=t.paint.get(e).value;return"constant"===i.kind?i.value:r.programConfigurations.get(t.id).getMaxValue(e)}function rs(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function is(e,t,r,i,n){if(!t[0]&&!t[1])return e;const a=o.convert(t)._mult(n);"viewport"===r&&a._rotate(-i);const s=[];for(let o=0;o<e.length;o++)s.push(e[o].sub(a));return s}let ns,os;xn("CircleBucket",$a,{omit:["layers"]});var as={get paint(){return os=os||new ro({"circle-radius":new Jn(G.paint_circle["circle-radius"]),"circle-color":new Jn(G.paint_circle["circle-color"]),"circle-blur":new Jn(G.paint_circle["circle-blur"]),"circle-opacity":new Jn(G.paint_circle["circle-opacity"]),"circle-translate":new Kn(G.paint_circle["circle-translate"]),"circle-translate-anchor":new Kn(G.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Kn(G.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Kn(G.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Jn(G.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Jn(G.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Jn(G.paint_circle["circle-stroke-opacity"])})},get layout(){return ns=ns||new ro({"circle-sort-key":new Jn(G.layout_circle["circle-sort-key"])})}},ss=1e-6,ls="undefined"!=typeof Float32Array?Float32Array:Array;function cs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function us(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],_=t[15],b=r[0],v=r[1],x=r[2],w=r[3];return e[0]=b*i+v*s+x*d+w*m,e[1]=b*n+v*l+x*h+w*g,e[2]=b*o+v*c+x*p+w*y,e[3]=b*a+v*u+x*f+w*_,e[4]=(b=r[4])*i+(v=r[5])*s+(x=r[6])*d+(w=r[7])*m,e[5]=b*n+v*l+x*h+w*g,e[6]=b*o+v*c+x*p+w*y,e[7]=b*a+v*u+x*f+w*_,e[8]=(b=r[8])*i+(v=r[9])*s+(x=r[10])*d+(w=r[11])*m,e[9]=b*n+v*l+x*h+w*g,e[10]=b*o+v*c+x*p+w*y,e[11]=b*a+v*u+x*f+w*_,e[12]=(b=r[12])*i+(v=r[13])*s+(x=r[14])*d+(w=r[15])*m,e[13]=b*n+v*l+x*h+w*g,e[14]=b*o+v*c+x*p+w*y,e[15]=b*a+v*u+x*f+w*_,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var ds,hs=us;function ps(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*a,e[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*a,e[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*a,e[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*a,e}ds=new ls(4),ls!=Float32Array&&(ds[0]=0,ds[1]=0,ds[2]=0,ds[3]=0);class fs extends no{constructor(e){super(e,as)}createBucket(e){return new $a(e)}queryRadius(e){const t=e;return ts("circle-radius",this,t)+ts("circle-stroke-width",this,t)+rs(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,r,i,n,o,a,s){const l=is(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),c=this.paint.get("circle-radius").evaluate(t,r)+this.paint.get("circle-stroke-width").evaluate(t,r),u="map"===this.paint.get("circle-pitch-alignment"),d=u?l:function(e,t){return e.map((e=>ms(e,t)))}(l,s),h=u?c*a:c;for(const p of i)for(const e of p){const t=u?e:ms(e,s);let r=h;const i=ps([],[e.x,e.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?r*=i[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(r*=o.cameraToCenterDistance/i[3]),Ha(d,t,r))return!0}return!1}}function ms(e,t){const r=ps([],[e.x,e.y,0,1],t);return new o(r[0]/r[3],r[1]/r[3])}class gs extends $a{}let ys;xn("HeatmapBucket",gs,{omit:["layers"]});var _s={get paint(){return ys=ys||new ro({"heatmap-radius":new Jn(G.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Jn(G.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Kn(G.paint_heatmap["heatmap-intensity"]),"heatmap-color":new to(G.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Kn(G.paint_heatmap["heatmap-opacity"])})}};function bs(e,t,r,i){let{width:n,height:o}=t;if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==n*o*r)throw new RangeError(`mismatched image size. expected: ${i.length} but got: ${n*o*r}`)}else i=new Uint8Array(n*o*r);return e.width=n,e.height=o,e.data=i,e}function vs(e,t,r){let{width:i,height:n}=t;if(i===e.width&&n===e.height)return;const o=bs({},{width:i,height:n},r);xs(e,o,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,n)},r),e.width=i,e.height=n,e.data=o.data}function xs(e,t,r,i,n,o){if(0===n.width||0===n.height)return t;if(n.width>e.width||n.height>e.height||r.x>e.width-n.width||r.y>e.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>t.width||n.height>t.height||i.x>t.width-n.width||i.y>t.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;if(a===s)throw new Error("srcData equals dstData, so image is already copied");for(let l=0;l<n.height;l++){const c=((r.y+l)*e.width+r.x)*o,u=((i.y+l)*t.width+i.x)*o;for(let e=0;e<n.width*o;e++)s[u+e]=a[c+e]}return t}class ws{constructor(e,t){bs(this,e,1,t)}resize(e){vs(this,e,1)}clone(){return new ws({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,i,n){xs(e,t,r,i,n,1)}}class Ss{constructor(e,t){bs(this,e,4,t)}resize(e){vs(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Ss({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,r,i,n){xs(e,t,r,i,n,4)}}function Is(e){const t={},r=e.resolution||256,i=e.clips?e.clips.length:1,n=e.image||new Ss({width:r,height:i});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const o=(r,i,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);n.data[r+i+0]=Math.floor(255*a.r/a.a),n.data[r+i+1]=Math.floor(255*a.g/a.a),n.data[r+i+2]=Math.floor(255*a.b/a.a),n.data[r+i+3]=Math.floor(255*a.a)};if(e.clips)for(let a=0,s=0;a<i;++a,s+=4*r)for(let t=0,i=0;t<r;t++,i+=4){const n=t/(r-1),{start:l,end:c}=e.clips[a];o(s,i,l*(1-n)+c*n)}else for(let a=0,s=0;a<r;a++,s+=4)o(0,s,a/(r-1));return n}xn("AlphaImage",ws),xn("RGBAImage",Ss);const Ts="big-fb";class ks extends no{createBucket(e){return new gs(e)}constructor(e){super(e,_s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Is({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Ts)&&this.heatmapFbos.delete(Ts)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Es;var As={get paint(){return Es=Es||new ro({"hillshade-illumination-direction":new Kn(G.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Kn(G.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Kn(G.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Kn(G.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Kn(G.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Kn(G.paint_hillshade["hillshade-accent-color"])})}};class Ps extends no{constructor(e){super(e,As)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}const Cs=lo([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ms}=Cs;function Os(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,n=i?t[0]*r:e.length;let o=Rs(e,0,n,r,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c;if(i&&(o=function(e,t,r,i){const n=[];for(let o=0,a=t.length;o<a;o++){const r=Rs(e,t[o]*i,o<a-1?t[o+1]*i:e.length,i,!1);r===r.next&&(r.steiner=!0),n.push(Ws(r))}n.sort(js);for(let o=0;o<n.length;o++)r=Us(n[o],r);return r}(e,t,o,r)),e.length>80*r){s=1/0,l=1/0;let t=-1/0,i=-1/0;for(let o=r;o<n;o+=r){const r=e[o],n=e[o+1];r<s&&(s=r),n<l&&(l=n),r>t&&(t=r),n>i&&(i=n)}c=Math.max(t-s,i-l),c=0!==c?32767/c:0}return Ds(o,a,r,s,l,c,0),a}function Rs(e,t,r,i,n){let o;if(n===function(e,t,r,i){let n=0;for(let o=t,a=r-i;o<r;o+=i)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}(e,t,r,i)>0)for(let a=t;a<r;a+=i)o=el(a/i|0,e[a],e[a+1],o);else for(let a=r-i;a>=t;a-=i)o=el(a/i|0,e[a],e[a+1],o);return o&&Zs(o,o.next)&&(tl(o),o=o.next),o}function Bs(e,t){if(!e)return e;t||(t=e);let r,i=e;do{if(r=!1,i.steiner||!Zs(i,i.next)&&0!==qs(i.prev,i,i.next))i=i.next;else{if(tl(i),i=t=i.prev,i===i.next)break;r=!0}}while(r||i!==t);return t}function Ds(e,t,r,i,n,o,a){if(!e)return;!a&&o&&function(e,t,r,i){let n=e;do{0===n.z&&(n.z=$s(n.x,n.y,t,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){let t,r=1;do{let i,n=e;e=null;let o=null;for(t=0;n;){t++;let a=n,s=0;for(let e=0;e<r&&(s++,a=a.nextZ,a);e++);let l=r;for(;s>0||l>0&&a;)0!==s&&(0===l||!a||n.z<=a.z)?(i=n,n=n.nextZ,s--):(i=a,a=a.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=a}o.nextZ=null,r*=2}while(t>1)}(n)}(e,i,n,o);let s=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Ls(e,i,n,o):zs(e))t.push(l.i,e.i,c.i),tl(e),e=c.next,s=c.next;else if((e=c)===s){a?1===a?Ds(e=Fs(Bs(e),t),t,r,i,n,o,2):2===a&&Ns(e,t,r,i,n,o):Ds(Bs(e),t,r,i,n,o,1);break}}}function zs(e){const t=e.prev,r=e,i=e.next;if(qs(t,r,i)>=0)return!1;const n=t.x,o=r.x,a=i.x,s=t.y,l=r.y,c=i.y,u=n<o?n<a?n:a:o<a?o:a,d=s<l?s<c?s:c:l<c?l:c,h=n>o?n>a?n:a:o>a?o:a,p=s>l?s>c?s:c:l>c?l:c;let f=i.next;for(;f!==t;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Hs(n,s,o,l,a,c,f.x,f.y)&&qs(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Ls(e,t,r,i){const n=e.prev,o=e,a=e.next;if(qs(n,o,a)>=0)return!1;const s=n.x,l=o.x,c=a.x,u=n.y,d=o.y,h=a.y,p=s<l?s<c?s:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=s>l?s>c?s:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,y=$s(p,f,t,r,i),_=$s(m,g,t,r,i);let b=e.prevZ,v=e.nextZ;for(;b&&b.z>=y&&v&&v.z<=_;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==a&&Hs(s,u,l,d,c,h,b.x,b.y)&&qs(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==n&&v!==a&&Hs(s,u,l,d,c,h,v.x,v.y)&&qs(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;b&&b.z>=y;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==a&&Hs(s,u,l,d,c,h,b.x,b.y)&&qs(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;v&&v.z<=_;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==n&&v!==a&&Hs(s,u,l,d,c,h,v.x,v.y)&&qs(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Fs(e,t){let r=e;do{const i=r.prev,n=r.next.next;!Zs(i,n)&&Xs(i,r,r.next,n)&&Js(i,n)&&Js(n,i)&&(t.push(i.i,r.i,n.i),tl(r),tl(r.next),r=e=n),r=r.next}while(r!==e);return Bs(r)}function Ns(e,t,r,i,n,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Gs(a,e)){let s=Qs(a,e);return a=Bs(a,a.next),s=Bs(s,s.next),Ds(a,t,r,i,n,o,0),void Ds(s,t,r,i,n,o,0)}e=e.next}a=a.next}while(a!==e)}function js(e,t){return e.x-t.x}function Us(e,t){const r=function(e,t){let r=t;const i=e.x,n=e.y;let o,a=-1/0;do{if(n<=r.y&&n>=r.next.y&&r.next.y!==r.y){const e=r.x+(n-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=i&&e>a&&(a=e,o=r.x<r.next.x?r:r.next,e===i))return o}r=r.next}while(r!==t);if(!o)return null;const s=o,l=o.x,c=o.y;let u=1/0;r=o;do{if(i>=r.x&&r.x>=l&&i!==r.x&&Hs(n<c?i:a,n,l,c,n<c?a:i,n,r.x,r.y)){const t=Math.abs(n-r.y)/(i-r.x);Js(r,e)&&(t<u||t===u&&(r.x>o.x||r.x===o.x&&Vs(o,r)))&&(o=r,u=t)}r=r.next}while(r!==s);return o}(e,t);if(!r)return t;const i=Qs(r,e);return Bs(i,i.next),Bs(r,r.next)}function Vs(e,t){return qs(e.prev,e,t.prev)<0&&qs(t.next,e,e.next)<0}function $s(e,t,r,i,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Ws(e){let t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function Hs(e,t,r,i,n,o,a,s){return(n-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(i-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(n-a)*(i-s)}function Gs(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&Xs(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&(Js(e,t)&&Js(t,e)&&function(e,t){let r=e,i=!1;const n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next}while(r!==e);return i}(e,t)&&(qs(e.prev,e,t.prev)||qs(e,t.prev,t))||Zs(e,t)&&qs(e.prev,e,e.next)>0&&qs(t.prev,t,t.next)>0)}function qs(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function Zs(e,t){return e.x===t.x&&e.y===t.y}function Xs(e,t,r,i){const n=Ks(qs(e,t,r)),o=Ks(qs(e,t,i)),a=Ks(qs(r,i,e)),s=Ks(qs(r,i,t));return n!==o&&a!==s||!(0!==n||!Ys(e,r,t))||!(0!==o||!Ys(e,i,t))||!(0!==a||!Ys(r,e,i))||!(0!==s||!Ys(r,t,i))}function Ys(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Ks(e){return e>0?1:e<0?-1:0}function Js(e,t){return qs(e.prev,e,e.next)<0?qs(e,t,e.next)>=0&&qs(e,e.prev,t)>=0:qs(e,t,e.prev)<0||qs(e,e.next,t)<0}function Qs(e,t){const r=rl(e.i,e.x,e.y),i=rl(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=n,n.prev=r,i.next=r,r.prev=i,o.next=i,i.prev=o,i}function el(e,t,r,i){const n=rl(e,t,r);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function tl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function rl(e,t,r){return{i:e,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function il(e,t,r){const i=r.patternDependencies;let n=!1;for(const o of t){const t=o.paint.get(`${e}-pattern`);t.isConstant()||(n=!0);const r=t.constantOr(null);r&&(n=!0,i[r.to]=!0,i[r.from]=!0)}return n}function nl(e,t,r,i,n){const o=n.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:i-1},r,{},n.availableImages),s=t.evaluate({zoom:i},r,{},n.availableImages),l=t.evaluate({zoom:i+1},r,{},n.availableImages);e=e&&e.name?e.name:e,s=s&&s.name?s.name:s,l=l&&l.name?l.name:l,o[e]=!0,o[s]=!0,o[l]=!0,r.patterns[a.id]={min:e,mid:s,max:l}}}return r}class ol{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Zo,this.indexArray=new na,this.indexArray2=new oa,this.programConfigurations=new Ba(e.layers,e.zoom),this.segments=new la,this.segments2=new la,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=il("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),n=!i.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Ua(a,e);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),u,r))continue;const d=n?i.evaluate(u,{},r,t.availableImages):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:ja(a),patterns:{},sortKey:d};o.push(h)}n&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of o){const{geometry:i,index:n,sourceLayerIndex:o}=a;if(this.hasPattern){const e=nl("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,i,n,r,{});t.featureIndex.insert(e[n].feature,i,n,o,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ms),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,r,i,n){for(const o of _r(t,500)){let e=0;for(const s of o)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),r=t.vertexLength,i=[],n=[];for(const s of o){if(0===s.length)continue;s!==o[0]&&n.push(i.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),i.push(s[0].x),i.push(s[0].y);for(let r=1;r<s.length;r++)this.layoutVertexArray.emplaceBack(s[r].x,s[r].y),this.indexArray2.emplaceBack(t+r-1,t+r),i.push(s[r].x),i.push(s[r].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const a=Os(i,n);for(let o=0;o<a.length;o+=3)this.indexArray.emplaceBack(r+a[o],r+a[o+1],r+a[o+2]);t.vertexLength+=e,t.primitiveLength+=a.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n,i)}}let al,sl;xn("FillBucket",ol,{omit:["layers","patternFeatures"]});var ll={get paint(){return sl=sl||new ro({"fill-antialias":new Kn(G.paint_fill["fill-antialias"]),"fill-opacity":new Jn(G.paint_fill["fill-opacity"]),"fill-color":new Jn(G.paint_fill["fill-color"]),"fill-outline-color":new Jn(G.paint_fill["fill-outline-color"]),"fill-translate":new Kn(G.paint_fill["fill-translate"]),"fill-translate-anchor":new Kn(G.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qn(G.paint_fill["fill-pattern"])})},get layout(){return al=al||new ro({"fill-sort-key":new Jn(G.layout_fill["fill-sort-key"])})}};class cl extends no{constructor(e){super(e,ll)}recalculate(e,t){super.recalculate(e,t);const r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new ol(e)}queryRadius(){return rs(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,r,i,n,o,a){return Ga(is(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),i)}isTileClipped(){return!0}}const ul=lo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),dl=lo([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hl}=ul;var pl={},fl=i,ml=gl;function gl(e,t,r,i,n){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=n,e.readFields(yl,this,t)}function yl(e,t,r){1==e?t.id=r.readVarint():2==e?function(e,t){for(var r=e.readVarint()+e.pos;e.pos<r;){var i=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[i]=n}}(r,t):3==e?t.type=r.readVarint():4==e&&(t._geometry=r.pos)}function _l(e){for(var t,r,i=0,n=0,o=e.length,a=o-1;n<o;a=n++)i+=((r=e[a]).x-(t=e[n]).x)*(t.y+r.y);return i}gl.types=["Unknown","Point","LineString","Polygon"],gl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,r=e.readVarint()+e.pos,i=1,n=0,o=0,a=0,s=[];e.pos<r;){if(n<=0){var l=e.readVarint();i=7&l,n=l>>3}if(n--,1===i||2===i)o+=e.readSVarint(),a+=e.readSVarint(),1===i&&(t&&s.push(t),t=[]),t.push(new fl(o,a));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&s.push(t),s},gl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,r=1,i=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(i<=0){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)(n+=e.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,c]},gl.prototype.toGeoJSON=function(e,t,r){var i,n,o=this.extent*Math.pow(2,r),a=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=gl.types[this.type];function u(e){for(var t=0;t<e.length;t++){var r=e[t];e[t]=[360*(r.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(r.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(i=0;i<l.length;i++)d[i]=l[i][0];u(l=d);break;case 2:for(i=0;i<l.length;i++)u(l[i]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var r,i,n=[],o=0;o<t;o++){var a=_l(e[o]);0!==a&&(void 0===i&&(i=a<0),i===a<0?(r&&n.push(r),r=[e[o]]):r.push(e[o]))}return r&&n.push(r),n}(l),i=0;i<l.length;i++)for(n=0;n<l[i].length;n++)u(l[i][n])}1===l.length?l=l[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(h.id=this.id),h};var bl=ml,vl=xl;function xl(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(wl,this,t),this.length=this._features.length}function wl(e,t,r){15===e?t.version=r.readVarint():1===e?t.name=r.readString():5===e?t.extent=r.readVarint():2===e?t._features.push(r.pos):3===e?t._keys.push(r.readString()):4===e&&t._values.push(function(e){for(var t=null,r=e.readVarint()+e.pos;e.pos<r;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(r))}xl.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new bl(this._pbf,t,this.extent,this._keys,this._values)};var Sl=vl;function Il(e,t,r){if(3===e){var i=new Sl(r,r.readVarint()+r.pos);i.length&&(t[i.name]=i)}}pl.VectorTile=function(e,t){this.layers=e.readFields(Il,{},t)},pl.VectorTileFeature=ml,pl.VectorTileLayer=vl;const Tl=pl.VectorTileFeature.types,kl=Math.pow(2,13);function El(e,t,r,i,n,o,a,s){e.emplaceBack(t,r,2*Math.floor(i*kl)+a,n*kl*2,o*kl*2,Math.round(s))}class Al{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Xo,this.centroidVertexArray=new Go,this.indexArray=new na,this.programConfigurations=new Ba(e.layers,e.zoom),this.segments=new la,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.features=[],this.hasPattern=il("fill-extrusion",this.layers,t);for(const{feature:i,id:n,index:o,sourceLayerIndex:a}of e){const e=this.layers[0]._featureFilter.needGeometry,s=Ua(i,e);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),s,r))continue;const l={id:n,sourceLayerIndex:a,index:o,geometry:e?s.geometry:ja(i),properties:i.properties,type:i.type,patterns:{}};this.hasPattern?this.features.push(nl("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,r,{}),t.featureIndex.insert(i,l.geometry,o,a,this.index,!0)}}addFeatures(e,t,r){for(const i of this.features){const{geometry:e}=i;this.addFeature(i,e,i.index,t,r)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,hl),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,dl.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,t,r,i,n){for(const o of _r(t,500)){const t={x:0,y:0,vertexCount:0};let r=0;for(const e of o)r+=e.length;let i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const e of o){if(0===e.length)continue;if(Cl(e))continue;let r=0;for(let n=0;n<e.length;n++){const o=e[n];if(n>=1){const a=e[n-1];if(!Pl(o,a)){i.vertexLength+4>la.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=o.sub(a)._perp()._unit(),n=a.dist(o);r+n>32768&&(r=0),El(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,0,r),El(this.layoutVertexArray,o.x,o.y,e.x,e.y,0,1,r),t.x+=2*o.x,t.y+=2*o.y,t.vertexCount+=2,r+=n,El(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,0,r),El(this.layoutVertexArray,a.x,a.y,e.x,e.y,0,1,r),t.x+=2*a.x,t.y+=2*a.y,t.vertexCount+=2;const s=i.vertexLength;this.indexArray.emplaceBack(s,s+2,s+1),this.indexArray.emplaceBack(s+1,s+2,s+3),i.vertexLength+=4,i.primitiveLength+=2}}}}if(i.vertexLength+r>la.MAX_VERTEX_ARRAY_LENGTH&&(i=this.segments.prepareSegment(r,this.layoutVertexArray,this.indexArray)),"Polygon"!==Tl[e.type])continue;const n=[],a=[],s=i.vertexLength;for(const e of o)if(0!==e.length){e!==o[0]&&a.push(n.length/2);for(let r=0;r<e.length;r++){const i=e[r];El(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),t.x+=i.x,t.y+=i.y,t.vertexCount+=1,n.push(i.x),n.push(i.y)}}const l=Os(n,a);for(let e=0;e<l.length;e+=3)this.indexArray.emplaceBack(s+l[e],s+l[e+2],s+l[e+1]);i.primitiveLength+=l.length/3,i.vertexLength+=r;for(let e=0;e<t.vertexCount;e++){const e=Math.floor(t.x/t.vertexCount),r=Math.floor(t.y/t.vertexCount);this.centroidVertexArray.emplaceBack(e,r)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n,i)}}function Pl(e,t){return e.x===t.x&&(e.x<0||e.x>La)||e.y===t.y&&(e.y<0||e.y>La)}function Cl(e){return e.every((e=>e.x<0))||e.every((e=>e.x>La))||e.every((e=>e.y<0))||e.every((e=>e.y>La))}let Ml;xn("FillExtrusionBucket",Al,{omit:["layers","features"]});var Ol={get paint(){return Ml=Ml||new ro({"fill-extrusion-opacity":new Kn(G["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Jn(G["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Kn(G["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Kn(G["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qn(G["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Jn(G["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Jn(G["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Kn(G["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Rl extends no{constructor(e){super(e,Ol)}createBucket(e){return new Al(e)}queryRadius(){return rs(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,t,r,i,n,a,s,l){const c=is(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),u=this.paint.get("fill-extrusion-height").evaluate(t,r),d=this.paint.get("fill-extrusion-base").evaluate(t,r),h=function(e,t){const r=[];for(const i of e){const e=[i.x,i.y,0,1];ps(e,e,t),r.push(new o(e[0]/e[3],e[1]/e[3]))}return r}(c,l),p=function(e,t,r,i){const n=[],a=[],s=i[8]*t,l=i[9]*t,c=i[10]*t,u=i[11]*t,d=i[8]*r,h=i[9]*r,p=i[10]*r,f=i[11]*r;for(const m of e){const e=[],t=[];for(const r of m){const n=r.x,a=r.y,m=i[0]*n+i[4]*a+i[12],g=i[1]*n+i[5]*a+i[13],y=i[2]*n+i[6]*a+i[14],_=i[3]*n+i[7]*a+i[15],b=y+c,v=_+u,x=m+d,w=g+h,S=y+p,I=_+f,T=new o((m+s)/v,(g+l)/v);T.z=b/v,e.push(T);const k=new o(x/I,w/I);k.z=S/I,t.push(k)}n.push(e),a.push(t)}return[n,a]}(i,d,u,l);return function(e,t,r){let i=1/0;Ga(r,t)&&(i=Dl(r,t[0]));for(let n=0;n<t.length;n++){const o=t[n],a=e[n];for(let e=0;e<o.length-1;e++){const t=o[e],n=[t,o[e+1],a[e+1],a[e],t];Wa(r,n)&&(i=Math.min(i,Dl(r,n)))}}return i!==1/0&&i}(p[0],p[1],h)}}function Bl(e,t){return e.x*t.x+e.y*t.y}function Dl(e,t){if(1===e.length){let r=0;const i=t[r++];let n;for(;!n||i.equals(n);)if(n=t[r++],!n)return 1/0;for(;r<t.length;r++){const o=t[r],a=e[0],s=n.sub(i),l=o.sub(i),c=a.sub(i),u=Bl(s,s),d=Bl(s,l),h=Bl(l,l),p=Bl(c,s),f=Bl(c,l),m=u*h-d*d,g=(h*p-d*f)/m,y=(u*f-d*p)/m,_=i.z*(1-g-y)+n.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const r of t)e=Math.min(e,r.z);return e}}const zl=lo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ll}=zl,Fl=lo([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Nl}=Fl,jl=pl.VectorTileFeature.types,Ul=Math.cos(Math.PI/180*37.5),Vl=Math.pow(2,14)/.5;class $l{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new Yo,this.layoutVertexArray2=new Ko,this.indexArray=new na,this.programConfigurations=new Ba(e.layers,e.zoom),this.segments=new la,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,r){this.hasPattern=il("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),n=!i.isConstant(),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,t=Ua(a,e);if(!this.layers[0]._featureFilter.filter(new Vn(this.zoom),t,r))continue;const u=n?i.evaluate(t,{},r):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?t.geometry:ja(a),patterns:{},sortKey:u};o.push(d)}n&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of o){const{geometry:i,index:n,sourceLayerIndex:o}=a;if(this.hasPattern){const e=nl("line",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,i,n,r,{});t.featureIndex.insert(e[n].feature,i,n,o,this.index)}}update(e,t,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,r)}addFeatures(e,t,r){for(const i of this.patternFeatures)this.addFeature(i,i.geometry,i.index,t,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Nl)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ll),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,r,i,n){const o=this.layers[0].layout,a=o.get("line-join").evaluate(e,{}),s=o.get("line-cap"),l=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const u of t)this.addLine(u,e,a,s,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,r,n,i)}addLine(e,t,r,i,n,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===jl[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(a?3:2))return;"bevel"===r&&(n=1.05);const c=this.overscaling<=16?15*La/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,h,p,f,m;this.e1=this.e2=-1,a&&(d=e[s-2],m=e[l].sub(d)._unit()._perp());for(let g=l;g<s;g++){if(p=g===s-1?a?e[l+1]:void 0:e[g+1],p&&e[g].equals(p))continue;m&&(f=m),d&&(h=d),d=e[g],m=p?p.sub(d)._unit()._perp():f,f=f||m;let t=f.add(m);0===t.x&&0===t.y||t._unit();const y=f.x*m.x+f.y*m.y,_=t.x*m.x+t.y*m.y,b=0!==_?1/_:1/0,v=2*Math.sqrt(2-2*_),x=_<Ul&&h&&p,w=f.x*m.y-f.y*m.x>0;if(x&&g>l){const e=d.dist(h);if(e>2*c){const t=d.sub(d.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,f,0,0,u),h=t}}const S=h&&p;let I=S?r:a?"butt":i;if(S&&"round"===I&&(b<o?I="miter":b<=2&&(I="fakeround")),"miter"===I&&b>n&&(I="bevel"),"bevel"===I&&(b>2&&(I="flipbevel"),b<n&&(I="miter")),h&&this.updateDistance(h,d),"miter"===I)t._mult(b),this.addCurrentVertex(d,t,0,0,u);else if("flipbevel"===I){if(b>100)t=m.mult(-1);else{const e=b*f.add(m).mag()/f.sub(m).mag();t._perp()._mult(e*(w?-1:1))}this.addCurrentVertex(d,t,0,0,u),this.addCurrentVertex(d,t.mult(-1),0,0,u)}else if("bevel"===I||"fakeround"===I){const e=-Math.sqrt(b*b-1),t=w?e:0,r=w?0:e;if(h&&this.addCurrentVertex(d,f,t,r,u),"fakeround"===I){const e=Math.round(180*v/Math.PI/20);for(let t=1;t<e;t++){let r=t/e;if(.5!==r){const e=r-.5;r+=r*e*(r-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const i=m.sub(f)._mult(r)._add(f)._unit()._mult(w?-1:1);this.addHalfVertex(d,i.x,i.y,!1,w,0,u)}}p&&this.addCurrentVertex(d,m,-t,-r,u)}else if("butt"===I)this.addCurrentVertex(d,t,0,0,u);else if("square"===I){const e=h?1:-1;this.addCurrentVertex(d,t,e,e,u)}else"round"===I&&(h&&(this.addCurrentVertex(d,f,0,0,u),this.addCurrentVertex(d,f,1,1,u,!0)),p&&(this.addCurrentVertex(d,m,-1,-1,u,!0),this.addCurrentVertex(d,m,0,0,u)));if(x&&g<s-1){const e=d.dist(p);if(e>2*c){const t=d.add(p.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,m,0,0,u),d=t}}}}addCurrentVertex(e,t,r,i,n){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const a=t.y*i-t.x,s=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*r,t.y-t.x*r,o,!1,r,n),this.addHalfVertex(e,a,s,o,!0,-i,n),this.distance>Vl/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,t,r,i,n,o))}addHalfVertex(e,t,r,i,n,o,a){let{x:s,y:l}=e;const c=.5*(this.lineClips?this.scaledDistance*(Vl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(i?1:0),(l<<1)+(n?1:0),Math.round(63*t)+128,Math.round(63*r)+128,1+(0===o?0:o<0?-1:1)|(63&c)<<2,c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}let Wl,Hl;xn("LineBucket",$l,{omit:["layers","patternFeatures"]});var Gl={get paint(){return Hl=Hl||new ro({"line-opacity":new Jn(G.paint_line["line-opacity"]),"line-color":new Jn(G.paint_line["line-color"]),"line-translate":new Kn(G.paint_line["line-translate"]),"line-translate-anchor":new Kn(G.paint_line["line-translate-anchor"]),"line-width":new Jn(G.paint_line["line-width"]),"line-gap-width":new Jn(G.paint_line["line-gap-width"]),"line-offset":new Jn(G.paint_line["line-offset"]),"line-blur":new Jn(G.paint_line["line-blur"]),"line-dasharray":new eo(G.paint_line["line-dasharray"]),"line-pattern":new Qn(G.paint_line["line-pattern"]),"line-gradient":new to(G.paint_line["line-gradient"])})},get layout(){return Wl=Wl||new ro({"line-cap":new Kn(G.layout_line["line-cap"]),"line-join":new Jn(G.layout_line["line-join"]),"line-miter-limit":new Kn(G.layout_line["line-miter-limit"]),"line-round-limit":new Kn(G.layout_line["line-round-limit"]),"line-sort-key":new Jn(G.layout_line["line-sort-key"])})}};class ql extends Jn{possiblyEvaluate(e,t){return t=new Vn(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,r,i){return t=y({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,r,i)}}let Zl;class Xl extends no{constructor(e){super(e,Gl),this.gradientVersion=0,Zl||(Zl=new ql(Gl.paint.properties["line-width"].specification),Zl.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this.gradientExpression();this.stepInterpolant=!!function(e){return void 0!==e._styleExpression}(e)&&e._styleExpression.expression instanceof St,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Zl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new $l(e)}queryRadius(e){const t=e,r=Yl(ts("line-width",this,t),ts("line-gap-width",this,t)),i=ts("line-offset",this,t);return r/2+Math.abs(i)+rs(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,r,i,n,a,s){const l=is(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),c=s/2*Yl(this.paint.get("line-width").evaluate(t,r),this.paint.get("line-gap-width").evaluate(t,r)),u=this.paint.get("line-offset").evaluate(t,r);return u&&(i=function(e,t){const r=[];for(let i=0;i<e.length;i++){const n=e[i],a=[];for(let e=0;e<n.length;e++){const r=n[e-1],i=n[e],s=n[e+1],l=0===e?new o(0,0):i.sub(r)._unit()._perp(),c=e===n.length-1?new o(0,0):s.sub(i)._unit()._perp(),u=l._add(c)._unit(),d=u.x*c.x+u.y*c.y;0!==d&&u._mult(1/d),a.push(u._mult(t)._add(i))}r.push(a)}return r}(i,u*s)),function(e,t,r){for(let i=0;i<t.length;i++){const n=t[i];if(e.length>=3)for(let t=0;t<n.length;t++)if(Qa(e,n[t]))return!0;if(qa(e,n,r))return!0}return!1}(l,i,c)}isTileClipped(){return!0}}function Yl(e,t){return t>0?t+2*e:e}const Kl=lo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Jl=lo([{name:"a_projected_pos",components:3,type:"Float32"}],4);lo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ql=lo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);lo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ec=lo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),tc=lo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function rc(e,t,r){return e.sections.forEach((e=>{e.text=function(e,t,r){const i=t.layout.get("text-transform").evaluate(r,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),Un.applyArabicShaping&&(e=Un.applyArabicShaping(e)),e}(e.text,t,r)})),e}lo([{name:"triangle",components:3,type:"Uint16"}]),lo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),lo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),lo([{type:"Float32",name:"offsetX"}]),lo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),lo([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ic={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var nc=24,oc=lc,ac=function(e,t,r,i,n){var o,a,s=8*n-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=r?n-1:0,h=r?-1:1,p=e[t+d];for(d+=h,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+d],d+=h,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+e[t+d],d+=h,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=c}return(p?-1:1)*a*Math.pow(2,o-i)},sc=function(e,t,r,i,n,o){var a,s,l,c=8*o-n-1,u=(1<<c)-1,d=u>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=u?(s=0,a=u):a+d>=1?(s=(t*l-1)*Math.pow(2,n),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,n),a=0));n>=8;e[r+p]=255&s,p+=f,s/=256,n-=8);for(a=a<<n|s,c+=n;c>0;e[r+p]=255&a,p+=f,a/=256,c-=8);e[r+p-f]|=128*m};function lc(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}lc.Varint=0,lc.Fixed64=1,lc.Bytes=2,lc.Fixed32=5;var cc=4294967296,uc=1/cc,dc="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function hc(e){return e.type===lc.Bytes?e.readVarint()+e.pos:e.pos+1}function pc(e,t,r){return r?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function fc(e,t,r){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(i);for(var n=r.pos-1;n>=e;n--)r.buf[n+i]=r.buf[n]}function mc(e,t){for(var r=0;r<e.length;r++)t.writeVarint(e[r])}function gc(e,t){for(var r=0;r<e.length;r++)t.writeSVarint(e[r])}function yc(e,t){for(var r=0;r<e.length;r++)t.writeFloat(e[r])}function _c(e,t){for(var r=0;r<e.length;r++)t.writeDouble(e[r])}function bc(e,t){for(var r=0;r<e.length;r++)t.writeBoolean(e[r])}function vc(e,t){for(var r=0;r<e.length;r++)t.writeFixed32(e[r])}function xc(e,t){for(var r=0;r<e.length;r++)t.writeSFixed32(e[r])}function wc(e,t){for(var r=0;r<e.length;r++)t.writeFixed64(e[r])}function Sc(e,t){for(var r=0;r<e.length;r++)t.writeSFixed64(e[r])}function Ic(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Tc(e,t,r){e[r]=t,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24}function kc(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}lc.prototype={destroy:function(){this.buf=null},readFields:function(e,t,r){for(r=r||this.length;this.pos<r;){var i=this.readVarint(),n=i>>3,o=this.pos;this.type=7&i,e(n,t,this),this.pos===o&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Ic(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=kc(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Ic(this.buf,this.pos)+Ic(this.buf,this.pos+4)*cc;return this.pos+=8,e},readSFixed64:function(){var e=Ic(this.buf,this.pos)+kc(this.buf,this.pos+4)*cc;return this.pos+=8,e},readFloat:function(){var e=ac(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ac(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,r,i=this.buf;return t=127&(r=i[this.pos++]),r<128?t:(t|=(127&(r=i[this.pos++]))<<7,r<128?t:(t|=(127&(r=i[this.pos++]))<<14,r<128?t:(t|=(127&(r=i[this.pos++]))<<21,r<128?t:function(e,t,r){var i,n,o=r.buf;if(i=(112&(n=o[r.pos++]))>>4,n<128)return pc(e,i,t);if(i|=(127&(n=o[r.pos++]))<<3,n<128)return pc(e,i,t);if(i|=(127&(n=o[r.pos++]))<<10,n<128)return pc(e,i,t);if(i|=(127&(n=o[r.pos++]))<<17,n<128)return pc(e,i,t);if(i|=(127&(n=o[r.pos++]))<<24,n<128)return pc(e,i,t);if(i|=(1&(n=o[r.pos++]))<<31,n<128)return pc(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(r=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&dc?function(e,t,r){return dc.decode(e.subarray(t,r))}(this.buf,t,e):function(e,t,r){for(var i="",n=t;n<r;){var o,a,s,l=e[n],c=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>r)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[n+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[n+2],128==(192&(o=e[n+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[n+2],s=e[n+3],128==(192&(o=e[n+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),n+=u}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==lc.Bytes)return e.push(this.readVarint(t));var r=hc(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==lc.Bytes)return e.push(this.readSVarint());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==lc.Bytes)return e.push(this.readBoolean());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==lc.Bytes)return e.push(this.readFloat());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==lc.Bytes)return e.push(this.readDouble());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==lc.Bytes)return e.push(this.readFixed32());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==lc.Bytes)return e.push(this.readSFixed32());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==lc.Bytes)return e.push(this.readFixed64());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==lc.Bytes)return e.push(this.readSFixed64());var t=hc(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===lc.Varint)for(;this.buf[this.pos++]>127;);else if(t===lc.Bytes)this.pos=this.readVarint()+this.pos;else if(t===lc.Fixed32)this.pos+=4;else{if(t!==lc.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Tc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Tc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Tc(this.buf,-1&e,this.pos),Tc(this.buf,Math.floor(e*uc),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Tc(this.buf,-1&e,this.pos),Tc(this.buf,Math.floor(e*uc),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var r,i;if(e>=0?(r=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(r=~(-e%4294967296))?r=r+1|0:(r=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,r){r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,e>>>=7,r.buf[r.pos++]=127&e|128,r.buf[r.pos]=127&(e>>>=7)}(r,0,t),function(e,t){var r=(7&e)<<4;t.buf[t.pos++]|=r|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,r){for(var i,n,o=0;o<t.length;o++){if((i=t.charCodeAt(o))>55295&&i<57344){if(!n){i>56319||o+1===t.length?(e[r++]=239,e[r++]=191,e[r++]=189):n=i;continue}if(i<56320){e[r++]=239,e[r++]=191,e[r++]=189,n=i;continue}i=n-55296<<10|i-56320|65536,n=null}else n&&(e[r++]=239,e[r++]=191,e[r++]=189,n=null);i<128?e[r++]=i:(i<2048?e[r++]=i>>6|192:(i<65536?e[r++]=i>>12|224:(e[r++]=i>>18|240,e[r++]=i>>12&63|128),e[r++]=i>>6&63|128),e[r++]=63&i|128)}return r}(this.buf,e,this.pos);var r=this.pos-t;r>=128&&fc(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(e){this.realloc(4),sc(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),sc(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var r=this.pos;e(t,this);var i=this.pos-r;i>=128&&fc(r,i,this),this.pos=r-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,r){this.writeTag(e,lc.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,mc,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,gc,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,bc,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,yc,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,_c,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,vc,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,xc,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,wc,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Sc,t)},writeBytesField:function(e,t){this.writeTag(e,lc.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,lc.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,lc.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,lc.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,lc.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,lc.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,lc.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,lc.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,lc.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,lc.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Ec=r(oc);const Ac=3;function Pc(e,t,r){1===e&&r.readMessage(Cc,t)}function Cc(e,t,r){if(3===e){const{id:e,bitmap:i,width:n,height:o,left:a,top:s,advance:l}=r.readMessage(Mc,{});t.push({id:e,bitmap:new ws({width:n+2*Ac,height:o+2*Ac},i),metrics:{width:n,height:o,left:a,top:s,advance:l}})}}function Mc(e,t,r){1===e?t.id=r.readVarint():2===e?t.bitmap=r.readBytes():3===e?t.width=r.readVarint():4===e?t.height=r.readVarint():5===e?t.left=r.readSVarint():6===e?t.top=r.readSVarint():7===e&&(t.advance=r.readVarint())}const Oc=Ac;function Rc(e){let t=0,r=0;for(const a of e)t+=a.w*a.h,r=Math.max(r,a.w);e.sort(((e,t)=>t.h-e.h));const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let n=0,o=0;for(const a of e)for(let e=i.length-1;e>=0;e--){const t=i[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),n=Math.max(n,a.x+a.w),a.w===t.w&&a.h===t.h){const t=i.pop();e<i.length&&(i[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(i.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:n,h:o,fill:t/(n*o)||0}}const Bc=1;class Dc{constructor(e,t){let{pixelRatio:r,version:i,stretchX:n,stretchY:o,content:a,textFitWidth:s,textFitHeight:l}=t;this.paddedRect=e,this.pixelRatio=r,this.stretchX=n,this.stretchY=o,this.content=a,this.version=i,this.textFitWidth=s,this.textFitHeight=l}get tl(){return[this.paddedRect.x+Bc,this.paddedRect.y+Bc]}get br(){return[this.paddedRect.x+this.paddedRect.w-Bc,this.paddedRect.y+this.paddedRect.h-Bc]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Bc)/this.pixelRatio,(this.paddedRect.h-2*Bc)/this.pixelRatio]}}class zc{constructor(e,t){const r={},i={};this.haveRenderCallbacks=[];const n=[];this.addImages(e,r,n),this.addImages(t,i,n);const{w:o,h:a}=Rc(n),s=new Ss({width:o||1,height:a||1});for(const l in e){const t=e[l],i=r[l].paddedRect;Ss.copy(t.data,s,{x:0,y:0},{x:i.x+Bc,y:i.y+Bc},t.data)}for(const l in t){const e=t[l],r=i[l].paddedRect,n=r.x+Bc,o=r.y+Bc,a=e.data.width,c=e.data.height;Ss.copy(e.data,s,{x:0,y:0},{x:n,y:o},e.data),Ss.copy(e.data,s,{x:0,y:c-1},{x:n,y:o-1},{width:a,height:1}),Ss.copy(e.data,s,{x:0,y:0},{x:n,y:o+c},{width:a,height:1}),Ss.copy(e.data,s,{x:a-1,y:0},{x:n-1,y:o},{width:1,height:c}),Ss.copy(e.data,s,{x:0,y:0},{x:n+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=r,this.patternPositions=i}addImages(e,t,r){for(const i in e){const n=e[i],o={x:0,y:0,w:n.data.width+2*Bc,h:n.data.height+2*Bc};r.push(o),t[i]=new Dc(o,n),n.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const r in e.updatedImages)this.patchUpdatedImage(this.iconPositions[r],e.getImage(r),t),this.patchUpdatedImage(this.patternPositions[r],e.getImage(r),t)}patchUpdatedImage(e,t,r){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[i,n]=e.tl;r.update(t.data,void 0,{x:i,y:n})}}var Lc;xn("ImagePosition",Dc),xn("ImageAtlas",zc),e.ah=void 0,(Lc=e.ah||(e.ah={}))[Lc.none=0]="none",Lc[Lc.horizontal=1]="horizontal",Lc[Lc.vertical=2]="vertical",Lc[Lc.horizontalOnly=3]="horizontalOnly";const Fc=-17;class Nc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const r=new Nc;return r.scale=e||1,r.fontStack=t,r}static forImage(e){const t=new Nc;return t.imageName=e,t}}class jc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const r=new jc;for(let i=0;i<e.sections.length;i++){const n=e.sections[i];n.image?r.addImageSection(n):r.addTextSection(n,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r+1)||null,n=e.charCodeAt(r-1)||null;t+=i&&zn(i)&&!ic[e[r+1]]||n&&zn(n)&&!ic[e[r-1]]||!ic[e[r]]?e[r]:ic[e[r]]}return t}(this.text)}trim(){let e=0;for(let r=0;r<this.text.length&&Vc[this.text.charCodeAt(r)];r++)e++;let t=this.text.length;for(let r=this.text.length-1;r>=0&&r>=e&&Vc[this.text.charCodeAt(r)];r--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const r=new jc;return r.text=this.text.substring(e,t),r.sectionIndex=this.sectionIndex.slice(e,t),r.sections=this.sections,r}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(Nc.forText(e.scale,e.fontStack||t));const r=this.sections.length-1;for(let i=0;i<e.text.length;++i)this.sectionIndex.push(r)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void S("Can't add FormattedSection with an empty image.");const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCharCode(r),this.sections.push(Nc.forImage(t)),this.sectionIndex.push(this.sections.length-1)):S("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Uc(t,r,i,n,o,a,s,l,c,u,d,h,p,f,m){const g=jc.fromFeature(t,o);let y;h===e.ah.vertical&&g.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:b}=Un;if(_&&1===g.sections.length){y=[];const e=_(g.toString(),Yc(g,u,a,r,n,f));for(const t of e){const e=new jc;e.text=t,e.sections=g.sections;for(let r=0;r<t.length;r++)e.sectionIndex.push(0);y.push(e)}}else if(b){y=[];const e=b(g.text,g.sectionIndex,Yc(g,u,a,r,n,f));for(const t of e){const e=new jc;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,y.push(e)}}else y=function(e,t){const r=[],i=e.text;let n=0;for(const o of t)r.push(e.substring(n,o)),n=o;return n<i.length&&r.push(e.substring(n,i.length)),r}(g,Yc(g,u,a,r,n,f));const v=[],x={positionedLines:v,text:g.toString(),top:d[1],bottom:d[1],left:d[0],right:d[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(t,r,i,n,o,a,s,l,c,u,d,h){let p=0,f=Fc,m=0,g=0;const y="right"===l?1:"left"===l?0:.5;let _=0;for(const S of o){S.trim();const o=S.getMaxScale(),s=(o-1)*nc,l={positionedGlyphs:[],lineOffset:0};t.positionedLines[_]=l;const v=l.positionedGlyphs;let x=0;if(!S.length()){f+=a,++_;continue}for(let a=0;a<S.length();a++){const l=S.getSection(a),m=S.getSectionIndex(a),g=S.getCharCode(a);let y=0,_=null,w=null,I=null,T=nc;const k=!(c===e.ah.horizontal||!d&&!Dn(g)||d&&(Vc[g]||(b=g,/\p{sc=Arab}/u.test(String.fromCodePoint(b)))));if(l.imageName){const e=n[l.imageName];if(!e)continue;I=l.imageName,t.iconsInText=t.iconsInText||!0,w=e.paddedRect;const r=e.displaySize;l.scale=l.scale*nc/h,_={width:r[0],height:r[1],left:Bc,top:-Oc,advance:k?r[1]:r[0]},y=s+(nc-r[1]*l.scale),T=_.advance;const i=k?r[0]*l.scale-nc*o:r[1]*l.scale-nc*o;i>0&&i>x&&(x=i)}else{const e=i[l.fontStack],t=e&&e[g];if(t&&t.rect)w=t.rect,_=t.metrics;else{const e=r[l.fontStack],t=e&&e[g];if(!t)continue;_=t.metrics}y=(o-l.scale)*nc}k?(t.verticalizable=!0,v.push({glyph:g,imageName:I,x:p,y:f+y,vertical:k,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:_,rect:w}),p+=T*l.scale+u):(v.push({glyph:g,imageName:I,x:p,y:f+y,vertical:k,scale:l.scale,fontStack:l.fontStack,sectionIndex:m,metrics:_,rect:w}),p+=_.advance*l.scale+u)}0!==v.length&&(m=Math.max(p-u,m),Jc(v,0,v.length-1,y,x)),p=0;const w=a*o+x;l.lineOffset=Math.max(x,s),f+=w,g=Math.max(w,g),++_}var b;const v=f-Fc,{horizontalAlign:x,verticalAlign:w}=Kc(s);(function(e,t,r,i,n,o,a,s,l){const c=(t-r)*n;let u=0;u=o!==a?-s*i-Fc:(-i*l+.5)*a;for(const d of e)for(const e of d.positionedGlyphs)e.x+=c,e.y+=u})(t.positionedLines,y,x,w,m,g,a,v,o.length),t.top+=-w*v,t.bottom=t.top+v,t.left+=-x*m,t.right=t.left+m}(x,r,i,n,y,s,l,c,h,u,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(v)&&x}const Vc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},$c={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Wc={40:!0};function Hc(e,t,r,i,n,o){if(t.imageName){const e=i[t.imageName];return e?e.displaySize[0]*t.scale*nc/o+n:0}{const i=r[t.fontStack],o=i&&i[e];return o?o.metrics.advance*t.scale+n:0}}function Gc(e,t,r,i){const n=Math.pow(e-t,2);return i?e<t?n/2:2*n:n+Math.abs(r)*r}function qc(e,t,r){let i=0;return 10===e&&(i-=1e4),r&&(i+=150),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function Zc(e,t,r,i,n,o){let a=null,s=Gc(t,r,n,o);for(const l of i){const e=Gc(t-l.x,r,n,o)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function Xc(e){return e?Xc(e.priorBreak).concat(e.index):[]}function Yc(e,t,r,i,n,o){if(!e)return[];const a=[],s=function(e,t,r,i,n,o){let a=0;for(let s=0;s<e.length();s++){const r=e.getSection(s);a+=Hc(e.getCharCode(s),r,i,n,t,o)}return a/Math.max(1,Math.ceil(a/r))}(e,t,r,i,n,o),l=e.text.indexOf("\u200b")>=0;let c=0;for(let d=0;d<e.length();d++){const r=e.getSection(d),h=e.getCharCode(d);if(Vc[h]||(c+=Hc(h,r,i,n,t,o)),d<e.length()-1){const t=!((u=h)<11904)&&(!!An["CJK Compatibility Forms"](u)||!!An["CJK Compatibility"](u)||!!An["CJK Strokes"](u)||!!An["CJK Symbols and Punctuation"](u)||!!An["Enclosed CJK Letters and Months"](u)||!!An["Halfwidth and Fullwidth Forms"](u)||!!An["Ideographic Description Characters"](u)||!!An["Vertical Forms"](u)||Bn.test(String.fromCodePoint(u)));($c[h]||t||r.imageName||d!==e.length()-2&&Wc[e.getCharCode(d+1)])&&a.push(Zc(d+1,c,s,a,qc(h,e.getCharCode(d+1),t&&l),!1))}}var u;return Xc(Zc(e.length(),c,s,a,0,!0))}function Kc(e){let t=.5,r=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function Jc(e,t,r,i,n){if(!i&&!n)return;const o=e[r],a=(e[r].x+o.metrics.advance*o.scale)*i;for(let s=t;s<=r;s++)e[s].x-=a,e[s].y+=n}function Qc(e,t,r){const{horizontalAlign:i,verticalAlign:n}=Kc(r),o=t[0]-e.displaySize[0]*i,a=t[1]-e.displaySize[1]*n;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function eu(e){var t,r;let i=e.left,n=e.top,o=e.right-i,a=e.bottom-n;const s=null!==(t=e.image.textFitWidth)&&void 0!==t?t:"stretchOrShrink",l=null!==(r=e.image.textFitHeight)&&void 0!==r?r:"stretchOrShrink",c=(e.image.content[2]-e.image.content[0])/(e.image.content[3]-e.image.content[1]);if("proportional"===l){if("stretchOnly"===s&&o/a<c||"proportional"===s){const e=Math.ceil(a*c);i*=e/o,o=e}}else if("proportional"===s&&"stretchOnly"===l&&0!==c&&o/a>c){const e=Math.ceil(o/c);n*=e/a,a=e}return{x1:i,y1:n,x2:i+o,y2:n+a}}function tu(e,t,r,i,n,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,d,h,p;"width"===r||"both"===r?(p=n[0]+l-i[3],d=n[0]+c+i[1]):(p=n[0]+(l+c-a.displaySize[0])/2,d=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===r||"both"===r?(u=n[1]+f-i[0],h=n[1]+m+i[2]):(u=n[1]+(f+m-a.displaySize[1])/2,h=u+a.displaySize[1]),{image:a,top:u,right:d,bottom:h,left:p,collisionPadding:s}}const ru=255,iu=128,nu=ru*iu;function ou(e,t){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new Vn(e+1))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:i}=r;let n=0;for(;n<t.length&&t[n]<=e;)n++;n=Math.max(0,n-1);let o=n;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[n],s=t[o];return"composite"===r.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:a,maxZoom:s,minSize:r.evaluate(new Vn(a)),maxSize:r.evaluate(new Vn(s)),interpolationType:i}}}function au(e,t,r){let i="never";const n=e.get(t);return n?i=n:e.get(r)&&(i="always"),i}const su=pl.VectorTileFeature.types,lu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function cu(e,t,r,i,n,o,a,s,l,c,u,d,h){const p=s?Math.min(nu,Math.round(s[0])):0,f=s?Math.min(nu,Math.round(s[1])):0;e.emplaceBack(t,r,Math.round(32*i),Math.round(32*n),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*d,256*h)}function uu(e,t,r){e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r),e.emplaceBack(t.x,t.y,r)}function du(e){for(const t of e.sections)if(jn(t.text))return!0;return!1}class hu{constructor(e){this.layoutVertexArray=new Qo,this.indexArray=new na,this.programConfigurations=e,this.segments=new la,this.dynamicLayoutVertexArray=new ea,this.opacityVertexArray=new ta,this.hasVisibleVertices=!1,this.placedSymbolArray=new Lo}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,r,i){this.isEmpty()||(r&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Jl.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,lu,!0),this.opacityVertexBuffer.itemSize=1),(r||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}xn("SymbolBuffers",hu);class pu{constructor(e,t,r){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new r,this.segments=new la,this.collisionVertexArray=new ia}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Ql.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}xn("CollisionBuffers",pu);class fu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=cs([]),this.placementViewportMatrix=cs([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ou(this.zoom,r["text-size"]),this.iconSizeData=ou(this.zoom,r["icon-size"]);const i=this.layers[0].layout,n=i.get("symbol-sort-key"),o=i.get("symbol-z-order");this.canOverlap="never"!==au(i,"text-overlap","text-allow-overlap")||"never"!==au(i,"icon-overlap","icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==o&&!n.isConstant(),this.sortFeaturesByY=("viewport-y"===o||"auto"===o&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map((t=>e.ah[t]))),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=t.sourceID}createArrays(){this.text=new hu(new Ba(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new hu(new Ba(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new jo,this.lineVertexArray=new Uo,this.symbolInstances=new No,this.textAnchorOffsets=new $o}calculateGlyphDependencies(e,t,r,i,n){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(r||i)&&n){const r=ic[e.charAt(o)];r&&(t[r.charCodeAt(0)]=!0)}}populate(t,r,i){const n=this.layers[0],o=n.layout,a=o.get("text-font"),s=o.get("text-field"),l=o.get("icon-image"),c=("constant"!==s.value.kind||s.value.value instanceof Ye&&!s.value.value.isEmpty()||s.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==l.value.kind||!!l.value.value||Object.keys(l.parameters).length>0,d=o.get("symbol-sort-key");if(this.features=[],!c&&!u)return;const h=r.iconDependencies,p=r.glyphDependencies,f=r.availableImages,m=new Vn(this.zoom);for(const{feature:g,id:y,index:_,sourceLayerIndex:b}of t){const t=n._featureFilter.needGeometry,r=Ua(g,t);if(!n._featureFilter.filter(m,r,i))continue;let s,l;if(t||(r.geometry=ja(g)),c){const e=n.getValueAndResolveTokens("text-field",r,i,f),t=Ye.factory(e),o=this.hasRTLText=this.hasRTLText||du(t);(!o||"unavailable"===Un.getRTLTextPluginStatus()||o&&Un.isParsed())&&(s=rc(t,n,r))}if(u){const e=n.getValueAndResolveTokens("icon-image",r,i,f);l=e instanceof et?e:et.fromString(e)}if(!s&&!l)continue;const v=this.sortFeaturesByKey?d.evaluate(r,{},i):void 0;if(this.features.push({id:y,text:s,icon:l,index:_,sourceLayerIndex:b,geometry:r.geometry,properties:g.properties,type:su[g.type],sortKey:v}),l&&(h[l.name]=!0),s){const t=a.evaluate(r,{},i).join(","),n="viewport"!==o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(e.ah.vertical)>=0;for(const e of s.sections)if(e.image)h[e.image.name]=!0;else{const r=Pn(s.toString()),i=e.fontStack||t,o=p[i]=p[i]||{};this.calculateGlyphDependencies(e.text,o,n,this.allowVerticalPlacement,r)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},r={},i=[];let n=0;function o(t){i.push(e[t]),n++}function a(e,t,n){const o=r[e];return delete r[e],r[t]=o,i[o].geometry[0].pop(),i[o].geometry[0]=i[o].geometry[0].concat(n[0]),o}function s(e,r,n){const o=t[r];return delete t[r],t[e]=o,i[o].geometry[0].shift(),i[o].geometry[0]=n[0].concat(i[o].geometry[0]),o}function l(e,t,r){const i=r?t[0][t[0].length-1]:t[0][0];return`${e}:${i.x}:${i.y}`}for(let c=0;c<e.length;c++){const u=e[c],d=u.geometry,h=u.text?u.text.toString():null;if(!h){o(c);continue}const p=l(h,d),f=l(h,d,!0);if(p in r&&f in t&&r[p]!==t[f]){const e=s(p,f,d),n=a(p,f,i[e].geometry);delete t[p],delete r[f],r[l(h,i[n].geometry,!0)]=n,i[e].geometry=null}else p in r?a(p,f,d):f in t?s(p,f,d):(o(c),t[p]=n-1,r[f]=n-1)}return i.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const r=this.lineVertexArray.length;if(void 0!==e.segment){let r=e.dist(t[e.segment+1]),i=e.dist(t[e.segment]);const n={};for(let o=e.segment+1;o<t.length;o++)n[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:r},o<t.length-1&&(r+=t[o+1].dist(t[o]));for(let o=e.segment||0;o>=0;o--)n[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:i},o>0&&(i+=t[o-1].dist(t[o]));for(let e=0;e<t.length;e++){const t=n[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}}addSymbols(t,r,i,n,o,a,s,l,c,u,d,h){const p=t.indexArray,f=t.layoutVertexArray,m=t.segments.prepareSegment(4*r.length,f,p,this.canOverlap?a.sortKey:void 0),g=this.glyphOffsetArray.length,y=m.vertexLength,_=this.allowVerticalPlacement&&s===e.ah.vertical?Math.PI/2:0,b=a.text&&a.text.sections;for(let e=0;e<r.length;e++){const{tl:n,tr:o,bl:s,br:c,tex:u,pixelOffsetTL:d,pixelOffsetBR:g,minFontScaleX:y,minFontScaleY:v,glyphOffset:x,isSDF:w,sectionIndex:S}=r[e],I=m.vertexLength,T=x[1];cu(f,l.x,l.y,n.x,T+n.y,u.x,u.y,i,w,d.x,d.y,y,v),cu(f,l.x,l.y,o.x,T+o.y,u.x+u.w,u.y,i,w,g.x,d.y,y,v),cu(f,l.x,l.y,s.x,T+s.y,u.x,u.y+u.h,i,w,d.x,g.y,y,v),cu(f,l.x,l.y,c.x,T+c.y,u.x+u.w,u.y+u.h,i,w,g.x,g.y,y,v),uu(t.dynamicLayoutVertexArray,l,_),p.emplaceBack(I,I+1,I+2),p.emplaceBack(I+1,I+2,I+3),m.vertexLength+=4,m.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),e!==r.length-1&&S===r[e+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,a,a.index,{},h,b&&b[S])}t.placedSymbolArray.emplaceBack(l.x,l.y,g,this.glyphOffsetArray.length-g,y,c,u,l.segment,i?i[0]:0,i?i[1]:0,n[0],n[1],s,0,!1,0,d)}_addCollisionDebugVertex(e,t,r,i,n,o){return t.emplaceBack(0,0),e.emplaceBack(r.x,r.y,i,n,Math.round(o.x),Math.round(o.y))}addCollisionDebugVertices(e,t,r,i,n,a,s){const l=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),c=l.vertexLength,u=n.layoutVertexArray,d=n.collisionVertexArray,h=s.anchorX,p=s.anchorY;this._addCollisionDebugVertex(u,d,a,h,p,new o(e,t)),this._addCollisionDebugVertex(u,d,a,h,p,new o(r,t)),this._addCollisionDebugVertex(u,d,a,h,p,new o(r,i)),this._addCollisionDebugVertex(u,d,a,h,p,new o(e,i)),l.vertexLength+=4;const f=n.indexArray;f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),l.primitiveLength+=4}addDebugCollisionBoxes(e,t,r,i){for(let n=e;n<t;n++){const e=this.collisionBoxArray.get(n);this.addCollisionDebugVertices(e.x1,e.y1,e.x2,e.y2,i?this.textCollisionBox:this.iconCollisionBox,e.anchorPoint,r)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pu(ra,ec.members,oa),this.iconCollisionBox=new pu(ra,ec.members,oa);for(let e=0;e<this.symbolInstances.length;e++){const t=this.symbolInstances.get(e);this.addDebugCollisionBoxes(t.textBoxStartIndex,t.textBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.verticalTextBoxStartIndex,t.verticalTextBoxEndIndex,t,!0),this.addDebugCollisionBoxes(t.iconBoxStartIndex,t.iconBoxEndIndex,t,!1),this.addDebugCollisionBoxes(t.verticalIconBoxStartIndex,t.verticalIconBoxEndIndex,t,!1)}}_deserializeCollisionBoxesForSymbol(e,t,r,i,n,o,a,s,l){const c={};for(let u=t;u<r;u++){const t=e.get(u);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let u=i;u<n;u++){const t=e.get(u);c.verticalTextBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalTextFeatureIndex=t.featureIndex;break}for(let u=o;u<a;u++){const t=e.get(u);c.iconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.iconFeatureIndex=t.featureIndex;break}for(let u=s;u<l;u++){const t=e.get(u);c.verticalIconBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.verticalIconFeatureIndex=t.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,r.textBoxStartIndex,r.textBoxEndIndex,r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r.iconBoxStartIndex,r.iconBoxEndIndex,r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const r=e.placedSymbolArray.get(t),i=r.vertexStartIndex+4*r.numGlyphs;for(let n=r.vertexStartIndex;n<i;n+=4)e.indexArray.emplaceBack(n,n+1,n+2),e.indexArray.emplaceBack(n+1,n+2,n+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),r=Math.cos(e),i=[],n=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);i.push(0|Math.round(t*e.anchorX+r*e.anchorY)),n.push(e.featureIndex)}return o.sort(((e,t)=>i[e]-i[t]||n[t]-n[e])),o}addToSortKeyRanges(e,t){const r=this.sortKeyRanges[this.sortKeyRanges.length-1];r&&r.sortKey===t?r.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach(((e,t,r)=>{e>=0&&r.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)})),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mu,gu;xn("SymbolBucket",fu,{omit:["layers","collisionBoxArray","features","compareText"]}),fu.MAX_GLYPHS=65535,fu.addDynamicAttributes=uu;var yu={get paint(){return gu=gu||new ro({"icon-opacity":new Jn(G.paint_symbol["icon-opacity"]),"icon-color":new Jn(G.paint_symbol["icon-color"]),"icon-halo-color":new Jn(G.paint_symbol["icon-halo-color"]),"icon-halo-width":new Jn(G.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Jn(G.paint_symbol["icon-halo-blur"]),"icon-translate":new Kn(G.paint_symbol["icon-translate"]),"icon-translate-anchor":new Kn(G.paint_symbol["icon-translate-anchor"]),"text-opacity":new Jn(G.paint_symbol["text-opacity"]),"text-color":new Jn(G.paint_symbol["text-color"],{runtimeType:he,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Jn(G.paint_symbol["text-halo-color"]),"text-halo-width":new Jn(G.paint_symbol["text-halo-width"]),"text-halo-blur":new Jn(G.paint_symbol["text-halo-blur"]),"text-translate":new Kn(G.paint_symbol["text-translate"]),"text-translate-anchor":new Kn(G.paint_symbol["text-translate-anchor"])})},get layout(){return mu=mu||new ro({"symbol-placement":new Kn(G.layout_symbol["symbol-placement"]),"symbol-spacing":new Kn(G.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Kn(G.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Jn(G.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Kn(G.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Kn(G.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Kn(G.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Kn(G.layout_symbol["icon-ignore-placement"]),"icon-optional":new Kn(G.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Kn(G.layout_symbol["icon-rotation-alignment"]),"icon-size":new Jn(G.layout_symbol["icon-size"]),"icon-text-fit":new Kn(G.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Kn(G.layout_symbol["icon-text-fit-padding"]),"icon-image":new Jn(G.layout_symbol["icon-image"]),"icon-rotate":new Jn(G.layout_symbol["icon-rotate"]),"icon-padding":new Jn(G.layout_symbol["icon-padding"]),"icon-keep-upright":new Kn(G.layout_symbol["icon-keep-upright"]),"icon-offset":new Jn(G.layout_symbol["icon-offset"]),"icon-anchor":new Jn(G.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Kn(G.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Kn(G.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Kn(G.layout_symbol["text-rotation-alignment"]),"text-field":new Jn(G.layout_symbol["text-field"]),"text-font":new Jn(G.layout_symbol["text-font"]),"text-size":new Jn(G.layout_symbol["text-size"]),"text-max-width":new Jn(G.layout_symbol["text-max-width"]),"text-line-height":new Kn(G.layout_symbol["text-line-height"]),"text-letter-spacing":new Jn(G.layout_symbol["text-letter-spacing"]),"text-justify":new Jn(G.layout_symbol["text-justify"]),"text-radial-offset":new Jn(G.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Kn(G.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Jn(G.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Jn(G.layout_symbol["text-anchor"]),"text-max-angle":new Kn(G.layout_symbol["text-max-angle"]),"text-writing-mode":new Kn(G.layout_symbol["text-writing-mode"]),"text-rotate":new Jn(G.layout_symbol["text-rotate"]),"text-padding":new Kn(G.layout_symbol["text-padding"]),"text-keep-upright":new Kn(G.layout_symbol["text-keep-upright"]),"text-transform":new Jn(G.layout_symbol["text-transform"]),"text-offset":new Jn(G.layout_symbol["text-offset"]),"text-allow-overlap":new Kn(G.layout_symbol["text-allow-overlap"]),"text-overlap":new Kn(G.layout_symbol["text-overlap"]),"text-ignore-placement":new Kn(G.layout_symbol["text-ignore-placement"]),"text-optional":new Kn(G.layout_symbol["text-optional"])})}};class _u{constructor(e){if(void 0===e.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:le,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}xn("FormatSectionOverride",_u,{omit:["defaultValue"]});class bu extends no{constructor(e){super(e,yu)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const r of e)t.indexOf(r)<0&&t.push(r);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,r,i){const n=this.layout.get(e).evaluate(t,{},r,i),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||_i(o.value)||!n?n:function(e,t){return t.replace(/{([^{}]+)}/g,((t,r)=>e&&r in e?String(e[r]):""))}(t.properties,n)}createBucket(e){return new fu(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of yu.paint.overridableProperties){if(!bu.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),r=new _u(t),i=new yi(r,t.property.specification);let n=null;n="constant"===t.value.kind||"source"===t.value.kind?new vi("source",i):new xi("composite",i,t.value.zoomStops),this.paint._values[e]=new Xn(t.property,n,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&bu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const r=e.get("text-field"),i=yu.paint.properties[t];let n=!1;const o=e=>{for(const t of e)if(i.overrides&&i.overrides.hasOverride(t))return void(n=!0)};if("constant"===r.value.kind&&r.value.value instanceof Ye)o(r.value.value.sections);else if("source"===r.value.kind){const e=t=>{n||(t instanceof ot&&it(t.value)===ge?o(t.value.sections):t instanceof Ht?o(t.sections):t.eachChild(e))},t=r.value;t._styleExpression&&e(t._styleExpression.expression)}return n}}let vu;var xu={get paint(){return vu=vu||new ro({"background-color":new Kn(G.paint_background["background-color"]),"background-pattern":new eo(G.paint_background["background-pattern"]),"background-opacity":new Kn(G.paint_background["background-opacity"])})}};class wu extends no{constructor(e){super(e,xu)}}let Su;var Iu={get paint(){return Su=Su||new ro({"raster-opacity":new Kn(G.paint_raster["raster-opacity"]),"raster-hue-rotate":new Kn(G.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Kn(G.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Kn(G.paint_raster["raster-brightness-max"]),"raster-saturation":new Kn(G.paint_raster["raster-saturation"]),"raster-contrast":new Kn(G.paint_raster["raster-contrast"]),"raster-resampling":new Kn(G.paint_raster["raster-resampling"]),"raster-fade-duration":new Kn(G.paint_raster["raster-fade-duration"])})}};class Tu extends no{constructor(e){super(e,Iu)}}class ku extends no{constructor(e){super(e,{}),this.onAdd=e=>{this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)},this.onRemove=e=>{this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)},this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Eu{constructor(e){this._methodToThrottle=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Au=6371008.8;class Pu{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Pu(g(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,r=this.lat*t,i=e.lat*t,n=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return Au*Math.acos(Math.min(n,1))}static convert(e){if(e instanceof Pu)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Pu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Pu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const Cu=2*Math.PI*Au;function Mu(e){return Cu*Math.cos(e*Math.PI/180)}function Ou(e){return(180+e)/360}function Ru(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function Bu(e,t){return e/Mu(t)}function Du(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}class zu{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+r}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=Pu.convert(e);return new zu(Ou(r.lng),Ru(r.lat),Bu(t,r.lat))}toLngLat(){return new Pu(360*this.x-180,Du(this.y))}toAltitude(){return this.z*Mu(Du(this.y))}meterInMercatorCoordinateUnits(){return 1/Cu*(e=Du(this.y),1/Math.cos(e*Math.PI/180));var e}}function Lu(e,t,r){var i=2*Math.PI*6378137/256/Math.pow(2,r);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class Fu{constructor(e,t,r){if(!function(e,t,r){return!(e<0||e>25||r<0||r>=Math.pow(2,e)||t<0||t>=Math.pow(2,e))}(e,t,r))throw new Error(`x=${t}, y=${r}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=t,this.y=r,this.key=Uu(0,e,e,t,r)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t,r){const i=(o=this.y,a=this.z,s=Lu(256*(n=this.x),256*(o=Math.pow(2,a)-o-1),a),l=Lu(256*(n+1),256*(o+1),a),s[0]+","+s[1]+","+l[0]+","+l[1]);var n,o,a,s,l;const c=function(e,t,r){let i,n="";for(let o=e;o>0;o--)i=1<<o-1,n+=(t&i?1:0)+(r&i?2:0);return n}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===r?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,t>1?"@2x":"").replace(/{quadkey}/g,c).replace(/{bbox-epsg-3857}/g,i)}isChildOf(e){const t=this.z-e.z;return t>0&&e.x===this.x>>t&&e.y===this.y>>t}getTilePoint(e){const t=Math.pow(2,this.z);return new o((e.x*t-this.x)*La,(e.y*t-this.y)*La)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Nu{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Uu(e,t.z,t.z,t.x,t.y)}}class ju{constructor(e,t,r,i,n){if(e<r)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${r}`);this.overscaledZ=e,this.wrap=t,this.canonical=new Fu(r,+i,+n),this.key=Uu(t,e,r,i,n)}clone(){return new ju(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const t=this.canonical.z-e;return e>this.canonical.z?new ju(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ju(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-e;return e>this.canonical.z?Uu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y):Uu(this.wrap*+t,e,e,this.canonical.x>>r,this.canonical.y>>r)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new ju(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new ju(t,this.wrap,t,r,i),new ju(t,this.wrap,t,r+1,i),new ju(t,this.wrap,t,r,i+1),new ju(t,this.wrap,t,r+1,i+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new ju(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new ju(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Nu(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new zu(e.x-this.wrap,e.y))}}function Uu(e,t,r,i,n){(e*=2)<0&&(e=-1*e-1);const o=1<<r;return(o*o*e+o*n+i).toString(36)+r.toString(36)+t.toString(36)}xn("CanonicalTileID",Fu),xn("OverscaledTileID",ju,{omit:["posMatrix"]});class Vu{constructor(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(r&&!["mapbox","terrarium","custom"].includes(r))return void S(`"${r}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=t.height;const s=this.dim=t.height-2;switch(this.data=new Uint32Array(t.data.buffer),r){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=i,this.greenFactor=n,this.blueFactor=o,this.baseShift=a;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let l=0;l<s;l++)this.data[this._idx(-1,l)]=this.data[this._idx(0,l)],this.data[this._idx(s,l)]=this.data[this._idx(s-1,l)],this.data[this._idx(l,-1)]=this.data[this._idx(l,0)],this.data[this._idx(l,s)]=this.data[this._idx(l,s-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(s,-1)]=this.data[this._idx(s-1,0)],this.data[this._idx(-1,s)]=this.data[this._idx(0,s-1)],this.data[this._idx(s,s)]=this.data[this._idx(s-1,s-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let l=0;l<s;l++)for(let e=0;e<s;e++){const t=this.get(l,e);t>this.max&&(this.max=t),t<this.min&&(this.min=t)}}get(e,t){const r=new Uint8Array(this.data.buffer),i=4*this._idx(e,t);return this.unpack(r[i],r[i+1],r[i+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}unpack(e,t,r){return e*this.redFactor+t*this.greenFactor+r*this.blueFactor-this.baseShift}getPixels(){return new Ss({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,r){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=t*this.dim,n=t*this.dim+this.dim,o=r*this.dim,a=r*this.dim+this.dim;switch(t){case-1:i=n-1;break;case 1:n=i+1}switch(r){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-r*this.dim;for(let c=o;c<a;c++)for(let t=i;t<n;t++)this.data[this._idx(t,c)]=e.data[this._idx(t+s,c+l)]}}xn("DEMData",Vu);class $u{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const r=e[t];this._stringToNumber[r]=t,this._numberToString[t]=r}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class Wu{constructor(e,t,r,i,n){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=r,e._y=i,this.properties=e.properties,this.id=n}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}class Hu{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new bn(La,16,0),this.grid3D=new bn(La,16,0),this.featureIndexArray=new Ho,this.promoteId=t}insert(e,t,r,i,n,o){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(r,i,n);const s=o?this.grid3D:this.grid;for(let l=0;l<t.length;l++){const e=t[l],r=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const i=e[t];r[0]=Math.min(r[0],i.x),r[1]=Math.min(r[1],i.y),r[2]=Math.max(r[2],i.x),r[3]=Math.max(r[3],i.y)}r[0]<La&&r[1]<La&&r[2]>=0&&r[3]>=0&&s.insert(a,r[0],r[1],r[2],r[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new pl.VectorTile(new Ec(this.rawTileData)).layers,this.sourceLayerCoder=new $u(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,r,i){this.loadVTLayers();const n=e.params||{},a=La/e.tileSize/e.scale,s=Ei(n.filter),l=e.queryGeometry,c=e.queryPadding*a,u=qu(l),d=this.grid.query(u.minX-c,u.minY-c,u.maxX+c,u.maxY+c),h=qu(e.cameraQueryGeometry),p=this.grid3D.query(h.minX-c,h.minY-c,h.maxX+c,h.maxY+c,((t,r,i,n)=>function(e,t,r,i,n){for(const o of e)if(t<=o.x&&r<=o.y&&i>=o.x&&n>=o.y)return!0;const a=[new o(t,r),new o(t,n),new o(i,n),new o(i,r)];if(e.length>2)for(const o of a)if(Qa(e,o))return!0;for(let o=0;o<e.length-1;o++)if(es(e[o],e[o+1],a))return!0;return!1}(e.cameraQueryGeometry,t-c,r-c,i+c,n+c)));for(const o of p)d.push(o);d.sort(Zu);const f={};let m;for(let o=0;o<d.length;o++){const c=d[o];if(c===m)continue;m=c;const u=this.featureIndexArray.get(c);let h=null;this.loadMatchingFeature(f,u.bucketIndex,u.sourceLayerIndex,u.featureIndex,s,n.layers,n.availableImages,t,r,i,((t,r,i)=>(h||(h=ja(t)),r.queryIntersectsFeature(l,t,i,h,this.z,e.transform,a,e.pixelPosMatrix))))}return f}loadMatchingFeature(e,t,r,i,n,o,a,s,l,c,u){const d=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let r=0;r<e.length;r++)if(t.indexOf(e[r])>=0)return!0;return!1}(o,d))return;const h=this.sourceLayerCoder.decode(r),p=this.vtLayers[h].feature(i);if(n.needGeometry){const e=Ua(p,!0);if(!n.filter(new Vn(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new Vn(this.tileID.overscaledZ),p))return;const f=this.getId(p,h);for(let m=0;m<d.length;m++){const t=d[m];if(o&&o.indexOf(t)<0)continue;const r=s[t];if(!r)continue;let n={};f&&c&&(n=c.getState(r.sourceLayer||"_geojsonTileLayer",f));const h=y({},l[t]);h.paint=Gu(h.paint,r.paint,p,n,a),h.layout=Gu(h.layout,r.layout,p,n,a);const g=!u||u(p,r,n);if(!g)continue;const _=new Wu(p,this.z,this.x,this.y,f);_.layer=h;let b=e[t];void 0===b&&(b=e[t]=[]),b.push({featureIndex:i,feature:_,intersectionZ:g})}}lookupSymbolFeatures(e,t,r,i,n,o,a,s){const l={};this.loadVTLayers();const c=Ei(n);for(const u of e)this.loadMatchingFeature(l,r,i,u,c,o,a,s,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const r of t)if(e===r)return!0;return!1}getId(e,t){let r=e.id;return this.promoteId&&(r=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof r&&(r=Number(r))),r}}function Gu(e,t,r,i,n){return b(e,((e,o)=>{const a=t instanceof Yn?t.get(o):null;return a&&a.evaluate?a.evaluate(r,i,n):a}))}function qu(e){let t=1/0,r=1/0,i=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x),n=Math.max(n,o.y);return{minX:t,minY:r,maxX:i,maxY:n}}function Zu(e,t){return t-e}function Xu(e,t,r,i,n){const a=[];for(let s=0;s<e.length;s++){const l=e[s];let c;for(let e=0;e<l.length-1;e++){let s=l[e],u=l[e+1];s.x<t&&u.x<t||(s.x<t?s=new o(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x<t&&(u=new o(t,s.y+(t-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y<r&&u.y<r||(s.y<r?s=new o(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round():u.y<r&&(u=new o(s.x+(r-s.y)/(u.y-s.y)*(u.x-s.x),r)._round()),s.x>=i&&u.x>=i||(s.x>=i?s=new o(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round():u.x>=i&&(u=new o(i,s.y+(i-s.x)/(u.x-s.x)*(u.y-s.y))._round()),s.y>=n&&u.y>=n||(s.y>=n?s=new o(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round():u.y>=n&&(u=new o(s.x+(n-s.y)/(u.y-s.y)*(u.x-s.x),n)._round()),c&&s.equals(c[c.length-1])||(c=[s],a.push(c)),c.push(u)))))}}return a}xn("FeatureIndex",Hu,{omit:["rawTileData","sourceLayerCoder"]});class Yu extends o{constructor(e,t,r,i){super(e,t),this.angle=r,void 0!==i&&(this.segment=i)}clone(){return new Yu(this.x,this.y,this.angle,this.segment)}}function Ku(e,t,r,i,n){if(void 0===t.segment||0===r)return!0;let o=t,a=t.segment+1,s=0;for(;s>-r/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<r/2;){const t=e[a],r=e[a+1];if(!r)return!1;let o=e[a-1].angleTo(t)-t.angleTo(r);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>n)return!1;a++,s+=t.dist(r)}return!0}function Ju(e){let t=0;for(let r=0;r<e.length-1;r++)t+=e[r].dist(e[r+1]);return t}function Qu(e,t,r){return e?.6*t*r:0}function ed(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function td(e,t,r,i,n,o){const a=Qu(r,n,o),s=ed(r,i)*o;let l=0;const c=Ju(e)/2;for(let u=0;u<e.length-1;u++){const r=e[u],i=e[u+1],n=r.dist(i);if(l+n>c){const o=(c-l)/n,d=Ct.number(r.x,i.x,o),h=Ct.number(r.y,i.y,o),p=new Yu(d,h,i.angleTo(r),u);return p._round(),!a||Ku(e,p,s,a,t)?p:void 0}l+=n}}function rd(e,t,r,i,n,o,a,s,l){const c=Qu(i,o,a),u=ed(i,n),d=u*a,h=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),id(e,h?t/2*s%t:(u/2+2*o)*a*s%t,t,c,r,d,h,!1,l)}function id(e,t,r,i,n,o,a,s,l){const c=o/2,u=Ju(e);let d=0,h=t-r,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],a=e[f+1],s=t.dist(a),m=a.angleTo(t);for(;h+r<d+s;){h+=r;const g=(h-d)/s,y=Ct.number(t.x,a.x,g),_=Ct.number(t.y,a.y,g);if(y>=0&&y<l&&_>=0&&_<l&&h-c>=0&&h+c<=u){const t=new Yu(y,_,m,f);t._round(),i&&!Ku(e,t,o,i,n)||p.push(t)}}d+=s}return s||p.length||a||(p=id(e,d/2,r,i,n,o,a,!0,l)),p}xn("Anchor",Yu);const nd=Bc;function od(e,t,r,i){const n=[],a=e.image,s=a.pixelRatio,l=a.paddedRect.w-2*nd,c=a.paddedRect.h-2*nd;let u={x1:e.left,y1:e.top,x2:e.right,y2:e.bottom};const d=a.stretchX||[[0,l]],h=a.stretchY||[[0,c]],p=(e,t)=>e+t[1]-t[0],f=d.reduce(p,0),m=h.reduce(p,0),g=l-f,y=c-m;let _=0,b=f,v=0,x=m,w=0,S=g,I=0,T=y;if(a.content&&i){const t=a.content,r=t[2]-t[0],i=t[3]-t[1];(a.textFitWidth||a.textFitHeight)&&(u=eu(e)),_=ad(d,0,t[0]),v=ad(h,0,t[1]),b=ad(d,t[0],t[2]),x=ad(h,t[1],t[3]),w=t[0]-_,I=t[1]-v,S=r-b,T=i-x}const k=u.x1,E=u.y1,A=u.x2-k,P=u.y2-E,C=(e,i,n,l)=>{const c=ld(e.stretch-_,b,A,k),u=cd(e.fixed-w,S,e.stretch,f),d=ld(i.stretch-v,x,P,E),h=cd(i.fixed-I,T,i.stretch,m),p=ld(n.stretch-_,b,A,k),g=cd(n.fixed-w,S,n.stretch,f),y=ld(l.stretch-v,x,P,E),C=cd(l.fixed-I,T,l.stretch,m),M=new o(c,d),O=new o(p,d),R=new o(p,y),B=new o(c,y),D=new o(u/s,h/s),z=new o(g/s,C/s),L=t*Math.PI/180;if(L){const e=Math.sin(L),t=Math.cos(L),r=[t,-e,e,t];M._matMult(r),O._matMult(r),B._matMult(r),R._matMult(r)}const F=e.stretch+e.fixed,N=i.stretch+i.fixed;return{tl:M,tr:O,bl:B,br:R,tex:{x:a.paddedRect.x+nd+F,y:a.paddedRect.y+nd+N,w:n.stretch+n.fixed-F,h:l.stretch+l.fixed-N},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:z,minFontScaleX:S/s/A,minFontScaleY:T/s/P,isSDF:r}};if(i&&(a.stretchX||a.stretchY)){const e=sd(d,g,f),t=sd(h,y,m);for(let r=0;r<e.length-1;r++){const i=e[r],o=e[r+1];for(let e=0;e<t.length-1;e++)n.push(C(i,t[e],o,t[e+1]))}}else n.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return n}function ad(e,t,r){let i=0;for(const n of e)i+=Math.max(t,Math.min(r,n[1]))-Math.max(t,Math.min(r,n[0]));return i}function sd(e,t,r){const i=[{fixed:-nd,stretch:0}];for(const[n,o]of e){const e=i[i.length-1];i.push({fixed:n-e.stretch,stretch:e.stretch}),i.push({fixed:n-e.stretch,stretch:e.stretch+(o-n)})}return i.push({fixed:t+nd,stretch:r}),i}function ld(e,t,r,i){return e/t*r+i}function cd(e,t,r,i){return e-t*r/i}class ud{constructor(e,t,r,i,n,a,s,l,c,u){var d;if(this.boxStartIndex=e.length,c){let e=a.top,t=a.bottom;const r=a.collisionPadding;r&&(e-=r[1],t+=r[3]);let i=t-e;i>0&&(i=Math.max(10,i),this.circleDiameter=i)}else{const c=(null===(d=a.image)||void 0===d?void 0:d.content)&&(a.image.textFitWidth||a.image.textFitHeight)?eu(a):{x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};c.y1=c.y1*s-l[0],c.y2=c.y2*s+l[2],c.x1=c.x1*s-l[3],c.x2=c.x2*s+l[1];const h=a.collisionPadding;if(h&&(c.x1-=h[0]*s,c.y1-=h[1]*s,c.x2+=h[2]*s,c.y2+=h[3]*s),u){const e=new o(c.x1,c.y1),t=new o(c.x2,c.y1),r=new o(c.x1,c.y2),i=new o(c.x2,c.y2),n=u*Math.PI/180;e._rotate(n),t._rotate(n),r._rotate(n),i._rotate(n),c.x1=Math.min(e.x,t.x,r.x,i.x),c.x2=Math.max(e.x,t.x,r.x,i.x),c.y1=Math.min(e.y,t.y,r.y,i.y),c.y2=Math.max(e.y,t.y,r.y,i.y)}e.emplaceBack(t.x,t.y,c.x1,c.y1,c.x2,c.y2,r,i,n)}this.boxEndIndex=e.length}}class dd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:r}=this,i=t[e];for(;e>0;){const n=e-1>>1,o=t[n];if(r(i,o)>=0)break;t[e]=o,e=n}t[e]=i}_down(e){const{data:t,compare:r}=this,i=this.length>>1,n=t[e];for(;e<i;){let i=1+(e<<1);const o=i+1;if(o<this.length&&r(t[o],t[i])<0&&(i=o),r(t[i],n)>=0)break;t[e]=t[i],e=i}t[e]=n}}function hd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1/0,n=1/0,a=-1/0,s=-1/0;const l=e[0];for(let o=0;o<l.length;o++){const e=l[o];(!o||e.x<i)&&(i=e.x),(!o||e.y<n)&&(n=e.y),(!o||e.x>a)&&(a=e.x),(!o||e.y>s)&&(s=e.y)}const c=Math.min(a-i,s-n);let u=c/2;const d=new dd([],pd);if(0===c)return new o(i,n);for(let o=i;o<a;o+=c)for(let t=n;t<s;t+=c)d.push(new fd(o+u,t+u,u,e));let h=function(e){let t=0,r=0,i=0;const n=e[0];for(let o=0,a=n.length,s=a-1;o<a;s=o++){const e=n[o],a=n[s],l=e.x*a.y-a.x*e.y;r+=(e.x+a.x)*l,i+=(e.y+a.y)*l,t+=3*l}return new fd(r/t,i/t,0,e)}(e),p=d.length;for(;d.length;){const i=d.pop();(i.d>h.d||!h.d)&&(h=i,r&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-h.d<=t||(u=i.h/2,d.push(new fd(i.p.x-u,i.p.y-u,u,e)),d.push(new fd(i.p.x+u,i.p.y-u,u,e)),d.push(new fd(i.p.x-u,i.p.y+u,u,e)),d.push(new fd(i.p.x+u,i.p.y+u,u,e)),p+=4)}return r&&(console.log(`num probes: ${p}`),console.log(`best distance: ${h.d}`)),h.p}function pd(e,t){return t.max-e.max}function fd(e,t,r,i){this.p=new o(e,t),this.h=r,this.d=function(e,t){let r=!1,i=1/0;for(let n=0;n<t.length;n++){const o=t[n];for(let t=0,n=o.length,a=n-1;t<n;a=t++){const n=o[t],s=o[a];n.y>e.y!=s.y>e.y&&e.x<(s.x-n.x)*(e.y-n.y)/(s.y-n.y)+n.x&&(r=!r),i=Math.min(i,Ka(e,n,s))}}return(r?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}var md;e.aq=void 0,(md=e.aq||(e.aq={}))[md.center=1]="center",md[md.left=2]="left",md[md.right=3]="right",md[md.top=4]="top",md[md.bottom=5]="bottom",md[md["top-left"]=6]="top-left",md[md["top-right"]=7]="top-right",md[md["bottom-left"]=8]="bottom-left",md[md["bottom-right"]=9]="bottom-right";const gd=7,yd=Number.POSITIVE_INFINITY;function _d(e,t){return t[1]!==yd?function(e,t,r){let i=0,n=0;switch(t=Math.abs(t),r=Math.abs(r),e){case"top-right":case"top-left":case"top":n=r-gd;break;case"bottom-right":case"bottom-left":case"bottom":n=-r+gd}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}return[i,n]}(e,t[0],t[1]):function(e,t){let r=0,i=0;t<0&&(t=0);const n=t/Math.SQRT2;switch(e){case"top-right":case"top-left":i=n-gd;break;case"bottom-right":case"bottom-left":i=-n+gd;break;case"bottom":i=-t+gd;break;case"top":i=t-gd}switch(e){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=t;break;case"right":r=-t}return[r,i]}(e,t[0])}function bd(e,t,r){var i;const n=e.layout,o=null===(i=n.get("text-variable-anchor-offset"))||void 0===i?void 0:i.evaluate(t,{},r);if(o){const e=o.values,t=[];for(let r=0;r<e.length;r+=2){const i=t[r]=e[r],n=e[r+1].map((e=>e*nc));i.startsWith("top")?n[1]-=gd:i.startsWith("bottom")&&(n[1]+=gd),t[r+1]=n}return new Qe(t)}const a=n.get("text-variable-anchor");if(a){let i;i=void 0!==e._unevaluatedLayout.getValue("text-radial-offset")?[n.get("text-radial-offset").evaluate(t,{},r)*nc,yd]:n.get("text-offset").evaluate(t,{},r).map((e=>e*nc));const o=[];for(const e of a)o.push(e,_d(e,i));return new Qe(o)}return null}function vd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xd(t,r,i,n,o,a,s,l,c,u,d){let h=a.textMaxSize.evaluate(r,{});void 0===h&&(h=s);const p=t.layers[0].layout,f=p.get("icon-offset").evaluate(r,{},d),m=Sd(i.horizontal),g=s/24,y=t.tilePixelRatio*g,_=t.tilePixelRatio*h/24,b=t.tilePixelRatio*l,v=t.tilePixelRatio*p.get("symbol-spacing"),x=p.get("text-padding")*t.tilePixelRatio,w=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=e.get("icon-padding").evaluate(t,{},r),o=n&&n.values;return[o[0]*i,o[1]*i,o[2]*i,o[3]*i]}(p,r,d,t.tilePixelRatio),I=p.get("text-max-angle")/180*Math.PI,T="viewport"!==p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),k="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),E=p.get("symbol-placement"),A=v/2,P=p.get("icon-text-fit");let C;n&&"none"!==P&&(t.allowVerticalPlacement&&i.vertical&&(C=tu(n,i.vertical,P,p.get("icon-text-fit-padding"),f,g)),m&&(n=tu(n,m,P,p.get("icon-text-fit-padding"),f,g)));const M=(l,h)=>{h.x<0||h.x>=La||h.y<0||h.y>=La||function(t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g,y,_,b,v,x,w,I,T,k){const E=t.addToLineVertexArray(r,i);let A,P,C,M,O=0,R=0,B=0,D=0,z=-1,L=-1;const F={};let N=ya("");if(t.allowVerticalPlacement&&n.vertical){const e=l.layout.get("text-rotate").evaluate(x,{},T)+90;C=new ud(c,r,u,d,h,n.vertical,p,f,m,e),s&&(M=new ud(c,r,u,d,h,s,y,_,m,e))}if(o){const i=l.layout.get("icon-rotate").evaluate(x,{}),n="none"!==l.layout.get("icon-text-fit"),a=od(o,i,I,n),p=s?od(s,i,I,n):void 0;P=new ud(c,r,u,d,h,o,y,_,!1,i),O=4*a.length;const f=t.iconSizeData;let m=null;"source"===f.kind?(m=[iu*l.layout.get("icon-size").evaluate(x,{})],m[0]>nu&&S(`${t.layerIds[0]}: Value for "icon-size" is >= ${ru}. Reduce your "icon-size".`)):"composite"===f.kind&&(m=[iu*w.compositeIconSizes[0].evaluate(x,{},T),iu*w.compositeIconSizes[1].evaluate(x,{},T)],(m[0]>nu||m[1]>nu)&&S(`${t.layerIds[0]}: Value for "icon-size" is >= ${ru}. Reduce your "icon-size".`)),t.addSymbols(t.icon,a,m,v,b,x,e.ah.none,r,E.lineStartIndex,E.lineLength,-1,T),z=t.icon.placedSymbolArray.length-1,p&&(R=4*p.length,t.addSymbols(t.icon,p,m,v,b,x,e.ah.vertical,r,E.lineStartIndex,E.lineLength,-1,T),L=t.icon.placedSymbolArray.length-1)}const j=Object.keys(n.horizontal);for(const S of j){const i=n.horizontal[S];if(!A){N=ya(i.text);const e=l.layout.get("text-rotate").evaluate(x,{},T);A=new ud(c,r,u,d,h,i,p,f,m,e)}const o=1===i.positionedLines.length;if(B+=wd(t,r,i,a,l,m,x,g,E,n.vertical?e.ah.horizontal:e.ah.horizontalOnly,o?j:[S],F,z,w,T),o)break}n.vertical&&(D+=wd(t,r,n.vertical,a,l,m,x,g,E,e.ah.vertical,["vertical"],F,L,w,T));const U=A?A.boxStartIndex:t.collisionBoxArray.length,V=A?A.boxEndIndex:t.collisionBoxArray.length,$=C?C.boxStartIndex:t.collisionBoxArray.length,W=C?C.boxEndIndex:t.collisionBoxArray.length,H=P?P.boxStartIndex:t.collisionBoxArray.length,G=P?P.boxEndIndex:t.collisionBoxArray.length,q=M?M.boxStartIndex:t.collisionBoxArray.length,Z=M?M.boxEndIndex:t.collisionBoxArray.length;let X=-1;const Y=(e,t)=>e&&e.circleDiameter?Math.max(e.circleDiameter,t):t;X=Y(A,X),X=Y(C,X),X=Y(P,X),X=Y(M,X);const K=X>-1?1:0;K&&(X*=k/nc),t.glyphOffsetArray.length>=fu.MAX_GLYPHS&&S("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,x.sortKey);const J=bd(l,x,T),[Q,ee]=function(t,r){const i=t.length,n=null==r?void 0:r.values;if((null==n?void 0:n.length)>0)for(let o=0;o<n.length;o+=2){const r=n[o+1];t.emplaceBack(e.aq[n[o]],r[0],r[1])}return[i,t.length]}(t.textAnchorOffsets,J);t.symbolInstances.emplaceBack(r.x,r.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,z,L,N,U,V,$,W,H,G,q,Z,u,B,D,O,R,K,0,p,X,Q,ee)}(t,h,l,i,n,o,C,t.layers[0],t.collisionBoxArray,r.index,r.sourceLayerIndex,t.index,y,[x,x,x,x],T,c,b,w,k,f,r,a,u,d,s)};if("line"===E)for(const e of Xu(r.geometry,0,0,La,La)){const r=rd(e,v,I,i.vertical||m,n,24,_,t.overscaling,La);for(const i of r)m&&Id(t,m.text,A,i)||M(e,i)}else if("line-center"===E){for(const e of r.geometry)if(e.length>1){const t=td(e,I,i.vertical||m,n,24,_);t&&M(e,t)}}else if("Polygon"===r.type)for(const e of _r(r.geometry,0)){const t=hd(e,16);M(e[0],new Yu(t.x,t.y,0))}else if("LineString"===r.type)for(const e of r.geometry)M(e,new Yu(e[0].x,e[0].y,0));else if("Point"===r.type)for(const e of r.geometry)for(const t of e)M([t],new Yu(t.x,t.y,0))}function wd(e,t,r,i,n,a,s,l,c,u,d,h,p,f,m){const g=function(e,t,r,i,n,a,s,l){const c=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=[];for(const d of t.positionedLines)for(const e of d.positionedGlyphs){if(!e.rect)continue;const i=e.rect||{};let a=Oc+1,h=!0,p=1,f=0;const m=(n||l)&&e.vertical,g=e.metrics.advance*e.scale/2;if(l&&t.verticalizable&&(f=d.lineOffset/2-(e.imageName?-(nc-e.metrics.width*e.scale)/2:(e.scale-1)*nc)),e.imageName){const t=s[e.imageName];h=t.sdf,p=t.pixelRatio,a=Bc/p}const y=n?[e.x+g,e.y]:[0,0];let _=n?[0,0]:[e.x+g+r[0],e.y+r[1]-f],b=[0,0];m&&(b=_,_=[0,0]);const v=e.metrics.isDoubleResolution?2:1,x=(e.metrics.left-a)*e.scale-g+_[0],w=(-e.metrics.top-a)*e.scale+_[1],S=x+i.w/v*e.scale/p,I=w+i.h/v*e.scale/p,T=new o(x,w),k=new o(S,w),E=new o(x,I),A=new o(S,I);if(m){const t=new o(-g,g-Fc),r=-Math.PI/2,i=nc/2-g,n=new o(5-Fc-i,-(e.imageName?i:0)),a=new o(...b);T._rotateAround(r,t)._add(n)._add(a),k._rotateAround(r,t)._add(n)._add(a),E._rotateAround(r,t)._add(n)._add(a),A._rotateAround(r,t)._add(n)._add(a)}if(c){const e=Math.sin(c),t=Math.cos(c),r=[t,-e,e,t];T._matMult(r),k._matMult(r),E._matMult(r),A._matMult(r)}const P=new o(0,0),C=new o(0,0);u.push({tl:T,tr:k,bl:E,br:A,tex:i,writingMode:t.writingMode,glyphOffset:y,sectionIndex:e.sectionIndex,isSDF:h,pixelOffsetTL:P,pixelOffsetBR:C,minFontScaleX:0,minFontScaleY:0})}return u}(0,r,l,n,a,s,i,e.allowVerticalPlacement),y=e.textSizeData;let _=null;"source"===y.kind?(_=[iu*n.layout.get("text-size").evaluate(s,{})],_[0]>nu&&S(`${e.layerIds[0]}: Value for "text-size" is >= ${ru}. Reduce your "text-size".`)):"composite"===y.kind&&(_=[iu*f.compositeTextSizes[0].evaluate(s,{},m),iu*f.compositeTextSizes[1].evaluate(s,{},m)],(_[0]>nu||_[1]>nu)&&S(`${e.layerIds[0]}: Value for "text-size" is >= ${ru}. Reduce your "text-size".`)),e.addSymbols(e.text,g,_,l,a,s,u,t,c.lineStartIndex,c.lineLength,p,m);for(const o of d)h[o]=e.text.placedSymbolArray.length-1;return 4*g.length}function Sd(e){for(const t in e)return e[t];return null}function Id(e,t,r,i){const n=e.compareText;if(t in n){const e=n[t];for(let t=e.length-1;t>=0;t--)if(i.dist(e[t])<r)return!0}else n[t]=[];return n[t].push(i),!1}const Td=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kd{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=r>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const n=Td[15&r];if(!n)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new kd(a,o,n,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=r,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const n=Td.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(n<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+n]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Ed(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,r,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:a}=this,s=[0,n.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=a){for(let a=d;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=e&&s<=r&&c>=t&&c<=i&&l.push(n[a])}continue}const h=d+u>>1,p=o[2*h],f=o[2*h+1];p>=e&&p<=r&&f>=t&&f<=i&&l.push(n[h]),(0===c?e<=p:t<=f)&&(s.push(d),s.push(h-1),s.push(1-c)),(0===c?r>=p:i>=f)&&(s.push(h+1),s.push(u),s.push(1-c))}return l}within(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:n,nodeSize:o}=this,a=[0,i.length-1,0],s=[],l=r*r;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,d=a.pop()||0;if(u-d<=o){for(let r=d;r<=u;r++)Md(n[2*r],n[2*r+1],e,t)<=l&&s.push(i[r]);continue}const h=d+u>>1,p=n[2*h],f=n[2*h+1];Md(p,f,e,t)<=l&&s.push(i[h]),(0===c?e-r<=p:t-r<=f)&&(a.push(d),a.push(h-1),a.push(1-c)),(0===c?e+r>=p:t+r>=f)&&(a.push(h+1),a.push(u),a.push(1-c))}return s}}function Ed(e,t,r,i,n,o){if(n-i<=r)return;const a=i+n>>1;Ad(e,t,a,i,n,o),Ed(e,t,r,i,a-1,1-o),Ed(e,t,r,a+1,n,1-o)}function Ad(e,t,r,i,n,o){for(;n>i;){if(n-i>600){const a=n-i+1,s=r-i+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);Ad(e,t,r,Math.max(i,Math.floor(r-s*c/a+u)),Math.min(n,Math.floor(r+(a-s)*c/a+u)),o)}const a=t[2*r+o];let s=i,l=n;for(Pd(e,t,i,r),t[2*n+o]>a&&Pd(e,t,i,n);s<l;){for(Pd(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*i+o]===a?Pd(e,t,i,l):(l++,Pd(e,t,l,n)),l<=r&&(i=l+1),r<=l&&(n=l-1)}}function Pd(e,t,r,i){Cd(e,r,i),Cd(t,2*r,2*i),Cd(t,2*r+1,2*i+1)}function Cd(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function Md(e,t,r,i){const n=e-r,o=t-i;return n*n+o*o}var Od;e.bg=void 0,(Od=e.bg||(e.bg={})).create="create",Od.load="load",Od.fullLoad="fullLoad";let Rd=null,Bd=[];const Dd=1e3/60,zd="loadTime",Ld="fullLoadTime",Fd={mark(e){performance.mark(e)},frame(e){const t=e;null!=Rd&&Bd.push(t-Rd),Rd=t},clearMetrics(){Rd=null,Bd=[],performance.clearMeasures(zd),performance.clearMeasures(Ld);for(const t in e.bg)performance.clearMarks(e.bg[t])},getPerformanceMetrics(){performance.measure(zd,e.bg.create,e.bg.load),performance.measure(Ld,e.bg.create,e.bg.fullLoad);const t=performance.getEntriesByName(zd)[0].duration,r=performance.getEntriesByName(Ld)[0].duration,i=Bd.length,n=1/(Bd.reduce(((e,t)=>e+t),0)/i/1e3),o=Bd.filter((e=>e>Dd)).reduce(((e,t)=>e+(t-Dd)/Dd),0);return{loadTime:t,fullLoadTime:r,fps:n,percentDroppedFrames:o/(i+o)*100,totalFrames:i}}};e.$=class extends po{},e.A=ls,e.B=mn,e.C=function(e){if(null==k){const t=e.navigator?e.navigator.userAgent:null;k=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return k},e.D=Kn,e.E=H,e.F=class{constructor(e,t){this.target=e,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Eu((()=>this.process())),this.subscription=function(e,t,r){return e.addEventListener(t,r,!1),{unsubscribe:()=>{e.removeEventListener(t,r,!1)}}}(this.target,"message",(e=>this.receive(e))),this.globalScope=T(self)?e:window}registerMessageHandler(e,t){this.messageHandlers[e]=t}sendAsync(e,t){return new Promise(((r,i)=>{const n=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[n]={resolve:r,reject:i},t&&t.signal.addEventListener("abort",(()=>{delete this.resolveRejects[n];const t={id:n,type:"<cancel>",origin:location.origin,targetMapId:e.targetMapId,sourceMapId:this.mapId};this.target.postMessage(t)}),{once:!0});const o=[],a=Object.assign(Object.assign({},e),{id:n,sourceMapId:this.mapId,origin:location.origin,data:Tn(e.data,o)});this.target.postMessage(a,{transfer:o})}))}receive(e){const t=e.data,r=t.id;if(!("file://"!==t.origin&&"file://"!==location.origin&&"resource://android"!==t.origin&&"resource://android"!==location.origin&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if("<cancel>"===t.type){delete this.tasks[r];const e=this.abortControllers[r];return delete this.abortControllers[r],void(e&&e.abort())}if(T(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(0===this.taskQueue.length)return;const e=this.taskQueue.shift(),t=this.tasks[e];delete this.tasks[e],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(e,t)}processTask(e,r){return t(this,void 0,void 0,(function*(){if("<response>"===r.type){const t=this.resolveRejects[e];if(delete this.resolveRejects[e],!t)return;return void(r.error?t.reject(kn(r.error)):t.resolve(kn(r.data)))}if(!this.messageHandlers[r.type])return void this.completeTask(e,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const t=kn(r.data),i=new AbortController;this.abortControllers[e]=i;try{const n=yield this.messageHandlers[r.type](r.sourceMapId,t,i);this.completeTask(e,null,n)}catch(t){this.completeTask(e,t)}}))}completeTask(e,t,r){const i=[];delete this.abortControllers[e];const n={id:e,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Tn(t):null,data:Tn(r,i)};this.target.postMessage(n,{transfer:i})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},e.G=z,e.H=function(){var e=new ls(16);return ls!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.I=Dc,e.J=function(e,t,r){var i,n,o,a,s,l,c,u,d,h,p,f,m=r[0],g=r[1],y=r[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],h=t[9],p=t[10],f=t[11],e[0]=i=t[0],e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=h,e[10]=p,e[11]=f,e[12]=i*m+s*g+d*y+t[12],e[13]=n*m+l*g+h*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e},e.K=function(e,t,r){var i=r[0],n=r[1],o=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.L=us,e.M=function(e,t){const r={};for(let i=0;i<t.length;i++){const n=t[i];n in e&&(r[n]=e[n])}return r},e.N=Pu,e.O=Ou,e.P=o,e.Q=Ru,e.R=Ss,e.S=ju,e.T=Hn,e.U=d,e.V=h,e.W=P,e.X=La,e.Y=lo,e.Z=zu,e._=t,e.a=B,e.a$=function(e,t){var r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],g=e[14],y=e[15],_=t[0],b=t[1],v=t[2],x=t[3],w=t[4],S=t[5],I=t[6],T=t[7],k=t[8],E=t[9],A=t[10],P=t[11],C=t[12],M=t[13],O=t[14],R=t[15];return Math.abs(r-_)<=ss*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=ss*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(n-v)<=ss*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-x)<=ss*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-w)<=ss*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(s-S)<=ss*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-I)<=ss*Math.max(1,Math.abs(l),Math.abs(I))&&Math.abs(c-T)<=ss*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(u-k)<=ss*Math.max(1,Math.abs(u),Math.abs(k))&&Math.abs(d-E)<=ss*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(h-A)<=ss*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(p-P)<=ss*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(f-C)<=ss*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(m-M)<=ss*Math.max(1,Math.abs(m),Math.abs(M))&&Math.abs(g-O)<=ss*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(y-R)<=ss*Math.max(1,Math.abs(y),Math.abs(R))},e.a0=la,e.a1=Fu,e.a2=ne,e.a3=e=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((r=>{t.onloadstart=()=>{r(t)};for(const i of e){const e=window.document.createElement("source");j(i)||(t.crossOrigin="Anonymous"),e.src=i,t.appendChild(e)}}))},e.a4=function(){return _++},e.a5=Do,e.a6=fu,e.a7=Ei,e.a8=Ua,e.a9=Wu,e.aA=function(e){if("custom"===e.type)return new ku(e);switch(e.type){case"background":return new wu(e);case"circle":return new fs(e);case"fill":return new cl(e);case"fill-extrusion":return new Rl(e);case"heatmap":return new ks(e);case"hillshade":return new Ps(e);case"line":return new Xl(e);case"raster":return new Tu(e);case"symbol":return new bu(e)}},e.aB=x,e.aC=function(e,t){if(!e)return[{command:"setStyle",args:[t]}];let r=[];try{if(!X(e.version,t.version))return[{command:"setStyle",args:[t]}];X(e.center,t.center)||r.push({command:"setCenter",args:[t.center]}),X(e.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),X(e.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),X(e.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),X(e.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),X(e.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),X(e.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),X(e.light,t.light)||r.push({command:"setLight",args:[t.light]}),X(e.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),X(e.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),X(e.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const i={},n=[];!function(e,t,r,i){let n;for(n in t=t||{},e=e||{})Object.prototype.hasOwnProperty.call(e,n)&&(Object.prototype.hasOwnProperty.call(t,n)||J(n,r,i));for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(Object.prototype.hasOwnProperty.call(e,n)?X(e[n],t[n])||("geojson"===e[n].type&&"geojson"===t[n].type&&ee(e,t,n)?Y(r,{command:"setGeoJSONSourceData",args:[n,t[n].data]}):Q(n,t,r,i)):K(n,t,r))}(e.sources,t.sources,n,i);const o=[];e.layers&&e.layers.forEach((e=>{"source"in e&&i[e.source]?r.push({command:"removeLayer",args:[e.id]}):o.push(e)})),r=r.concat(n),function(e,t,r){t=t||[];const i=(e=e||[]).map(re),n=t.map(re),o=e.reduce(ie,{}),a=t.reduce(ie,{}),s=i.slice(),l=Object.create(null);let c,u,d,h,p;for(let f=0,m=0;f<i.length;f++)c=i[f],Object.prototype.hasOwnProperty.call(a,c)?m++:(Y(r,{command:"removeLayer",args:[c]}),s.splice(s.indexOf(c,m),1));for(let f=0,m=0;f<n.length;f++)c=n[n.length-1-f],s[s.length-1-f]!==c&&(Object.prototype.hasOwnProperty.call(o,c)?(Y(r,{command:"removeLayer",args:[c]}),s.splice(s.lastIndexOf(c,s.length-m),1)):m++,h=s[s.length-f],Y(r,{command:"addLayer",args:[a[c],h]}),s.splice(s.length-f,0,c),l[c]=!0);for(let f=0;f<n.length;f++)if(c=n[f],u=o[c],d=a[c],!l[c]&&!X(u,d))if(X(u.source,d.source)&&X(u["source-layer"],d["source-layer"])&&X(u.type,d.type)){for(p in te(u.layout,d.layout,r,c,null,"setLayoutProperty"),te(u.paint,d.paint,r,c,null,"setPaintProperty"),X(u.filter,d.filter)||Y(r,{command:"setFilter",args:[c,d.filter]}),X(u.minzoom,d.minzoom)&&X(u.maxzoom,d.maxzoom)||Y(r,{command:"setLayerZoomRange",args:[c,d.minzoom,d.maxzoom]}),u)Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?te(u[p],d[p],r,c,p.slice(6),"setPaintProperty"):X(u[p],d[p])||Y(r,{command:"setLayerProperty",args:[c,p,d[p]]}));for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&!Object.prototype.hasOwnProperty.call(u,p)&&"layout"!==p&&"paint"!==p&&"filter"!==p&&"metadata"!==p&&"minzoom"!==p&&"maxzoom"!==p&&(0===p.indexOf("paint.")?te(u[p],d[p],r,c,p.slice(6),"setPaintProperty"):X(u[p],d[p])||Y(r,{command:"setLayerProperty",args:[c,p,d[p]]}))}else Y(r,{command:"removeLayer",args:[c]}),h=s[s.lastIndexOf(c)+1],Y(r,{command:"addLayer",args:[d,h]})}(o,t.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:"setStyle",args:[t]}]}return r},e.aD=function(e){const t=[],r=e.id;return void 0===r&&t.push({message:`layers.${r}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${r}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},e.aE=function e(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(!e(t[i],r[i]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==r){if("object"!=typeof r)return!1;if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(!e(t[i],r[i]))return!1;return!0}return t===r},e.aF=b,e.aG=v,e.aH=class extends wa{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.aI=Sa,e.aJ=class extends wa{constructor(e,t){super(e,t),this.current=ka}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.aK=Ia,e.aL=Ta,e.aM=qe,e.aN=class extends wa{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.aO=class extends wa{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.aP=function(e,t,r,i,n,o,a){var s=1/(t-r),l=1/(i-n),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+r)*s,e[13]=(n+i)*l,e[14]=(a+o)*c,e[15]=1,e},e.aQ=hs,e.aR=class extends So{},e.aS=tc,e.aT=class extends To{},e.aU=Ts,e.aV=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.aW=Is,e.aX=Go,e.aY=na,e.aZ=class extends Oo{},e.a_=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},e.aa=function(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,r,i,n)=>{const o=i||n;return t[r]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t},e.ab=function(e,t){const r=[];for(const i in e)i in t||r.push(i);return r},e.ac=m,e.ad=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+c*i,e[1]=a*n+u*i,e[2]=s*n+d*i,e[3]=l*n+h*i,e[4]=c*n-o*i,e[5]=u*n-a*i,e[6]=d*n-s*i,e[7]=h*n-l*i,e},e.ae=function(e){var t=new ls(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.af=ps,e.ag=function(e,t){let r=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){const{interpolationType:n,minZoom:o,maxZoom:a}=e,s=n?m(Mt.interpolationFactor(n,t,o,a),0,1):0;"camera"===e.kind?i=Ct.number(e.minSize,e.maxSize,s):r=s}return{uSizeT:r,uSize:i}},e.ai=function(e,t,r){let{uSize:i,uSizeT:n}=t,{lowerSize:o,upperSize:a}=r;return"source"===e.kind?o/iu:"composite"===e.kind?Ct.number(o/iu,a/iu,n):i},e.aj=uu,e.ak=function(e,t,r,i){const n=t.y-e.y,a=t.x-e.x,s=i.y-r.y,l=i.x-r.x,c=s*a-l*n;if(0===c)return null;const u=(l*(e.y-r.y)-s*(e.x-r.x))/c;return new o(e.x+u*a,e.y+u*n)},e.al=Xu,e.am=Wa,e.an=cs,e.ao=function(e){let t=1/0,r=1/0,i=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),r=Math.min(r,o.y),i=Math.max(i,o.x),n=Math.max(n,o.y);return[t,r,i,n]},e.ap=nc,e.ar=au,e.as=function(e,t){var r=t[0],i=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],h=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],_=r*s-i*a,b=r*l-n*a,v=r*c-o*a,x=i*l-n*s,w=i*c-o*s,S=n*c-o*l,I=u*m-d*f,T=u*g-h*f,k=u*y-p*f,E=d*g-h*m,A=d*y-p*m,P=h*y-p*g,C=_*P-b*A+v*E+x*k-w*T+S*I;return C?(e[0]=(s*P-l*A+c*E)*(C=1/C),e[1]=(n*A-i*P-o*E)*C,e[2]=(m*S-g*w+y*x)*C,e[3]=(h*w-d*S-p*x)*C,e[4]=(l*k-a*P-c*T)*C,e[5]=(r*P-n*k+o*T)*C,e[6]=(g*v-f*S-y*b)*C,e[7]=(u*S-h*v+p*b)*C,e[8]=(a*A-s*k+c*I)*C,e[9]=(i*k-r*A-o*I)*C,e[10]=(f*w-m*v+y*_)*C,e[11]=(d*v-u*w-p*_)*C,e[12]=(s*T-a*E-l*I)*C,e[13]=(r*E-i*T+n*I)*C,e[14]=(m*b-f*x-g*_)*C,e[15]=(u*x-d*b+h*_)*C,e):null},e.at=vd,e.au=Kc,e.av=kd,e.aw=function(){const e={},t=G.$version;for(const r in G.$root){const i=G.$root[r];if(i.required){let n=null;n="version"===r?t:"array"===i.type?[]:{},null!=n&&(e[r]=n)}}return e},e.ax=En,e.ay=F,e.az=function(e){e=e.slice();const t=Object.create(null);for(let r=0;r<e.length;r++)t[e[r].id]=e[r];for(let r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Z(e[r],t[e[r].ref]));return e},e.b=E,e.b0=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.b1=function(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e},e.b2=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},e.b3=g,e.b4=Nu,e.b5=Bu,e.b6=function(e,t,r,i,n){var o,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(e[10]=(n+i)*(o=1/(i-n)),e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e},e.b7=function(e,t,r){var i=Math.sin(r),n=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+c*i,e[5]=a*n+u*i,e[6]=s*n+d*i,e[7]=l*n+h*i,e[8]=c*n-o*i,e[9]=u*n-a*i,e[10]=d*n-s*i,e[11]=h*n-l*i,e},e.b8=p,e.b9=f,e.bA=oc,e.bB=function(e){return e.message===O},e.bC=bi,e.bD=Un,e.ba=function(e){return e*Math.PI/180},e.bb=function(e,t){const{x:r,y:i}=zu.fromLngLat(t);return!(e<0||e>25||i<0||i>=1||r<0||r>=1)},e.bc=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.bd=class extends ho{},e.be=Au,e.bf=Fd,e.bh=L,e.bi=function(e,t){B.REGISTERED_PROTOCOLS[e]=t},e.bj=function(e){delete B.REGISTERED_PROTOCOLS[e]},e.bk=function(e,t){const r={};for(let n=0;n<e.length;n++){const i=t&&t[e[n].id]||zi(e[n]);t&&(t[e[n].id]=i);let o=r[i];o||(o=r[i]=[]),o.push(e[n])}const i=[];for(const n in r)i.push(r[n]);return i},e.bl=xn,e.bm=$u,e.bn=Hu,e.bo=zc,e.bp=function(t){t.bucket.createArrays(),t.bucket.tilePixelRatio=La/(512*t.bucket.overscaling),t.bucket.compareText={},t.bucket.iconsNeedLinear=!1;const r=t.bucket.layers[0],i=r.layout,n=r._unevaluatedLayout._values,o={layoutIconSize:n["icon-size"].possiblyEvaluate(new Vn(t.bucket.zoom+1),t.canonical),layoutTextSize:n["text-size"].possiblyEvaluate(new Vn(t.bucket.zoom+1),t.canonical),textMaxSize:n["text-size"].possiblyEvaluate(new Vn(18))};if("composite"===t.bucket.textSizeData.kind){const{minZoom:e,maxZoom:r}=t.bucket.textSizeData;o.compositeTextSizes=[n["text-size"].possiblyEvaluate(new Vn(e),t.canonical),n["text-size"].possiblyEvaluate(new Vn(r),t.canonical)]}if("composite"===t.bucket.iconSizeData.kind){const{minZoom:e,maxZoom:r}=t.bucket.iconSizeData;o.compositeIconSizes=[n["icon-size"].possiblyEvaluate(new Vn(e),t.canonical),n["icon-size"].possiblyEvaluate(new Vn(r),t.canonical)]}const a=i.get("text-line-height")*nc,s="viewport"!==i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement"),l=i.get("text-keep-upright"),c=i.get("text-size");for(const u of t.bucket.features){const n=i.get("text-font").evaluate(u,{},t.canonical).join(","),d=c.evaluate(u,{},t.canonical),h=o.layoutTextSize.evaluate(u,{},t.canonical),p=o.layoutIconSize.evaluate(u,{},t.canonical),f={horizontal:{},vertical:void 0},m=u.text;let g,y=[0,0];if(m){const o=m.toString(),c=i.get("text-letter-spacing").evaluate(u,{},t.canonical)*nc,p=Cn(o)?c:0,g=i.get("text-anchor").evaluate(u,{},t.canonical),_=bd(r,u,t.canonical);if(!_){const e=i.get("text-radial-offset").evaluate(u,{},t.canonical);y=e?_d(g,[e*nc,yd]):i.get("text-offset").evaluate(u,{},t.canonical).map((e=>e*nc))}let b=s?"center":i.get("text-justify").evaluate(u,{},t.canonical);const v="point"===i.get("symbol-placement")?i.get("text-max-width").evaluate(u,{},t.canonical)*nc:1/0,x=()=>{t.bucket.allowVerticalPlacement&&Pn(o)&&(f.vertical=Uc(m,t.glyphMap,t.glyphPositions,t.imagePositions,n,v,a,g,"left",p,y,e.ah.vertical,!0,h,d))};if(!s&&_){const r=new Set;if("auto"===b)for(let e=0;e<_.values.length;e+=2)r.add(vd(_.values[e]));else r.add(b);let i=!1;for(const o of r)if(!f.horizontal[o])if(i)f.horizontal[o]=f.horizontal[0];else{const r=Uc(m,t.glyphMap,t.glyphPositions,t.imagePositions,n,v,a,"center",o,p,y,e.ah.horizontal,!1,h,d);r&&(f.horizontal[o]=r,i=1===r.positionedLines.length)}x()}else{"auto"===b&&(b=vd(g));const r=Uc(m,t.glyphMap,t.glyphPositions,t.imagePositions,n,v,a,g,b,p,y,e.ah.horizontal,!1,h,d);r&&(f.horizontal[b]=r),x(),Pn(o)&&s&&l&&(f.vertical=Uc(m,t.glyphMap,t.glyphPositions,t.imagePositions,n,v,a,g,b,p,y,e.ah.vertical,!1,h,d))}}let _=!1;if(u.icon&&u.icon.name){const e=t.imageMap[u.icon.name];e&&(g=Qc(t.imagePositions[u.icon.name],i.get("icon-offset").evaluate(u,{},t.canonical),i.get("icon-anchor").evaluate(u,{},t.canonical)),_=!!e.sdf,void 0===t.bucket.sdfIcons?t.bucket.sdfIcons=_:t.bucket.sdfIcons!==_&&S("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(e.pixelRatio!==t.bucket.pixelRatio||0!==i.get("icon-rotate").constantOr(1))&&(t.bucket.iconsNeedLinear=!0))}const b=Sd(f.horizontal)||f.vertical;t.bucket.iconsInText=!!b&&b.iconsInText,(b||g)&&xd(t.bucket,u,f,g,t.imageMap,o,h,p,y,_,t.canonical)}t.showCollisionBoxes&&t.bucket.generateCollisionDebugBuffers()},e.bq=$l,e.br=ol,e.bs=Al,e.bt=pl,e.bu=Ec,e.bv=class{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let e=performance.getEntriesByName(this._marks.measure);return 0===e.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),e=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),e}},e.bw=function(e,r,i,n,o){return t(this,void 0,void 0,(function*(){if(h())try{return yield P(e,r,i,n,o)}catch(e){}return function(e,t,r,i,n){const o=e.width,a=e.height;C&&M||(C=new OffscreenCanvas(o,a),M=C.getContext("2d",{willReadFrequently:!0})),C.width=o,C.height=a,M.drawImage(e,0,0,o,a);const s=M.getImageData(t,r,i,n);return M.clearRect(0,0,o,a),s.data}(e,r,i,n,o)}))},e.bx=Vu,e.by=r,e.bz=i,e.c=R,e.d=e=>t(void 0,void 0,void 0,(function*(){if(0===e.byteLength)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(e)],{type:"image/png"});try{return createImageBitmap(t)}catch(e){throw new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),e.e=y,e.f=e=>new Promise(((t,r)=>{const i=new Image;i.onload=()=>{t(i),URL.revokeObjectURL(i.src),i.onload=null,window.requestAnimationFrame((()=>{i.src=A}))},i.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const n=new Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?URL.createObjectURL(n):A})),e.g=D,e.h=(e,t)=>N(y(e,{type:"json"}),t),e.i=T,e.j=W,e.k=$,e.l=(e,t)=>N(y(e,{type:"arrayBuffer"}),t),e.m=N,e.n=function(e){return new Ec(e).readFields(Pc,[])},e.o=ws,e.p=Rc,e.q=ro,e.r=fn,e.s=j,e.t=_n,e.u=pn,e.v=G,e.w=S,e.x=function(e){let[t,r,i]=e;return r+=90,r*=Math.PI/180,i*=Math.PI/180,{x:t*Math.cos(r)*Math.sin(i),y:t*Math.sin(r)*Math.sin(i),z:t*Math.cos(i)}},e.y=Ct,e.z=Vn})),r("worker",["./shared"],(function(e){class t{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t){this._layerConfigs[n.id]=n;const t=this._layers[n.id]=e.aA(n);t._featureFilter=e.a7(t.filter),this.keyCache[n.id]&&delete this.keyCache[n.id]}for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=e.bk(Object.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),r=t[0];if("none"===r.visibility)continue;const i=r.source||"";let n=this.familiesBySource[i];n||(n=this.familiesBySource[i]={});const o=r.sourceLayer||"_geojsonTileLayer";let a=n[o];a||(a=n[o]=[]),a.push(t)}}}class r{constructor(t){const r={},i=[];for(const e in t){const n=t[e],o=r[e]={};for(const e in n){const t=n[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const r={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};i.push(r),o[e]={rect:r,metrics:t.metrics}}}const{w:n,h:o}=e.p(i),a=new e.o({width:n||1,height:o||1});for(const s in t){const i=t[s];for(const t in i){const n=i[+t];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const o=r[s][t].rect;e.o.copy(n.bitmap,a,{x:0,y:0},{x:o.x+1,y:o.y+1},n.bitmap)}}this.image=a,this.positions=r}}e.bl("GlyphAtlas",r);class i{constructor(t){this.tileID=new e.S(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.uid=t.uid,this.zoom=t.zoom,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.inFlightDependencies=[]}parse(t,i,o,a){return e._(this,void 0,void 0,(function*(){this.status="parsing",this.data=t,this.collisionBoxArray=new e.a5;const s=new e.bm(Object.keys(t.layers).sort()),l=new e.bn(this.tileID,this.promoteId);l.bucketLayerIDs=[];const c={},u={featureIndex:l,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:o},d=i.familiesBySource[this.source];for(const r in d){const i=t.layers[r];if(!i)continue;1===i.version&&e.w(`Vector tile source "${this.source}" layer "${r}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const a=s.encode(r),h=[];for(let e=0;e<i.length;e++){const t=i.feature(e),n=l.getId(t,r);h.push({feature:t,id:n,index:e,sourceLayerIndex:a})}for(const t of d[r]){const r=t[0];r.source!==this.source&&e.w(`layer.source = ${r.source} does not equal this.source = ${this.source}`),r.minzoom&&this.zoom<Math.floor(r.minzoom)||r.maxzoom&&this.zoom>=r.maxzoom||"none"!==r.visibility&&(n(t,this.zoom,o),(c[r.id]=r.createBucket({index:l.bucketLayerIDs.length,layers:t,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:a,sourceID:this.source})).populate(h,u,this.tileID.canonical),l.bucketLayerIDs.push(t.map((e=>e.id))))}}const h=e.aF(u.glyphDependencies,(e=>Object.keys(e).map(Number)));this.inFlightDependencies.forEach((e=>null==e?void 0:e.abort())),this.inFlightDependencies=[];let p=Promise.resolve({});if(Object.keys(h).length){const e=new AbortController;this.inFlightDependencies.push(e),p=a.sendAsync({type:"GG",data:{stacks:h,source:this.source,tileID:this.tileID,type:"glyphs"}},e)}const f=Object.keys(u.iconDependencies);let m=Promise.resolve({});if(f.length){const e=new AbortController;this.inFlightDependencies.push(e),m=a.sendAsync({type:"GI",data:{icons:f,source:this.source,tileID:this.tileID,type:"icons"}},e)}const g=Object.keys(u.patternDependencies);let y=Promise.resolve({});if(g.length){const e=new AbortController;this.inFlightDependencies.push(e),y=a.sendAsync({type:"GI",data:{icons:g,source:this.source,tileID:this.tileID,type:"patterns"}},e)}const[_,b,v]=yield Promise.all([p,m,y]),x=new r(_),w=new e.bo(b,v);for(const t in c){const r=c[t];r instanceof e.a6?(n(r.layers,this.zoom,o),e.bp({bucket:r,glyphMap:_,glyphPositions:x.positions,imageMap:b,imagePositions:w.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):r.hasPattern&&(r instanceof e.bq||r instanceof e.br||r instanceof e.bs)&&(n(r.layers,this.zoom,o),r.addFeatures(u,this.tileID.canonical,w.patternPositions))}return this.status="done",{buckets:Object.values(c).filter((e=>!e.isEmpty())),featureIndex:l,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:x.image,imageAtlas:w,glyphMap:this.returnDependencies?_:null,iconMap:this.returnDependencies?b:null,glyphPositions:this.returnDependencies?x.positions:null}}))}}function n(t,r,i){const n=new e.z(r);for(const e of t)e.recalculate(n,i)}class o{constructor(e,t,r){this.actor=e,this.layerIndex=t,this.availableImages=r,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(t,r){return e._(this,void 0,void 0,(function*(){const i=yield e.l(t.request,r);try{return{vectorTile:new e.bt.VectorTile(new e.bu(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires}}catch(e){const n=new Uint8Array(i.data);let o=`Unable to parse the tile at ${t.request.url}, `;throw o+=31===n[0]&&139===n[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${e.message}`,new Error(o)}}))}loadTile(t){return e._(this,void 0,void 0,(function*(){const r=t.uid,n=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bv(t.request),o=new i(t);this.loading[r]=o;const a=new AbortController;o.abort=a;try{const i=yield this.loadVectorTile(t,a);if(delete this.loading[r],!i)return null;const s=i.rawData,l={};i.expires&&(l.expires=i.expires),i.cacheControl&&(l.cacheControl=i.cacheControl);const c={};if(n){const e=n.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}o.vectorTile=i.vectorTile;const u=o.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[r]=o,this.fetching[r]={rawTileData:s,cacheControl:l,resourceTiming:c};try{const t=yield u;return e.e({rawTileData:s.slice(0)},t,l,c)}finally{delete this.fetching[r]}}catch(e){throw delete this.loading[r],o.status="done",this.loaded[r]=o,e}}))}reloadTile(t){return e._(this,void 0,void 0,(function*(){const r=t.uid;if(!this.loaded||!this.loaded[r])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const i=this.loaded[r];if(i.showCollisionBoxes=t.showCollisionBoxes,"parsing"===i.status){const t=yield i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor);let n;if(this.fetching[r]){const{rawTileData:i,cacheControl:o,resourceTiming:a}=this.fetching[r];delete this.fetching[r],n=e.e({rawTileData:i.slice(0)},t,o,a)}else n=t;return n}if("done"===i.status&&i.vectorTile)return i.parse(i.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(t){return e._(this,void 0,void 0,(function*(){const e=this.loading,r=t.uid;e&&e[r]&&e[r].abort&&(e[r].abort.abort(),delete e[r])}))}removeTile(t){return e._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[t.uid]&&delete this.loaded[t.uid]}))}}class a{constructor(){this.loaded={}}loadTile(t){return e._(this,void 0,void 0,(function*(){const{uid:r,encoding:i,rawImageData:n,redFactor:o,greenFactor:a,blueFactor:s,baseShift:l}=t,c=n.width+2,u=n.height+2,d=e.b(n)?new e.R({width:c,height:u},yield e.bw(n,-1,-1,c,u)):n,h=new e.bx(r,d,i,o,a,s,l);return this.loaded=this.loaded||{},this.loaded[r]=h,h}))}removeTile(e){const t=this.loaded,r=e.uid;t&&t[r]&&delete t[r]}}function s(e,t){if(0!==e.length){l(e[0],t);for(var r=1;r<e.length;r++)l(e[r],!t)}}function l(e,t){for(var r=0,i=0,n=0,o=e.length,a=o-1;n<o;a=n++){var s=(e[n][0]-e[a][0])*(e[a][1]+e[n][1]),l=r+s;i+=Math.abs(r)>=Math.abs(s)?r-l+s:s-l+r,r=l}r+i>=0!=!!t&&e.reverse()}var c=e.by((function e(t,r){var i,n=t&&t.type;if("FeatureCollection"===n)for(i=0;i<t.features.length;i++)e(t.features[i],r);else if("GeometryCollection"===n)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],r);else if("Feature"===n)e(t.geometry,r);else if("Polygon"===n)s(t.coordinates,r);else if("MultiPolygon"===n)for(i=0;i<t.coordinates.length;i++)s(t.coordinates[i],r);return t}));const u=e.bt.VectorTileFeature.prototype.toGeoJSON;var d={exports:{}},h=e.bz,p=e.bt.VectorTileFeature,f=m;function m(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}m.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var r=e[t],i=[],n=0;n<r.length;n++)i.push(new h(r[n][0],r[n][1]));this.geometry.push(i)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,r=-1/0,i=1/0,n=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),r=Math.max(r,l.x),i=Math.min(i,l.y),n=Math.max(n,l.y)}return[t,i,r,n]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var y=e.bA,_=f;function b(e){var t=new y;return function(e,t){for(var r in e.layers)t.writeMessage(3,v,e.layers[r])}(e,t),t.finish()}function v(e,t){var r;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(r=0;r<e.length;r++)i.feature=e.feature(r),t.writeMessage(2,x,i);var n=i.keys;for(r=0;r<n.length;r++)t.writeStringField(3,n[r]);var o=i.values;for(r=0;r<o.length;r++)t.writeMessage(4,k,o[r])}function x(e,t){var r=e.feature;void 0!==r.id&&t.writeVarintField(1,r.id),t.writeMessage(2,w,e),t.writeVarintField(3,r.type),t.writeMessage(4,T,r)}function w(e,t){var r=e.feature,i=e.keys,n=e.values,o=e.keycache,a=e.valuecache;for(var s in r.properties){var l=r.properties[s],c=o[s];if(null!==l){void 0===c&&(i.push(s),o[s]=c=i.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,h=a[d];void 0===h&&(n.push(l),a[d]=h=n.length-1),t.writeVarint(h)}}}function S(e,t){return(t<<3)+(7&e)}function I(e){return e<<1^e>>31}function T(e,t){for(var r=e.loadGeometry(),i=e.type,n=0,o=0,a=r.length,s=0;s<a;s++){var l=r[s],c=1;1===i&&(c=l.length),t.writeVarint(S(1,c));for(var u=3===i?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==i&&t.writeVarint(S(2,u-1));var h=l[d].x-n,p=l[d].y-o;t.writeVarint(I(h)),t.writeVarint(I(p)),n+=h,o+=p}3===i&&t.writeVarint(S(7,1))}}function k(e,t){var r=typeof e;"string"===r?t.writeStringField(1,e):"boolean"===r?t.writeBooleanField(7,e):"number"===r&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}d.exports=b,d.exports.fromVectorTileJs=b,d.exports.fromGeojsonVt=function(e,t){t=t||{};var r={};for(var i in e)r[i]=new _(e[i].features,t),r[i].name=i,r[i].version=t.version,r[i].extent=t.extent;return b({layers:r})},d.exports.GeoJSONWrapper=_;var E=e.by(d.exports);const A={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},P=Math.fround||(C=new Float32Array(1),e=>(C[0]=+e,C[0]));var C;const M=3,O=5,R=6;class B{constructor(e){this.options=Object.assign(Object.create(A),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:r,maxZoom:i}=this.options;t&&console.time("total time");const n=`prepare ${e.length} points`;t&&console.time(n),this.points=e;const o=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[r,i]=t.geometry.coordinates,n=P(L(r)),a=P(F(i));o.push(n,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[i+1]=this._createTree(o);t&&console.timeEnd(n);for(let s=i;s>=r;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let r=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let n=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,n=180;else if(r>n){const e=this.getClusters([r,i,180,o],t),a=this.getClusters([-180,i,n,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(L(r),F(o),L(n),F(i)),l=a.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+O]>1?D(l,e,this.clusterProps):this.points[l[e+M]])}return c}getChildren(e){const t=this._getOriginId(e),r=this._getOriginZoom(e),i="No cluster with the specified id.",n=this.trees[r];if(!n)throw new Error(i);const o=n.data;if(t*this.stride>=o.length)throw new Error(i);const a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),s=n.within(o[t*this.stride],o[t*this.stride+1],a),l=[];for(const c of s){const t=c*this.stride;o[t+4]===e&&l.push(o[t+O]>1?D(o,t,this.clusterProps):this.points[o[t+M]])}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,r){const i=[];return this._appendLeaves(i,e,t=t||10,r=r||0,0),i}getTile(e,t,r){const i=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(r-s)/n,c=(r+1+s)/n,u={features:[]};return this._addTileFeatures(i.range((t-s)/n,l,(t+1+s)/n,c),i.data,t,r,n,u),0===t&&this._addTileFeatures(i.range(1-s/n,l,1,c),i.data,n,r,n,u),t===n-1&&this._addTileFeatures(i.range(0,l,s/n,c),i.data,-1,r,n,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}_appendLeaves(e,t,r,i,n){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?n+t.point_count<=i?n+=t.point_count:n=this._appendLeaves(e,t.cluster_id,r,i,n):n<i?n++:e.push(a),e.length===r)break}return n}_createTree(t){const r=new e.av(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)r.add(t[e],t[e+1]);return r.finish(),r.data=t,r}_addTileFeatures(e,t,r,i,n,o){for(const a of e){const e=a*this.stride,s=t[e+O]>1;let l,c,u;if(s)l=z(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const r=this.points[t[e+M]];l=r.properties;const[i,n]=r.geometry.coordinates;c=L(i),u=F(n)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*n-r)),Math.round(this.options.extent*(u*n-i))]],tags:l};let h;h=s||this.options.generateId?t[e+M]:this.points[t[e+M]].id,void 0!==h&&(d.id=h),o.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:r,extent:i,reduce:n,minPoints:o}=this.options,a=r/(i*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const r=s[u],i=s[u+1],d=e.within(s[u],s[u+1],a),h=s[u+O];let p=h;for(const e of d){const r=e*c;s[r+2]>t&&(p+=s[r+O])}if(p>h&&p>=o){let e,o=r*h,a=i*h,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const r of d){const i=r*c;if(s[i+2]<=t)continue;s[i+2]=t;const l=s[i+O];o+=s[i]*l,a+=s[i+1]*l,s[i+4]=m,n&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),n(e,this._map(s,i)))}s[u+4]=m,l.push(o/p,a/p,1/0,m,-1,p),n&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of d){const r=e*c;if(!(s[r+2]<=t)){s[r+2]=t;for(let e=0;e<c;e++)l.push(s[r+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,r){if(e[t+O]>1){const i=this.clusterProps[e[t+R]];return r?Object.assign({},i):i}const i=this.points[e[t+M]].properties,n=this.options.map(i);return r&&n===i?Object.assign({},n):n}}function D(e,t,r){return{type:"Feature",id:e[t+M],properties:z(e,t,r),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),N(e[t+1])]}};var i}function z(e,t,r){const i=e[t+O],n=i>=1e4?`${Math.round(i/1e3)}k`:i>=1e3?Math.round(i/100)/10+"k":i,o=e[t+R],a=-1===o?{}:Object.assign({},r[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+M],point_count:i,point_count_abbreviated:n})}function L(e){return e/360+.5}function F(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function N(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function j(e,t,r,i){let n=i;const o=t+(r-t>>1);let a,s=r-t;const l=e[t],c=e[t+1],u=e[r],d=e[r+1];for(let h=t+3;h<r;h+=3){const t=U(e[h],e[h+1],l,c,u,d);if(t>n)a=h,n=t;else if(t===n){const e=Math.abs(h-o);e<s&&(a=h,s=e)}}n>i&&(a-t>3&&j(e,t,a,i),e[a+2]=n,r-a>3&&j(e,a,r,i))}function U(e,t,r,i,n,o){let a=n-r,s=o-i;if(0!==a||0!==s){const l=((e-r)*a+(t-i)*s)/(a*a+s*s);l>1?(r=n,i=o):l>0&&(r+=a*l,i+=s*l)}return a=e-r,s=t-i,a*a+s*s}function V(e,t,r,i){const n={id:null==e?null:e,type:t,geometry:r,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===t||"MultiPoint"===t||"LineString"===t)$(n,r);else if("Polygon"===t)$(n,r[0]);else if("MultiLineString"===t)for(const o of r)$(n,o);else if("MultiPolygon"===t)for(const o of r)$(n,o[0]);return n}function $(e,t){for(let r=0;r<t.length;r+=3)e.minX=Math.min(e.minX,t[r]),e.minY=Math.min(e.minY,t[r+1]),e.maxX=Math.max(e.maxX,t[r]),e.maxY=Math.max(e.maxY,t[r+1])}function W(e,t,r,i){if(!t.geometry)return;const n=t.geometry.coordinates;if(n&&0===n.length)return;const o=t.geometry.type,a=Math.pow(r.tolerance/((1<<r.maxZoom)*r.extent),2);let s=[],l=t.id;if(r.promoteId?l=t.properties[r.promoteId]:r.generateId&&(l=i||0),"Point"===o)H(n,s);else if("MultiPoint"===o)for(const c of n)H(c,s);else if("LineString"===o)G(n,s,a,!1);else if("MultiLineString"===o){if(r.lineMetrics){for(const r of n)s=[],G(r,s,a,!1),e.push(V(l,"LineString",s,t.properties));return}q(n,s,a,!1)}else if("Polygon"===o)q(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(const n of t.geometry.geometries)W(e,{id:l,geometry:n,properties:t.properties},r,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const e of n){const t=[];q(e,t,a,!0),s.push(t)}}e.push(V(l,o,s,t.properties))}function H(e,t){t.push(Z(e[0]),X(e[1]),0)}function G(e,t,r,i){let n,o,a=0;for(let l=0;l<e.length;l++){const r=Z(e[l][0]),s=X(e[l][1]);t.push(r,s,0),l>0&&(a+=i?(n*s-r*o)/2:Math.sqrt(Math.pow(r-n,2)+Math.pow(s-o,2))),n=r,o=s}const s=t.length-3;t[2]=1,j(t,0,s,r),t[s+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function q(e,t,r,i){for(let n=0;n<e.length;n++){const o=[];G(e[n],o,r,i),t.push(o)}}function Z(e){return e/360+.5}function X(e){const t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function Y(e,t,r,i,n,o,a,s){if(i/=t,o>=(r/=t)&&a<i)return e;if(a<r||o>=i)return null;const l=[];for(const c of e){const e=c.geometry;let t=c.type;const o=0===n?c.minX:c.minY,a=0===n?c.maxX:c.maxY;if(o>=r&&a<i){l.push(c);continue}if(a<r||o>=i)continue;let u=[];if("Point"===t||"MultiPoint"===t)K(e,u,r,i,n);else if("LineString"===t)J(e,u,r,i,n,!1,s.lineMetrics);else if("MultiLineString"===t)ee(e,u,r,i,n,!1);else if("Polygon"===t)ee(e,u,r,i,n,!0);else if("MultiPolygon"===t)for(const s of e){const e=[];ee(s,e,r,i,n,!0),e.length&&u.push(e)}if(u.length){if(s.lineMetrics&&"LineString"===t){for(const e of u)l.push(V(c.id,t,e,c.tags));continue}"LineString"!==t&&"MultiLineString"!==t||(1===u.length?(t="LineString",u=u[0]):t="MultiLineString"),"Point"!==t&&"MultiPoint"!==t||(t=3===u.length?"Point":"MultiPoint"),l.push(V(c.id,t,u,c.tags))}}return l.length?l:null}function K(e,t,r,i,n){for(let o=0;o<e.length;o+=3){const a=e[o+n];a>=r&&a<=i&&te(t,e[o],e[o+1],e[o+2])}}function J(e,t,r,i,n,o,a){let s=Q(e);const l=0===n?re:ie;let c,u,d=e.start;for(let g=0;g<e.length-3;g+=3){const h=e[g],p=e[g+1],f=e[g+2],m=e[g+3],y=e[g+4],_=0===n?h:p,b=0===n?m:y;let v=!1;a&&(c=Math.sqrt(Math.pow(h-m,2)+Math.pow(p-y,2))),_<r?b>r&&(u=l(s,h,p,m,y,r),a&&(s.start=d+c*u)):_>i?b<i&&(u=l(s,h,p,m,y,i),a&&(s.start=d+c*u)):te(s,h,p,f),b<r&&_>=r&&(u=l(s,h,p,m,y,r),v=!0),b>i&&_<=i&&(u=l(s,h,p,m,y,i),v=!0),!o&&v&&(a&&(s.end=d+c*u),t.push(s),s=Q(e)),a&&(d+=c)}let h=e.length-3;const p=e[h],f=e[h+1],m=0===n?p:f;m>=r&&m<=i&&te(s,p,f,e[h+2]),h=s.length-3,o&&h>=3&&(s[h]!==s[0]||s[h+1]!==s[1])&&te(s,s[0],s[1],s[2]),s.length&&t.push(s)}function Q(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ee(e,t,r,i,n,o){for(const a of e)J(a,t,r,i,n,o,!1)}function te(e,t,r,i){e.push(t,r,i)}function re(e,t,r,i,n,o){const a=(o-t)/(i-t);return te(e,o,r+(n-r)*a,1),a}function ie(e,t,r,i,n,o){const a=(o-r)/(n-r);return te(e,t+(i-t)*a,o,1),a}function ne(e,t){const r=[];for(let i=0;i<e.length;i++){const n=e[i],o=n.type;let a;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=oe(n.geometry,t);else if("MultiLineString"===o||"Polygon"===o){a=[];for(const e of n.geometry)a.push(oe(e,t))}else if("MultiPolygon"===o){a=[];for(const e of n.geometry){const r=[];for(const i of e)r.push(oe(i,t));a.push(r)}}r.push(V(n.id,o,a,n.tags))}return r}function oe(e,t){const r=[];r.size=e.size,void 0!==e.start&&(r.start=e.start,r.end=e.end);for(let i=0;i<e.length;i+=3)r.push(e[i]+t,e[i+1],e[i+2]);return r}function ae(e,t){if(e.transformed)return e;const r=1<<e.z,i=e.x,n=e.y;for(const o of e.features){const e=o.geometry,a=o.type;if(o.geometry=[],1===a)for(let s=0;s<e.length;s+=2)o.geometry.push(se(e[s],e[s+1],t,r,i,n));else for(let s=0;s<e.length;s++){const a=[];for(let o=0;o<e[s].length;o+=2)a.push(se(e[s][o],e[s][o+1],t,r,i,n));o.geometry.push(a)}}return e.transformed=!0,e}function se(e,t,r,i,n,o){return[Math.round(r*(e*i-n)),Math.round(r*(t*i-o))]}function le(e,t,r,i,n){const o=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:r,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const s of e)ce(a,s,o,n);return a}function ce(e,t,r,i){const n=t.geometry,o=t.type,a=[];if(e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),"Point"===o||"MultiPoint"===o)for(let s=0;s<n.length;s+=3)a.push(n[s],n[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ue(a,n,e,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(let s=0;s<n.length;s++)ue(a,n[s],e,r,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(let s=0;s<n.length;s++){const t=n[s];for(let i=0;i<t.length;i++)ue(a,t[i],e,r,!0,0===i)}if(a.length){let r=t.tags||null;if("LineString"===o&&i.lineMetrics){r={};for(const e in t.tags)r[e]=t.tags[e];r.mapbox_clip_start=n.start/n.size,r.mapbox_clip_end=n.end/n.size}const s={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:r};null!==t.id&&(s.id=t.id),e.features.push(s)}}function ue(e,t,r,i,n,o){const a=i*i;if(i>0&&t.size<(n?a:i))return void(r.numPoints+=t.length/3);const s=[];for(let l=0;l<t.length;l+=3)(0===i||t[l+2]>a)&&(r.numSimplified++,s.push(t[l],t[l+1])),r.numPoints++;n&&function(e,t){let r=0;for(let i=0,n=e.length,o=n-2;i<n;o=i,i+=2)r+=(e[i]-e[o])*(e[i+1]+e[o+1]);if(r>0===t)for(let i=0,n=e.length;i<n/2;i+=2){const t=e[i],r=e[i+1];e[i]=e[n-2-i],e[i+1]=e[n-1-i],e[n-2-i]=t,e[n-1-i]=r}}(s,o),e.push(s)}const de={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class he{constructor(e,t){const r=(t=this.options=function(e,t){for(const r in t)e[r]=t[r];return e}(Object.create(de),t)).debug;if(r&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let i=function(e,t){const r=[];if("FeatureCollection"===e.type)for(let i=0;i<e.features.length;i++)W(r,e.features[i],t,i);else W(r,"Feature"===e.type?e:{geometry:e},t);return r}(e,t);this.tiles={},this.tileCoords=[],r&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=function(e,t){const r=t.buffer/t.extent;let i=e;const n=Y(e,1,-1-r,r,0,-1,2,t),o=Y(e,1,1-r,2+r,0,-1,2,t);return(n||o)&&(i=Y(e,1,-r,1+r,0,-1,2,t)||[],n&&(i=ne(n,1).concat(i)),o&&(i=i.concat(ne(o,-1)))),i}(i,t),i.length&&this.splitTile(i,0,0,0),r&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,t,r,i,n,o,a){const s=[e,t,r,i],l=this.options,c=l.debug;for(;s.length;){i=s.pop(),r=s.pop(),t=s.pop(),e=s.pop();const u=1<<t,d=pe(t,r,i);let h=this.tiles[d];if(!h&&(c>1&&console.time("creation"),h=this.tiles[d]=le(e,t,r,i,l),this.tileCoords.push({z:t,x:r,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,r,i,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));const e=`z${t}`;this.stats[e]=(this.stats[e]||0)+1,this.total++}if(h.source=e,null==n){if(t===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue}else{if(t===l.maxZoom||t===n)continue;if(null!=n){const e=n-t;if(r!==o>>e||i!==a>>e)continue}}if(h.source=null,0===e.length)continue;c>1&&console.time("clipping");const p=.5*l.buffer/l.extent,f=.5-p,m=.5+p,g=1+p;let y=null,_=null,b=null,v=null,x=Y(e,u,r-p,r+m,0,h.minX,h.maxX,l),w=Y(e,u,r+f,r+g,0,h.minX,h.maxX,l);e=null,x&&(y=Y(x,u,i-p,i+m,1,h.minY,h.maxY,l),_=Y(x,u,i+f,i+g,1,h.minY,h.maxY,l),x=null),w&&(b=Y(w,u,i-p,i+m,1,h.minY,h.maxY,l),v=Y(w,u,i+f,i+g,1,h.minY,h.maxY,l),w=null),c>1&&console.timeEnd("clipping"),s.push(y||[],t+1,2*r,2*i),s.push(_||[],t+1,2*r,2*i+1),s.push(b||[],t+1,2*r+1,2*i),s.push(v||[],t+1,2*r+1,2*i+1)}}getTile(e,t,r){e=+e,t=+t,r=+r;const i=this.options,{extent:n,debug:o}=i;if(e<0||e>24)return null;const a=1<<e,s=pe(e,t=t+a&a-1,r);if(this.tiles[s])return ae(this.tiles[s],n);o>1&&console.log("drilling down to z%d-%d-%d",e,t,r);let l,c=e,u=t,d=r;for(;!l&&c>0;)c--,u>>=1,d>>=1,l=this.tiles[pe(c,u,d)];return l&&l.source?(o>1&&(console.log("found parent tile z%d-%d-%d",c,u,d),console.time("drilling down")),this.splitTile(l.source,c,u,d,e,t,r),o>1&&console.timeEnd("drilling down"),this.tiles[s]?ae(this.tiles[s],n):null):null}}function pe(e,t,r){return 32*((1<<e)*r+t)+e}function fe(e,t){return t?e.properties[t]:e.id}function me(e,t){if(null==e)return!0;if("Feature"===e.type)return null!=fe(e,t);if("FeatureCollection"===e.type){const r=new Set;for(const i of e.features){const e=fe(i,t);if(null==e)return!1;if(r.has(e))return!1;r.add(e)}return!0}return!1}function ge(e,t){const r=new Map;if(null==e);else if("Feature"===e.type)r.set(fe(e,t),e);else for(const i of e.features)r.set(fe(i,t),i);return r}class ye extends o{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(t,r){return e._(this,void 0,void 0,(function*(){const r=t.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return null;const n=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.X,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.X,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const r of this._feature.geometry)t.push([new e.P(r[0],r[1])]);return t}{const t=[];for(const r of this._feature.geometry){const i=[];for(const t of r)i.push(new e.P(t[0],t[1]));t.push(i)}return t}}toGeoJSON(e,t,r){return u.call(this,e,t,r)}}(this._features[t])}}(i.features);let o=E(n);return 0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),{vectorTile:n,rawData:o.buffer}}))}loadData(t){return e._(this,void 0,void 0,(function*(){var r;null===(r=this._pendingRequest)||void 0===r||r.abort();const i=!!(t&&t.request&&t.request.collectResourceTiming)&&new e.bv(t.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(t,this._pendingRequest),this._geoJSONIndex=t.cluster?new B(function(t){let{superclusterOptions:r,clusterProperties:i}=t;if(!i||!r)return r;const n={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(i);for(const c of l){const[t,r]=i[c],a=e.bC(r),s=e.bC("string"==typeof t?[t,["accumulated"],["get",c]]:t);n[c]=a.value,o[c]=s.value}return r.map=e=>{s.properties=e;const t={};for(const r of l)t[r]=n[r].evaluate(a,s);return t},r.reduce=(e,t)=>{s.properties=t;for(const r of l)a.accumulated=e[r],e[r]=o[r].evaluate(a,s)},r}(t)).load((yield this._pendingData).features):(n=yield this._pendingData,new he(n,t.geojsonVtOptions)),this.loaded={};const r={};if(i){const e=i.finish();e&&(r.resourceTiming={},r.resourceTiming[t.source]=JSON.parse(JSON.stringify(e)))}return r}catch(t){if(delete this._pendingRequest,e.bB(t))return{abandoned:!0};throw t}var n}))}getData(){return e._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(e){const t=this.loaded;return t&&t[e.uid]?super.reloadTile(e):this.loadTile(e)}loadAndProcessGeoJSON(t,r){return e._(this,void 0,void 0,(function*(){let i=yield this.loadGeoJSON(t,r);if(delete this._pendingRequest,"object"!=typeof i)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(c(i,!0),t.filter){const r=e.bC(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===r.result)throw new Error(r.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const n=i.features.filter((e=>r.value.evaluate({zoom:0},e)));i={type:"FeatureCollection",features:n}}return i}))}loadGeoJSON(t,r){return e._(this,void 0,void 0,(function*(){const{promoteId:i}=t;if(t.request){const n=yield e.h(t.request,r);return this._dataUpdateable=me(n.data,i)?ge(n.data,i):void 0,n.data}if("string"==typeof t.data)try{const e=JSON.parse(t.data);return this._dataUpdateable=me(e,i)?ge(e,i):void 0,e}catch(e){throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`)}if(!t.dataDiff)throw new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${t.source}`);return function(e,t,r){var i,n,o,a;if(t.removeAll&&e.clear(),t.remove)for(const s of t.remove)e.delete(s);if(t.add)for(const s of t.add){const t=fe(s,r);null!=t&&e.set(t,s)}if(t.update)for(const s of t.update){let t=e.get(s.id);if(null==t)continue;const r=!s.removeAllProperties&&((null===(i=s.removeProperties)||void 0===i?void 0:i.length)>0||(null===(n=s.addOrUpdateProperties)||void 0===n?void 0:n.length)>0);if((s.newGeometry||s.removeAllProperties||r)&&(t=Object.assign({},t),e.set(s.id,t),r&&(t.properties=Object.assign({},t.properties))),s.newGeometry&&(t.geometry=s.newGeometry),s.removeAllProperties)t.properties={};else if((null===(o=s.removeProperties)||void 0===o?void 0:o.length)>0)for(const e of s.removeProperties)Object.prototype.hasOwnProperty.call(t.properties,e)&&delete t.properties[e];if((null===(a=s.addOrUpdateProperties)||void 0===a?void 0:a.length)>0)for(const{key:e,value:i}of s.addOrUpdateProperties)t.properties[e]=i}}(this._dataUpdateable,t.dataDiff,i),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(t){return e._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(e){return this._geoJSONIndex.getClusterExpansionZoom(e.clusterId)}getClusterChildren(e){return this._geoJSONIndex.getChildren(e.clusterId)}getClusterLeaves(e){return this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset)}}class _e{constructor(t){this.self=t,this.actor=new e.F(t),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(e,t)=>{if(this.externalWorkerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.externalWorkerSourceTypes[e]=t},this.self.addProtocol=e.bi,this.self.removeProtocol=e.bj,this.self.registerRTLTextPlugin=t=>{if(e.bD.isParsed())throw new Error("RTL text plugin already registered.");e.bD.setMethods(t)},this.actor.registerMessageHandler("LDT",((e,t)=>this._getDEMWorkerSource(e,t.source).loadTile(t))),this.actor.registerMessageHandler("RDT",((t,r)=>e._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(t,r.source).removeTile(r)})))),this.actor.registerMessageHandler("GCEZ",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterExpansionZoom(r)})))),this.actor.registerMessageHandler("GCC",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterChildren(r)})))),this.actor.registerMessageHandler("GCL",((t,r)=>e._(this,void 0,void 0,(function*(){return this._getWorkerSource(t,r.type,r.source).getClusterLeaves(r)})))),this.actor.registerMessageHandler("LD",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadData(t))),this.actor.registerMessageHandler("GD",((e,t)=>this._getWorkerSource(e,t.type,t.source).getData())),this.actor.registerMessageHandler("LT",((e,t)=>this._getWorkerSource(e,t.type,t.source).loadTile(t))),this.actor.registerMessageHandler("RT",((e,t)=>this._getWorkerSource(e,t.type,t.source).reloadTile(t))),this.actor.registerMessageHandler("AT",((e,t)=>this._getWorkerSource(e,t.type,t.source).abortTile(t))),this.actor.registerMessageHandler("RMT",((e,t)=>this._getWorkerSource(e,t.type,t.source).removeTile(t))),this.actor.registerMessageHandler("RS",((t,r)=>e._(this,void 0,void 0,(function*(){if(!this.workerSources[t]||!this.workerSources[t][r.type]||!this.workerSources[t][r.type][r.source])return;const e=this.workerSources[t][r.type][r.source];delete this.workerSources[t][r.type][r.source],void 0!==e.removeSource&&e.removeSource(r)})))),this.actor.registerMessageHandler("RM",(t=>e._(this,void 0,void 0,(function*(){delete this.layerIndexes[t],delete this.availableImages[t],delete this.workerSources[t],delete this.demWorkerSources[t]})))),this.actor.registerMessageHandler("SR",((t,r)=>e._(this,void 0,void 0,(function*(){this.referrer=r})))),this.actor.registerMessageHandler("SRPS",((e,t)=>this._syncRTLPluginState(e,t))),this.actor.registerMessageHandler("IS",((t,r)=>e._(this,void 0,void 0,(function*(){this.self.importScripts(r)})))),this.actor.registerMessageHandler("SI",((e,t)=>this._setImages(e,t))),this.actor.registerMessageHandler("UL",((t,r)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).update(r.layers,r.removedIds)})))),this.actor.registerMessageHandler("SL",((t,r)=>e._(this,void 0,void 0,(function*(){this._getLayerIndex(t).replace(r)}))))}_setImages(t,r){return e._(this,void 0,void 0,(function*(){this.availableImages[t]=r;for(const e in this.workerSources[t]){const i=this.workerSources[t][e];for(const e in i)i[e].availableImages=r}}))}_syncRTLPluginState(t,r){return e._(this,void 0,void 0,(function*(){if(e.bD.isParsed())return e.bD.getState();if("loading"!==r.pluginStatus)return e.bD.setState(r),r;const t=r.pluginURL;if(this.self.importScripts(t),e.bD.isParsed()){const r={pluginStatus:"loaded",pluginURL:t};return e.bD.setState(r),r}throw e.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${t}`)}))}_getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}_getLayerIndex(e){let r=this.layerIndexes[e];return r||(r=this.layerIndexes[e]=new t),r}_getWorkerSource(e,t,r){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][r]){const i={sendAsync:(t,r)=>(t.targetMapId=e,this.actor.sendAsync(t,r))};switch(t){case"vector":this.workerSources[e][t][r]=new o(i,this._getLayerIndex(e),this._getAvailableImages(e));break;case"geojson":this.workerSources[e][t][r]=new ye(i,this._getLayerIndex(e),this._getAvailableImages(e));break;default:this.workerSources[e][t][r]=new this.externalWorkerSourceTypes[t](i,this._getLayerIndex(e),this._getAvailableImages(e))}}return this.workerSources[e][t][r]}_getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new a),this.demWorkerSources[e][t]}}return e.i(self)&&(self.worker=new _e(self)),_e})),r("index",["exports","./shared"],(function(e,t){var r="4.7.1";let i,n;const o={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:e=>new Promise(((r,i)=>{const n=requestAnimationFrame(r);e.signal.addEventListener("abort",(()=>{cancelAnimationFrame(n),i(t.c())}))})),getImageData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getImageCanvasContext(e).getImageData(-t,-t,e.width+2*t,e.height+2*t)},getImageCanvasContext(e){const t=window.document.createElement("canvas"),r=t.getContext("2d",{willReadFrequently:!0});if(!r)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0,e.width,e.height),r},resolveURL:e=>(i||(i=document.createElement("a")),i.href=e,i.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==n&&(n=matchMedia("(prefers-reduced-motion: reduce)")),n.matches)}};class a{static testProp(e){if(!a.docStyle)return e[0];for(let t=0;t<e.length;t++)if(e[t]in a.docStyle)return e[t];return e[0]}static create(e,t,r){const i=window.document.createElement(e);return void 0!==t&&(i.className=t),r&&r.appendChild(i),i}static createNS(e,t){return window.document.createElementNS(e,t)}static disableDrag(){a.docStyle&&a.selectProp&&(a.userSelect=a.docStyle[a.selectProp],a.docStyle[a.selectProp]="none")}static enableDrag(){a.docStyle&&a.selectProp&&(a.docStyle[a.selectProp]=a.userSelect)}static setTransform(e,t){e.style[a.transformProp]=t}static addEventListener(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.addEventListener(t,r,"passive"in i?i:i.capture)}static removeEventListener(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.removeEventListener(t,r,"passive"in i?i:i.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",a.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",a.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",a.suppressClickInternal,!0)}),0)}static getScale(e){const t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}static getPoint(e,r,i){const n=r.boundingClientRect;return new t.P((i.clientX-n.left)/r.x-e.clientLeft,(i.clientY-n.top)/r.y-e.clientTop)}static mousePos(e,t){const r=a.getScale(e);return a.getPoint(e,r,t)}static touchPos(e,t){const r=[],i=a.getScale(e);for(let n=0;n<t.length;n++)r.push(a.getPoint(e,i,t[n]));return r}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}a.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,a.selectProp=a.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),a.transformProp=a.testProp(["transform","WebkitTransform"]);const s={supported:!1,testSupport:function(e){!u&&c&&(d?h(e):l=e)}};let l,c,u=!1,d=!1;function h(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,c),e.isContextLost())return;s.supported=!0}catch(e){}e.deleteTexture(t),u=!0}var p;"undefined"!=typeof document&&(c=document.createElement("img"),c.onload=()=>{l&&h(l),l=null,d=!0},c.onerror=()=>{u=!0,l=null},c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(e){let r,i,n,o;e.resetRequestQueue=()=>{r=[],i=0,n=0,o={}},e.addThrottleControl=e=>{const t=n++;return o[t]=e,t},e.removeThrottleControl=e=>{delete o[e],l()},e.getImage=function(e,i){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(((o,a)=>{s.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),t.e(e,{type:"image"}),r.push({abortController:i,requestParameters:e,supportImageRefresh:n,state:"queued",onError:e=>{a(e)},onSuccess:e=>{o(e)}}),l()}))};const a=e=>t._(this,void 0,void 0,(function*(){e.state="running";const{requestParameters:r,supportImageRefresh:n,onError:o,onSuccess:a,abortController:s}=e,u=!1===n&&!t.i(self)&&!t.g(r.url)&&(!r.headers||Object.keys(r.headers).reduce(((e,t)=>e&&"accept"===t),!0));i++;const d=u?c(r,s):t.m(r,s);try{const r=yield d;delete e.abortController,e.state="completed",r.data instanceof HTMLImageElement||t.b(r.data)?a(r):r.data&&a({data:yield(h=r.data,"function"==typeof createImageBitmap?t.d(h):t.f(h)),cacheControl:r.cacheControl,expires:r.expires})}catch(t){delete e.abortController,o(t)}finally{i--,l()}var h})),l=()=>{const e=(()=>{for(const e of Object.keys(o))if(o[e]())return!0;return!1})()?t.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:t.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let t=i;t<e&&r.length>0;t++){const e=r.shift();e.abortController.signal.aborted?t--:a(e)}},c=(e,r)=>new Promise(((i,n)=>{const o=new Image,a=e.url,s=e.credentials;s&&"include"===s?o.crossOrigin="use-credentials":(s&&"same-origin"===s||!t.s(a))&&(o.crossOrigin="anonymous"),r.signal.addEventListener("abort",(()=>{o.src="",n(t.c())})),o.fetchPriority="high",o.onload=()=>{o.onerror=o.onload=null,i({data:o})},o.onerror=()=>{o.onerror=o.onload=null,r.signal.aborted||n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},o.src=a}))}(p||(p={})),p.resetRequestQueue();class f{constructor(e){this._transformRequestFn=e}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function m(e){var r=new t.A(3);return r[0]=e[0],r[1]=e[1],r[2]=e[2],r}var g,y=function(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e};g=new t.A(3),t.A!=Float32Array&&(g[0]=0,g[1]=0,g[2]=0);var _=function(e){var t=e[0],r=e[1];return t*t+r*r};function b(e){const t=[];if("string"==typeof e)t.push({id:"default",url:e});else if(e&&e.length>0){const r=[];for(const{id:i,url:n}of e){const e=`${i}${n}`;-1===r.indexOf(e)&&(r.push(e),t.push({id:i,url:n}))}}return t}function v(e,t,r){const i=e.split("?");return i[0]+=`${t}${r}`,i.join("?")}!function(){var e=new t.A(2);t.A!=Float32Array&&(e[0]=0,e[1]=0)}();class x{constructor(e,t,r,i){this.context=e,this.format=r,this.texture=e.gl.createTexture(),this.update(t,i)}update(e,r,i){const{width:n,height:o}=e,a=!(this.size&&this.size[0]===n&&this.size[1]===o||i),{context:s}=this,{gl:l}=s;if(this.useMipmap=Boolean(r&&r.useMipmap),l.bindTexture(l.TEXTURE_2D,this.texture),s.pixelStoreUnpackFlipY.set(!1),s.pixelStoreUnpack.set(1),s.pixelStoreUnpackPremultiplyAlpha.set(this.format===l.RGBA&&(!r||!1!==r.premultiply)),a)this.size=[n,o],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,n,o,0,this.format,l.UNSIGNED_BYTE,e.data);else{const{x:r,y:a}=i||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||t.b(e)?l.texSubImage2D(l.TEXTURE_2D,0,r,a,l.RGBA,l.UNSIGNED_BYTE,e):l.texSubImage2D(l.TEXTURE_2D,0,r,a,n,o,l.RGBA,l.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&l.generateMipmap(l.TEXTURE_2D)}bind(e,t,r){const{context:i}=this,{gl:n}=i;n.bindTexture(n.TEXTURE_2D,this.texture),r!==n.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(r=n.LINEAR),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r||e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function w(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class S extends t.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,promiseResolve:t}of this.requestors)t(this._getImagesForIds(e));this.requestors=[]}}getImage(e){const r=this.images[e];if(r&&!r.data&&r.spriteData){const e=r.spriteData;r.data=new t.R({width:e.width,height:e.height},e.context.getImageData(e.x,e.y,e.width,e.height).data),r.spriteData=null}return r}addImage(e,t){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,t)&&(this.images[e]=t)}_validate(e,r){let i=!0;const n=r.data||r.spriteData;return this._validateStretch(r.stretchX,n&&n.width)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "stretchX" value`))),i=!1),this._validateStretch(r.stretchY,n&&n.height)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "stretchY" value`))),i=!1),this._validateContent(r.content,r)||(this.fire(new t.j(new Error(`Image "${e}" has invalid "content" value`))),i=!1),i}_validateStretch(e,t){if(!e)return!0;let r=0;for(const i of e){if(i[0]<r||i[1]<i[0]||t<i[1])return!1;r=i[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;const r=t.spriteData,i=r&&r.width||t.data.width,n=r&&r.height||t.data.height;return!(e[0]<0||i<e[0]||e[1]<0||n<e[1]||e[2]<0||i<e[2]||e[3]<0||n<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.getImage(e);if(r&&(i.data.width!==t.data.width||i.data.height!==t.data.height))throw new Error(`size mismatch between old image (${i.data.width}x${i.data.height}) and new image (${t.data.width}x${t.data.height}).`);t.version=i.version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((t,r)=>{let i=!0;if(!this.isLoaded())for(const n of e)this.images[n]||(i=!1);this.isLoaded()||i?t(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:t})}))}_getImagesForIds(e){const r={};for(const i of e){let e=this.getImage(i);e||(this.fire(new t.k("styleimagemissing",{id:i})),e=this.getImage(i)),e?r[i]={data:e.data.clone(),pixelRatio:e.pixelRatio,sdf:e.sdf,version:e.version,stretchX:e.stretchX,stretchY:e.stretchY,content:e.content,textFitWidth:e.textFitWidth,textFitHeight:e.textFitHeight,hasRenderCallback:Boolean(e.userImage&&e.userImage.render)}:t.w(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return r}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(e){const r=this.patterns[e],i=this.getImage(e);if(!i)return null;if(r&&r.position.version===i.version)return r.position;if(r)r.position.version=i.version;else{const r={w:i.data.width+2,h:i.data.height+2,x:0,y:0},n=new t.I(r,i);this.patterns[e]={bin:r,position:n}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new x(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const t in this.patterns)e.push(this.patterns[t].bin);const{w:r,h:i}=t.p(e),n=this.atlasImage;n.resize({width:r||1,height:i||1});for(const o in this.patterns){const{bin:e}=this.patterns[o],r=e.x+1,i=e.y+1,a=this.getImage(o).data,s=a.width,l=a.height;t.R.copy(a,n,{x:0,y:0},{x:r,y:i},{width:s,height:l}),t.R.copy(a,n,{x:0,y:l-1},{x:r,y:i-1},{width:s,height:1}),t.R.copy(a,n,{x:0,y:0},{x:r,y:i+l},{width:s,height:1}),t.R.copy(a,n,{x:s-1,y:0},{x:r-1,y:i},{width:1,height:l}),t.R.copy(a,n,{x:0,y:0},{x:r+s,y:i},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const r of e){if(this.callbackDispatchedThisFrame[r])continue;this.callbackDispatchedThisFrame[r]=!0;const e=this.getImage(r);e||t.w(`Image with ID: "${r}" was not found`),w(e)&&this.updateImage(r,e)}}}const I=1e20;function T(e,t,r,i,n,o,a,s,l){for(let c=t;c<t+i;c++)k(e,r*o+c,o,n,a,s,l);for(let c=r;c<r+n;c++)k(e,c*o+t,1,i,a,s,l)}function k(e,t,r,i,n,o,a){o[0]=0,a[0]=-I,a[1]=I,n[0]=e[t];for(let s=1,l=0,c=0;s<i;s++){n[s]=e[t+s*r];const i=s*s;do{const e=o[l];c=(n[s]-n[e]+i-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=I}for(let s=0,l=0;s<i;s++){for(;a[l+1]<s;)l++;const i=o[l],c=s-i;e[t+s*r]=n[i]+c*c}}class E{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return t._(this,void 0,void 0,(function*(){const t=[];for(const n in e)for(const r of e[n])t.push(this._getAndCacheGlyphsPromise(n,r));const r=yield Promise.all(t),i={};for(const{stack:e,id:n,glyph:o}of r)i[e]||(i[e]={}),i[e][n]=o&&{id:o.id,bitmap:o.bitmap.clone(),metrics:o.metrics};return i}))}_getAndCacheGlyphsPromise(e,r){return t._(this,void 0,void 0,(function*(){let t=this.entries[e];t||(t=this.entries[e]={glyphs:{},requests:{},ranges:{}});let i=t.glyphs[r];if(void 0!==i)return{stack:e,id:r,glyph:i};if(i=this._tinySDF(t,e,r),i)return t.glyphs[r]=i,{stack:e,id:r,glyph:i};const n=Math.floor(r/256);if(256*n>65535)throw new Error("glyphs > 65535 not supported");if(t.ranges[n])return{stack:e,id:r,glyph:i};if(!this.url)throw new Error("glyphsUrl is not set");if(!t.requests[n]){const r=E.loadGlyphRange(e,n,this.url,this.requestManager);t.requests[n]=r}const o=yield t.requests[n];for(const e in o)this._doesCharSupportLocalGlyph(+e)||(t.glyphs[+e]=o[+e]);return t.ranges[n]=!0,{stack:e,id:r,glyph:o[r]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(e))}_tinySDF(e,r,i){const n=this.localIdeographFontFamily;if(!n)return;if(!this._doesCharSupportLocalGlyph(i))return;let o=e.tinySDF;if(!o){let t="400";/bold/i.test(r)?t="900":/medium/i.test(r)?t="500":/light/i.test(r)&&(t="200"),o=e.tinySDF=new E.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:n,fontWeight:t})}const a=o.draw(String.fromCharCode(i));return{id:i,bitmap:new t.o({width:a.width||60,height:a.height||60},a.data),metrics:{width:a.glyphWidth/2||24,height:a.glyphHeight/2||24,left:a.glyphLeft/2+.5||0,top:a.glyphTop/2-27.5||-8,advance:a.glyphAdvance/2||24,isDoubleResolution:!0}}}}E.loadGlyphRange=function(e,r,i,n){return t._(this,void 0,void 0,(function*(){const o=256*r,a=o+255,s=n.transformRequest(i.replace("{fontstack}",e).replace("{range}",`${o}-${a}`),"Glyphs"),l=yield t.l(s,new AbortController);if(!l||!l.data)throw new Error(`Could not load glyph range. range: ${r}, ${o}-${a}`);const c={};for(const e of t.n(l.data))c[e.id]=e;return c}))},E.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:r=8,cutoff:i=.25,fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=i,this.radius=r;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${n}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:n,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(r),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-n))),l=Math.min(this.size-this.buffer,a+Math.ceil(i)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),h=new Uint8ClampedArray(d),p={data:h,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const _=f.getImageData(m,m,s,l);y.fill(I,0,d),g.fill(0,0,d);for(let b=0;b<l;b++)for(let e=0;e<s;e++){const t=_.data[4*(b*s+e)+3]/255;if(0===t)continue;const r=(b+m)*c+e+m;if(1===t)y[r]=0,g[r]=I;else{const e=.5-t;y[r]=e>0?e*e:0,g[r]=e<0?e*e:0}}T(y,0,0,c,u,c,this.f,this.v,this.z),T(g,m,m,s,l,c,this.f,this.v,this.z);for(let b=0;b<d;b++){const e=Math.sqrt(y[b])-Math.sqrt(g[b]);h[b]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};class A{constructor(){this.specification=t.v.light.position}possiblyEvaluate(e,r){return t.x(e.expression.evaluate(r))}interpolate(e,r,i){return{x:t.y.number(e.x,r.x,i),y:t.y.number(e.y,r.y,i),z:t.y.number(e.z,r.z,i)}}}let P;class C extends t.E{constructor(e){super(),P=P||new t.q({anchor:new t.D(t.v.light.anchor),position:new A,color:new t.D(t.v.light.color),intensity:new t.D(t.v.light.intensity)}),this._transitionable=new t.T(P),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.r,e,r))for(const t in e){const r=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),r):this._transitionable.setValue(t,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r,i){return(!i||!1!==i.validate)&&t.t(this,e.call(t.u,{value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.v}))}}const M=new t.q({"sky-color":new t.D(t.v.sky["sky-color"]),"horizon-color":new t.D(t.v.sky["horizon-color"]),"fog-color":new t.D(t.v.sky["fog-color"]),"fog-ground-blend":new t.D(t.v.sky["fog-ground-blend"]),"horizon-fog-blend":new t.D(t.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new t.D(t.v.sky["sky-horizon-blend"]),"atmosphere-blend":new t.D(t.v.sky["atmosphere-blend"])});class O extends t.E{constructor(e){super(),this._transitionable=new t.T(M),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new t.z(0))}setSky(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(t.B,e,r)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const t in e){const r=e[t];t.endsWith("-transition")?this._transitionable.setTransition(t.slice(0,-11),r):this._transitionable.setValue(t,r)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return!1!==(null==i?void 0:i.validate)&&t.t(this,e.call(t.u,t.e({value:r,style:{glyphs:!0,sprite:!0},styleSpec:t.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class R{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const r=e.join(",")+String(t);return this.dashEntry[r]||(this.dashEntry[r]=this.addDash(e,t)),this.dashEntry[r]}getDashRanges(e,t,r){const i=[];let n=e.length%2==1?-e[e.length-1]*r:0,o=e[0]*r,a=!0;i.push({left:n,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];n=s*r,s+=t,o=s*r,i.push({left:n,right:o,isDash:a,zeroLength:0===t})}return i}addRoundDash(e,t,r){const i=t/2;for(let n=-r;n<=r;n++){const t=this.width*(this.nextRow+r+n);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let d;const h=n/r*(i+1);if(a.isDash){const e=i-Math.abs(h);d=Math.sqrt(u*u+e*e)}else d=i-Math.sqrt(u*u+h*h);this.data[t+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e){for(let a=e.length-1;a>=0;--a){const t=e[a],r=e[a+1];t.zeroLength?e.splice(a,1):r&&r.isDash===t.isDash&&(r.left=t.left,e.splice(a,1))}const t=e[0],r=e[e.length-1];t.isDash===r.isDash&&(t.left=r.left-this.width,r.right=t.right+this.width);const i=this.width*this.nextRow;let n=0,o=e[n];for(let a=0;a<this.width;a++){a/o.right>1&&(o=e[++n]);const t=Math.abs(a-o.left),r=Math.abs(a-o.right),s=Math.min(t,r);this.data[i+a]=Math.max(0,Math.min(255,(o.isDash?s:-s)+128))}}addDash(e,r){const i=r?7:0,n=2*i+1;if(this.nextRow+n>this.height)return t.w("LineAtlas out of space"),null;let o=0;for(let t=0;t<e.length;t++)o+=e[t];if(0!==o){const t=this.width/o,n=this.getDashRanges(e,this.width,t);r?this.addRoundDash(n,t,i):this.addRegularDash(n)}const a={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=n,this.dirty=!0,a}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}const B="maplibre_preloaded_worker_pool";class D{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<D.workerCount;)this.workers.push(new Worker(t.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[B]}numActive(){return Object.keys(this.active).length}}const z=Math.floor(o.hardwareConcurrency/2);let L,F;function N(){return L||(L=new D),L}D.workerCount=t.C(globalThis)?Math.max(Math.min(z,3),1):1;class j{constructor(e,r){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r;const i=this.workerPool.acquire(r);for(let n=0;n<i.length;n++){const e=new t.F(i[n],r);e.name=`Worker ${n}`,this.actors.push(e)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,t){const r=[];for(const i of this.actors)r.push(i.sendAsync({type:e,data:t}));return Promise.all(r)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.actors.forEach((e=>{e.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,t){for(const r of this.actors)r.registerMessageHandler(e,t)}}function U(){return F||(F=new j(N(),t.G),F.registerMessageHandler("GR",((e,r,i)=>t.m(r,i)))),F}function V(e,r){const i=t.H();return t.J(i,i,[1,1,0]),t.K(i,i,[.5*e.width,.5*e.height,1]),t.L(i,i,e.calculatePosMatrix(r.toUnwrapped()))}function $(e,t,r,i,n,o){const a=function(e,t,r){if(e)for(const i of e){const e=t[i];if(e&&e.source===r&&"fill-extrusion"===e.type)return!0}else for(const i in t){const e=t[i];if(e.source===r&&"fill-extrusion"===e.type)return!0}return!1}(n&&n.layers,t,e.id),s=o.maxPitchScaleFactor(),l=e.tilesIn(i,s,a);l.sort(W);const c=[];for(const d of l)c.push({wrappedTileID:d.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,r,e._state,d.queryGeometry,d.cameraQueryGeometry,d.scale,n,o,s,V(e.transform,d.tileID))});const u=function(e){const t={},r={};for(const i of e){const e=i.queryResults,n=i.wrappedTileID,o=r[n]=r[n]||{};for(const r in e){const i=e[r],n=o[r]=o[r]||{},a=t[r]=t[r]||[];for(const e of i)n[e.featureIndex]||(n[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const d in u)u[d].forEach((t=>{const r=t.feature,i=e.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return u}function W(e,t){const r=e.tileID,i=t.tileID;return r.overscaledZ-i.overscaledZ||r.canonical.y-i.canonical.y||r.wrap-i.wrap||r.canonical.x-i.canonical.x}function H(e,r,i){return t._(this,void 0,void 0,(function*(){let n=e;if(e.url?n=(yield t.h(r.transformRequest(e.url,"Source"),i)).data:yield o.frameAsync(i),!n)return null;const a=t.M(t.e(n,e),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in n&&n.vector_layers&&(a.vectorLayerIds=n.vector_layers.map((e=>e.id))),a}))}class G{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):Array.isArray(e)&&(4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof t.N?new t.N(e.lng,e.lat):t.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof t.N?new t.N(e.lng,e.lat):t.N.convert(e),this}extend(e){const r=this._sw,i=this._ne;let n,o;if(e instanceof t.N)n=e,o=e;else{if(!(e instanceof G))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(G.convert(e)):this.extend(t.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(t.N.convert(e)):this;if(n=e._sw,o=e._ne,!n||!o)return this}return r||i?(r.lng=Math.min(n.lng,r.lng),r.lat=Math.min(n.lat,r.lat),i.lng=Math.max(o.lng,i.lng),i.lat=Math.max(o.lat,i.lat)):(this._sw=new t.N(n.lng,n.lat),this._ne=new t.N(o.lng,o.lat)),this}getCenter(){return new t.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new t.N(this.getWest(),this.getNorth())}getSouthEast(){return new t.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:r,lat:i}=t.N.convert(e);let n=this._sw.lng<=r&&r<=this._ne.lng;return this._sw.lng>this._ne.lng&&(n=this._sw.lng>=r&&r>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&n}static convert(e){return e instanceof G?e:e?new G(e):e}static fromLngLat(e){const r=360*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)/40075017,i=r/Math.cos(Math.PI/180*e.lat);return new G(new t.N(e.lng-i,e.lat-r),new t.N(e.lng+i,e.lat+r))}adjustAntiMeridian(){const e=new t.N(this._sw.lng,this._sw.lat),r=new t.N(this._ne.lng,this._ne.lat);return new G(e,e.lng>r.lng?new t.N(r.lng+360,r.lat):r)}}class q{constructor(e,t,r){this.bounds=G.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const r=Math.pow(2,e.z),i=Math.floor(t.O(this.bounds.getWest())*r),n=Math.floor(t.Q(this.bounds.getNorth())*r),o=Math.ceil(t.O(this.bounds.getEast())*r),a=Math.ceil(t.Q(this.bounds.getSouth())*r);return e.x>=i&&e.x<o&&e.y>=n&&e.y<a}}class Z extends t.E{constructor(e,r,i,n){if(super(),this.id=e,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.e(this,t.M(r,["url","scheme","tileSize","promoteId"])),this._options=t.e({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n)}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield H(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return t.e({},this._options)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),r={request:this.map._requestManager.transformRequest(t,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.request.collectResourceTiming=this._collectResourceTiming;let i="RT";if(e.actor&&"expired"!==e.state){if("loading"===e.state)return new Promise(((t,r)=>{e.reloadPromise={resolve:t,reject:r}}))}else e.actor=this.dispatcher.getActor(),i="LT";e.abortController=new AbortController;try{const t=yield e.actor.sendAsync({type:i,data:r},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,t)}catch(t){if(delete e.abortController,e.aborted)return;if(t&&404!==t.status)throw t;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,t){if(t&&t.resourceTiming&&(e.resourceTiming=t.resourceTiming),t&&this.map._refreshExpiredTiles&&e.setExpiryData(t),e.loadVectorData(t,this.map.painter),e.reloadPromise){const t=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(t.resolve).catch(t.reject)}}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class X extends t.E{constructor(e,r,i,n){super(),this.id=e,this.dispatcher=i,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.e({type:"raster"},r),t.e(this,t.M(r,["url","scheme","tileSize"]))}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield H(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(t.e(this,e),e.bounds&&(this.tileBounds=new q(e.bounds,this.minzoom,this.maxzoom)),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new t.j(e))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return t.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const r=yield p.getImage(this.map._requestManager.transformRequest(t,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(r&&r.data){this.map._refreshExpiredTiles&&r.cacheControl&&r.expires&&e.setExpiryData({cacheControl:r.cacheControl,expires:r.expires});const t=this.map.painter.context,i=t.gl,n=r.data;e.texture=this.map.painter.getTileTexture(n.width),e.texture?e.texture.update(n,{useMipmap:!0}):(e.texture=new x(t,n,i.RGBA,{useMipmap:!0}),e.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE,i.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class Y extends X{constructor(e,r,i,n){super(e,r,i,n),this.type="raster-dem",this.maxzoom=22,this._options=t.e({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox",this.redFactor=r.redFactor,this.greenFactor=r.greenFactor,this.blueFactor=r.blueFactor,this.baseShift=r.baseShift}loadTile(e){return t._(this,void 0,void 0,(function*(){const r=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),i=this.map._requestManager.transformRequest(r,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const r=yield p.getImage(i,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(r&&r.data){const i=r.data;this.map._refreshExpiredTiles&&r.cacheControl&&r.expires&&e.setExpiryData({cacheControl:r.cacheControl,expires:r.expires});const n=t.b(i)&&t.U()?i:yield this.readImageNow(i),o={type:this.type,uid:e.uid,source:this.id,rawImageData:n,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||"expired"===e.state){e.actor=this.dispatcher.getActor();const t=yield e.actor.sendAsync({type:"LDT",data:o});e.dem=t,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(t){if(delete e.abortController,e.aborted)e.state="unloaded";else if(t)throw e.state="errored",t}}))}readImageNow(e){return t._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&t.V()){const r=e.width+2,i=e.height+2;try{return new t.R({width:r,height:i},yield t.W(e,-1,-1,r,i))}catch(e){}}return o.getImageData(e,1)}))}_getNeighboringTiles(e){const r=e.canonical,i=Math.pow(2,r.z),n=(r.x-1+i)%i,o=0===r.x?e.wrap-1:e.wrap,a=(r.x+1+i)%i,s=r.x+1===i?e.wrap+1:e.wrap,l={};return l[new t.S(e.overscaledZ,o,r.z,n,r.y).key]={backfilled:!1},l[new t.S(e.overscaledZ,s,r.z,a,r.y).key]={backfilled:!1},r.y>0&&(l[new t.S(e.overscaledZ,o,r.z,n,r.y-1).key]={backfilled:!1},l[new t.S(e.overscaledZ,e.wrap,r.z,r.x,r.y-1).key]={backfilled:!1},l[new t.S(e.overscaledZ,s,r.z,a,r.y-1).key]={backfilled:!1}),r.y+1<i&&(l[new t.S(e.overscaledZ,o,r.z,n,r.y+1).key]={backfilled:!1},l[new t.S(e.overscaledZ,e.wrap,r.z,r.x,r.y+1).key]={backfilled:!1},l[new t.S(e.overscaledZ,s,r.z,a,r.y+1).key]={backfilled:!1}),l}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class K extends t.E{constructor(e,r,i,n){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=i.getActor(),this.setEventedParent(n),this._data=r.data,this._options=t.e({},r),this._collectResourceTiming=r.collectResourceTiming,void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;const o=t.X/this.tileSize;void 0!==r.clusterMaxZoom&&this.maxzoom<=r.clusterMaxZoom&&t.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${r.clusterMaxZoom}".`),this.workerOptions=t.e({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*o,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*o,extent:t.X,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?r.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,r.clusterMinPoints||2),extent:t.X,radius:(r.clusterRadius||50)*o,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties,filter:r.filter},r.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}load(){return t._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return t._(this,void 0,void 0,(function*(){const e=t.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(void 0!==e.clusterRadius&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),void 0!==e.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,t,r){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:t,offset:r}})}_updateWorkerData(e){return t._(this,void 0,void 0,(function*(){const r=t.e({type:this.type},this.workerOptions);e?r.dataDiff=e:"string"==typeof this._data?(r.request=this.map._requestManager.transformRequest(o.resolveURL(this._data),"Source"),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new t.k("dataloading",{dataType:"source"}));try{const e=yield this.actor.sendAsync({type:"LD",data:r});if(this._pendingLoads--,this._removed||e.abandoned)return void this.fire(new t.k("dataabort",{dataType:"source"}));let i=null;e.resourceTiming&&e.resourceTiming[this.id]&&(i=e.resourceTiming[this.id].slice(0));const n={dataType:"source"};this._collectResourceTiming&&i&&i.length>0&&t.e(n,{resourceTiming:i}),this.fire(new t.k("data",Object.assign(Object.assign({},n),{sourceDataType:"metadata"}))),this.fire(new t.k("data",Object.assign(Object.assign({},n),{sourceDataType:"content"})))}catch(e){if(this._pendingLoads--,this._removed)return void this.fire(new t.k("dataabort",{dataType:"source"}));this.fire(new t.j(e))}}))}loaded(){return 0===this._pendingLoads}loadTile(e){return t._(this,void 0,void 0,(function*(){const t=e.actor?"RT":"LT";e.actor=this.actor;const r={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const i=yield this.actor.sendAsync({type:t,data:r},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(i,this.map.painter,"RT"===t)}))}abortTile(e){return t._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return t._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return t.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var J=t.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Q extends t.E{constructor(e,t,r,i){super(),this.id=e,this.dispatcher=r,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=t}load(e){return t._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new t.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const t=yield p.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,t&&t.data&&(this.image=t.data,e&&(this.coordinates=e),this._finishLoading())}catch(e){this._request=null,this._loaded=!0,this.fire(new t.j(e))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const r=e.map(t.Z.fromLngLat);this.tileID=function(e){let r=1/0,i=1/0,n=-1/0,o=-1/0;for(const t of e)r=Math.min(r,t.x),i=Math.min(i,t.y),n=Math.max(n,t.x),o=Math.max(o,t.y);const a=Math.max(n-r,o-i),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),l=Math.pow(2,s);return new t.a1(s,Math.floor((r+n)/2*l),Math.floor((i+o)/2*l))}(r),this.minzoom=this.maxzoom=this.tileID.z;const i=r.map((e=>this.tileID.getTilePoint(e)._round()));return this._boundsArray=new t.$,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.X,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.X),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.X,t.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const e=this.map.painter.context,r=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new x(e,this.image,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return t._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ee extends Q{constructor(e,t,r,i){super(e,t,r,i),this.roundZoom=!0,this.type="video",this.options=t}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const t of e.urls)this.urls.push(this.map._requestManager.transformRequest(t,"Source").url);try{const e=yield t.a3(this.urls);if(this._loaded=!0,!e)return;this.video=e,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(e){this.fire(new t.j(e))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const r=this.video.seekable;e<r.start(0)||e>r.end(0)?this.fire(new t.j(new t.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${r.start(0)} and ${r.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const e=this.map.painter.context,r=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.video)):(this.texture=new x(e,this.video,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));let i=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,i=!0)}i&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class te extends Q{constructor(e,r,i,n){super(e,r,i,n),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new t.j(new t.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.j(new t.a2(`sources.${e}`,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.j(new t.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof HTMLCanvasElement||this.fire(new t.j(new t.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.j(new t.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}load(){return t._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const r=this.map.painter.context,i=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=t.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new x(r,this.canvas,i.RGBA,{premultiply:!0});let n=!1;for(const t in this.tiles){const e=this.tiles[t];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture,n=!0)}n&&this.fire(new t.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const re={},ie=e=>{switch(e){case"geojson":return K;case"image":return Q;case"raster":return X;case"raster-dem":return Y;case"vector":return Z;case"video":return ee;case"canvas":return te}return re[e]},ne="RTLPluginLoaded";class oe extends t.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=U()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((e=>{throw this.status="error",e}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return t._(this,arguments,void 0,(function(e){var t=this;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){if(t.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(t.url=o.resolveURL(e),!t.url)throw new Error(`requested url ${e} is invalid`);if("unavailable"===t.status){if(!r)return t._requestImport();t.status="deferred",t._syncState(t.status)}else if("requested"===t.status)return t._requestImport()}()}))}_requestImport(){return t._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new t.k(ne))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let ae=null;function se(){return ae||(ae=new oe),ae}class le{constructor(e,r){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=t.a4(),this.uses=0,this.tileSize=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,r,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const r={};if(!t)return r;for(const i of e){const e=i.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){i.layers=e,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)r[t.id]=i}}return r}(e.buckets,r.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const r=this.buckets[e];if(r instanceof t.a6){if(this.hasSymbolBuckets=!0,!i)break;r.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const r=this.buckets[e];if(r instanceof t.a6&&r.hasRTLText){this.hasRTLText=!0,se().lazyLoad();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,r.style.getLayer(e).queryRadius(t))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new t.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const r in this.buckets){const t=this.buckets[r];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new x(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new x(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,r,i,n,o,a,s,l,c){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:i,cameraQueryGeometry:n,scale:o,tileSize:this.tileSize,pixelPosMatrix:c,transform:s,params:a,queryPadding:this.queryPadding*l},e,t,r):{}}querySourceFeatures(e,r){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const n=i.loadVTLayers(),o=r&&r.sourceLayer?r.sourceLayer:"",a=n._geojsonTileLayer||n[o];if(!a)return;const s=t.a7(r&&r.filter),{z:l,x:c,y:u}=this.tileID.canonical,d={z:l,x:c,y:u};for(let h=0;h<a.length;h++){const r=a.feature(h);if(s.needGeometry){const e=t.a8(r,!0);if(!s.filter(new t.z(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!s.filter(new t.z(this.tileID.overscaledZ),r))continue;const n=i.getId(r,o),p=new t.a9(r,l,c,u,n);p.tile=d,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const r=this.expirationTime;if(e.cacheControl){const r=t.aa(e.cacheControl);r["max-age"]&&(this.expirationTime=Date.now()+1e3*r["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(r)if(this.expirationTime<r)t=!0;else{const i=this.expirationTime-r;i?this.expirationTime=e+Math.max(i,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const r=this.latestFeatureIndex.loadVTLayers();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const n=this.buckets[i],o=n.layers[0].sourceLayer||"_geojsonTileLayer",a=r[o],s=e[o];if(!a||!s||0===Object.keys(s).length)continue;n.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(i);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(n)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=o.now()+e}setDependencies(e,t){const r={};for(const i of t)r[i]=!0;this.dependencies[e]=r}hasDependency(e,t){for(const r of e){const e=this.dependencies[r];if(e)for(const r of t)if(e[r])return!0}return!1}}class ce{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,r){const i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const n={value:t,timeout:void 0};if(void 0!==r&&(n.timeout=setTimeout((()=>{this.remove(e,n)}),r)),this.data[i].push(n),this.order.push(i),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const r=e.wrapped().key,i=void 0===t?0:this.data[r].indexOf(t),n=this.data[r][i];return this.data[r].splice(i,1),n.timeout&&clearTimeout(n.timeout),0===this.data[r].length&&delete this.data[r],this.onRemove(n.value),this.order.splice(this.order.indexOf(r),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const r in this.data)for(const i of this.data[r])e(i.value)||t.push(i);for(const r of t)this.remove(r.value.tileID,r)}}class ue{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,r,i){const n=String(r);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][n]=this.stateChanges[e][n]||{},t.e(this.stateChanges[e][n],i),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==n&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][n]){this.deletedStates[e][n]={};for(const t in this.state[e][n])i[t]||(this.deletedStates[e][n][t]=null)}else for(const t in i)this.deletedStates[e]&&this.deletedStates[e][n]&&null===this.deletedStates[e][n][t]&&delete this.deletedStates[e][n][t]}removeFeatureState(e,t,r){if(null===this.deletedStates[e])return;const i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},r&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][r]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(r in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][r]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}getState(e,r){const i=String(r),n=t.e({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const t=this.deletedStates[e][r];if(null===t)return{};for(const e in t)delete n[e]}return n}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,r){const i={};for(const n in this.stateChanges){this.state[n]=this.state[n]||{};const e={};for(const r in this.stateChanges[n])this.state[n][r]||(this.state[n][r]={}),t.e(this.state[n][r],this.stateChanges[n][r]),e[r]=this.state[n][r];i[n]=e}for(const n in this.deletedStates){this.state[n]=this.state[n]||{};const e={};if(null===this.deletedStates[n])for(const t in this.state[n])e[t]={},this.state[n][t]={};else for(const t in this.deletedStates[n]){if(null===this.deletedStates[n][t])this.state[n][t]={};else for(const e of Object.keys(this.deletedStates[n][t]))delete this.state[n][t][e];e[t]=this.state[n][t]}i[n]=i[n]||{},t.e(i[n],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const t in e)e[t].setFeatureState(i,r)}}class de extends t.E{constructor(e,t,r){super(),this.id=e,this.dispatcher=r,this.on("data",(e=>this._dataHandler(e))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((e,t,r,i)=>{const n=new(ie(t.type))(e,t,r,i);if(n.id!==e)throw new Error(`Expected Source id to be ${e} instead of ${n.id}`);return n})(e,t,r,this),this._tiles={},this._cache=new ce(0,(e=>this._unloadTile(e))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ue,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,r,i){return t._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,r,i)}catch(r){e.state="errored",404!==r.status?this._source.fire(new t.j(r,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new t.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const r=this._tiles[t];r.upload(e),r.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(he).map((e=>e.key))}getRenderableIds(e){const r=[];for(const t in this._tiles)this._isIdRenderable(t,e)&&r.push(this._tiles[t]);return e?r.sort(((e,r)=>{const i=e.tileID,n=r.tileID,o=new t.P(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),a=new t.P(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-n.overscaledZ||a.y-o.y||a.x-o.x})).map((e=>e.tileID.key)):r.map((e=>e.tileID)).sort(he).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(e,"reloading")}}_reloadTile(e,r){return t._(this,void 0,void 0,(function*(){const t=this._tiles[e];t&&("loading"!==t.state&&(t.state=r),yield this._loadTile(t,e,r))}))}_tileLoaded(e,r,i){e.timeAdded=o.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(r,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new t.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const t=this.getRenderableIds();for(let i=0;i<t.length;i++){const n=t[i];if(e.neighboringTiles&&e.neighboringTiles[n]){const t=this.getTileByID(n);r(e,t),r(t,e)}}function r(e,t){e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0;let r=t.tileID.canonical.x-e.tileID.canonical.x;const i=t.tileID.canonical.y-e.tileID.canonical.y,n=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===r&&0===i||Math.abs(i)>1||(Math.abs(r)>1&&(1===Math.abs(r+n)?r+=n:1===Math.abs(r-n)&&(r-=n)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,r,i),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,r,i){for(const n in this._tiles){let o=this._tiles[n];if(i[n]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>r)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){i[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const r=this._loadedParentTiles[e.key];return r&&r.tileID.overscaledZ>=t?r:null}for(let r=e.overscaledZ-1;r>=t;r--){const t=e.scaledTo(r),i=this._getLoadedTile(t);if(i)return i}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const r=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,n=Math.floor(r*i*(null===this._maxTileCacheZoomLevels?t.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,n):n;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const r in this._tiles){const i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),e[i.tileID.key]=i}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(t,this._tiles[t])}}_updateCoveredAndRetainedTiles(e,t,r,i,n,a){const s={},l={},c=Object.keys(e),u=o.now();for(const o of c){const r=e[o],i=this._tiles[o];if(!i||0!==i.fadeEndTime&&i.fadeEndTime<=u)continue;const n=this.findLoadedParent(r,t),a=this.findLoadedSibling(r),c=n||a||null;c&&(this._addTile(c.tileID),s[c.tileID.key]=c.tileID),l[o]=r}this._retainLoadedChildren(l,i,r,e);for(const o in s)e[o]||(this._coveredTiles[o]=!0,e[o]=s[o]);if(a){const t={},r={};for(const e of n)this._tiles[e.key].hasData()?t[e.key]=e:r[e.key]=e;for(const i in r){const n=r[i].children(this._source.maxzoom);this._tiles[n[0].key]&&this._tiles[n[1].key]&&this._tiles[n[2].key]&&this._tiles[n[3].key]&&(t[n[0].key]=e[n[0].key]=n[0],t[n[1].key]=e[n[1].key]=n[1],t[n[2].key]=e[n[2].key]=n[2],t[n[3].key]=e[n[3].key]=n[3],delete r[i])}for(const i in r){const n=r[i],o=this.findLoadedParent(n,this._source.minzoom),a=this.findLoadedSibling(n),s=o||a||null;if(s){t[s.tileID.key]=e[s.tileID.key]=s.tileID;for(const e in t)t[e].isChildOf(s.tileID)&&delete t[e]}}for(const e in this._tiles)t[e]||(this._coveredTiles[e]=!0)}}update(e,r){if(!this._sourceLoaded||this._paused)return;let i;this.transform=e,this.terrain=r,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new t.S(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(i=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:r}),this._source.hasTile&&(i=i.filter((e=>this._source.hasTile(e))))):i=[];const n=e.coveringZoomLevel(this._source),o=Math.max(n-de.maxOverzooming,this._source.minzoom),a=Math.max(n+de.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const e={};for(const t of i)if(t.canonical.z>this._source.minzoom){const r=t.scaledTo(t.canonical.z-1);e[r.key]=r;const i=t.scaledTo(Math.max(this._source.minzoom,Math.min(t.canonical.z,5)));e[i.key]=i}i=i.concat(Object.values(e))}const s=0===i.length&&!this._updated&&this._didEmitContent;this._updated=!0,s&&this.fire(new t.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const l=this._updateRetainedTiles(i,n);pe(this._source.type)&&this._updateCoveredAndRetainedTiles(l,o,a,n,i,r);for(const t in l)this._tiles[t].clearFadeHold();const c=t.ab(this._tiles,l);for(const t of c){const e=this._tiles[t];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(t)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,t){var r;const i={},n={},o=Math.max(t-de.maxOverzooming,this._source.minzoom),a=Math.max(t+de.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);i[l.key]=l,e.hasData()||t<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,t,a,i);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(t+1>this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],t=this.getTile(e);if(t&&t.hasData()){i[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(i[e[0].key]&&i[e[1].key]&&i[e[2].key]&&i[e[3].key])continue}let a=e.wasRequested();for(let t=l.overscaledZ-1;t>=o;--t){const o=l.scaledTo(t);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&a&&(e=this._addTile(o)),e){const t=e.hasData();if((t||!(null===(r=this.map)||void 0===r?void 0:r.cancelPendingTileRequestsWhileZooming)||a)&&(i[o.key]=o),a=e.wasRequested(),t)break}}}return i}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let r,i=this._tiles[e].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){r=this._loadedParentTiles[i.key];break}t.push(i.key);const e=i.scaledTo(i.overscaledZ-1);if(r=this._getLoadedTile(e),r)break;i=e}for(const e of t)this._loadedParentTiles[e]=r}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const t=this._tiles[e].tileID,r=this._getLoadedTile(t);this._loadedSiblingTiles[t.key]=r}}_addTile(e){let r=this._tiles[e.key];if(r)return r;r=this._cache.getAndRemove(e),r&&(this._setTileReloadTimer(e.key,r),r.tileID=e,this._state.initializeTileState(r,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,r)));const i=r;return r||(r=new le(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(r,e.key,r.state)),r.uses++,this._tiles[e.key]=r,i||this._source.fire(new t.k("dataloading",{tile:r,coord:r.tileID,dataType:"source"})),r}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),r))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}_dataHandler(e){const t=e.sourceDataType;"source"===e.dataType&&"metadata"===t&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===t&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,r,i){const n=[],o=this.transform;if(!o)return n;const a=i?o.getCameraQueryGeometry(e):e,s=e.map((e=>o.pointCoordinate(e,this.terrain))),l=a.map((e=>o.pointCoordinate(e,this.terrain))),c=this.getIds();let u=1/0,d=1/0,h=-1/0,p=-1/0;for(const t of l)u=Math.min(u,t.x),d=Math.min(d,t.y),h=Math.max(h,t.x),p=Math.max(p,t.y);for(let f=0;f<c.length;f++){const e=this._tiles[c[f]];if(e.holdingForFade())continue;const i=e.tileID,a=Math.pow(2,o.zoom-e.tileID.overscaledZ),m=r*e.queryPadding*t.X/e.tileSize/a,g=[i.getTilePoint(new t.Z(u,d)),i.getTilePoint(new t.Z(h,p))];if(g[0].x-m<t.X&&g[0].y-m<t.X&&g[1].x+m>=0&&g[1].y+m>=0){const t=s.map((e=>i.getTilePoint(e))),r=l.map((e=>i.getTilePoint(e)));n.push({tile:e,tileID:i,queryGeometry:t,cameraQueryGeometry:r,scale:a})}}return n}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const r of t)r.posMatrix=this.transform.calculatePosMatrix(r.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(pe(this._source.type)){const e=o.now();for(const t in this._tiles)if(this._tiles[t].fadeEndTime>=e)return!0}return!1}setFeatureState(e,t,r){this._state.updateState(e=e||"_geojsonTileLayer",t,r)}removeFeatureState(e,t,r){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,r)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,r){const i=this._tiles[e];i&&i.setDependencies(t,r)}reloadTilesForDependencies(e,t){for(const r in this._tiles)this._tiles[r].hasDependency(e,t)&&this._reloadTile(r,"reloading");this._cache.filter((r=>!r.hasDependency(e,t)))}}function he(e,t){const r=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-r||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function pe(e){return"raster"===e||"image"===e||"video"===e}de.maxOverzooming=10,de.maxUnderzooming=3;class fe{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let r=1;r<this.points.length;r++)this._distances[r]=this._distances[r-1]+this.points[r].dist(this.points[r-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(1===this.points.length)return this.points[0];e=t.ac(e,0,1);let r=1,i=this._distances[r];const n=e*this.paddedLength+this.padding;for(;i<n&&r<this._distances.length;)i=this._distances[++r];const o=r-1,a=this._distances[o],s=i-a,l=s>0?(n-a)/s:0;return this.points[o].mult(1-l).add(this.points[r].mult(l))}}function me(e,t){let r=!0;return"always"===e||"never"!==e&&"never"!==t||(r=!1),r}class ge{constructor(e,t,r){const i=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(t/r);for(let o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,r,i,n){this._forEachCell(t,r,i,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(n)}insertCircle(e,t,r,i){this._forEachCell(t-i,r-i,t+i,r+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(r),this.circles.push(i)}_insertBoxCell(e,t,r,i,n,o){this.boxCells[n].push(o)}_insertCircleCell(e,t,r,i,n,o){this.circleCells[n].push(o)}_query(e,t,r,i,n,o,a){if(r<0||e>this.width||i<0||t>this.height)return[];const s=[];if(e<=0&&t<=0&&this.width<=r&&this.height<=i){if(n)return[{key:null,x1:e,y1:t,x2:r,y2:i}];for(let e=0;e<this.boxKeys.length;e++)s.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],r=this.circles[3*e+1],i=this.circles[3*e+2];s.push({key:this.circleKeys[e],x1:t-i,y1:r-i,x2:t+i,y2:r+i})}}else this._forEachCell(e,t,r,i,this._queryCell,s,{hitTest:n,overlapMode:o,seenUids:{box:{},circle:{}}},a);return s}query(e,t,r,i){return this._query(e,t,r,i,!1,null)}hitTest(e,t,r,i,n,o){return this._query(e,t,r,i,!0,n,o).length>0}hitTestCircle(e,t,r,i,n){const o=e-r,a=e+r,s=t-r,l=t+r;if(a<0||o>this.width||l<0||s>this.height)return!1;const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:!0,overlapMode:i,circle:{x:e,y:t,radius:r},seenUids:{box:{},circle:{}}},n),c.length>0}_queryCell(e,t,r,i,n,o,a,s){const{seenUids:l,hitTest:c,overlapMode:u}=a,d=this.boxCells[n];if(null!==d){const n=this.bboxes;for(const a of d)if(!l.box[a]){l.box[a]=!0;const d=4*a,h=this.boxKeys[a];if(e<=n[d+2]&&t<=n[d+3]&&r>=n[d+0]&&i>=n[d+1]&&(!s||s(h))&&(!c||!me(u,h.overlapMode))&&(o.push({key:h,x1:n[d],y1:n[d+1],x2:n[d+2],y2:n[d+3]}),c))return!0}}const h=this.circleCells[n];if(null!==h){const n=this.circles;for(const a of h)if(!l.circle[a]){l.circle[a]=!0;const d=3*a,h=this.circleKeys[a];if(this._circleAndRectCollide(n[d],n[d+1],n[d+2],e,t,r,i)&&(!s||s(h))&&(!c||!me(u,h.overlapMode))){const e=n[d],t=n[d+1],r=n[d+2];if(o.push({key:h,x1:e-r,y1:t-r,x2:e+r,y2:t+r}),c)return!0}}}return!1}_queryCellCircle(e,t,r,i,n,o,a,s){const{circle:l,seenUids:c,overlapMode:u}=a,d=this.boxCells[n];if(null!==d){const e=this.bboxes;for(const t of d)if(!c.box[t]){c.box[t]=!0;const r=4*t,i=this.boxKeys[t];if(this._circleAndRectCollide(l.x,l.y,l.radius,e[r+0],e[r+1],e[r+2],e[r+3])&&(!s||s(i))&&!me(u,i.overlapMode))return o.push(!0),!0}}const h=this.circleCells[n];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const r=3*t,i=this.circleKeys[t];if(this._circlesCollide(e[r],e[r+1],e[r+2],l.x,l.y,l.radius)&&(!s||s(i))&&!me(u,i.overlapMode))return o.push(!0),!0}}}_forEachCell(e,t,r,i,n,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(r),d=this._convertToYCellCoord(i);for(let h=l;h<=u;h++)for(let l=c;l<=d;l++)if(n.call(this,e,t,r,i,this.xCellCount*l+h,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,r,i,n,o){const a=i-e,s=n-t,l=r+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,r,i,n,o,a){const s=(o-i)/2,l=Math.abs(e-(i+s));if(l>s+r)return!1;const c=(a-n)/2,u=Math.abs(t-(n+c));if(u>c+r)return!1;if(l<=s||u<=c)return!0;const d=l-s,h=u-c;return d*d+h*h<=r*r}}function ye(e,r,i,n,o){const a=t.H();return r?(t.K(a,a,[1/o,1/o,1]),i||t.ad(a,a,n.angle)):t.L(a,n.labelPlaneMatrix,e),a}function _e(e,r,i,n,o){if(r){const r=t.ae(e);return t.K(r,r,[o,o,1]),i||t.ad(r,r,-n.angle),r}return n.glCoordMatrix}function be(e,r,i,n){let o;n?(o=[e,r,n(e,r),1],t.af(o,o,i)):(o=[e,r,0,1],Be(o,o,i));const a=o[3];return{point:new t.P(o[0]/a,o[1]/a),signedDistanceFromCamera:a,isOccluded:!1}}function ve(e,t){return.5+e/t*.5}function xe(e,t){return e.x>=-t[0]&&e.x<=t[0]&&e.y>=-t[1]&&e.y<=t[1]}function we(e,r,i,n,o,a,s,l,c,u,d,h,p,f,m){const g=n?e.textSizeData:e.iconSizeData,y=t.ag(g,i.transform.zoom),_=[256/i.width*2+1,256/i.height*2+1],b=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;b.clear();const v=e.lineVertexArray,x=n?e.text.placedSymbolArray:e.icon.placedSymbolArray,w=i.transform.width/i.transform.height;let S=!1;for(let I=0;I<x.length;I++){const n=x.get(I);if(n.hidden||n.writingMode===t.ah.vertical&&!S){Re(n.numGlyphs,b);continue}S=!1;const T=be(n.anchorX,n.anchorY,r,m);if(!xe(T.point,_)){Re(n.numGlyphs,b);continue}const k=ve(i.transform.cameraToCenterDistance,T.signedDistanceFromCamera),E=t.ai(g,y,n),A=s?E/k:E*k,P={getElevation:m,labelPlaneMatrix:o,lineVertexArray:v,pitchWithMap:s,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:u,tileAnchorPoint:new t.P(n.anchorX,n.anchorY),unwrappedTileID:d,width:h,height:p,translation:f},C=Te(P,n,A,!1,l,r,a,e.glyphOffsetArray,b,w,c);S=C.useVertical,(C.notEnoughRoom||S||C.needsFlipping&&Te(P,n,A,!0,l,r,a,e.glyphOffsetArray,b,w,c).notEnoughRoom)&&Re(n.numGlyphs,b)}n?e.text.dynamicLayoutVertexBuffer.updateData(b):e.icon.dynamicLayoutVertexBuffer.updateData(b)}function Se(e,t,r,i,n,o,a,s){const l=o.glyphStartIndex+o.numGlyphs,c=o.lineStartIndex,u=o.lineStartIndex+o.lineLength,d=t.getoffsetX(o.glyphStartIndex),h=t.getoffsetX(l-1),p=Me(e*d,r,i,n,o.segment,c,u,s,a);if(!p)return null;const f=Me(e*h,r,i,n,o.segment,c,u,s,a);return f?s.projectionCache.anyProjectionOccluded?null:{first:p,last:f}:null}function Ie(e,r,i,n){return e===t.ah.horizontal&&Math.abs(i.y-r.y)>Math.abs(i.x-r.x)*n?{useVertical:!0}:(e===t.ah.vertical?r.y<i.y:r.x>i.x)?{needsFlipping:!0}:null}function Te(e,r,i,n,o,a,s,l,c,u,d){const h=i/24,p=r.lineOffsetX*h,f=r.lineOffsetY*h;let m;if(r.numGlyphs>1){const t=r.glyphStartIndex+r.numGlyphs,i=r.lineStartIndex,a=r.lineStartIndex+r.lineLength,c=Se(h,l,p,f,n,r,d,e);if(!c)return{notEnoughRoom:!0};const g=be(c.first.point.x,c.first.point.y,s,e.getElevation).point,y=be(c.last.point.x,c.last.point.y,s,e.getElevation).point;if(o&&!n){const e=Ie(r.writingMode,g,y,u);if(e)return e}m=[c.first];for(let o=r.glyphStartIndex+1;o<t-1;o++)m.push(Me(h*l.getoffsetX(o),p,f,n,r.segment,i,a,e,d));m.push(c.last)}else{if(o&&!n){const i=be(e.tileAnchorPoint.x,e.tileAnchorPoint.y,a,e.getElevation).point,n=r.lineStartIndex+r.segment+1,o=new t.P(e.lineVertexArray.getx(n),e.lineVertexArray.gety(n)),s=be(o.x,o.y,a,e.getElevation),l=s.signedDistanceFromCamera>0?s.point:function(e,t,r,i,n,o){return ke(e,t,r,1,n,o)}(e.tileAnchorPoint,o,i,0,a,e),c=Ie(r.writingMode,i,l,u);if(c)return c}const i=Me(h*l.getoffsetX(r.glyphStartIndex),p,f,n,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,e,d);if(!i||e.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};m=[i]}for(const g of m)t.aj(c,g.point,g.angle);return{}}function ke(e,t,r,i,n,o){const a=e.add(e.sub(t)._unit()),s=void 0!==n?be(a.x,a.y,n,o.getElevation).point:Ae(a.x,a.y,o).point,l=r.sub(s);return r.add(l._mult(i/l.mag()))}function Ee(e,r,i){const n=r.projectionCache;if(n.projections[e])return n.projections[e];const o=new t.P(r.lineVertexArray.getx(e),r.lineVertexArray.gety(e)),a=Ae(o.x,o.y,r);if(a.signedDistanceFromCamera>0)return n.projections[e]=a.point,n.anyProjectionOccluded=n.anyProjectionOccluded||a.isOccluded,a.point;const s=e-i.direction;return function(e,t,r,i,n){return ke(e,t,r,i,void 0,n)}(0===i.distanceFromAnchor?r.tileAnchorPoint:new t.P(r.lineVertexArray.getx(s),r.lineVertexArray.gety(s)),o,i.previousVertex,i.absOffsetX-i.distanceFromAnchor+1,r)}function Ae(e,t,r){const i=e+r.translation[0],n=t+r.translation[1];let o;return!r.pitchWithMap&&r.projection.useSpecialProjectionForSymbols?(o=r.projection.projectTileCoordinates(i,n,r.unwrappedTileID,r.getElevation),o.point.x=(.5*o.point.x+.5)*r.width,o.point.y=(.5*-o.point.y+.5)*r.height):(o=be(i,n,r.labelPlaneMatrix,r.getElevation),o.isOccluded=!1),o}function Pe(e,t,r){return e._unit()._perp()._mult(t*r)}function Ce(e,r,i,n,o,a,s,l,c){if(l.projectionCache.offsets[e])return l.projectionCache.offsets[e];const u=i.add(r);if(e+c.direction<n||e+c.direction>=o)return l.projectionCache.offsets[e]=u,u;const d=Ee(e+c.direction,l,c),h=Pe(d.sub(i),s,c.direction),p=i.add(h),f=d.add(h);return l.projectionCache.offsets[e]=t.ak(a,u,p,f)||u,l.projectionCache.offsets[e]}function Me(e,t,r,i,n,o,a,s,l){const c=i?e-t:e+t;let u=c>0?1:-1,d=0;i&&(u*=-1,d=Math.PI),u<0&&(d+=Math.PI);let h,p=u>0?o+n:o+n+1;s.projectionCache.cachedAnchorPoint?h=s.projectionCache.cachedAnchorPoint:(h=Ae(s.tileAnchorPoint.x,s.tileAnchorPoint.y,s).point,s.projectionCache.cachedAnchorPoint=h);let f,m,g=h,y=h,_=0,b=0;const v=Math.abs(c),x=[];let w;for(;_+b<=v;){if(p+=u,p<o||p>=a)return null;_+=b,y=g,m=f;const e={absOffsetX:v,direction:u,distanceFromAnchor:_,previousVertex:y};if(g=Ee(p,s,e),0===r)x.push(y),w=g.sub(y);else{let t;const i=g.sub(y);t=0===i.mag()?Pe(Ee(p+u,s,e).sub(g),r,u):Pe(i,r,u),m||(m=y.add(t)),f=Ce(p,t,g,o,a,m,r,s,e),x.push(m),w=f.sub(m)}b=w.mag()}const S=w._mult((v-_)/b)._add(m||y),I=d+Math.atan2(g.y-y.y,g.x-y.x);return x.push(S),{point:S,angle:l?I:0,path:x}}const Oe=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Re(e,t){for(let r=0;r<e;r++){const e=t.length;t.resize(e+4),t.float32.set(Oe,3*e)}}function Be(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e[3]=r[3]*i+r[7]*n+r[15],e}const De=100;class ze{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ge(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ge(e.width+200,e.height+200,25);this.transform=e,this.mapProjection=t,this.grid=r,this.ignoredGrid=i,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+De,this.screenBottomBoundary=e.height+De,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,t,r,i,n,o,a,s,l,c,u){const d=e.anchorPointX+s[0],h=e.anchorPointY+s[1],p=this.projectAndGetPerspectiveRatio(i,d,h,n,c),f=r*p.perspectiveRatio;let m;if(o||a)m=this._projectCollisionBox(e,f,i,n,o,a,s,p,c,u);else{const t=p.point.x+(u?u.x*f:0),r=p.point.y+(u?u.y*f:0);m={allPointsOccluded:!1,box:[t+e.x1*f,r+e.y1*f,t+e.x2*f,r+e.y2*f]}}const[g,y,_,b]=m.box;return this.mapProjection.useSpecialProjectionForSymbols&&(o?m.allPointsOccluded:this.mapProjection.isOccluded(d,h,n))||p.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(g,y,_,b)||"always"!==t&&this.grid.hitTest(g,y,_,b,t,l)?{box:[g,y,_,b],placeable:!1,offscreen:!1}:{box:[g,y,_,b],placeable:!0,offscreen:this.isOffscreen(g,y,_,b)}}placeCollisionCircles(e,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g){const y=[],_=new t.P(r.anchorX,r.anchorY),b=this.getPerspectiveRatio(a,_.x,_.y,s,g),v=(d?o/b:o*b)/t.ap,x={getElevation:g,labelPlaneMatrix:l,lineVertexArray:i,pitchWithMap:d,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:_,unwrappedTileID:s,width:this.transform.width,height:this.transform.height,translation:m},w=Se(v,n,r.lineOffsetX*v,r.lineOffsetY*v,!1,r,!1,x);let S=!1,I=!1,T=!0;if(w){const r=.5*p*b+f,i=new t.P(-100,-100),n=new t.P(this.screenRightBoundary,this.screenBottomBoundary),o=new fe,a=w.first,s=w.last;let l=[];for(let e=a.path.length-1;e>=1;e--)l.push(a.path[e]);for(let e=1;e<s.path.length;e++)l.push(s.path[e]);const d=2.5*r;if(c){const e=this.projectPathToScreenSpace(l,x,c);l=e.some((e=>e.signedDistanceFromCamera<=0))?[]:e.map((e=>e.point))}let m=[];if(l.length>0){const e=l[0].clone(),r=l[0].clone();for(let t=1;t<l.length;t++)e.x=Math.min(e.x,l[t].x),e.y=Math.min(e.y,l[t].y),r.x=Math.max(r.x,l[t].x),r.y=Math.max(r.y,l[t].y);m=e.x>=i.x&&r.x<=n.x&&e.y>=i.y&&r.y<=n.y?[l]:r.x<i.x||e.x>n.x||r.y<i.y||e.y>n.y?[]:t.al([l],i.x,i.y,n.x,n.y)}for(const t of m){o.reset(t,.25*r);let i=0;i=o.length<=.5*r?1:Math.ceil(o.paddedLength/d)+1;for(let t=0;t<i;t++){const n=t/Math.max(i-1,1),a=o.lerp(n),s=a.x+De,l=a.y+De;y.push(s,l,r,0);const c=s-r,d=l-r,p=s+r,f=l+r;if(T=T&&this.isOffscreen(c,d,p,f),I=I||this.isInsideGrid(c,d,p,f),"always"!==e&&this.grid.hitTestCircle(s,l,r,e,h)&&(S=!0,!u))return{circles:[],offscreen:!1,collisionDetected:S}}}}return{circles:!u&&S||!I||b<this.perspectiveRatioCutoff?[]:y,offscreen:T,collisionDetected:S}}projectPathToScreenSpace(e,t,r){return e.map((e=>be(e.x,e.y,r,t.getElevation)))}queryRenderedSymbols(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const r=[];let i=1/0,n=1/0,o=-1/0,a=-1/0;for(const u of e){const e=new t.P(u.x+De,u.y+De);i=Math.min(i,e.x),n=Math.min(n,e.y),o=Math.max(o,e.x),a=Math.max(a,e.y),r.push(e)}const s=this.grid.query(i,n,o,a).concat(this.ignoredGrid.query(i,n,o,a)),l={},c={};for(const u of s){const e=u.key;if(void 0===l[e.bucketInstanceId]&&(l[e.bucketInstanceId]={}),l[e.bucketInstanceId][e.featureIndex])continue;const i=[new t.P(u.x1,u.y1),new t.P(u.x2,u.y1),new t.P(u.x2,u.y2),new t.P(u.x1,u.y2)];t.am(r,i)&&(l[e.bucketInstanceId][e.featureIndex]=!0,void 0===c[e.bucketInstanceId]&&(c[e.bucketInstanceId]=[]),c[e.bucketInstanceId].push(e.featureIndex))}return c}insertCollisionBox(e,t,r,i,n,o){(r?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:n,collisionGroupID:o,overlapMode:t},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,r,i,n,o){const a=r?this.ignoredGrid:this.grid,s={bucketInstanceId:i,featureIndex:n,collisionGroupID:o,overlapMode:t};for(let l=0;l<e.length;l+=4)a.insertCircle(s,e[l],e[l+1],e[l+2])}projectAndGetPerspectiveRatio(e,r,i,n,o){let a;o?(a=[r,i,o(r,i),1],t.af(a,a,e)):(a=[r,i,0,1],Be(a,a,e));const s=a[3];return{point:new t.P((a[0]/s+1)/2*this.transform.width+De,(-a[1]/s+1)/2*this.transform.height+De),perspectiveRatio:.5+this.transform.cameraToCenterDistance/s*.5,isOccluded:!1,signedDistanceFromCamera:s}}getPerspectiveRatio(e,t,r,i,n){const o=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(t,r,i,n):be(t,r,e,n);return.5+this.transform.cameraToCenterDistance/o.signedDistanceFromCamera*.5}isOffscreen(e,t,r,i){return r<De||e>=this.screenRightBoundary||i<De||t>this.screenBottomBoundary}isInsideGrid(e,t,r,i){return r>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const e=t.an([]);return t.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,r,i,n,o,a,s,l,c,u){let d=new t.P(1,0),h=new t.P(0,1);const p=new t.P(e.anchorPointX+s[0],e.anchorPointY+s[1]);if(a&&!o){const e=this.projectAndGetPerspectiveRatio(i,p.x+1,p.y,n,c).point.sub(l.point).unit(),r=Math.atan(e.y/e.x)+(e.x<0?Math.PI:0),o=Math.sin(r),a=Math.cos(r);d=new t.P(a,o),h=new t.P(-o,a)}else if(!a&&o){const e=-this.transform.angle,r=Math.sin(e),i=Math.cos(e);d=new t.P(i,r),h=new t.P(-r,i)}let f=l.point,m=r;if(o){f=p;const e=this.transform.zoom-Math.floor(this.transform.zoom);m=Math.pow(2,-e),m*=this.mapProjection.getPitchedTextCorrection(this.transform,p,n),u||(m*=t.ac(.5+l.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}u&&(f=f.add(d.mult(u.x*m)).add(h.mult(u.y*m)));const g=e.x1*m,y=e.x2*m,_=(g+y)/2,b=e.y1*m,v=e.y2*m,x=(b+v)/2,w=[{offsetX:g,offsetY:b},{offsetX:_,offsetY:b},{offsetX:y,offsetY:b},{offsetX:y,offsetY:x},{offsetX:y,offsetY:v},{offsetX:_,offsetY:v},{offsetX:g,offsetY:v},{offsetX:g,offsetY:x}];let S=[];for(const{offsetX:T,offsetY:k}of w)S.push(new t.P(f.x+d.x*T+h.x*k,f.y+d.y*T+h.y*k));let I=!1;if(o){const e=S.map((e=>this.projectAndGetPerspectiveRatio(i,e.x,e.y,n,c)));I=e.some((e=>!e.isOccluded)),S=e.map((e=>e.point))}else I=!0;return{box:t.ao(S),allPointsOccluded:!I}}}function Le(e,r,i){return r*(t.X/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}class Fe{constructor(e,t,r,i){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):i&&r?1:0,this.placed=r}isHidden(){return 0===this.opacity&&!this.placed}}class Ne{constructor(e,t,r,i,n){this.text=new Fe(e?e.text:null,t,r,n),this.icon=new Fe(e?e.icon:null,t,i,n)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class je{constructor(e,t,r){this.text=e,this.icon=t,this.skipFade=r}}class Ue{constructor(){this.invProjMatrix=t.H(),this.viewportMatrix=t.H(),this.circles=[]}}class Ve{constructor(e,t,r,i,n){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=n}}class $e{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function We(e,r,i,n,o){const{horizontalAlign:a,verticalAlign:s}=t.au(e);return new t.P(-(a-.5)*r+n[0]*o,-(s-.5)*i+n[1]*o)}class He{constructor(e,t,r,i,n,o){this.transform=e.clone(),this.terrain=r,this.collisionIndex=new ze(this.transform,t),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=i,this.retainedQueryData={},this.collisionGroups=new $e(n),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const t=this.terrain;return t?(r,i)=>t.getElevation(e,r,i):null}getBucketParts(e,r,i,n){const o=i.getBucket(r),a=i.latestFeatureIndex;if(!o||!a||r.id!==o.layerIds[0])return;const s=i.collisionBoxArray,l=o.layers[0].layout,c=o.layers[0].paint,u=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),d=i.tileSize/t.X,h=i.tileID.toUnwrapped(),p=this.transform.calculatePosMatrix(h),f="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),g=Le(i,1,this.transform.zoom),y=this.collisionIndex.mapProjection.translatePosition(this.transform,i,c.get("text-translate"),c.get("text-translate-anchor")),_=this.collisionIndex.mapProjection.translatePosition(this.transform,i,c.get("icon-translate"),c.get("icon-translate-anchor")),b=ye(p,f,m,this.transform,g);let v=null;if(f){const e=_e(p,f,m,this.transform,g);v=t.L([],this.transform.labelPlaneMatrix,e)}this.retainedQueryData[o.bucketInstanceId]=new Ve(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,i.tileID);const x={bucket:o,layout:l,translationText:y,translationIcon:_,posMatrix:p,unwrappedTileID:h,textLabelPlaneMatrix:b,labelToScreenMatrix:v,scale:u,textPixelRatio:d,holdingForFade:i.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.ag(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(n)for(const t of o.sortKeyRanges){const{sortKey:r,symbolInstanceStart:i,symbolInstanceEnd:n}=t;e.push({sortKey:r,symbolInstanceStart:i,symbolInstanceEnd:n,parameters:x})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:x})}attemptAnchorPlacement(e,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g,y,_,b){const v=t.aq[e.textAnchor],x=[e.textOffset0,e.textOffset1],w=We(v,i,n,x,o),S=this.collisionIndex.placeCollisionBox(r,h,l,c,u,s,a,g,d.predicate,b,w);if((!_||this.collisionIndex.placeCollisionBox(_,h,l,c,u,s,a,y,d.predicate,b,w).placeable)&&S.placeable){let e;if(this.prevPlacement&&this.prevPlacement.variableOffsets[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID]&&this.prevPlacement.placements[p.crossTileID].text&&(e=this.prevPlacement.variableOffsets[p.crossTileID].anchor),0===p.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[p.crossTileID]={textOffset:x,width:i,height:n,anchor:v,textBoxScale:o,prevAnchor:e},this.markUsedJustification(f,v,p,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,p),this.placedOrientations[p.crossTileID]=m),{shift:w,placedGlyphBoxes:S}}}placeLayerBucketPart(e,r,i){const{bucket:n,layout:o,translationText:a,translationIcon:s,posMatrix:l,unwrappedTileID:c,textLabelPlaneMatrix:u,labelToScreenMatrix:d,textPixelRatio:h,holdingForFade:p,collisionBoxArray:f,partiallyEvaluatedTextSize:m,collisionGroup:g}=e.parameters,y=o.get("text-optional"),_=o.get("icon-optional"),b=t.ar(o,"text-overlap","text-allow-overlap"),v="always"===b,x=t.ar(o,"icon-overlap","icon-allow-overlap"),w="always"===x,S="map"===o.get("text-rotation-alignment"),I="map"===o.get("text-pitch-alignment"),T="none"!==o.get("icon-text-fit"),k="viewport-y"===o.get("symbol-z-order"),E=v&&(w||!n.hasIconData()||_),A=w&&(v||!n.hasTextData()||y);!n.collisionArrays&&f&&n.deserializeCollisionBoxes(f);const P=this._getTerrainElevationFunc(this.retainedQueryData[n.bucketInstanceId].tileID),C=(e,f,w)=>{var k,C;if(r[e.crossTileID])return;if(p)return void(this.placements[e.crossTileID]=new je(!1,!1,!1));let M=!1,O=!1,R=!0,B=null,D={box:null,placeable:!1,offscreen:null},z={box:null,placeable:!1,offscreen:null},L=null,F=null,N=null,j=0,U=0,V=0;f.textFeatureIndex?j=f.textFeatureIndex:e.useRuntimeCollisionCircles&&(j=e.featureIndex),f.verticalTextFeatureIndex&&(U=f.verticalTextFeatureIndex);const $=f.textBox;if($){const r=r=>{let i=t.ah.horizontal;if(n.allowVerticalPlacement&&!r&&this.prevPlacement){const t=this.prevPlacement.placedOrientations[e.crossTileID];t&&(this.placedOrientations[e.crossTileID]=t,i=t,this.markUsedOrientation(n,i,e))}return i},o=(r,i)=>{if(n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&f.verticalTextBox){for(const e of n.writingModes)if(e===t.ah.vertical?(D=i(),z=D):D=r(),D&&D.placeable)break}else D=r()},u=e.textAnchorOffsetStartIndex,d=e.textAnchorOffsetEndIndex;if(d===u){const i=(t,r)=>{const i=this.collisionIndex.placeCollisionBox(t,b,h,l,c,I,S,a,g.predicate,P);return i&&i.placeable&&(this.markUsedOrientation(n,r,e),this.placedOrientations[e.crossTileID]=r),i};o((()=>i($,t.ah.horizontal)),(()=>{const r=f.verticalTextBox;return n.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&r?i(r,t.ah.vertical):{box:null,offscreen:null}})),r(D&&D.placeable)}else{let p=t.aq[null===(C=null===(k=this.prevPlacement)||void 0===k?void 0:k.variableOffsets[e.crossTileID])||void 0===C?void 0:C.anchor];const m=(r,o,f)=>{const m=r.x2-r.x1,y=r.y2-r.y1,_=e.textBoxScale,v=T&&"never"===x?o:null;let w=null,k="never"===b?1:2,E="never";p&&k++;for(let t=0;t<k;t++){for(let t=u;t<d;t++){const i=n.textAnchorOffsets.get(t);if(p&&i.textAnchor!==p)continue;const o=this.attemptAnchorPlacement(i,r,m,y,_,S,I,h,l,c,g,E,e,n,f,a,s,v,P);if(o&&(w=o.placedGlyphBoxes,w&&w.placeable))return M=!0,B=o.shift,w}p?p=null:E=b}return i&&!w&&(w={box:this.collisionIndex.placeCollisionBox($,"always",h,l,c,I,S,a,g.predicate,P,new t.P(0,0)).box,offscreen:!1,placeable:!1}),w};o((()=>m($,f.iconBox,t.ah.horizontal)),(()=>{const r=f.verticalTextBox;return n.allowVerticalPlacement&&(!D||!D.placeable)&&e.numVerticalGlyphVertices>0&&r?m(r,f.verticalIconBox,t.ah.vertical):{box:null,occluded:!0,offscreen:null}})),D&&(M=D.placeable,R=D.offscreen);const y=r(D&&D.placeable);if(!M&&this.prevPlacement){const t=this.prevPlacement.variableOffsets[e.crossTileID];t&&(this.variableOffsets[e.crossTileID]=t,this.markUsedJustification(n,t.anchor,e,y))}}}if(L=D,M=L&&L.placeable,R=L&&L.offscreen,e.useRuntimeCollisionCircles){const r=n.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),s=t.ai(n.textSizeData,m,r),h=o.get("text-padding");F=this.collisionIndex.placeCollisionCircles(b,r,n.lineVertexArray,n.glyphOffsetArray,s,l,c,u,d,i,I,g.predicate,e.collisionCircleDiameter,h,a,P),F.circles.length&&F.collisionDetected&&!i&&t.w("Collisions detected, but collision boxes are not shown"),M=v||F.circles.length>0&&!F.collisionDetected,R=R&&F.offscreen}if(f.iconFeatureIndex&&(V=f.iconFeatureIndex),f.iconBox){const e=e=>this.collisionIndex.placeCollisionBox(e,x,h,l,c,I,S,s,g.predicate,P,T&&B?B:void 0);z&&z.placeable&&f.verticalIconBox?(N=e(f.verticalIconBox),O=N.placeable):(N=e(f.iconBox),O=N.placeable),R=R&&N.offscreen}const W=y||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,H=_||0===e.numIconVertices;W||H?H?W||(O=O&&M):M=O&&M:O=M=O&&M;const G=O&&N.placeable;if(M&&L.placeable&&this.collisionIndex.insertCollisionBox(L.box,b,o.get("text-ignore-placement"),n.bucketInstanceId,z&&z.placeable&&U?U:j,g.ID),G&&this.collisionIndex.insertCollisionBox(N.box,x,o.get("icon-ignore-placement"),n.bucketInstanceId,V,g.ID),F&&M&&this.collisionIndex.insertCollisionCircles(F.circles,b,o.get("text-ignore-placement"),n.bucketInstanceId,j,g.ID),i&&this.storeCollisionData(n.bucketInstanceId,w,f,L,N,F),0===e.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===n.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[e.crossTileID]=new je(M||E,O||A,R||n.justReloaded),r[e.crossTileID]=!0};if(k){if(0!==e.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const t=n.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const r=t[e];C(n.symbolInstances.get(r),n.collisionArrays[r],r)}}else for(let t=e.symbolInstanceStart;t<e.symbolInstanceEnd;t++)C(n.symbolInstances.get(t),n.collisionArrays[t],t);if(i&&n.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[n.bucketInstanceId];t.as(e.invProjMatrix,l),e.viewportMatrix=this.collisionIndex.getViewportMatrix()}n.justReloaded=!1}storeCollisionData(e,t,r,i,n,o){if(r.textBox||r.iconBox){let o,a;this.collisionBoxArrays.has(e)?o=this.collisionBoxArrays.get(e):(o=new Map,this.collisionBoxArrays.set(e,o)),o.has(t)?a=o.get(t):(a={text:null,icon:null},o.set(t,a)),r.textBox&&(a.text=i.box),r.iconBox&&(a.icon=n.box)}if(o){let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Ue);for(let e=0;e<o.circles.length;e+=4)t.circles.push(o.circles[e+0]),t.circles.push(o.circles[e+1]),t.circles.push(o.circles[e+2]),t.circles.push(o.collisionDetected?1:0)}}markUsedJustification(e,r,i,n){let o;o=n===t.ah.vertical?i.verticalPlacedTextSymbolIndex:{left:i.leftJustifiedTextSymbolIndex,center:i.centerJustifiedTextSymbolIndex,right:i.rightJustifiedTextSymbolIndex}[t.at(r)];const a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex,i.verticalPlacedTextSymbolIndex];for(const t of a)t>=0&&(e.text.placedSymbolArray.get(t).crossTileID=o>=0&&t!==o?0:i.crossTileID)}markUsedOrientation(e,r,i){const n=r===t.ah.horizontal||r===t.ah.horizontalOnly?r:0,o=r===t.ah.vertical?r:0,a=[i.leftJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.rightJustifiedTextSymbolIndex];for(const t of a)e.text.placedSymbolArray.get(t).placedOrientation=n;i.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(i.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let r=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const i=t?t.symbolFadeChange(e):1,n=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=n[s];t?(this.opacities[s]=new Ne(t,i,e.text,e.icon),r=r||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new Ne(null,i,e.text,e.icon,e.skipFade),r=r||e.text||e.icon)}for(const s in n){const e=n[s];if(!this.opacities[s]){const t=new Ne(e,i,!1,!1);t.isHidden()||(this.opacities[s]=t,r=r||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);if(t&&void 0===t.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");r?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const r={};for(const i of t){const t=i.getBucket(e);t&&i.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i.tileID,r,i.collisionBoxArray)}}updateBucketOpacities(e,r,i,n){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const o=e.layers[0],a=o.layout,s=new Ne(null,0,!1,!1,!0),l=a.get("text-allow-overlap"),c=a.get("icon-allow-overlap"),u=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),d="map"===a.get("text-rotation-alignment"),h="map"===a.get("text-pitch-alignment"),p="none"!==a.get("icon-text-fit"),f=new Ne(null,0,l&&(c||!e.hasIconData()||a.get("icon-optional")),c&&(l||!e.hasTextData()||a.get("text-optional")),!0);!e.collisionArrays&&n&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(n);const m=(e,t,r)=>{for(let i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(r);e.hasVisibleVertices=e.hasVisibleVertices||r!==tt},g=this.collisionBoxArrays.get(e.bucketInstanceId);for(let y=0;y<e.symbolInstances.length;y++){const r=e.symbolInstances.get(y),{numHorizontalGlyphVertices:n,numVerticalGlyphVertices:o,crossTileID:a}=r;let l=this.opacities[a];i[a]?l=s:l||(l=f,this.opacities[a]=l),i[a]=!0;const c=r.numIconVertices>0,_=this.placedOrientations[r.crossTileID],b=_===t.ah.vertical,v=_===t.ah.horizontal||_===t.ah.horizontalOnly;if(n>0||o>0){const t=et(l.text);m(e.text,n,b?tt:t),m(e.text,o,v?tt:t);const i=l.text.isHidden();[r.rightJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.leftJustifiedTextSymbolIndex].forEach((t=>{t>=0&&(e.text.placedSymbolArray.get(t).hidden=i||b?1:0)})),r.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).hidden=i||v?1:0);const a=this.variableOffsets[r.crossTileID];a&&this.markUsedJustification(e,a.anchor,r,_);const s=this.placedOrientations[r.crossTileID];s&&(this.markUsedJustification(e,"left",r,s),this.markUsedOrientation(e,s,r))}if(c){const t=et(l.icon),i=!(p&&r.verticalPlacedIconSymbolIndex&&b);r.placedIconSymbolIndex>=0&&(m(e.icon,r.numIconVertices,i?t:tt),e.icon.placedSymbolArray.get(r.placedIconSymbolIndex).hidden=l.icon.isHidden()),r.verticalPlacedIconSymbolIndex>=0&&(m(e.icon,r.numVerticalIconVertices,i?tt:t),e.icon.placedSymbolArray.get(r.verticalPlacedIconSymbolIndex).hidden=l.icon.isHidden())}const x=g&&g.has(y)?g.get(y):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const r=e.collisionArrays[y];if(r){let i=new t.P(0,0);if(r.textBox||r.verticalTextBox){let t=!0;if(u){const e=this.variableOffsets[a];e?(i=We(e.anchor,e.width,e.height,e.textOffset,e.textBoxScale),d&&i._rotate(h?this.transform.angle:-this.transform.angle)):t=!1}if(r.textBox||r.verticalTextBox){let n;r.textBox&&(n=b),r.verticalTextBox&&(n=v),Ge(e.textCollisionBox.collisionVertexArray,l.text.placed,!t||n,x.text,i.x,i.y)}}if(r.iconBox||r.verticalIconBox){const t=Boolean(!v&&r.verticalIconBox);let n;r.iconBox&&(n=t),r.verticalIconBox&&(n=!t),Ge(e.iconCollisionBox.collisionVertexArray,l.icon.placed,n,x.icon,p?i.x:0,p?i.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=t.invProjMatrix,e.placementViewportMatrix=t.viewportMatrix,e.collisionCircleArray=t.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const r=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*r>e}setStale(){this.stale=!0}}function Ge(e,t,r,i,n,o){i&&0!==i.length||(i=[0,0,0,0]);const a=i[0]-De,s=i[1]-De,l=i[2]-De,c=i[3]-De;e.emplaceBack(t?1:0,r?1:0,n||0,o||0,a,s),e.emplaceBack(t?1:0,r?1:0,n||0,o||0,l,s),e.emplaceBack(t?1:0,r?1:0,n||0,o||0,l,c),e.emplaceBack(t?1:0,r?1:0,n||0,o||0,a,c)}const qe=Math.pow(2,25),Ze=Math.pow(2,24),Xe=Math.pow(2,17),Ye=Math.pow(2,16),Ke=Math.pow(2,9),Je=Math.pow(2,8),Qe=Math.pow(2,1);function et(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,r=Math.floor(127*e.opacity);return r*qe+t*Ze+r*Xe+t*Ye+r*Ke+t*Je+r*Qe+t}const tt=0;function rt(){return{isOccluded:(e,t,r)=>!1,getPitchedTextCorrection:(e,t,r)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(e,t,r,i){throw new Error("Not implemented.")},translatePosition:(e,t,r,i)=>function(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!r[0]&&!r[1])return[0,0];const o=n?"map"===i?e.angle:0:"viewport"===i?-e.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}return[n?r[0]:Le(t,r[0],e.zoom),n?r[1]:Le(t,r[1],e.zoom)]}(e,t,r,i),getCircleRadiusCorrection:e=>1}}class it{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,r,i,n){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,r),this._currentPartIndex++,n())return!0;return!1}}class nt{constructor(e,t,r,i,n,o,a,s){this.placement=new He(e,rt(),t,o,a,s),this._currentPlacementIndex=r.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._done=!1}isDone(){return this._done}continuePlacement(e,t,r){const i=o.now(),n=()=>!this._forceFullPlacement&&o.now()-i>2;for(;this._currentPlacementIndex>=0;){const i=t[e[this._currentPlacementIndex]],o=this.placement.collisionIndex.transform.zoom;if("symbol"===i.type&&(!i.minzoom||i.minzoom<=o)&&(!i.maxzoom||i.maxzoom>o)){if(this._inProgressLayer||(this._inProgressLayer=new it(i)),this._inProgressLayer.continuePlacement(r[i.source],this.placement,this._showCollisionBoxes,i,n))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const ot=512/t.X/2;class at{constructor(e,r,i){this.tileID=e,this.bucketInstanceId=i,this._symbolsByKey={};const n=new Map;for(let t=0;t<r.length;t++){const e=r.get(t),i=e.key,o=n.get(i);o?o.push(e):n.set(i,[e])}for(const[o,a]of n){const e={positions:a.map((e=>({x:Math.floor(e.anchorX*ot),y:Math.floor(e.anchorY*ot)}))),crossTileIDs:a.map((e=>e.crossTileID))};if(e.positions.length>128){const r=new t.av(e.positions.length,16,Uint16Array);for(const{x:t,y:i}of e.positions)r.add(t,i);r.finish(),delete e.positions,e.index=r}this._symbolsByKey[o]=e}}getScaledCoordinates(e,r){const{x:i,y:n,z:o}=this.tileID.canonical,{x:a,y:s,z:l}=r.canonical,c=ot/Math.pow(2,l-o),u=(s*t.X+e.anchorY)*c,d=n*t.X*ot;return{x:Math.floor((a*t.X+e.anchorX)*c-i*t.X*ot),y:Math.floor(u-d)}}findMatches(e,t,r){const i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let n=0;n<e.length;n++){const o=e.get(n);if(o.crossTileID)continue;const a=this._symbolsByKey[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);if(a.index){const e=a.index.range(s.x-i,s.y-i,s.x+i,s.y+i).sort();for(const t of e){const e=a.crossTileIDs[t];if(!r[e]){r[e]=!0,o.crossTileID=e;break}}}else if(a.positions)for(let e=0;e<a.positions.length;e++){const t=a.positions[e],n=a.crossTileIDs[e];if(Math.abs(t.x-s.x)<=i&&Math.abs(t.y-s.y)<=i&&!r[n]){r[n]=!0,o.crossTileID=n;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((e=>{let{crossTileIDs:t}=e;return t}))}}class st{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class lt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const r in this.indexes){const e=this.indexes[r],i={};for(const r in e){const n=e[r];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),i[n.tileID.key]=n}this.indexes[r]=i}this.lng=e}addBucket(e,t,r){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let n=0;n<t.symbolInstances.length;n++)t.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const i=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const r=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in r){const o=r[n];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,i)}else{const o=r[e.scaledTo(Number(n)).key];o&&o.findMatches(t.symbolInstances,e,i)}}for(let n=0;n<t.symbolInstances.length;n++){const e=t.symbolInstances.get(n);e.crossTileID||(e.crossTileID=r.generate(),i[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new at(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const r of t.getCrossTileIDsLists())for(const t of r)delete this.usedCrossTileIDs[e][t]}removeStaleBuckets(e){let t=!1;for(const r in this.indexes){const i=this.indexes[r];for(const n in i)e[i[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(r,i[n]),delete i[n],t=!0)}return t}}class ct{constructor(){this.layerIndexes={},this.crossTileIDs=new st,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new lt);let n=!1;const o={};i.handleWrapJump(r);for(const a of t){const t=a.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(a.tileID,t,this.crossTileIDs)&&(n=!0),o[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(o)&&(n=!0),n}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const r in this.layerIndexes)t[r]||delete this.layerIndexes[r]}}const ut=(e,r)=>t.t(e,r&&r.filter((e=>"source.canvas"!==e.identifier))),dt=t.aw();class ht extends t.E{constructor(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this._rtlPluginLoaded=()=>{for(const e in this.sourceCaches){const t=this.sourceCaches[e].getSource().type;"vector"!==t&&"geojson"!==t||this.sourceCaches[e].reload()}},this.map=e,this.dispatcher=new j(N(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((e,t)=>this.getGlyphs(e,t))),this.dispatcher.registerMessageHandler("GI",((e,t)=>this.getImages(e,t))),this.imageManager=new S,this.imageManager.setEventedParent(this),this.glyphManager=new E(e._requestManager,r.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new ct,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",t.ay()),se().on(ne,this._rtlPluginLoaded),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.sourceCaches[e.sourceId];if(!t)return;const r=t.getSource();if(r&&r.vectorLayerIds)for(const i in this._layers){const e=this._layers[i];e.source===r.id&&this._validateLayer(e)}}))}loadURL(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),r.validate="boolean"!=typeof r.validate||r.validate;const n=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const o=this._loadStyleRequest;t.h(n,this._loadStyleRequest).then((e=>{this._loadStyleRequest=null,this._load(e.data,r,i)})).catch((e=>{this._loadStyleRequest=null,e&&!o.signal.aborted&&this.fire(new t.j(e))}))}loadJSON(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this.fire(new t.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,r.validate=!1!==r.validate,this._load(e,r,i)})).catch((()=>{}))}loadEmpty(){this.fire(new t.k("dataloading",{dataType:"style"})),this._load(dt,{validate:!1})}_load(e,r,i){var n;const o=r.transformStyle?r.transformStyle(i,e):e;if(!r.validate||!ut(this,t.u(o))){this._loaded=!0,this.stylesheet=o;for(const e in o.sources)this.addSource(e,o.sources[e],{validate:!1});o.sprite?this._loadSprite(o.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(o.glyphs),this._createLayers(),this.light=new C(this.stylesheet.light),this.sky=new O(this.stylesheet.sky),this.map.setTerrain(null!==(n=this.stylesheet.terrain)&&void 0!==n?n:null),this.fire(new t.k("data",{dataType:"style"})),this.fire(new t.k("style.load"))}}_createLayers(){const e=t.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map((e=>e.id)),this._layers={},this._serializedLayers=null;for(const r of e){const e=t.aA(r);e.setEventedParent(this,{layer:{id:r.id}}),this._layers[r.id]=e}}_loadSprite(e){let r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(e,r,i,n){return t._(this,void 0,void 0,(function*(){const a=b(e),s=i>1?"@2x":"",l={},c={};for(const{id:e,url:i}of a){const o=r.transformRequest(v(i,s,".json"),"SpriteJSON");l[e]=t.h(o,n);const a=r.transformRequest(v(i,s,".png"),"SpriteImage");c[e]=p.getImage(a,n)}return yield Promise.all([...Object.values(l),...Object.values(c)]),function(e,r){return t._(this,void 0,void 0,(function*(){const t={};for(const i in e){t[i]={};const n=o.getImageCanvasContext((yield r[i]).data),a=(yield e[i]).data;for(const e in a){const{width:r,height:o,x:s,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:h,content:p,textFitWidth:f,textFitHeight:m}=a[e];t[i][e]={data:null,pixelRatio:u,sdf:c,stretchX:d,stretchY:h,content:p,textFitWidth:f,textFitHeight:m,spriteData:{width:r,height:o,x:s,y:l,context:n}}}}return t}))}(l,c)}))}(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((e=>{if(this._spriteRequest=null,e)for(const t in e){this._spritesImagesIds[t]=[];const r=this._spritesImagesIds[t]?this._spritesImagesIds[t].filter((t=>!(t in e))):[];for(const e of r)this.imageManager.removeImage(e),this._changedImages[e]=!0;for(const n in e[t]){const r="default"===t?n:`${t}:${n}`;this._spritesImagesIds[t].push(r),r in this.imageManager.images?this.imageManager.updateImage(r,e[t][n],!1):this.imageManager.addImage(r,e[t][n]),i&&(this._changedImages[r]=!0)}}})).catch((e=>{this._spriteRequest=null,r=e,this.fire(new t.j(r))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),i&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"})),n&&n(r)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}_validateLayer(e){const r=this.sourceCaches[e.source];if(!r)return;const i=e.sourceLayer;if(!i)return;const n=r.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new t.j(new Error(`Source layer "${i}" does not exist on source "${n.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._serializedAllLayers();if(!e||0===e.length)return Object.values(r?t.aB(i):i);const n=[];for(const o of e)if(i[o]){const e=r?t.aB(i[o]):i[o];n.push(e)}return n}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const t=Object.keys(this._layers);for(const r of t){const t=this._layers[r];"custom"!==t.type&&(e[r]=t.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const r=this._changed;if(r){const t=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(t.length||r.length)&&this._updateWorkerLayers(t,r);for(const e in this._updatedSources){const t=this._updatedSources[e];if("reload"===t)this._reloadSource(e);else{if("clear"!==t)throw new Error(`Invalid action ${t}`);this._clearSource(e)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const i in this._updatedPaintProps)this._layers[i].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const i={};for(const t in this.sourceCaches){const e=this.sourceCaches[t];i[t]=e.used,e.used=!1}for(const t of this._order){const r=this._layers[t];r.recalculate(e,this._availableImages),!r.isHidden(e.zoom)&&r.source&&(this.sourceCaches[r.source].used=!0)}for(const n in i){const e=this.sourceCaches[n];!!i[n]!=!!e.used&&e.fire(new t.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:n}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,r&&this.fire(new t.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;this._checkLoaded();const n=this.serialize();if(e=r.transformStyle?r.transformStyle(n,e):e,(null===(i=r.validate)||void 0===i||i)&&ut(this,t.u(e)))return!1;(e=t.aB(e)).layers=t.az(e.layers);const o=t.aC(n,e),a=this._getOperationsToPerform(o);if(a.unimplemented.length>0)throw new Error(`Unimplemented: ${a.unimplemented.join(", ")}.`);if(0===a.operations.length)return!1;for(const t of a.operations)t();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const t=[],r=[];for(const i of e)switch(i.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":t.push((()=>this.addLayer.apply(this,i.args)));break;case"removeLayer":t.push((()=>this.removeLayer.apply(this,i.args)));break;case"setPaintProperty":t.push((()=>this.setPaintProperty.apply(this,i.args)));break;case"setLayoutProperty":t.push((()=>this.setLayoutProperty.apply(this,i.args)));break;case"setFilter":t.push((()=>this.setFilter.apply(this,i.args)));break;case"addSource":t.push((()=>this.addSource.apply(this,i.args)));break;case"removeSource":t.push((()=>this.removeSource.apply(this,i.args)));break;case"setLayerZoomRange":t.push((()=>this.setLayerZoomRange.apply(this,i.args)));break;case"setLight":t.push((()=>this.setLight.apply(this,i.args)));break;case"setGeoJSONSourceData":t.push((()=>this.setGeoJSONSourceData.apply(this,i.args)));break;case"setGlyphs":t.push((()=>this.setGlyphs.apply(this,i.args)));break;case"setSprite":t.push((()=>this.setSprite.apply(this,i.args)));break;case"setSky":t.push((()=>this.setSky.apply(this,i.args)));break;case"setTerrain":t.push((()=>this.map.setTerrain.apply(this,i.args)));break;case"setTransition":t.push((()=>{}));break;default:r.push(i.command)}return{operations:t,unimplemented:r}}addImage(e,r){if(this.getImage(e))return this.fire(new t.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,r),this._afterImageUpdated(e)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new t.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error(`Source "${e}" already exists.`);if(!r.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(r).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(r.type)>=0&&this._validate(t.u.source,`sources.${e}`,r,null,i))return;this.map&&this.map._collectResourceTiming&&(r.collectResourceTiming=!0);const n=this.sourceCaches[e]=new de(e,r,this.dispatcher);n.style=this,n.setEventedParent(this,(()=>({isSourceLoaded:n.loaded(),source:n.serialize(),sourceId:e}))),n.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===e)return this.fire(new t.j(new Error(`Source "${e}" cannot be removed while layer "${i}" is using it.`)));const r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error(`There is no source with this ID=${e}`);const r=this.sourceCaches[e].getSource();if("geojson"!==r.type)throw new Error(`geojsonSource.type is ${r.type}, which is !== 'geojson`);r.setData(t),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const n=e.id;if(this.getLayer(n))return void this.fire(new t.j(new Error(`Layer "${n}" already exists on this map.`)));let o;if("custom"===e.type){if(ut(this,t.aD(e)))return;o=t.aA(e)}else{if("source"in e&&"object"==typeof e.source&&(this.addSource(n,e.source),e=t.aB(e),e=t.e(e,{source:n})),this._validate(t.u.layer,`layers.${n}`,e,{arrayIndex:-1},i))return;o=t.aA(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}})}const a=r?this._order.indexOf(r):this._order.length;if(r&&-1===a)this.fire(new t.j(new Error(`Cannot add layer "${n}" before non-existing layer "${r}".`)));else{if(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=o,this._removedLayers[n]&&o.source&&"custom"!==o.type){const e=this._removedLayers[n];delete this._removedLayers[n],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}moveLayer(e,r){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new t.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===r)return;const i=this._order.indexOf(e);this._order.splice(i,1);const n=r?this._order.indexOf(r):this._order.length;r&&-1===n?this.fire(new t.j(new Error(`Cannot move layer "${e}" before non-existing layer "${r}".`))):(this._order.splice(n,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const r=this._layers[e];if(!r)return void this.fire(new t.j(new Error(`Cannot remove non-existing layer "${e}".`)));r.setEventedParent(null);const i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=r,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],r.onRemove&&r.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,r,i){this._checkLoaded();const n=this.getLayer(e);n?n.minzoom===r&&n.maxzoom===i||(null!=r&&(n.minzoom=r),null!=i&&(n.maxzoom=i),this._updateLayer(n)):this.fire(new t.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const n=this.getLayer(e);if(n){if(!t.aE(n.filter,r))return null==r?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(t.u.filter,`layers.${n.id}.filter`,r,null,i)||(n.filter=t.aB(r),this._updateLayer(n)))}else this.fire(new t.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return t.aB(this.getLayer(e).filter)}setLayoutProperty(e,r,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getLayoutProperty(r),i)||(o.setLayoutProperty(r,i,n),this._updateLayer(o)):this.fire(new t.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,r){const i=this.getLayer(e);if(i)return i.getLayoutProperty(r);this.fire(new t.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,r,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this.getLayer(e);o?t.aE(o.getPaintProperty(r),i)||(o.setPaintProperty(r,i,n)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new t.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(e,r){this._checkLoaded();const i=e.source,n=e.sourceLayer,o=this.sourceCaches[i];if(void 0===o)return void this.fire(new t.j(new Error(`The source '${i}' does not exist in the map's style.`)));const a=o.getSource().type;"geojson"===a&&n?this.fire(new t.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||n?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),o.setFeatureState(n,e.id,r)):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,r){this._checkLoaded();const i=e.source,n=this.sourceCaches[i];if(void 0===n)return void this.fire(new t.j(new Error(`The source '${i}' does not exist in the map's style.`)));const o=n.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?r&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.j(new Error("A feature id is required to remove its specific state property."))):n.removeFeatureState(a,e.id,r):this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const r=e.source,i=e.sourceLayer,n=this.sourceCaches[r];if(void 0!==n)return"vector"!==n.getSource().type||i?(void 0===e.id&&this.fire(new t.j(new Error("The feature id parameter must be provided."))),n.getFeatureState(i,e.id)):void this.fire(new t.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new t.j(new Error(`The source '${r}' does not exist in the map's style.`)))}getTransition(){return t.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=t.aF(this.sourceCaches,(e=>e.serialize())),r=this._serializeByIds(this._order,!0),i=this.map.getTerrain()||void 0,n=this.stylesheet;return t.aG({version:n.version,name:n.name,metadata:n.metadata,light:n.light,sky:n.sky,center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch,sprite:n.sprite,glyphs:n.glyphs,transition:n.transition,sources:e,layers:r,terrain:i},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&"raster"!==this.sourceCaches[e.source].getSource().type&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,r={},i=[];for(let o=this._order.length-1;o>=0;o--){const n=this._order[o];if(t(n)){r[n]=o;for(const t of e){const e=t[n];if(e)for(const t of e)i.push(t)}}}i.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const n=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=i.length-1;e>=0;e--){const t=i[e].feature;if(r[t.layer.id]<o)break;n.push(t),i.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)n.push(t.feature)}}return n}queryRenderedFeatures(e,r,i){r&&r.filter&&this._validate(t.u.filter,"queryRenderedFeatures.filter",r.filter,null,r);const n={};if(r&&r.layers){if(!Array.isArray(r.layers))return this.fire(new t.j(new Error("parameters.layers must be an Array."))),[];for(const e of r.layers){const r=this._layers[e];if(!r)return this.fire(new t.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be queried for features.`))),[];n[r.source]=!0}}const o=[];r.availableImages=this._availableImages;const a=this._serializedAllLayers();for(const t in this.sourceCaches)r.layers&&!n[t]||o.push($(this.sourceCaches[t],this._layers,a,e,r,i));return this.placement&&o.push(function(e,t,r,i,n,o,a){const s={},l=o.queryRenderedSymbols(i),c=[];for(const u of Object.keys(l).map(Number))c.push(a[u]);c.sort(W);for(const u of c){const r=u.featureIndex.lookupSymbolFeatures(l[u.bucketInstanceId],t,u.bucketIndex,u.sourceLayerIndex,n.filter,n.layers,n.availableImages,e);for(const e in r){const t=s[e]=s[e]||[],i=r[e];i.sort(((e,t)=>{const r=u.featureSortOrder;if(r){const i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));for(const e of i)t.push(e)}}for(const u in s)s[u].forEach((t=>{const i=t.feature,n=r[e[u].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=n}));return s}(this._layers,a,this.sourceCaches,e,r,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(e,r){r&&r.filter&&this._validate(t.u.filter,"querySourceFeatures.filter",r.filter,null,r);const i=this.sourceCaches[e];return i?function(e,t){const r=e.getRenderableIds().map((t=>e.getTileByID(t))),i=[],n={};for(let o=0;o<r.length;o++){const e=r[o],a=e.tileID.canonical.key;n[a]||(n[a]=!0,e.querySourceFeatures(i,t))}return i}(i,r):[]}getLight(){return this.light.getLight()}setLight(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();const i=this.light.getLight();let n=!1;for(const o in e)if(!t.aE(e[o],i[o])){n=!0;break}if(!n)return;const a={now:o.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,r),this.light.updateTransitions(a)}getSky(){var e;return null===(e=this.stylesheet)||void 0===e?void 0:e.sky}setSky(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getSky();let n=!1;if(!e&&!i)return;if(e&&!i)n=!0;else if(!e&&i)n=!0;else for(const o in e)if(!t.aE(e[o],i[o])){n=!0;break}if(!n)return;const a={now:o.now(),transition:t.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,r),this.sky.updateTransitions(a)}_validate(e,r,i,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!o||!1!==o.validate)&&ut(this,e.call(t.u,t.e({key:r,style:this.serialize(),value:i,styleSpec:t.v},n)))}_remove(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),se().off(ne,this._rtlPluginLoaded);for(const t in this._layers)this._layers[t].setEventedParent(null);for(const t in this.sourceCaches){const e=this.sourceCaches[t];e.setEventedParent(null),e.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const t in this.sourceCaches)this.sourceCaches[t].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!1,s=!1;const l={};for(const o of this._order){const t=this._layers[o];if("symbol"!==t.type)continue;if(!l[t.source]){const e=this.sourceCaches[t.source];l[t.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(t,l[t.source],e.center.lng);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((n=n||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.now(),e.zoom))&&(this.pauseablePlacement=new nt(e,this.map.terrain,this._order,n,t,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const o of this._order){const e=this._layers[o];"symbol"===e.type&&this.placement.updateLayerOpacities(e,l[e.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,r){return t._(this,void 0,void 0,(function*(){const e=yield this.imageManager.getImages(r.icons);this._updateTilesForChangedImages();const t=this.sourceCaches[r.source];return t&&t.setDependencies(r.tileID.key,r.type,r.icons),e}))}getGlyphs(e,r){return t._(this,void 0,void 0,(function*(){const e=yield this.glyphManager.getGlyphs(r.stacks),t=this.sourceCaches[r.source];return t&&t.setDependencies(r.tileID.key,r.type,[""]),e}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded(),e&&this._validate(t.u.glyphs,"glyphs",e,null,r)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;this._checkLoaded();const o=[{id:e,url:r}],a=[...b(this.stylesheet.sprite),...o];this._validate(t.u.sprite,"sprite",a,null,i)||(this.stylesheet.sprite=a,this._loadSprite(o,!0,n))}removeSprite(e){this._checkLoaded();const r=b(this.stylesheet.sprite);if(r.find((t=>t.id===e))){if(this._spritesImagesIds[e])for(const t of this._spritesImagesIds[e])this.imageManager.removeImage(t),this._changedImages[t]=!0;r.splice(r.findIndex((t=>t.id===e)),1),this.stylesheet.sprite=r.length>0?r:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new t.k("data",{dataType:"style"}))}else this.fire(new t.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return b(this.stylesheet.sprite)}setSprite(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;this._checkLoaded(),e&&this._validate(t.u.sprite,"sprite",e,null,r)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,i):(this._unloadSprite(),i&&i(null)))}}var pt=t.Y([{name:"a_pos",type:"Int16",components:2}]);const ft={prelude:mt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\n","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}"),background:mt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:mt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:mt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:mt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),heatmapTexture:mt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:mt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:mt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),fillOutline:mt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillOutlinePattern:mt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),fillPattern:mt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:mt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:mt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;\n#ifdef TERRAIN3D\nattribute vec2 a_centroid;\n#endif\nvarying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:mt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:mt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:mt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:mt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:mt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:mt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:mt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:mt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:mt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:mt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:mt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:mt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:mt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function mt(e,t){const r=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute ([\w]+) ([\w]+)/g),n=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),o=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),a=o?o.concat(n):n,s={};return{fragmentSource:e=e.replace(r,((e,t,r,i,n)=>(s[n]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nvarying ${r} ${i} ${n};\n#else\nuniform ${r} ${i} u_${n};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${n}\n    ${r} ${i} ${n} = u_${n};\n#endif\n`))),vertexSource:t=t.replace(r,((e,t,r,i,n)=>{const o="float"===i?"vec2":"vec4",a=n.match(/color/)?"color":o;return s[n]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${r} ${o} a_${n};\nvarying ${r} ${i} ${n};\n#else\nuniform ${r} ${i} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = a_${n};\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${n}\nuniform lowp float u_${n}_t;\nattribute ${r} ${o} a_${n};\n#else\nuniform ${r} ${i} u_${n};\n#endif\n`:"vec4"===a?`\n#ifndef HAS_UNIFORM_u_${n}\n    ${r} ${i} ${n} = a_${n};\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${n}\n    ${r} ${i} ${n} = unpack_mix_${a}(a_${n}, u_${n}_t);\n#else\n    ${r} ${i} ${n} = u_${n};\n#endif\n`})),staticAttributes:i,staticUniforms:a}}class gt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,r,i,n,o,a,s,l){this.context=e;let c=this.boundPaintVertexBuffers.length!==i.length;for(let u=0;!c&&u<i.length;u++)this.boundPaintVertexBuffers[u]!==i[u]&&(c=!0);!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==r||c||this.boundIndexBuffer!==n||this.boundVertexOffset!==o||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s||this.boundDynamicVertexBuffer3!==l?this.freshBind(t,r,i,n,o,a,s,l):(e.bindVertexArray.set(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind(),l&&l.bind())}freshBind(e,t,r,i,n,o,a,s){const l=e.numAttributes,c=this.context,u=c.gl;this.vao&&this.destroy(),this.vao=c.createVertexArray(),c.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=r,this.boundIndexBuffer=i,this.boundVertexOffset=n,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a,this.boundDynamicVertexBuffer3=s,t.enableAttributes(u,e);for(const d of r)d.enableAttributes(u,e);o&&o.enableAttributes(u,e),a&&a.enableAttributes(u,e),s&&s.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,n);for(const d of r)d.bind(),d.setVertexAttribPointers(u,e,n);o&&(o.bind(),o.setVertexAttribPointers(u,e,n)),i&&i.bind(),a&&(a.bind(),a.setVertexAttribPointers(u,e,n)),s&&(s.bind(),s.setVertexAttribPointers(u,e,n)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const yt=(e,r,i,n,o)=>({u_matrix:e,u_texture:0,u_ele_delta:r,u_fog_matrix:i,u_fog_color:n?n.properties.get("fog-color"):t.aM.white,u_fog_ground_blend:n?n.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:n?n.calculateFogBlendOpacity(o):0,u_horizon_color:n?n.properties.get("horizon-color"):t.aM.white,u_horizon_fog_blend:n?n.properties.get("horizon-fog-blend"):1});function _t(e){const t=[];for(let r=0;r<e.length;r++){if(null===e[r])continue;const i=e[r].split(" ");t.push(i.pop())}return t}class bt{constructor(e,r,i,n,o,a){const s=e.gl;this.program=s.createProgram();const l=_t(r.staticAttributes),c=i?i.getBinderAttributes():[],u=l.concat(c),d=ft.prelude.staticUniforms?_t(ft.prelude.staticUniforms):[],h=r.staticUniforms?_t(r.staticUniforms):[],p=i?i.getBinderUniforms():[],f=d.concat(h).concat(p),m=[];for(const t of f)m.indexOf(t)<0&&m.push(t);const g=i?i.defines():[];o&&g.push("#define OVERDRAW_INSPECTOR;"),a&&g.push("#define TERRAIN3D;");const y=g.concat(ft.prelude.fragmentSource,r.fragmentSource).join("\n"),_=g.concat(ft.prelude.vertexSource,r.vertexSource).join("\n"),b=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(b,y),s.compileShader(b),!s.getShaderParameter(b,s.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${s.getShaderInfoLog(b)}`);s.attachShader(this.program,b);const v=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);if(s.shaderSource(v,_),s.compileShader(v),!s.getShaderParameter(v,s.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${s.getShaderInfoLog(v)}`);s.attachShader(this.program,v),this.attributes={};const x={};this.numAttributes=u.length;for(let t=0;t<this.numAttributes;t++)u[t]&&(s.bindAttribLocation(this.program,t,u[t]),this.attributes[u[t]]=t);if(s.linkProgram(this.program),!s.getProgramParameter(this.program,s.LINK_STATUS))throw new Error(`Program failed to link: ${s.getProgramInfoLog(this.program)}`);s.deleteShader(v),s.deleteShader(b);for(let t=0;t<m.length;t++){const e=m[t];if(e&&!x[e]){const t=s.getUniformLocation(this.program,e);t&&(x[e]=t)}}this.fixedUniforms=n(e,x),this.terrainUniforms=((e,r)=>({u_depth:new t.aH(e,r.u_depth),u_terrain:new t.aH(e,r.u_terrain),u_terrain_dim:new t.aI(e,r.u_terrain_dim),u_terrain_matrix:new t.aJ(e,r.u_terrain_matrix),u_terrain_unpack:new t.aK(e,r.u_terrain_unpack),u_terrain_exaggeration:new t.aI(e,r.u_terrain_exaggeration)}))(e,x),this.binderUniforms=i?i.getUniforms(e,x):[]}draw(e,t,r,i,n,o,a,s,l,c,u,d,h,p,f,m,g,y){const _=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(r),e.setStencilMode(i),e.setColorMode(n),e.setCullFace(o),s){e.activeTexture.set(_.TEXTURE2),_.bindTexture(_.TEXTURE_2D,s.depthTexture),e.activeTexture.set(_.TEXTURE3),_.bindTexture(_.TEXTURE_2D,s.texture);for(const e in this.terrainUniforms)this.terrainUniforms[e].set(s[e])}for(const v in this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(e,this.binderUniforms,h,{zoom:p});let b=0;switch(t){case _.LINES:b=2;break;case _.TRIANGLES:b=3;break;case _.LINE_STRIP:b=1}for(const v of d.get()){const r=v.vaos||(v.vaos={});(r[l]||(r[l]=new gt)).bind(e,this,c,f?f.getPaintVertexBuffers():[],u,v.vertexOffset,m,g,y),_.drawElements(t,v.primitiveLength*b,_.UNSIGNED_SHORT,v.primitiveOffset*b*2)}}}function vt(e,t,r){const i=1/Le(r,1,t.transform.tileZoom),n=Math.pow(2,r.tileID.overscaledZ),o=r.tileSize*Math.pow(2,t.transform.tileZoom)/n,a=o*(r.tileID.canonical.x+r.tileID.wrap*n),s=o*r.tileID.canonical.y;return{u_image:0,u_texsize:r.imageAtlasTexture.size,u_scale:[i,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}const xt=(e,r,i,n)=>{const o=r.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],l=function(){var e=new t.A(9);return t.A!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}();"viewport"===o.properties.get("anchor")&&function(e,t){var r=Math.sin(t),i=Math.cos(t);e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1}(l,-r.transform.angle),function(e,t,r){var i=t[0],n=t[1],o=t[2];e[0]=i*r[0]+n*r[3]+o*r[6],e[1]=i*r[1]+n*r[4]+o*r[7],e[2]=i*r[2]+n*r[5]+o*r[8]}(s,s,l);const c=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+i,u_opacity:n}},wt=(e,r,i,n,o,a,s)=>t.e(xt(e,r,i,n),vt(a,r,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8}),St=e=>({u_matrix:e}),It=(e,r,i,n)=>t.e(St(e),vt(i,r,n)),Tt=(e,t)=>({u_matrix:e,u_world:t}),kt=(e,r,i,n,o)=>t.e(It(e,r,i,n),{u_world:o}),Et=(e,t,r,i)=>{const n=e.transform;let o,a;if("map"===i.paint.get("circle-pitch-alignment")){const e=Le(r,1,n.zoom);o=!0,a=[e,e]}else o=!1,a=n.pixelsToGLUnits;return{u_camera_to_center_distance:n.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(t.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:e.pixelRatio,u_extrude_scale:a}},At=(e,t,r)=>({u_matrix:e,u_inv_matrix:t,u_camera_to_center_distance:r.cameraToCenterDistance,u_viewport_size:[r.width,r.height]}),Pt=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},Ct=e=>({u_matrix:e}),Mt=(e,t,r,i)=>({u_matrix:e,u_extrude_scale:Le(t,1,r),u_intensity:i}),Ot=(e,r,i,n)=>{const o=t.H();t.aP(o,0,e.width,e.height,0,0,1);const a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:i,u_color_ramp:n,u_opacity:r.paint.get("heatmap-opacity")}};function Rt(e,r){const i=Math.pow(2,r.canonical.z),n=r.canonical.y;return[new t.Z(0,n/i).toLngLat().lat,new t.Z(0,(n+1)/i).toLngLat().lat]}const Bt=(e,t,r,i)=>{const n=e.transform;return{u_matrix:Nt(e,t,r,i),u_ratio:1/Le(t,1,n.zoom),u_device_pixel_ratio:e.pixelRatio,u_units_to_pixels:[1/n.pixelsToGLUnits[0],1/n.pixelsToGLUnits[1]]}},Dt=(e,r,i,n,o)=>t.e(Bt(e,r,i,o),{u_image:0,u_image_height:n}),zt=(e,t,r,i,n)=>{const o=e.transform,a=Ft(t,o);return{u_matrix:Nt(e,t,r,n),u_texsize:t.imageAtlasTexture.size,u_ratio:1/Le(t,1,o.zoom),u_device_pixel_ratio:e.pixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Lt=(e,r,i,n,o,a)=>{const s=e.lineAtlas,l=Ft(r,e.transform),c="round"===i.layout.get("line-cap"),u=s.getDash(n.from,c),d=s.getDash(n.to,c),h=u.width*o.fromScale,p=d.width*o.toScale;return t.e(Bt(e,r,i,a),{u_patternscale_a:[l/h,-u.height/2],u_patternscale_b:[l/p,-d.height/2],u_sdfgamma:s.width/(256*Math.min(h,p)*e.pixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:d.y,u_mix:o.t})};function Ft(e,t){return 1/Le(e,1,t.tileZoom)}function Nt(e,t,r,i){return e.translatePosMatrix(i?i.posMatrix:t.tileID.posMatrix,t,r.paint.get("line-translate"),r.paint.get("line-translate-anchor"))}const jt=(e,t,r,i,n)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:r,u_buffer_scale:1,u_fade_t:i.mix,u_opacity:i.opacity*n.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:n.paint.get("raster-brightness-min"),u_brightness_high:n.paint.get("raster-brightness-max"),u_saturation_factor:(a=n.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=n.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:Ut(n.paint.get("raster-hue-rotate"))};var o,a};function Ut(e){e*=Math.PI/180;const t=Math.sin(e),r=Math.cos(e);return[(2*r+1)/3,(-Math.sqrt(3)*t-r+1)/3,(Math.sqrt(3)*t-r+1)/3]}const Vt=(e,t,r,i,n,o,a,s,l,c,u,d,h,p)=>{const f=a.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:f.cameraToCenterDistance,u_pitch:f.pitch/360*2*Math.PI,u_rotate_symbol:+r,u_aspect_ratio:f.width/f.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:s,u_label_plane_matrix:l,u_coord_matrix:c,u_is_text:+d,u_pitch_with_map:+i,u_is_along_line:n,u_is_variable_anchor:o,u_texsize:h,u_texture:0,u_translation:u,u_pitched_scale:p}},$t=(e,r,i,n,o,a,s,l,c,u,d,h,p,f,m)=>{const g=s.transform;return t.e(Vt(e,r,i,n,o,a,s,l,c,u,d,h,p,m),{u_gamma_scale:n?Math.cos(g._pitch)*g.cameraToCenterDistance:1,u_device_pixel_ratio:s.pixelRatio,u_is_halo:+f})},Wt=(e,r,i,n,o,a,s,l,c,u,d,h,p,f)=>t.e($t(e,r,i,n,o,a,s,l,c,u,d,!0,h,!0,f),{u_texsize_icon:p,u_texture_icon:1}),Ht=(e,t,r)=>({u_matrix:e,u_opacity:t,u_color:r}),Gt=(e,r,i,n,o,a)=>t.e(function(e,t,r,i){const n=r.imageManager.getPattern(e.from.toString()),o=r.imageManager.getPattern(e.to.toString()),{width:a,height:s}=r.imageManager.getPixelSize(),l=Math.pow(2,i.tileID.overscaledZ),c=i.tileSize*Math.pow(2,r.transform.tileZoom)/l,u=c*(i.tileID.canonical.x+i.tileID.wrap*l),d=c*i.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:n.tl,u_pattern_br_a:n.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[a,s],u_mix:t.t,u_pattern_size_a:n.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/Le(i,1,r.transform.tileZoom),u_pixel_coord_upper:[u>>16,d>>16],u_pixel_coord_lower:[65535&u,65535&d]}}(n,a,i,o),{u_matrix:e,u_opacity:r}),qt={fillExtrusion:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_lightpos:new t.aN(e,r.u_lightpos),u_lightintensity:new t.aI(e,r.u_lightintensity),u_lightcolor:new t.aN(e,r.u_lightcolor),u_vertical_gradient:new t.aI(e,r.u_vertical_gradient),u_opacity:new t.aI(e,r.u_opacity)}),fillExtrusionPattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_lightpos:new t.aN(e,r.u_lightpos),u_lightintensity:new t.aI(e,r.u_lightintensity),u_lightcolor:new t.aN(e,r.u_lightcolor),u_vertical_gradient:new t.aI(e,r.u_vertical_gradient),u_height_factor:new t.aI(e,r.u_height_factor),u_image:new t.aH(e,r.u_image),u_texsize:new t.aO(e,r.u_texsize),u_pixel_coord_upper:new t.aO(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,r.u_pixel_coord_lower),u_scale:new t.aN(e,r.u_scale),u_fade:new t.aI(e,r.u_fade),u_opacity:new t.aI(e,r.u_opacity)}),fill:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix)}),fillPattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_image:new t.aH(e,r.u_image),u_texsize:new t.aO(e,r.u_texsize),u_pixel_coord_upper:new t.aO(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,r.u_pixel_coord_lower),u_scale:new t.aN(e,r.u_scale),u_fade:new t.aI(e,r.u_fade)}),fillOutline:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_world:new t.aO(e,r.u_world)}),fillOutlinePattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_world:new t.aO(e,r.u_world),u_image:new t.aH(e,r.u_image),u_texsize:new t.aO(e,r.u_texsize),u_pixel_coord_upper:new t.aO(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,r.u_pixel_coord_lower),u_scale:new t.aN(e,r.u_scale),u_fade:new t.aI(e,r.u_fade)}),circle:(e,r)=>({u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_scale_with_map:new t.aH(e,r.u_scale_with_map),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_extrude_scale:new t.aO(e,r.u_extrude_scale),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_matrix:new t.aJ(e,r.u_matrix)}),collisionBox:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_pixel_extrude_scale:new t.aO(e,r.u_pixel_extrude_scale)}),collisionCircle:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_inv_matrix:new t.aJ(e,r.u_inv_matrix),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_viewport_size:new t.aO(e,r.u_viewport_size)}),debug:(e,r)=>({u_color:new t.aL(e,r.u_color),u_matrix:new t.aJ(e,r.u_matrix),u_overlay:new t.aH(e,r.u_overlay),u_overlay_scale:new t.aI(e,r.u_overlay_scale)}),clippingMask:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix)}),heatmap:(e,r)=>({u_extrude_scale:new t.aI(e,r.u_extrude_scale),u_intensity:new t.aI(e,r.u_intensity),u_matrix:new t.aJ(e,r.u_matrix)}),heatmapTexture:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_world:new t.aO(e,r.u_world),u_image:new t.aH(e,r.u_image),u_color_ramp:new t.aH(e,r.u_color_ramp),u_opacity:new t.aI(e,r.u_opacity)}),hillshade:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_image:new t.aH(e,r.u_image),u_latrange:new t.aO(e,r.u_latrange),u_light:new t.aO(e,r.u_light),u_shadow:new t.aL(e,r.u_shadow),u_highlight:new t.aL(e,r.u_highlight),u_accent:new t.aL(e,r.u_accent)}),hillshadePrepare:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_image:new t.aH(e,r.u_image),u_dimension:new t.aO(e,r.u_dimension),u_zoom:new t.aI(e,r.u_zoom),u_unpack:new t.aK(e,r.u_unpack)}),line:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,r.u_units_to_pixels)}),lineGradient:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,r.u_units_to_pixels),u_image:new t.aH(e,r.u_image),u_image_height:new t.aI(e,r.u_image_height)}),linePattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_texsize:new t.aO(e,r.u_texsize),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_image:new t.aH(e,r.u_image),u_units_to_pixels:new t.aO(e,r.u_units_to_pixels),u_scale:new t.aN(e,r.u_scale),u_fade:new t.aI(e,r.u_fade)}),lineSDF:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ratio:new t.aI(e,r.u_ratio),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_units_to_pixels:new t.aO(e,r.u_units_to_pixels),u_patternscale_a:new t.aO(e,r.u_patternscale_a),u_patternscale_b:new t.aO(e,r.u_patternscale_b),u_sdfgamma:new t.aI(e,r.u_sdfgamma),u_image:new t.aH(e,r.u_image),u_tex_y_a:new t.aI(e,r.u_tex_y_a),u_tex_y_b:new t.aI(e,r.u_tex_y_b),u_mix:new t.aI(e,r.u_mix)}),raster:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_tl_parent:new t.aO(e,r.u_tl_parent),u_scale_parent:new t.aI(e,r.u_scale_parent),u_buffer_scale:new t.aI(e,r.u_buffer_scale),u_fade_t:new t.aI(e,r.u_fade_t),u_opacity:new t.aI(e,r.u_opacity),u_image0:new t.aH(e,r.u_image0),u_image1:new t.aH(e,r.u_image1),u_brightness_low:new t.aI(e,r.u_brightness_low),u_brightness_high:new t.aI(e,r.u_brightness_high),u_saturation_factor:new t.aI(e,r.u_saturation_factor),u_contrast_factor:new t.aI(e,r.u_contrast_factor),u_spin_weights:new t.aN(e,r.u_spin_weights)}),symbolIcon:(e,r)=>({u_is_size_zoom_constant:new t.aH(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,r.u_is_size_feature_constant),u_size_t:new t.aI(e,r.u_size_t),u_size:new t.aI(e,r.u_size),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_pitch:new t.aI(e,r.u_pitch),u_rotate_symbol:new t.aH(e,r.u_rotate_symbol),u_aspect_ratio:new t.aI(e,r.u_aspect_ratio),u_fade_change:new t.aI(e,r.u_fade_change),u_matrix:new t.aJ(e,r.u_matrix),u_label_plane_matrix:new t.aJ(e,r.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,r.u_coord_matrix),u_is_text:new t.aH(e,r.u_is_text),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_is_along_line:new t.aH(e,r.u_is_along_line),u_is_variable_anchor:new t.aH(e,r.u_is_variable_anchor),u_texsize:new t.aO(e,r.u_texsize),u_texture:new t.aH(e,r.u_texture),u_translation:new t.aO(e,r.u_translation),u_pitched_scale:new t.aI(e,r.u_pitched_scale)}),symbolSDF:(e,r)=>({u_is_size_zoom_constant:new t.aH(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,r.u_is_size_feature_constant),u_size_t:new t.aI(e,r.u_size_t),u_size:new t.aI(e,r.u_size),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_pitch:new t.aI(e,r.u_pitch),u_rotate_symbol:new t.aH(e,r.u_rotate_symbol),u_aspect_ratio:new t.aI(e,r.u_aspect_ratio),u_fade_change:new t.aI(e,r.u_fade_change),u_matrix:new t.aJ(e,r.u_matrix),u_label_plane_matrix:new t.aJ(e,r.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,r.u_coord_matrix),u_is_text:new t.aH(e,r.u_is_text),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_is_along_line:new t.aH(e,r.u_is_along_line),u_is_variable_anchor:new t.aH(e,r.u_is_variable_anchor),u_texsize:new t.aO(e,r.u_texsize),u_texture:new t.aH(e,r.u_texture),u_gamma_scale:new t.aI(e,r.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_is_halo:new t.aH(e,r.u_is_halo),u_translation:new t.aO(e,r.u_translation),u_pitched_scale:new t.aI(e,r.u_pitched_scale)}),symbolTextAndIcon:(e,r)=>({u_is_size_zoom_constant:new t.aH(e,r.u_is_size_zoom_constant),u_is_size_feature_constant:new t.aH(e,r.u_is_size_feature_constant),u_size_t:new t.aI(e,r.u_size_t),u_size:new t.aI(e,r.u_size),u_camera_to_center_distance:new t.aI(e,r.u_camera_to_center_distance),u_pitch:new t.aI(e,r.u_pitch),u_rotate_symbol:new t.aH(e,r.u_rotate_symbol),u_aspect_ratio:new t.aI(e,r.u_aspect_ratio),u_fade_change:new t.aI(e,r.u_fade_change),u_matrix:new t.aJ(e,r.u_matrix),u_label_plane_matrix:new t.aJ(e,r.u_label_plane_matrix),u_coord_matrix:new t.aJ(e,r.u_coord_matrix),u_is_text:new t.aH(e,r.u_is_text),u_pitch_with_map:new t.aH(e,r.u_pitch_with_map),u_is_along_line:new t.aH(e,r.u_is_along_line),u_is_variable_anchor:new t.aH(e,r.u_is_variable_anchor),u_texsize:new t.aO(e,r.u_texsize),u_texsize_icon:new t.aO(e,r.u_texsize_icon),u_texture:new t.aH(e,r.u_texture),u_texture_icon:new t.aH(e,r.u_texture_icon),u_gamma_scale:new t.aI(e,r.u_gamma_scale),u_device_pixel_ratio:new t.aI(e,r.u_device_pixel_ratio),u_is_halo:new t.aH(e,r.u_is_halo),u_translation:new t.aO(e,r.u_translation),u_pitched_scale:new t.aI(e,r.u_pitched_scale)}),background:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_opacity:new t.aI(e,r.u_opacity),u_color:new t.aL(e,r.u_color)}),backgroundPattern:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_opacity:new t.aI(e,r.u_opacity),u_image:new t.aH(e,r.u_image),u_pattern_tl_a:new t.aO(e,r.u_pattern_tl_a),u_pattern_br_a:new t.aO(e,r.u_pattern_br_a),u_pattern_tl_b:new t.aO(e,r.u_pattern_tl_b),u_pattern_br_b:new t.aO(e,r.u_pattern_br_b),u_texsize:new t.aO(e,r.u_texsize),u_mix:new t.aI(e,r.u_mix),u_pattern_size_a:new t.aO(e,r.u_pattern_size_a),u_pattern_size_b:new t.aO(e,r.u_pattern_size_b),u_scale_a:new t.aI(e,r.u_scale_a),u_scale_b:new t.aI(e,r.u_scale_b),u_pixel_coord_upper:new t.aO(e,r.u_pixel_coord_upper),u_pixel_coord_lower:new t.aO(e,r.u_pixel_coord_lower),u_tile_units_to_pixels:new t.aI(e,r.u_tile_units_to_pixels)}),terrain:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_texture:new t.aH(e,r.u_texture),u_ele_delta:new t.aI(e,r.u_ele_delta),u_fog_matrix:new t.aJ(e,r.u_fog_matrix),u_fog_color:new t.aL(e,r.u_fog_color),u_fog_ground_blend:new t.aI(e,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new t.aI(e,r.u_fog_ground_blend_opacity),u_horizon_color:new t.aL(e,r.u_horizon_color),u_horizon_fog_blend:new t.aI(e,r.u_horizon_fog_blend)}),terrainDepth:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_ele_delta:new t.aI(e,r.u_ele_delta)}),terrainCoords:(e,r)=>({u_matrix:new t.aJ(e,r.u_matrix),u_texture:new t.aH(e,r.u_texture),u_terrain_coords_id:new t.aI(e,r.u_terrain_coords_id),u_ele_delta:new t.aI(e,r.u_ele_delta)}),sky:(e,r)=>({u_sky_color:new t.aL(e,r.u_sky_color),u_horizon_color:new t.aL(e,r.u_horizon_color),u_horizon:new t.aI(e,r.u_horizon),u_sky_horizon_blend:new t.aI(e,r.u_sky_horizon_blend)})};class Zt{constructor(e,t,r){this.context=e;const i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Xt={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Yt{constructor(e,t,r,i){this.length=t.length,this.attributes=r,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.context=e;const n=e.gl;this.buffer=n.createBuffer(),e.bindVertexBuffer.set(this.buffer),n.bufferData(n.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let r=0;r<this.attributes.length;r++){const i=t.attributes[this.attributes[r].name];void 0!==i&&e.enableVertexAttribArray(i)}}setVertexAttribPointers(e,t,r){for(let i=0;i<this.attributes.length;i++){const n=this.attributes[i],o=t.attributes[n.name];void 0!==o&&e.vertexAttribPointer(o,n.components,e[Xt[n.type]],!1,this.itemSize,n.offset+this.itemSize*(r||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kt=new WeakMap;function Jt(e){var t;if(Kt.has(e))return Kt.get(e);{const r=null===(t=e.getParameter(e.VERSION))||void 0===t?void 0:t.startsWith("WebGL 2.0");return Kt.set(e,r),r}}class Qt{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class er extends Qt{getDefault(){return t.aM.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class tr extends Qt{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class rr extends Qt{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class ir extends Qt{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class nr extends Qt{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class or extends Qt{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class ar extends Qt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class sr extends Qt{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class lr extends Qt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class cr extends Qt{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class ur extends Qt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class dr extends Qt{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class hr extends Qt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class pr extends Qt{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class fr extends Qt{getDefault(){return t.aM.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class mr extends Qt{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class gr extends Qt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class yr extends Qt{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class _r extends Qt{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class br extends Qt{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class vr extends Qt{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class xr extends Qt{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class wr extends Qt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Sr extends Qt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ir extends Qt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Tr extends Qt{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class kr extends Qt{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Er extends Qt{getDefault(){return null}set(e){var t;if(e===this.current&&!this.dirty)return;const r=this.gl;Jt(r)?r.bindVertexArray(e):null===(t=r.getExtension("OES_vertex_array_object"))||void 0===t||t.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Ar extends Qt{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Pr extends Qt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Cr extends Qt{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Mr extends Qt{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Or extends Mr{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Rr extends Mr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Br extends Mr{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Dr{constructor(e,t,r,i,n){this.context=e,this.width=t,this.height=r;const o=e.gl,a=this.framebuffer=o.createFramebuffer();if(this.colorAttachment=new Or(e,a),i)this.depthAttachment=n?new Br(e,a):new Rr(e,a);else if(n)throw new Error("Stencil cannot be set without depth");if(o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class zr{constructor(e,t,r){this.blendFunction=e,this.blendColor=t,this.mask=r}}zr.Replace=[1,0],zr.disabled=new zr(zr.Replace,t.aM.transparent,[!1,!1,!1,!1]),zr.unblended=new zr(zr.Replace,t.aM.transparent,[!0,!0,!0,!0]),zr.alphaBlended=new zr([1,771],t.aM.transparent,[!0,!0,!0,!0]);class Lr{constructor(e){var t,r;if(this.gl=e,this.clearColor=new er(this),this.clearDepth=new tr(this),this.clearStencil=new rr(this),this.colorMask=new ir(this),this.depthMask=new nr(this),this.stencilMask=new or(this),this.stencilFunc=new ar(this),this.stencilOp=new sr(this),this.stencilTest=new lr(this),this.depthRange=new cr(this),this.depthTest=new ur(this),this.depthFunc=new dr(this),this.blend=new hr(this),this.blendFunc=new pr(this),this.blendColor=new fr(this),this.blendEquation=new mr(this),this.cullFace=new gr(this),this.cullFaceSide=new yr(this),this.frontFace=new _r(this),this.program=new br(this),this.activeTexture=new vr(this),this.viewport=new xr(this),this.bindFramebuffer=new wr(this),this.bindRenderbuffer=new Sr(this),this.bindTexture=new Ir(this),this.bindVertexBuffer=new Tr(this),this.bindElementBuffer=new kr(this),this.bindVertexArray=new Er(this),this.pixelStoreUnpack=new Ar(this),this.pixelStoreUnpackPremultiplyAlpha=new Pr(this),this.pixelStoreUnpackFlipY=new Cr(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),Jt(e)){this.HALF_FLOAT=e.HALF_FLOAT;const i=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(t=e.RGBA16F)&&void 0!==t?t:null==i?void 0:i.RGBA16F_EXT,this.RGB16F=null!==(r=e.RGB16F)&&void 0!==r?r:null==i?void 0:i.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const t=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==t?void 0:t.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Zt(this,e,t)}createVertexBuffer(e,t,r){return new Yt(this,e,t,r)}createRenderbuffer(e,t,r){const i=this.gl,n=i.createRenderbuffer();return this.bindRenderbuffer.set(n),i.renderbufferStorage(i.RENDERBUFFER,e,t,r),this.bindRenderbuffer.set(null),n}createFramebuffer(e,t,r,i){return new Dr(this,e,t,r,i)}clear(e){let{color:t,depth:r,stencil:i}=e;const n=this.gl;let o=0;t&&(o|=n.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==r&&(o|=n.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(r),this.depthMask.set(!0)),void 0!==i&&(o|=n.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),n.clear(o)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){t.aE(e.blendFunction,zr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return Jt(this.gl)?this.gl.createVertexArray():null===(e=this.gl.getExtension("OES_vertex_array_object"))||void 0===e?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var t;return Jt(this.gl)?this.gl.deleteVertexArray(e):null===(t=this.gl.getExtension("OES_vertex_array_object"))||void 0===t?void 0:t.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class Fr{constructor(e,t,r){this.func=e,this.mask=t,this.range=r}}Fr.ReadOnly=!1,Fr.ReadWrite=!0,Fr.disabled=new Fr(519,Fr.ReadOnly,[0,1]);const Nr=7680;class jr{constructor(e,t,r,i,n,o){this.test=e,this.ref=t,this.mask=r,this.fail=i,this.depthFail=n,this.pass=o}}jr.disabled=new jr({func:519,mask:0},0,0,Nr,Nr,Nr);class Ur{constructor(e,t,r){this.enable=e,this.mode=t,this.frontFace=r}}let Vr;function $r(e,r,i,n,o){const a=e.context,s=a.gl,l=e.useProgram("collisionBox"),c=[];let u=0,d=0;for(let _=0;_<n.length;_++){const p=n[_],f=r.getTile(p).getBucket(i);if(!f)continue;const m=o?f.textCollisionBox:f.iconCollisionBox,g=f.collisionCircleArray;if(g.length>0){const r=t.H();t.aQ(r,f.placementInvProjMatrix,e.transform.glCoordMatrix),t.aQ(r,r,f.placementViewportMatrix),c.push({circleArray:g,circleOffset:d,transform:p.posMatrix,invTransform:r,coord:p}),u+=g.length/4,d=u}m&&l.draw(a,s.LINES,Fr.disabled,jr.disabled,e.colorModeForRenderPass(),Ur.disabled,{u_matrix:p.posMatrix,u_pixel_extrude_scale:[1/(h=e.transform).width,1/h.height]},e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),i.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,e.transform.zoom,null,null,m.collisionVertexBuffer)}var h;if(!o||!c.length)return;const p=e.useProgram("collisionCircle"),f=new t.aR;f.resize(4*u),f._trim();let m=0;for(const t of c)for(let e=0;e<t.circleArray.length/4;e++){const r=4*e,i=t.circleArray[r+0],n=t.circleArray[r+1],o=t.circleArray[r+2],a=t.circleArray[r+3];f.emplace(m++,i,n,o,a,0),f.emplace(m++,i,n,o,a,1),f.emplace(m++,i,n,o,a,2),f.emplace(m++,i,n,o,a,3)}(!Vr||Vr.length<2*u)&&(Vr=function(e){const r=2*e,i=new t.aT;i.resize(r),i._trim();for(let t=0;t<r;t++){const e=6*t;i.uint16[e+0]=4*t+0,i.uint16[e+1]=4*t+1,i.uint16[e+2]=4*t+2,i.uint16[e+3]=4*t+2,i.uint16[e+4]=4*t+3,i.uint16[e+5]=4*t+0}return i}(u));const g=a.createIndexBuffer(Vr,!0),y=a.createVertexBuffer(f,t.aS.members,!0);for(const _ of c){const r=At(_.transform,_.invTransform,e.transform);p.draw(a,s.TRIANGLES,Fr.disabled,jr.disabled,e.colorModeForRenderPass(),Ur.disabled,r,e.style.map.terrain&&e.style.map.terrain.getTerrainData(_.coord),i.id,y,g,t.a0.simpleSegment(0,2*_.circleOffset,_.circleArray.length,_.circleArray.length/2),null,e.transform.zoom,null,null,null)}y.destroy(),g.destroy()}Ur.disabled=new Ur(!1,1029,2305),Ur.backCCW=new Ur(!0,1029,2305);const Wr=t.an(new Float32Array(16));function Hr(e,r,i,n,o,a){const{horizontalAlign:s,verticalAlign:l}=t.au(e);return new t.P((-(s-.5)*r/o+n[0])*a,(-(l-.5)*i/o+n[1])*a)}function Gr(e,r,i,n,o,a){const s=r.tileAnchorPoint.add(new t.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let e=n.mult(a);i||(e=e.rotate(-o));const t=s.add(e);return be(t.x,t.y,r.labelPlaneMatrix,r.getElevation).point}if(i){const t=Ae(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(e),i=Math.atan(t.y/t.x)+(t.x<0?Math.PI:0);return e.add(n.rotate(i))}return e.add(n)}function qr(e,r,i,n,o,a,s,l,c,u,d,h,p,f){const m=e.text.placedSymbolArray,g=e.text.dynamicLayoutVertexArray,y=e.icon.dynamicLayoutVertexArray,_={};g.clear();for(let b=0;b<m.length;b++){const y=m.get(b),v=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:n[y.crossTileID];if(v){const n=new t.P(y.anchorX,y.anchorY),m={getElevation:f,width:o.width,height:o.height,labelPlaneMatrix:a,lineVertexArray:null,pitchWithMap:i,projection:d,projectionCache:null,tileAnchorPoint:n,translation:h,unwrappedTileID:p},b=i?be(n.x,n.y,s,f):Ae(n.x,n.y,m),x=ve(o.cameraToCenterDistance,b.signedDistanceFromCamera);let w=t.ai(e.textSizeData,c,y)*x/t.ap;i&&(w*=e.tilePixelRatio/l);const{width:S,height:I,anchor:T,textOffset:k,textBoxScale:E}=v,A=Hr(T,S,I,k,E,w),P=d.getPitchedTextCorrection(o,n.add(new t.P(h[0],h[1])),p),C=Gr(b.point,m,r,A,o.angle,P),M=e.allowVerticalPlacement&&y.placedOrientation===t.ah.vertical?Math.PI/2:0;for(let e=0;e<y.numGlyphs;e++)t.aj(g,C,M);u&&y.associatedIconIndex>=0&&(_[y.associatedIconIndex]={shiftedAnchor:C,angle:M})}else Re(y.numGlyphs,g)}if(u){y.clear();const r=e.icon.placedSymbolArray;for(let e=0;e<r.length;e++){const i=r.get(e);if(i.hidden)Re(i.numGlyphs,y);else{const r=_[e];if(r)for(let e=0;e<i.numGlyphs;e++)t.aj(y,r.shiftedAnchor,r.angle);else Re(i.numGlyphs,y)}}e.icon.dynamicLayoutVertexBuffer.updateData(y)}e.text.dynamicLayoutVertexBuffer.updateData(g)}function Zr(e,t,r){return r.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Xr(e,r,i,n,o,a,s,l,c,u,d,h){const p=e.context,f=p.gl,m=e.transform,g=rt(),y="map"===l,_="map"===c,b="viewport"!==l&&"point"!==i.layout.get("symbol-placement"),v=y&&!_&&!b,x=!_&&b,w=!i.layout.get("symbol-sort-key").isConstant();let S=!1;const I=e.depthModeForSublayer(0,Fr.ReadOnly),T=i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"),k=[],E=g.getCircleRadiusCorrection(m);for(const A of n){const n=r.getTile(A),l=n.getBucket(i);if(!l)continue;const c=o?l.text:l.icon;if(!c||!c.segments.get().length||!c.hasVisibleVertices)continue;const d=c.programConfigurations.get(i.id),h=o||l.sdfIcons,p=o?l.textSizeData:l.iconSizeData,I=_||0!==m.pitch,P=e.useProgram(Zr(h,o,l),d),C=t.ag(p,m.zoom),M=e.style.map.terrain&&e.style.map.terrain.getTerrainData(A);let O,R,B,D,z=[0,0],L=null;if(o)R=n.glyphAtlasTexture,B=f.LINEAR,O=n.glyphAtlasTexture.size,l.iconsInText&&(z=n.imageAtlasTexture.size,L=n.imageAtlasTexture,D=I||e.options.rotating||e.options.zooming||"composite"===p.kind||"camera"===p.kind?f.LINEAR:f.NEAREST);else{const t=1!==i.layout.get("icon-size").constantOr(0)||l.iconsNeedLinear;R=n.imageAtlasTexture,B=h||e.options.rotating||e.options.zooming||t||I?f.LINEAR:f.NEAREST,O=n.imageAtlasTexture.size}const F=Le(n,1,e.transform.zoom),N=x?A.posMatrix:Wr,j=ye(N,_,y,e.transform,F),U=_e(N,_,y,e.transform,F),V=_e(A.posMatrix,_,y,e.transform,F),$=g.translatePosition(e.transform,n,a,s),W=T&&l.hasTextData(),H="none"!==i.layout.get("icon-text-fit")&&W&&l.hasIconData();if(b){const t=e.style.map.terrain?(t,r)=>e.style.map.terrain.getElevation(A,t,r):null,r="map"===i.layout.get("text-rotation-alignment");we(l,A.posMatrix,e,o,j,V,_,u,r,g,A.toUnwrapped(),m.width,m.height,$,t)}const G=A.posMatrix,q=o&&T||H,Z=b||q?Wr:j,X=U,Y=h&&0!==i.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let K;K=h?l.iconsInText?Wt(p.kind,C,v,_,b,q,e,G,Z,X,$,O,z,E):$t(p.kind,C,v,_,b,q,e,G,Z,X,$,o,O,!0,E):Vt(p.kind,C,v,_,b,q,e,G,Z,X,$,o,O,E);const J={program:P,buffers:c,uniformValues:K,atlasTexture:R,atlasTextureIcon:L,atlasInterpolation:B,atlasInterpolationIcon:D,isSDF:h,hasHalo:Y};if(w&&l.canOverlap){S=!0;const e=c.segments.get();for(const r of e)k.push({segments:new t.a0([r]),sortKey:r.sortKey,state:J,terrainData:M})}else k.push({segments:c.segments,sortKey:0,state:J,terrainData:M})}S&&k.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of k){const r=t.state;if(p.activeTexture.set(f.TEXTURE0),r.atlasTexture.bind(r.atlasInterpolation,f.CLAMP_TO_EDGE),r.atlasTextureIcon&&(p.activeTexture.set(f.TEXTURE1),r.atlasTextureIcon&&r.atlasTextureIcon.bind(r.atlasInterpolationIcon,f.CLAMP_TO_EDGE)),r.isSDF){const n=r.uniformValues;r.hasHalo&&(n.u_is_halo=1,Yr(r.buffers,t.segments,i,e,r.program,I,d,h,n,t.terrainData)),n.u_is_halo=0}Yr(r.buffers,t.segments,i,e,r.program,I,d,h,r.uniformValues,t.terrainData)}}function Yr(e,t,r,i,n,o,a,s,l,c){const u=i.context;n.draw(u,u.gl.TRIANGLES,o,a,s,Ur.disabled,l,c,r.id,e.layoutVertexBuffer,e.indexBuffer,t,r.paint,i.transform.zoom,e.programConfigurations.get(r.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}function Kr(e,r,i,n){const o=e.context,a=o.gl,s=jr.disabled,l=new zr([a.ONE,a.ONE],t.aM.transparent,[!0,!0,!0,!0]),c=r.getBucket(i);if(!c)return;const u=n.key;let d=i.heatmapFbos.get(u);d||(d=Qr(o,r.tileSize,r.tileSize),i.heatmapFbos.set(u,d)),o.bindFramebuffer.set(d.framebuffer),o.viewport.set([0,0,r.tileSize,r.tileSize]),o.clear({color:t.aM.transparent});const h=c.programConfigurations.get(i.id),p=e.useProgram("heatmap",h),f=e.style.map.terrain.getTerrainData(n);p.draw(o,a.TRIANGLES,Fr.disabled,s,l,Ur.disabled,Mt(n.posMatrix,r,e.transform.zoom,i.paint.get("heatmap-intensity")),f,i.id,c.layoutVertexBuffer,c.indexBuffer,c.segments,i.paint,e.transform.zoom,h)}function Jr(e,t,r){const i=e.context,n=i.gl;i.setColorMode(e.colorModeForRenderPass());const o=ei(i,t),a=r.key,s=t.heatmapFbos.get(a);s&&(i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s.colorAttachment.get()),i.activeTexture.set(n.TEXTURE1),o.bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,n.TRIANGLES,Fr.disabled,jr.disabled,e.colorModeForRenderPass(),Ur.disabled,Ot(e,t,0,1),null,t.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments,t.paint,e.transform.zoom),s.destroy(),t.heatmapFbos.delete(a))}function Qr(e,t,r){var i,n;const o=e.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR);const s=null!==(i=e.HALF_FLOAT)&&void 0!==i?i:o.UNSIGNED_BYTE,l=null!==(n=e.RGBA16F)&&void 0!==n?n:o.RGBA;o.texImage2D(o.TEXTURE_2D,0,l,t,r,0,o.RGBA,s,null);const c=e.createFramebuffer(t,r,!1,!1);return c.colorAttachment.set(a),c}function ei(e,t){return t.colorRampTexture||(t.colorRampTexture=new x(e,t.colorRamp,e.gl.RGBA)),t.colorRampTexture}function ti(e,t,r,i,n){if(!r||!i||!i.imageAtlas)return;const o=i.imageAtlas.patternPositions;let a=o[r.to.toString()],s=o[r.from.toString()];if(!a&&s&&(a=s),!s&&a&&(s=a),!a||!s){const e=n.getPaintProperty(t);a=o[e],s=o[e]}a&&s&&e.setConstantPatternPositions(a,s)}function ri(e,t,r,i,n,o,a){const s=e.context.gl,l="fill-pattern",c=r.paint.get(l),u=c&&c.constantOr(1),d=r.getCrossfadeParameters();let h,p,f,m,g;a?(p=u&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",h=s.LINES):(p=u?"fillPattern":"fill",h=s.TRIANGLES);const y=c.constantOr(null);for(const _ of i){const i=t.getTile(_);if(u&&!i.patternsLoaded())continue;const c=i.getBucket(r);if(!c)continue;const b=c.programConfigurations.get(r.id),v=e.useProgram(p,b),x=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_);u&&(e.context.activeTexture.set(s.TEXTURE0),i.imageAtlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE),b.updatePaintBuffers(d)),ti(b,l,y,i,r);const w=x?_:null,S=e.translatePosMatrix(w?w.posMatrix:_.posMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(a){m=c.indexBuffer2,g=c.segments2;const t=[s.drawingBufferWidth,s.drawingBufferHeight];f="fillOutlinePattern"===p&&u?kt(S,e,d,i,t):Tt(S,t)}else m=c.indexBuffer,g=c.segments,f=u?It(S,e,d,i):St(S);v.draw(e.context,h,n,e.stencilModeForClipping(_),o,Ur.disabled,f,x,r.id,c.layoutVertexBuffer,m,g,r.paint,e.transform.zoom,b)}}function ii(e,t,r,i,n,o,a){const s=e.context,l=s.gl,c="fill-extrusion-pattern",u=r.paint.get(c),d=u.constantOr(1),h=r.getCrossfadeParameters(),p=r.paint.get("fill-extrusion-opacity"),f=u.constantOr(null);for(const m of i){const i=t.getTile(m),u=i.getBucket(r);if(!u)continue;const g=e.style.map.terrain&&e.style.map.terrain.getTerrainData(m),y=u.programConfigurations.get(r.id),_=e.useProgram(d?"fillExtrusionPattern":"fillExtrusion",y);d&&(e.context.activeTexture.set(l.TEXTURE0),i.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),y.updatePaintBuffers(h)),ti(y,c,f,i,r);const b=e.translatePosMatrix(m.posMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),v=r.paint.get("fill-extrusion-vertical-gradient"),x=d?wt(b,e,v,p,m,h,i):xt(b,e,v,p);_.draw(s,s.gl.TRIANGLES,n,o,a,Ur.backCCW,x,g,r.id,u.layoutVertexBuffer,u.indexBuffer,u.segments,r.paint,e.transform.zoom,y,e.style.map.terrain&&u.centroidVertexBuffer)}}function ni(e,t,r,i,n,o,a){const s=e.context,l=s.gl,c=r.fbo;if(!c)return;const u=e.useProgram("hillshade"),d=e.style.map.terrain&&e.style.map.terrain.getTerrainData(t);s.activeTexture.set(l.TEXTURE0),l.bindTexture(l.TEXTURE_2D,c.colorAttachment.get()),u.draw(s,l.TRIANGLES,n,o,a,Ur.disabled,((e,t,r,i)=>{const n=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color");let s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:i?i.posMatrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Rt(0,t.tileID),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:n,u_highlight:o,u_accent:a}})(e,r,i,d?t:null),d,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}function oi(e,r,i,n,o,a){const s=e.context,l=s.gl,c=r.dem;if(c&&c.data){const u=c.dim,d=c.stride,h=c.getPixels();if(s.activeTexture.set(l.TEXTURE1),s.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||e.getTileTexture(d),r.demTexture){const e=r.demTexture;e.update(h,{premultiply:!1}),e.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else r.demTexture=new x(s,h,l.RGBA,{premultiply:!1}),r.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);s.activeTexture.set(l.TEXTURE0);let p=r.fbo;if(!p){const e=new x(s,{width:u,height:u,data:null},l.RGBA);e.bind(l.LINEAR,l.CLAMP_TO_EDGE),p=r.fbo=s.createFramebuffer(u,u,!0,!1),p.colorAttachment.set(e.texture)}s.bindFramebuffer.set(p.framebuffer),s.viewport.set([0,0,u,u]),e.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,n,o,a,Ur.disabled,((e,r)=>{const i=r.stride,n=t.H();return t.aP(n,0,t.X,-t.X,0,0,1),t.J(n,n,[0,-t.X,0]),{u_matrix:n,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_unpack:r.getUnpackVector()}})(r.tileID,c),null,i.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function ai(e,r,i,n,a,s){const l=n.paint.get("raster-fade-duration");if(!s&&l>0){const n=o.now(),s=(n-e.timeAdded)/l,c=r?(n-r.timeAdded)/l:-1,u=i.getSource(),d=a.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!r||Math.abs(r.tileID.overscaledZ-d)>Math.abs(e.tileID.overscaledZ-d),p=h&&e.refreshedUponExpiration?1:t.ac(h?s:1-c,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),r?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const si=new t.aM(1,0,0,1),li=new t.aM(0,1,0,1),ci=new t.aM(0,0,1,1),ui=new t.aM(1,0,1,1),di=new t.aM(0,1,1,1);function hi(e,t,r,i){fi(e,0,t+r/2,e.transform.width,r,i)}function pi(e,t,r,i){fi(e,t-r/2,0,r,e.transform.height,i)}function fi(e,t,r,i,n,o){const a=e.context,s=a.gl;s.enable(s.SCISSOR_TEST),s.scissor(t*e.pixelRatio,r*e.pixelRatio,i*e.pixelRatio,n*e.pixelRatio),a.clear({color:o}),s.disable(s.SCISSOR_TEST)}function mi(e,r,i){const n=e.context,o=n.gl,a=i.posMatrix,s=e.useProgram("debug"),l=Fr.disabled,c=jr.disabled,u=e.colorModeForRenderPass(),d="$debug",h=e.style.map.terrain&&e.style.map.terrain.getTerrainData(i);n.activeTexture.set(o.TEXTURE0);const p=r.getTileByID(i.key).latestRawTileData,f=Math.floor((p&&p.byteLength||0)/1024),m=r.getTile(i).tileSize,g=512/Math.min(m,512)*(i.overscaledZ/e.transform.zoom)*.5;let y=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(y+=` => ${i.overscaledZ}`),function(e,t){e.initDebugOverlayCanvas();const r=e.debugOverlayCanvas,i=e.context.gl,n=e.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,r.width,r.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(t,5,5),n.strokeText(t,5,5),e.debugOverlayTexture.update(r),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(e,`${y} ${f}kB`),s.draw(n,o.TRIANGLES,l,c,zr.alphaBlended,Ur.disabled,Pt(a,t.aM.transparent,g),null,d,e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments),s.draw(n,o.LINE_STRIP,l,c,u,Ur.disabled,Pt(a,t.aM.red),h,d,e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments)}function gi(e,t,r){const i=e.context,n=i.gl,o=e.colorModeForRenderPass(),a=new Fr(n.LEQUAL,Fr.ReadWrite,e.depthRangeFor3D),s=e.useProgram("terrain"),l=t.getTerrainMesh();i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height]);for(const c of r){const r=e.renderToTexture.getTexture(c),u=t.getTerrainData(c.tileID);i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,r.texture);const d=e.transform.calculatePosMatrix(c.tileID.toUnwrapped()),h=t.getMeshFrameDelta(e.transform.zoom),p=e.transform.calculateFogMatrix(c.tileID.toUnwrapped()),f=yt(d,h,p,e.style.sky,e.transform.pitch);s.draw(i,n.TRIANGLES,a,jr.disabled,o,Ur.backCCW,f,u,"terrain",l.vertexBuffer,l.indexBuffer,l.segments)}}class yi{constructor(e,t,r){this.vertexBuffer=e,this.indexBuffer=t,this.segments=r}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class _i{constructor(e,r){this.context=new Lr(e),this.transform=r,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:t.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=de.maxUnderzooming+de.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ct}resize(e,t,r){if(this.width=Math.floor(e*r),this.height=Math.floor(t*r),this.pixelRatio=r,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const i of this.style._order)this.style._layers[i].resize()}setup(){const e=this.context,r=new t.aX;r.emplaceBack(0,0),r.emplaceBack(t.X,0),r.emplaceBack(0,t.X),r.emplaceBack(t.X,t.X),this.tileExtentBuffer=e.createVertexBuffer(r,pt.members),this.tileExtentSegments=t.a0.simpleSegment(0,0,4,2);const i=new t.aX;i.emplaceBack(0,0),i.emplaceBack(t.X,0),i.emplaceBack(0,t.X),i.emplaceBack(t.X,t.X),this.debugBuffer=e.createVertexBuffer(i,pt.members),this.debugSegments=t.a0.simpleSegment(0,0,4,5);const n=new t.$;n.emplaceBack(0,0,0,0),n.emplaceBack(t.X,0,t.X,0),n.emplaceBack(0,t.X,0,t.X),n.emplaceBack(t.X,t.X,t.X,t.X),this.rasterBoundsBuffer=e.createVertexBuffer(n,J.members),this.rasterBoundsSegments=t.a0.simpleSegment(0,0,4,2);const o=new t.aX;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,pt.members),this.viewportSegments=t.a0.simpleSegment(0,0,4,2);const a=new t.aZ;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);const s=new t.aY;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s);const l=this.context.gl;this.stencilClearMode=new jr({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO)}clearStencil(){const e=this.context,r=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const i=t.H();t.aP(i,0,this.width,this.height,0,0,1),t.K(i,i,[r.drawingBufferWidth,r.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,r.TRIANGLES,Fr.disabled,this.stencilClearMode,zr.disabled,Ur.disabled,Ct(i),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,t){if(this.currentStencilSource===e.source||!e.isTileClipped()||!t||!t.length)return;this.currentStencilSource=e.source;const r=this.context,i=r.gl;this.nextStencilID+t.length>256&&this.clearStencil(),r.setColorMode(zr.disabled),r.setDepthMode(Fr.disabled);const n=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const o of t){const e=this._tileClippingMaskIDs[o.key]=this.nextStencilID++,t=this.style.map.terrain&&this.style.map.terrain.getTerrainData(o);n.draw(r,i.TRIANGLES,Fr.disabled,new jr({func:i.ALWAYS,mask:0},e,255,i.KEEP,i.KEEP,i.REPLACE),zr.disabled,Ur.disabled,Ct(o.posMatrix),t,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new jr({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){const t=this.context.gl;return new jr({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,r=e.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,n=r[0].overscaledZ-i+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const e={};for(let r=0;r<n;r++)e[r+i]=new jr({func:t.GEQUAL,mask:255},r+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=n,[e,r]}return[{[i]:jr.disabled},r]}colorModeForRenderPass(){const e=this.context.gl;if(this._showOverdrawInspector){const r=1/8;return new zr([e.CONSTANT_COLOR,e.ONE],new t.aM(r,r,r,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?zr.unblended:zr.alphaBlended}depthModeForSublayer(e,t,r){if(!this.opaquePassEnabledForLayer())return Fr.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new Fr(r||this.context.gl.LEQUAL,t,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,r){this.style=e,this.options=r,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(o.now()),this.imageManager.beginFrame();const i=this.style._order,n=this.style.sourceCaches,a={},s={},l={};for(const t in n){const e=n[t];e.used&&e.prepare(this.context),a[t]=e.getVisibleCoordinates(),s[t]=a[t].slice().reverse(),l[t]=e.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let t=0;t<i.length;t++)if(this.style._layers[i[t]].is3D()){this.opaquePassCutoff=t;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const t of i){const e=this.style._layers[t];if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const r=s[e.source];("custom"===e.type||r.length)&&this.renderLayer(this,n[e.source],e,r)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:r.showOverdrawInspector?t.aM.black:t.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(e,r){const i=e.context,n=i.gl,o=((e,t,r)=>({u_sky_color:e.properties.get("sky-color"),u_horizon_color:e.properties.get("horizon-color"),u_horizon:(t.height/2+t.getHorizon())*r,u_sky_horizon_blend:e.properties.get("sky-horizon-blend")*t.height/2*r}))(r,e.style.map.transform,e.pixelRatio),a=new Fr(n.LEQUAL,Fr.ReadWrite,[0,1]),s=jr.disabled,l=e.colorModeForRenderPass(),c=e.useProgram("sky");if(!r.mesh){const e=new t.aX;e.emplaceBack(-1,-1),e.emplaceBack(1,-1),e.emplaceBack(1,1),e.emplaceBack(-1,1);const n=new t.aY;n.emplaceBack(0,1,2),n.emplaceBack(0,2,3),r.mesh=new yi(i.createVertexBuffer(e,pt.members),i.createIndexBuffer(n),t.a0.simpleSegment(0,0,e.length,n.length))}c.draw(i,n.TRIANGLES,a,s,l,Ur.disabled,o,void 0,"sky",r.mesh.vertexBuffer,r.mesh.indexBuffer,r.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=r.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[i[this.currentLayer]],t=n[e.source],r=a[e.source];this._renderTileClippingMasks(e,r),this.renderLayer(this,t,e,r)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const e=this.style._layers[i[this.currentLayer]],t=n[e.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(e))continue;const r=("symbol"===e.type?l:s)[e.source];this._renderTileClippingMasks(e,a[e.source]),this.renderLayer(this,t,e,r)}if(this.options.showTileBoundaries){const e=function(e,t){let r=null;const i=Object.values(e._layers).flatMap((r=>r.source&&!r.isHidden(t)?[e.sourceCaches[r.source]]:[])),n=i.filter((e=>"vector"===e.getSource().type)),o=i.filter((e=>"vector"!==e.getSource().type)),a=e=>{(!r||r.getSource().maxzoom<e.getSource().maxzoom)&&(r=e)};return n.forEach((e=>a(e))),r||o.forEach((e=>a(e))),r}(this.style,this.transform.zoom);e&&function(e,t,r){for(let i=0;i<r.length;i++)mi(e,t,r[i])}(this,e,e.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;hi(e,e.transform.height-(t.top||0),3,si),hi(e,t.bottom||0,3,li),pi(e,t.left||0,3,ci),pi(e,e.transform.width-(t.right||0),3,ui);const r=e.transform.centerPoint;!function(e,t,r,i){fi(e,t-1,r-10,2,20,i),fi(e,t-10,r-1,20,2,i)}(e,r.x,e.transform.height-r.y,di)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const r=this.terrainFacilitator.matrix,i=this.transform.modelViewProjectionMatrix;let n=this.terrainFacilitator.dirty;n||(n=e?!t.a_(r,i):!t.a$(r,i)),n||(n=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),n&&(t.b0(r,i),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(e,r){const i=e.context,n=i.gl,o=zr.unblended,a=new Fr(n.LEQUAL,Fr.ReadWrite,[0,1]),s=r.getTerrainMesh(),l=r.sourceCache.getRenderableTiles(),c=e.useProgram("terrainDepth");i.bindFramebuffer.set(r.getFramebuffer("depth").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.aM.transparent,depth:1});for(const t of l){const l=r.getTerrainData(t.tileID),u={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_ele_delta:r.getMeshFrameDelta(e.transform.zoom)};c.draw(i,n.TRIANGLES,a,jr.disabled,o,Ur.backCCW,u,l,"terrain",s.vertexBuffer,s.indexBuffer,s.segments)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain),function(e,r){const i=e.context,n=i.gl,o=zr.unblended,a=new Fr(n.LEQUAL,Fr.ReadWrite,[0,1]),s=r.getTerrainMesh(),l=r.getCoordsTexture(),c=r.sourceCache.getRenderableTiles(),u=e.useProgram("terrainCoords");i.bindFramebuffer.set(r.getFramebuffer("coords").framebuffer),i.viewport.set([0,0,e.width/devicePixelRatio,e.height/devicePixelRatio]),i.clear({color:t.aM.transparent,depth:1}),r.coordsIndex=[];for(const t of c){const c=r.getTerrainData(t.tileID);i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,l.texture);const d={u_matrix:e.transform.calculatePosMatrix(t.tileID.toUnwrapped()),u_terrain_coords_id:(255-r.coordsIndex.length)/255,u_texture:0,u_ele_delta:r.getMeshFrameDelta(e.transform.zoom)};u.draw(i,n.TRIANGLES,a,jr.disabled,o,Ur.backCCW,d,c,"terrain",s.vertexBuffer,s.indexBuffer,s.segments),r.coordsIndex.push(t.tileID.key)}i.bindFramebuffer.set(null),i.viewport.set([0,0,e.width,e.height])}(this,this.style.map.terrain))}renderLayer(e,r,i,n){if(!i.isHidden(this.transform.zoom)&&("background"===i.type||"custom"===i.type||(n||[]).length))switch(this.id=i.id,i.type){case"symbol":!function(e,r,i,n,o){if("translucent"!==e.renderPass)return;const a=jr.disabled,s=e.colorModeForRenderPass();(i._unevaluatedLayout.hasValue("text-variable-anchor")||i._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(e,r,i,n,o,a,s,l,c){const u=r.transform,d=rt(),h="map"===o,p="map"===a;for(const f of e){const e=n.getTile(f),o=e.getBucket(i);if(!o||!o.text||!o.text.segments.get().length)continue;const a=t.ag(o.textSizeData,u.zoom),m=Le(e,1,r.transform.zoom),g=ye(f.posMatrix,p,h,r.transform,m),y="none"!==i.layout.get("icon-text-fit")&&o.hasIconData();if(a){const t=Math.pow(2,u.zoom-e.tileID.overscaledZ),i=r.style.map.terrain?(e,t)=>r.style.map.terrain.getElevation(f,e,t):null,n=d.translatePosition(u,e,s,l);qr(o,h,p,c,u,g,f.posMatrix,t,a,y,d,n,f.toUnwrapped(),i)}}}(n,e,i,r,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),o),0!==i.paint.get("icon-opacity").constantOr(1)&&Xr(e,r,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),a,s),0!==i.paint.get("text-opacity").constantOr(1)&&Xr(e,r,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),a,s),r.map.showCollisionBoxes&&($r(e,r,i,n,!0),$r(e,r,i,n,!1))}(e,r,i,n,this.style.placement.variableOffsets);break;case"circle":!function(e,r,i,n){if("translucent"!==e.renderPass)return;const o=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=!i.layout.get("circle-sort-key").isConstant();if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=e.context,u=c.gl,d=e.depthModeForSublayer(0,Fr.ReadOnly),h=jr.disabled,p=e.colorModeForRenderPass(),f=[];for(let m=0;m<n.length;m++){const o=n[m],a=r.getTile(o),s=a.getBucket(i);if(!s)continue;const c=s.programConfigurations.get(i.id),u=e.useProgram("circle",c),d=s.layoutVertexBuffer,h=s.indexBuffer,p=e.style.map.terrain&&e.style.map.terrain.getTerrainData(o),g={programConfiguration:c,program:u,layoutVertexBuffer:d,indexBuffer:h,uniformValues:Et(e,o,a,i),terrainData:p};if(l){const e=s.segments.get();for(const r of e)f.push({segments:new t.a0([r]),sortKey:r.sortKey,state:g})}else f.push({segments:s.segments,sortKey:0,state:g})}l&&f.sort(((e,t)=>e.sortKey-t.sortKey));for(const t of f){const{programConfiguration:r,program:n,layoutVertexBuffer:o,indexBuffer:a,uniformValues:s,terrainData:l}=t.state;n.draw(c,u.TRIANGLES,d,h,p,Ur.disabled,s,l,i.id,o,a,t.segments,i.paint,e.transform.zoom,r)}}(e,r,i,n);break;case"heatmap":!function(e,r,i,n){if(0===i.paint.get("heatmap-opacity"))return;const o=e.context;if(e.style.map.terrain){for(const t of n){const n=r.getTile(t);r.hasRenderableParent(t)||("offscreen"===e.renderPass?Kr(e,n,i,t):"translucent"===e.renderPass&&Jr(e,i,t))}o.viewport.set([0,0,e.width,e.height])}else"offscreen"===e.renderPass?function(e,r,i,n){const o=e.context,a=o.gl,s=jr.disabled,l=new zr([a.ONE,a.ONE],t.aM.transparent,[!0,!0,!0,!0]);(function(e,r,i){const n=e.gl;e.activeTexture.set(n.TEXTURE1),e.viewport.set([0,0,r.width/4,r.height/4]);let o=i.heatmapFbos.get(t.aU);o?(n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),e.bindFramebuffer.set(o.framebuffer)):(o=Qr(e,r.width/4,r.height/4),i.heatmapFbos.set(t.aU,o))})(o,e,i),o.clear({color:t.aM.transparent});for(let t=0;t<n.length;t++){const c=n[t];if(r.hasRenderableParent(c))continue;const u=r.getTile(c),d=u.getBucket(i);if(!d)continue;const h=d.programConfigurations.get(i.id),p=e.useProgram("heatmap",h),{zoom:f}=e.transform;p.draw(o,a.TRIANGLES,Fr.disabled,s,l,Ur.disabled,Mt(c.posMatrix,u,f,i.paint.get("heatmap-intensity")),null,i.id,d.layoutVertexBuffer,d.indexBuffer,d.segments,i.paint,e.transform.zoom,h)}o.viewport.set([0,0,e.width,e.height])}(e,r,i,n):"translucent"===e.renderPass&&function(e,r){const i=e.context,n=i.gl;i.setColorMode(e.colorModeForRenderPass());const o=r.heatmapFbos.get(t.aU);o&&(i.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),i.activeTexture.set(n.TEXTURE1),ei(i,r).bind(n.LINEAR,n.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(i,n.TRIANGLES,Fr.disabled,jr.disabled,e.colorModeForRenderPass(),Ur.disabled,Ot(e,r,0,1),null,r.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,r.paint,e.transform.zoom))}(e,i)}(e,r,i,n);break;case"line":!function(e,r,i,n){if("translucent"!==e.renderPass)return;const o=i.paint.get("line-opacity"),a=i.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=e.depthModeForSublayer(0,Fr.ReadOnly),l=e.colorModeForRenderPass(),c=i.paint.get("line-dasharray"),u=i.paint.get("line-pattern"),d=u.constantOr(1),h=i.paint.get("line-gradient"),p=i.getCrossfadeParameters(),f=d?"linePattern":c?"lineSDF":h?"lineGradient":"line",m=e.context,g=m.gl;let y=!0;for(const _ of n){const n=r.getTile(_);if(d&&!n.patternsLoaded())continue;const o=n.getBucket(i);if(!o)continue;const a=o.programConfigurations.get(i.id),b=e.context.program.get(),v=e.useProgram(f,a),w=y||v.program!==b,S=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_),I=u.constantOr(null);if(I&&n.imageAtlas){const e=n.imageAtlas,t=e.patternPositions[I.to.toString()],r=e.patternPositions[I.from.toString()];t&&r&&a.setConstantPatternPositions(t,r)}const T=S?_:null,k=d?zt(e,n,i,p,T):c?Lt(e,n,i,c,p,T):h?Dt(e,n,i,o.lineClipsArray.length,T):Bt(e,n,i,T);if(d)m.activeTexture.set(g.TEXTURE0),n.imageAtlasTexture.bind(g.LINEAR,g.CLAMP_TO_EDGE),a.updatePaintBuffers(p);else if(c&&(w||e.lineAtlas.dirty))m.activeTexture.set(g.TEXTURE0),e.lineAtlas.bind(m);else if(h){const n=o.gradients[i.id];let a=n.texture;if(i.gradientVersion!==n.version){let s=256;if(i.stepInterpolant){const i=r.getSource().maxzoom,n=_.canonical.z===i?Math.ceil(1<<e.transform.maxZoom-_.canonical.z):1;s=t.ac(t.aV(o.maxLineLength/t.X*1024*n),256,m.maxTextureSize)}n.gradient=t.aW({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:n.gradient||void 0,clips:o.lineClipsArray}),n.texture?n.texture.update(n.gradient):n.texture=new x(m,n.gradient,g.RGBA),n.version=i.gradientVersion,a=n.texture}m.activeTexture.set(g.TEXTURE0),a.bind(i.stepInterpolant?g.NEAREST:g.LINEAR,g.CLAMP_TO_EDGE)}v.draw(m,g.TRIANGLES,s,e.stencilModeForClipping(_),l,Ur.disabled,k,S,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,i.paint,e.transform.zoom,a,o.layoutVertexBuffer2),y=!1}}(e,r,i,n);break;case"fill":!function(e,r,i,n){const o=i.paint.get("fill-color"),a=i.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=e.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=e.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(t.aM.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===c){const t=e.depthModeForSublayer(1,"opaque"===e.renderPass?Fr.ReadWrite:Fr.ReadOnly);ri(e,r,i,n,t,s,!1)}if("translucent"===e.renderPass&&i.paint.get("fill-antialias")){const t=e.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,Fr.ReadOnly);ri(e,r,i,n,t,s,!0)}}(e,r,i,n);break;case"fill-extrusion":!function(e,t,r,i){const n=r.paint.get("fill-extrusion-opacity");if(0!==n&&"translucent"===e.renderPass){const o=new Fr(e.context.gl.LEQUAL,Fr.ReadWrite,e.depthRangeFor3D);if(1!==n||r.paint.get("fill-extrusion-pattern").constantOr(1))ii(e,t,r,i,o,jr.disabled,zr.disabled),ii(e,t,r,i,o,e.stencilModeFor3D(),e.colorModeForRenderPass());else{const n=e.colorModeForRenderPass();ii(e,t,r,i,o,jr.disabled,n)}}}(e,r,i,n);break;case"hillshade":!function(e,t,r,i){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;const n=e.context,o=e.depthModeForSublayer(0,Fr.ReadOnly),a=e.colorModeForRenderPass(),[s,l]="translucent"===e.renderPass?e.stencilConfigForOverlap(i):[{},i];for(const c of l){const i=t.getTile(c);void 0!==i.needsHillshadePrepare&&i.needsHillshadePrepare&&"offscreen"===e.renderPass?oi(e,i,r,o,jr.disabled,a):"translucent"===e.renderPass&&ni(e,c,i,r,o,s[c.overscaledZ],a)}n.viewport.set([0,0,e.width,e.height])}(e,r,i,n);break;case"raster":!function(e,t,r,i){if("translucent"!==e.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const n=e.context,o=n.gl,a=t.getSource(),s=e.useProgram("raster"),l=e.colorModeForRenderPass(),[c,u]=a instanceof Q?[{},i]:e.stencilConfigForOverlap(i),d=u[u.length-1].overscaledZ,h=!e.options.moving;for(const p of u){const i=e.depthModeForSublayer(p.overscaledZ-d,1===r.paint.get("raster-opacity")?Fr.ReadWrite:Fr.ReadOnly,o.LESS),u=t.getTile(p);u.registerFadeDuration(r.paint.get("raster-fade-duration"));const f=t.findLoadedParent(p,0),m=t.findLoadedSibling(p),g=ai(u,f||m||null,t,r,e.transform,e.style.map.terrain);let y,_;const b="nearest"===r.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;n.activeTexture.set(o.TEXTURE0),u.texture.bind(b,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(o.TEXTURE1),f?(f.texture.bind(b,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),y=Math.pow(2,f.tileID.overscaledZ-u.tileID.overscaledZ),_=[u.tileID.canonical.x*y%1,u.tileID.canonical.y*y%1]):u.texture.bind(b,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),u.texture.useMipmap&&n.extTextureFilterAnisotropic&&e.transform.pitch>20&&o.texParameterf(o.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax);const v=e.style.map.terrain&&e.style.map.terrain.getTerrainData(p),x=v?p:null,w=x?x.posMatrix:e.transform.calculatePosMatrix(p.toUnwrapped(),h),S=jt(w,_||[0,0],y||1,g,r);a instanceof Q?s.draw(n,o.TRIANGLES,i,jr.disabled,l,Ur.disabled,S,v,r.id,a.boundsBuffer,e.quadTriangleIndexBuffer,a.boundsSegments):s.draw(n,o.TRIANGLES,i,c[p.overscaledZ],l,Ur.disabled,S,v,r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments)}}(e,r,i,n);break;case"background":!function(e,t,r,i){const n=r.paint.get("background-color"),o=r.paint.get("background-opacity");if(0===o)return;const a=e.context,s=a.gl,l=e.transform,c=l.tileSize,u=r.paint.get("background-pattern");if(e.isPatternMissing(u))return;const d=!u&&1===n.a&&1===o&&e.opaquePassEnabledForLayer()?"opaque":"translucent";if(e.renderPass!==d)return;const h=jr.disabled,p=e.depthModeForSublayer(0,"opaque"===d?Fr.ReadWrite:Fr.ReadOnly),f=e.colorModeForRenderPass(),m=e.useProgram(u?"backgroundPattern":"background"),g=i||l.coveringTiles({tileSize:c,terrain:e.style.map.terrain});u&&(a.activeTexture.set(s.TEXTURE0),e.imageManager.bind(e.context));const y=r.getCrossfadeParameters();for(const _ of g){const t=i?_.posMatrix:e.transform.calculatePosMatrix(_.toUnwrapped()),l=u?Gt(t,o,e,u,{tileID:_,tileSize:c},y):Ht(t,o,n),d=e.style.map.terrain&&e.style.map.terrain.getTerrainData(_);m.draw(a,s.TRIANGLES,p,h,f,Ur.disabled,l,d,r.id,e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments)}}(e,0,i,n);break;case"custom":!function(e,t,r){const i=e.context,n=r.implementation;if("offscreen"===e.renderPass){const t=n.prerender;t&&(e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),t.call(n,i.gl,e.transform.customLayerMatrix()),i.setDirty(),e.setBaseState())}else if("translucent"===e.renderPass){e.setCustomLayerDefaults(),i.setColorMode(e.colorModeForRenderPass()),i.setStencilMode(jr.disabled);const t="3d"===n.renderingMode?new Fr(e.context.gl.LEQUAL,Fr.ReadWrite,e.depthRangeFor3D):e.depthModeForSublayer(0,Fr.ReadOnly);i.setDepthMode(t),n.render(i.gl,e.transform.customLayerMatrix(),{farZ:e.transform.farZ,nearZ:e.transform.nearZ,fov:e.transform._fov,modelViewProjectionMatrix:e.transform.modelViewProjectionMatrix,projectionMatrix:e.transform.projectionMatrix}),i.setDirty(),e.setBaseState(),i.bindFramebuffer.set(null)}}(e,0,i)}}translatePosMatrix(e,r,i,n,o){if(!i[0]&&!i[1])return e;const a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);i=[i[0]*t-i[1]*e,i[0]*e+i[1]*t]}const s=[o?i[0]:Le(r,i[0],this.transform.zoom),o?i[1]:Le(r,i[1],this.transform.zoom),0],l=new Float32Array(16);return t.J(l,e,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),r=this.imageManager.getPattern(e.to.toString());return!t||!r}useProgram(e,t){this.cache=this.cache||{};const r=e+(t?t.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[r]||(this.cache[r]=new bt(this.context,ft[e],t,qt[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[r]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new x(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:t}=this.context.gl;return this.width!==e||this.height!==t}}class bi{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,r,i){const n=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((i=>{const o=1/(i=t.af([],i,e))[3]/r*n;return t.b1(i,i,[o,o,1/i[3],o])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=function(e,t){var r=t[0],i=t[1],n=t[2],o=r*r+i*i+n*n;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}([],function(e,t,r){var i=t[0],n=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=n*l-o*s,e[1]=o*a-i*l,e[2]=i*s-n*a,e}([],y([],o[e[0]],o[e[1]]),y([],o[e[2]],o[e[1]]))),r=-((i=t)[0]*(n=o[e[1]])[0]+i[1]*n[1]+i[2]*n[2]);var i,n;return t.concat(r)}));return new bi(o,a)}}class vi{constructor(e,t){this.min=e,this.max=t,this.center=function(e,t){return e[0]=.5*t[0],e[1]=.5*t[1],e[2]=.5*t[2],e}([],function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}([],this.min,this.max))}quadrant(e){const t=[e%2==0,e<2],r=m(this.min),i=m(this.max);for(let n=0;n<t.length;n++)r[n]=t[n]?this.min[n]:this.center[n],i[n]=t[n]?this.center[n]:this.max[n];return i[2]=this.max[2],new vi(r,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const r=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let n=0;n<e.planes.length;n++){const o=e.planes[n];let a=0;for(let e=0;e<r.length;e++)t.b2(o,r[e])>=0&&a++;if(0===a)return 0;a!==r.length&&(i=!1)}if(i)return 2;for(let t=0;t<3;t++){let r=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let n=0;n<e.points.length;n++){const o=e.points[n][t]-this.min[t];r=Math.min(r,o),i=Math.max(i,o)}if(i<0||r>this.max[t]-this.min[t])return 0}return 1}}class xi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=r,this.right=i}interpolate(e,r,i){return null!=r.top&&null!=e.top&&(this.top=t.y.number(e.top,r.top,i)),null!=r.bottom&&null!=e.bottom&&(this.bottom=t.y.number(e.bottom,r.bottom,i)),null!=r.left&&null!=e.left&&(this.left=t.y.number(e.left,r.left,i)),null!=r.right&&null!=e.right&&(this.right=t.y.number(e.right,r.right,i)),this}getCenter(e,r){const i=t.ac((this.left+e-this.right)/2,0,e),n=t.ac((this.top+r-this.bottom)/2,0,r);return new t.P(i,n)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new xi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const wi=85.051129;class Si{constructor(e,r,i,n,o){this.tileSize=512,this._renderWorldCopies=void 0===o||!!o,this._minZoom=e||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==n?60:n,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new Si(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new t.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const r=-t.b3(e,-180,180)*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=function(){var e=new t.A(4);return t.A!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}(),function(e,t,r){var i=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);e[0]=i*l+o*s,e[1]=n*l+a*s,e[2]=i*-s+o*l,e[3]=n*-s+a*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const r=t.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==r&&(this._unmodified=!1,this._pitch=r,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.tileZoom=Math.max(0,Math.floor(t)),this.scale=this.zoomScale(t),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,r){this._unmodified=!1,this._edgeInsets.interpolate(e,t,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(e){const r=[new t.b4(0,e)];if(this._renderWorldCopies){const i=this.pointCoordinate(new t.P(0,0)),n=this.pointCoordinate(new t.P(this.width,0)),o=this.pointCoordinate(new t.P(this.width,this.height)),a=this.pointCoordinate(new t.P(0,this.height)),s=Math.floor(Math.min(i.x,n.x,o.x,a.x)),l=Math.floor(Math.max(i.x,n.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&r.push(new t.b4(u,e))}return r}coveringTiles(e){var r,i;let n=this.coveringZoomLevel(e);const o=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);const a=this.pointCoordinate(this.getCameraPoint()),s=t.Z.fromLngLat(this.center),l=Math.pow(2,n),c=[l*a.x,l*a.y,0],u=[l*s.x,l*s.y,0],d=bi.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,n);let h=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(h=n);const p=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,f=e=>({aabb:new vi([e*l,0,0],[(e+1)*l,l,0]),zoom:0,x:0,y:0,wrap:e,fullyVisible:!1}),m=[],g=[],y=n,b=e.reparseOverscaled?o:n;if(this._renderWorldCopies)for(let t=1;t<=3;t++)m.push(f(-t)),m.push(f(t));for(m.push(f(0));m.length>0;){const n=m.pop(),o=n.x,a=n.y;let s=n.fullyVisible;if(!s){const e=n.aabb.intersects(d);if(0===e)continue;s=2===e}const l=e.terrain?c:u,f=n.aabb.distanceX(l),v=n.aabb.distanceY(l),x=Math.max(Math.abs(f),Math.abs(v));if(n.zoom===y||x>p+(1<<y-n.zoom)-2&&n.zoom>=h){const e=y-n.zoom,r=c[0]-.5-(o<<e),i=c[1]-.5-(a<<e);g.push({tileID:new t.S(n.zoom===y?b:n.zoom,n.wrap,n.zoom,o,a),distanceSq:_([u[0]-.5-o,u[1]-.5-a]),tileDistanceToCamera:Math.sqrt(r*r+i*i)})}else for(let c=0;c<4;c++){const l=(o<<1)+c%2,u=(a<<1)+(c>>1),d=n.zoom+1;let h=n.aabb.quadrant(c);if(e.terrain){const o=new t.S(d,n.wrap,d,l,u),a=e.terrain.getMinMaxElevation(o),s=null!==(r=a.minElevation)&&void 0!==r?r:this.elevation,c=null!==(i=a.maxElevation)&&void 0!==i?i:this.elevation;h=new vi([h.min[0],h.min[1],s],[h.max[0],h.max[1],c])}m.push({aabb:h,zoom:d,x:l,y:u,wrap:n.wrap,fullyVisible:s})}}return g.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const r=t.ac(e.lat,-85.051129,wi);return new t.P(t.O(e.lng)*this.worldSize,t.Q(r)*this.worldSize)}unproject(e){return new t.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const r=this.elevation,i=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,n=this.pointLocation(this.centerPoint,e),o=e.getElevationForLngLatZoom(n,this.tileZoom);if(!(this.elevation-o))return;const a=i+r-o,s=Math.cos(this._pitch)*this.cameraToCenterDistance/a/t.b5(1,n.lat),l=this.scaleZoom(s/this.tileSize);this._elevation=o,this._center=n,this.zoom=l}setLocationAtPoint(e,r){const i=this.pointCoordinate(r),n=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.Z(o.x-(i.x-n.x),o.y-(i.y-n.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,t){return t?this.coordinatePoint(this.locationCoordinate(e),t.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,t){return this.coordinateLocation(this.pointCoordinate(e,t))}locationCoordinate(e){return t.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,r){if(r){const t=r.pointCoordinate(e);if(null!=t)return t}const i=[e.x,e.y,0,1],n=[e.x,e.y,1,1];t.af(i,i,this.pixelMatrixInverse),t.af(n,n,this.pixelMatrixInverse);const o=i[3],a=n[3],s=i[1]/o,l=n[1]/a,c=i[2]/o,u=n[2]/a,d=c===u?0:(0-c)/(u-c);return new t.Z(t.y.number(i[0]/o,n[0]/a,d)/this.worldSize,t.y.number(s,l,d)/this.worldSize)}coordinatePoint(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.pixelMatrix;const n=[e.x*this.worldSize,e.y*this.worldSize,r,1];return t.af(n,n,i),new t.P(n[0]/n[3],n[1]/n[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return(new G).extend(this.pointLocation(new t.P(0,e))).extend(this.pointLocation(new t.P(this.width,e))).extend(this.pointLocation(new t.P(this.width,this.height))).extend(this.pointLocation(new t.P(0,this.height)))}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new G([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,wi])}calculateTileMatrix(e){const r=e.canonical,i=this.worldSize/this.zoomScale(r.z),n=r.x+Math.pow(2,r.z)*e.wrap,o=t.an(new Float64Array(16));return t.J(o,o,[n*i,r.y*i,0]),t.K(o,o,[i/t.X,i/t.X,1]),o}calculatePosMatrix(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.key,n=r?this._alignedPosMatrixCache:this._posMatrixCache;if(n[i])return n[i];const o=this.calculateTileMatrix(e);return t.L(o,r?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,o),n[i]=new Float32Array(o),n[i]}calculateFogMatrix(e){const r=e.key,i=this._fogMatrixCache;if(i[r])return i[r];const n=this.calculateTileMatrix(e);return t.L(n,this.fogMatrix,n),i[r]=new Float32Array(n),i[r]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,r){r=t.ac(+r,this.minZoom,this.maxZoom);const i={center:new t.N(e.lng,e.lat),zoom:r};let n=this.lngRange;if(!this._renderWorldCopies&&null===n){const e=180-1e-10;n=[-e,e]}const o=this.tileSize*this.zoomScale(i.zoom);let a=0,s=o,l=0,c=o,u=0,d=0;const{x:h,y:p}=this.size;if(this.latRange){const e=this.latRange;a=t.Q(e[1])*o,s=t.Q(e[0])*o,s-a<p&&(u=p/(s-a))}n&&(l=t.b3(t.O(n[0])*o,0,o),c=t.b3(t.O(n[1])*o,0,o),c<l&&(c+=o),c-l<h&&(d=h/(c-l)));const{x:f,y:m}=this.project.call({worldSize:o},e);let g,y;const _=Math.max(d||0,u||0);if(_){const e=new t.P(d?(c+l)/2:f,u?(s+a)/2:m);return i.center=this.unproject.call({worldSize:o},e).wrap(),i.zoom+=this.scaleZoom(_),i}if(this.latRange){const e=p/2;m-e<a&&(y=a+e),m+e>s&&(y=s-e)}if(n){const e=(l+c)/2;let r=f;this._renderWorldCopies&&(r=t.b3(f,e-o/2,e+o/2));const i=h/2;r-i<l&&(g=l+i),r+i>c&&(g=c-i)}if(void 0!==g||void 0!==y){const e=new t.P(null!=g?g:f,null!=y?y:m);i.center=this.unproject.call({worldSize:o},e).wrap()}return i}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:t,zoom:r}=this.getConstrained(this.center,this.zoom);this.center=t,this.zoom=r,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,r=this.point.x,i=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=t.b5(1,this.center.lat)*this.worldSize;let n=t.an(new Float64Array(16));t.K(n,n,[this.width/2,-this.height/2,1]),t.J(n,n,[1,-1,0]),this.labelPlaneMatrix=n,n=t.an(new Float64Array(16)),t.K(n,n,[1,-1,1]),t.J(n,n,[-1,-1,0]),t.K(n,n,[2/this.width,2/this.height,1]),this.glCoordMatrix=n;const o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),a=Math.min(this.elevation,this.minElevationForCurrentTile),s=o-a*this._pixelPerMeter/Math.cos(this._pitch),l=a<0?s:o,c=Math.PI/2+this._pitch,u=this._fov*(.5+e.y/this.height),d=Math.sin(u)*l/Math.sin(t.ac(Math.PI-c-u,.01,Math.PI-.01)),h=this.getHorizon(),p=2*Math.atan(h/this.cameraToCenterDistance)*(.5+e.y/(2*h)),f=Math.sin(p)*l/Math.sin(t.ac(Math.PI-c-p,.01,Math.PI-.01)),m=Math.min(d,f);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*m+l),this.nearZ=this.height/50,n=new Float64Array(16),t.b6(n,this._fov,this.width/this.height,this.nearZ,this.farZ),n[8]=2*-e.x/this.width,n[9]=2*e.y/this.height,this.projectionMatrix=t.ae(n),t.K(n,n,[1,-1,1]),t.J(n,n,[0,0,-this.cameraToCenterDistance]),t.b7(n,n,this._pitch),t.ad(n,n,this.angle),t.J(n,n,[-r,-i,0]),this.mercatorMatrix=t.K([],n,[this.worldSize,this.worldSize,this.worldSize]),t.K(n,n,[1,1,this._pixelPerMeter]),this.pixelMatrix=t.L(new Float64Array(16),this.labelPlaneMatrix,n),t.J(n,n,[0,0,-this.elevation]),this.modelViewProjectionMatrix=n,this.invModelViewProjectionMatrix=t.as([],n),this.fogMatrix=new Float64Array(16),t.b6(this.fogMatrix,this._fov,this.width/this.height,o,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,t.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),t.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),t.b7(this.fogMatrix,this.fogMatrix,this._pitch),t.ad(this.fogMatrix,this.fogMatrix,this.angle),t.J(this.fogMatrix,this.fogMatrix,[-r,-i,0]),t.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),t.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=t.L(new Float64Array(16),this.labelPlaneMatrix,n);const g=this.width%2/2,y=this.height%2/2,_=Math.cos(this.angle),b=Math.sin(this.angle),v=r-Math.round(r)+_*g+b*y,x=i-Math.round(i)+_*y+b*g,w=new Float64Array(n);if(t.J(w,w,[v>.5?v-1:v,x>.5?x-1:x,0]),this.alignedModelViewProjectionMatrix=w,n=t.as(new Float64Array(16),this.pixelMatrix),!n)throw new Error("failed to invert matrix");this.pixelMatrixInverse=n,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new t.P(0,0)),r=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.af(r,r,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.P(0,e))}getCameraQueryGeometry(e){const r=this.getCameraPoint();if(1===e.length)return[e[0],r];{let i=r.x,n=r.y,o=r.x,a=r.y;for(const t of e)i=Math.min(i,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y);return[new t.P(i,n),new t.P(o,n),new t.P(o,a),new t.P(i,a),new t.P(i,n)]}}lngLatToCameraDepth(e,r){const i=this.locationCoordinate(e),n=[i.x*this.worldSize,i.y*this.worldSize,r,1];return t.af(n,n,this.modelViewProjectionMatrix),n[2]/n[3]}}function Ii(e,t){var r=this;let i,n=!1,o=null,a=null;const s=()=>{o=null,n&&(e.apply(a,i),o=setTimeout(s,t),n=!1)};return function(){for(var e=arguments.length,t=new Array(e),l=0;l<e;l++)t[l]=arguments[l];return n=!0,a=r,i=t,o||s(),o}}class Ti{constructor(e){this._getCurrentHash=()=>{const e=window.location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map((e=>e.split("="))).forEach((e=>{e[0]===this._hashName&&(t=e)})),(t&&t[1]||"").split("/")}return e.split("/")},this._onHashChange=()=>{const e=this._getCurrentHash();if(e.length>=3&&!e.some((e=>isNaN(e)))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const e=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,e)},this._removeHash=()=>{const e=this._getCurrentHash();if(0===e.length)return;const t=e.join("/");let r=t;r.split("&").length>0&&(r=r.split("&")[0]),this._hashName&&(r=`${this._hashName}=${t}`);let i=window.location.hash.replace(r,"");i.startsWith("#&")?i=i.slice(0,1)+i.slice(2):"#"===i&&(i="");let n=window.location.href.replace(/(#.+)?$/,i);n=n.replace("&&","&"),window.history.replaceState(window.history.state,null,n)},this._updateHash=Ii(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const t=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),n=Math.pow(10,i),o=Math.round(t.lng*n)/n,a=Math.round(t.lat*n)/n,s=this._map.getBearing(),l=this._map.getPitch();let c="";if(c+=e?`/${o}/${a}/${r}`:`${r}/${a}/${o}`,(s||l)&&(c+="/"+Math.round(10*s)/10),l&&(c+=`/${Math.round(l)}`),this._hashName){const e=this._hashName;let t=!1;const r=window.location.hash.slice(1).split("&").map((r=>{const i=r.split("=")[0];return i===e?(t=!0,`${i}=${c}`):r})).filter((e=>e));return t||r.push(`${e}=${c}`),`#${r.join("&")}`}return`#${c}`}}const ki={linearity:.3,easing:t.b8(0,0,.3,1)},Ei=t.e({deceleration:2500,maxSpeed:1400},ki),Ai=t.e({deceleration:20,maxSpeed:1400},ki),Pi=t.e({deceleration:1e3,maxSpeed:360},ki),Ci=t.e({deceleration:1e3,maxSpeed:90},ki);class Mi{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,t=o.now();for(;e.length>0&&t-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const r={zoom:0,bearing:0,pitch:0,pan:new t.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:t}of this._inertiaBuffer)r.zoom+=t.zoomDelta||0,r.bearing+=t.bearingDelta||0,r.pitch+=t.pitchDelta||0,t.panDelta&&r.pan._add(t.panDelta),t.around&&(r.around=t.around),t.pinchAround&&(r.pinchAround=t.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(r.pan.mag()){const o=Ri(r.pan.mag(),i,t.e({},Ei,e||{}));n.offset=r.pan.mult(o.amount/r.pan.mag()),n.center=this._map.transform.center,Oi(n,o)}if(r.zoom){const e=Ri(r.zoom,i,Ai);n.zoom=this._map.transform.zoom+e.amount,Oi(n,e)}if(r.bearing){const e=Ri(r.bearing,i,Pi);n.bearing=this._map.transform.bearing+t.ac(e.amount,-179,179),Oi(n,e)}if(r.pitch){const e=Ri(r.pitch,i,Ci);n.pitch=this._map.transform.pitch+e.amount,Oi(n,e)}if(n.zoom||n.bearing){const e=void 0===r.pinchAround?r.around:r.pinchAround;n.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),t.e(n,{noMoveStart:!0})}}function Oi(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function Ri(e,r,i){const{maxSpeed:n,linearity:o,deceleration:a}=i,s=t.ac(e*o/(r/1e3),-n,n),l=Math.abs(s)/(a*o);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class Bi extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=a.mousePos(r.getCanvas(),i),s=r.unproject(o);super(e,t.e({point:o,lngLat:s,originalEvent:i},n)),this._defaultPrevented=!1,this.target=r}}class Di extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,r,i){const n="touchend"===e?i.changedTouches:i.touches,o=a.touchPos(r.getCanvasContainer(),n),s=o.map((e=>r.unproject(e))),l=o.reduce(((e,t,r,i)=>e.add(t.div(i.length))),new t.P(0,0));super(e,{points:o,point:l,lngLats:s,lngLat:r.unproject(l),originalEvent:i}),this._defaultPrevented=!1}}class zi extends t.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,r){super(e,{originalEvent:r}),this._defaultPrevented=!1}}class Li{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new zi(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new Bi(e.type,this._map,e))}mouseup(e){this._map.fire(new Bi(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new Bi(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Bi(e.type,this._map,e))}mouseover(e){this._map.fire(new Bi(e.type,this._map,e))}mouseout(e){this._map.fire(new Bi(e.type,this._map,e))}touchstart(e){return this._firePreventable(new Di(e.type,this._map,e))}touchmove(e){this._map.fire(new Di(e.type,this._map,e))}touchend(e){this._map.fire(new Di(e.type,this._map,e))}touchcancel(e){this._map.fire(new Di(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Fi{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Bi(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Bi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Bi(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ni{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(t.P.convert(e),this._map.terrain)}}class ji{constructor(e,t){this._map=e,this._tr=new Ni(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(a.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const r=t;if(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=r,this._box||(this._box=a.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const n=Math.min(i.x,r.x),o=Math.max(i.x,r.x),s=Math.min(i.y,r.y),l=Math.max(i.y,r.y);a.setTransform(this._box,`translate(${n}px,${s}px)`),this._box.style.width=o-n+"px",this._box.style.height=l-s+"px"}mouseupWindow(e,r){if(!this._active)return;if(0!==e.button)return;const i=this._startPos,n=r;if(this.reset(),a.suppressClick(),i.x!==n.x||i.y!==n.y)return this._map.fire(new t.k("boxzoomend",{originalEvent:e})),{cameraAnimation:e=>e.fitScreenCoordinates(i,n,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,r){return this._map.fire(new t.k(e,{originalEvent:r}))}}function Ui(e,t){if(e.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${e.length}, points ${t.length}`);const r={};for(let i=0;i<e.length;i++)r[e[i].identifier]=t[i];return r}class Vi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,r,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=e.timeStamp),i.length===this.numTouches&&(this.centroid=function(e){const r=new t.P(0,0);for(const t of e)r._add(t);return r.div(e.length)}(r),this.touches=Ui(i,r)))}touchmove(e,t,r){if(this.aborted||!this.centroid)return;const i=Ui(r,t);for(const n in this.touches){const e=i[n];(!e||e.dist(this.touches[n])>30)&&(this.aborted=!0)}}touchend(e,t,r){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===r.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class $i{constructor(e){this.singleTap=new Vi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,r){this.singleTap.touchstart(e,t,r)}touchmove(e,t,r){this.singleTap.touchmove(e,t,r)}touchend(e,t,r){const i=this.singleTap.touchend(e,t,r);if(i){const t=e.timeStamp-this.lastTime<500,r=!this.lastTap||this.lastTap.dist(i)<30;if(t&&r||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class Wi{constructor(e){this._tr=new Ni(e),this._zoomIn=new $i({numTouches:1,numTaps:2}),this._zoomOut=new $i({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,r){this._zoomIn.touchstart(e,t,r),this._zoomOut.touchstart(e,t,r)}touchmove(e,t,r){this._zoomIn.touchmove(e,t,r),this._zoomOut.touchmove(e,t,r)}touchend(e,t,r){const i=this._zoomIn.touchend(e,t,r),n=this._zoomOut.touchend(e,t,r),o=this._tr;return i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(i)},{originalEvent:e})}):n?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(n)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hi{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(){const e=this._moveFunction(...arguments);if(e.bearingDelta||e.pitchDelta||e.around||e.panDelta)return this._active=!0,e}dragStart(e,t){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=t.length?t[0]:t,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,t){if(!this.isEnabled())return;const r=this._lastPoint;if(!r)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const i=t.length?t[0]:t;return!this._moved&&i.dist(r)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=i,this._move(r,i))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&a.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Gi={0:1,2:2};class qi{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const t=a.mouseButton(e);this._eventButton=t}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!function(e,t){const r=Gi[t];return void 0===e.buttons||(e.buttons&r)!==r}(e,this._eventButton)}isValidEndEvent(e){return a.mouseButton(e)===this._eventButton}}class Zi{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return 1===e.targetTouches.length}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const Xi=e=>{e.mousedown=e.dragStart,e.mousemoveWindow=e.dragMove,e.mouseup=e.dragEnd,e.contextmenu=e=>{e.preventDefault()}},Yi=e=>{let{enable:t,clickTolerance:r,bearingDegreesPerPixelMoved:i=.8}=e;const n=new qi({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)});return new Hi({clickTolerance:r,move:(e,t)=>({bearingDelta:(t.x-e.x)*i}),moveStateManager:n,enable:t,assignEvents:Xi})},Ki=e=>{let{enable:t,clickTolerance:r,pitchDegreesPerPixelMoved:i=-.5}=e;const n=new qi({checkCorrectEvent:e=>0===a.mouseButton(e)&&e.ctrlKey||2===a.mouseButton(e)});return new Hi({clickTolerance:r,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:n,enable:t,assignEvents:Xi})};class Ji{constructor(e,t){this._clickTolerance=e.clickTolerance||1,this._map=t,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new t.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,t,r){return this._calculateTransform(e,t,r)}touchmove(e,t,r){if(this._active){if(!this._shouldBePrevented(r.length))return e.preventDefault(),this._calculateTransform(e,t,r);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,t,r){this._calculateTransform(e,t,r),this._active&&this._shouldBePrevented(r.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,r,i){i.length>0&&(this._active=!0);const n=Ui(i,r),o=new t.P(0,0),a=new t.P(0,0);let s=0;for(const t in n){const e=n[t],r=this._touches[t];r&&(o._add(e),a._add(e.sub(r)),s++,n[t]=e)}if(this._touches=n,this._shouldBePrevented(s)||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qi{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,t,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,r){if(!this._firstTwoTouches)return;e.preventDefault();const[i,n]=this._firstTwoTouches,o=en(r,t,i),a=en(r,t,n);if(!o||!a)return;const s=this._aroundCenter?null:o.add(a).div(2);return this._move([o,a],s,e)}touchend(e,t,r){if(!this._firstTwoTouches)return;const[i,n]=this._firstTwoTouches,o=en(r,t,i),s=en(r,t,n);o&&s||(this._active&&a.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function en(e,t,r){for(let i=0;i<e.length;i++)if(e[i].identifier===r)return t[i]}function tn(e,t){return Math.log(e/t)/Math.LN2}class rn extends Qi{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const r=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(tn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tn(this._distance,r),pinchAround:t}}}function nn(e,t){return 180*e.angleWith(t)/Math.PI}class on extends Qi{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t,r){const i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:nn(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,r=nn(e,this._startVector);return Math.abs(r)<t}}function an(e){return Math.abs(e.y)>Math.abs(e.x)}class sn extends Qi{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,t,r){super.touchstart(e,t,r),this._currentTouchCount=r.length}_start(e){this._lastPoints=e,an(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,r){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const i=e[0].sub(this._lastPoints[0]),n=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(i,n,r.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+n.y)/2*-.5}):void 0}gestureBeginsVertically(e,t,r){if(void 0!==this._valid)return this._valid;const i=e.mag()>=2,n=t.mag()>=2;if(!i&&!n)return;if(!i||!n)return void 0===this._firstMove&&(this._firstMove=r),r-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return an(e)&&an(t)&&o}}const ln={panStep:100,bearingStep:15,pitchStep:10};class cn{constructor(e){this._tr=new Ni(e);const t=ln;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,r=0,i=0,n=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),n=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),n=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:a=>{const s=this._tr;a.easeTo({duration:300,easeId:"keyboardHandler",easing:un,zoom:t?Math.round(s.zoom)+t*(e.shiftKey?2:1):s.zoom,bearing:s.bearing+r*this._bearingStep,pitch:s.pitch+i*this._pitchStep,offset:[-n*this._panStep,-o*this._panStep],center:s.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function un(e){return e*(2-e)}const dn=4.000244140625;class hn{constructor(e,t){this._onTimeout=e=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)},this._map=e,this._tr=new Ni(e),this._triggerRenderFrame=t,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let t=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const r=o.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==t&&t%dn==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const r=a.mousePos(this._map.getCanvas(),e),i=this._tr;this._around=r.y>i.transform.height/2-i.transform.getHorizon()?t.N.convert(this._aroundCenter?i.center:i.unproject(r)):t.N.convert(i.center),this._aroundPoint=i.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const e=this._tr.transform;if(0!==this._delta){const t="wheel"===this._type&&Math.abs(this._delta)>dn?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==r&&(r=1/r);const i="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(i*r))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:e.zoom,i=this._startZoom,n=this._easing;let a,s=!1;const l=o.now()-this._lastWheelEventTime;if("wheel"===this._type&&i&&n&&l){const e=Math.min(l/200,1),o=n(e);a=t.y.number(i,r,o),e<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let r=t.b9;if(this._prevEase){const e=this._prevEase,i=(o.now()-e.start)/e.duration,n=e.easing(i+.01)-e.easing(i),a=.27/Math.sqrt(n*n+1e-4)*.01,s=Math.sqrt(.0729-a*a);r=t.b8(a,s,.25,1)}return this._prevEase={start:o.now(),duration:e,easing:r},r}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class pn{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class fn{constructor(e){this._tr=new Ni(e),this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mn{constructor(){this._tap=new $i({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,t,r){if(!this._swipePoint)if(this._tapTime){const i=t[0],n=e.timeStamp-this._tapTime<500,o=this._tapPoint.dist(i)<30;n&&o?r.length>0&&(this._swipePoint=i,this._swipeTouch=r[0].identifier):this.reset()}else this._tap.touchstart(e,t,r)}touchmove(e,t,r){if(this._tapTime){if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const i=t[0],n=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(e,t,r)}touchend(e,t,r){if(this._tapTime)this._swipePoint&&0===r.length&&this.reset();else{const i=this._tap.touchend(e,t,r);i&&(this._tapTime=e.timeStamp,this._tapPoint=i)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gn{constructor(e,t,r){this._el=e,this._mousePan=t,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class yn{constructor(e,t,r){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _n{constructor(e,t,r,i){this._el=e,this._touchZoom=t,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class bn{constructor(e,t){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=e,this._options=t,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=a.create("div","maplibregl-cooperative-gesture-screen",e);let t=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(t=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const r=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),i=document.createElement("div");i.className="maplibregl-desktop-message",i.textContent=t,this._container.appendChild(i);const n=document.createElement("div");n.className="maplibregl-mobile-message",n.textContent=r,this._container.appendChild(n),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(a.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,r){this._enabled&&(this._map.fire(new t.k("cooperativegestureprevented",{gestureType:e,originalEvent:r})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const vn=e=>e.zoom||e.drag||e.pitch||e.rotate;class xn extends t.k{}function wn(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Sn{constructor(e,t){this.handleWindowEvent=e=>{this.handleEvent(e,`${e.type}Window`)},this.handleEvent=(e,t)=>{if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const r="renderFrame"===e.type?void 0:e,i={needsRenderFrame:!1},n={},o={},s=e.touches,l=s?this._getMapTouches(s):void 0,c=l?a.touchPos(this._map.getCanvas(),l):a.mousePos(this._map.getCanvas(),e);for(const{handlerName:a,handler:h,allowed:p}of this._handlers){if(!h.isEnabled())continue;let s;this._blockedByActive(o,p,a)?h.reset():h[t||e.type]&&(s=h[t||e.type](e,c,l),this.mergeHandlerResult(i,n,s,a,r),s&&s.needsRenderFrame&&this._triggerRenderFrame()),(s||h.isActive())&&(o[a]=h)}const u={};for(const a in this._previousActiveHandlers)o[a]||(u[a]=r);this._previousActiveHandlers=o,(Object.keys(u).length||wn(i))&&(this._changes.push([i,n,u]),this._triggerRenderFrame()),(Object.keys(o).length||wn(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:d}=i;d&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],d(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Mi(e),this._bearingSnap=t.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(t);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[i,n,o]of this._listeners)a.addEventListener(i,n,i===document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,t,r]of this._listeners)a.removeEventListener(e,t,e===document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,r=t.getCanvasContainer();this._add("mapEvent",new Li(t,e));const i=t.boxZoom=new ji(t,e);this._add("boxZoom",i),e.interactive&&e.boxZoom&&i.enable();const n=t.cooperativeGestures=new bn(t,e.cooperativeGestures);this._add("cooperativeGestures",n),e.cooperativeGestures&&n.enable();const o=new Wi(t),s=new fn(t);t.doubleClickZoom=new pn(s,o),this._add("tapZoom",o),this._add("clickZoom",s),e.interactive&&e.doubleClickZoom&&t.doubleClickZoom.enable();const l=new mn;this._add("tapDragZoom",l);const c=t.touchPitch=new sn(t);this._add("touchPitch",c),e.interactive&&e.touchPitch&&t.touchPitch.enable(e.touchPitch);const u=Yi(e),d=Ki(e);t.dragRotate=new yn(e,u,d),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",d,["mouseRotate"]),e.interactive&&e.dragRotate&&t.dragRotate.enable();const h=(e=>{let{enable:t,clickTolerance:r}=e;const i=new qi({checkCorrectEvent:e=>0===a.mouseButton(e)&&!e.ctrlKey});return new Hi({clickTolerance:r,move:(e,t)=>({around:t,panDelta:t.sub(e)}),activateOnStart:!0,moveStateManager:i,enable:t,assignEvents:Xi})})(e),p=new Ji(e,t);t.dragPan=new gn(r,h,p),this._add("mousePan",h),this._add("touchPan",p,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&t.dragPan.enable(e.dragPan);const f=new on,m=new rn;t.touchZoomRotate=new _n(r,m,f,l),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&t.touchZoomRotate.enable(e.touchZoomRotate);const g=t.scrollZoom=new hn(t,(()=>this._triggerRenderFrame()));this._add("scrollZoom",g,["mousePan"]),e.interactive&&e.scrollZoom&&t.scrollZoom.enable(e.scrollZoom);const y=t.keyboard=new cn(t);this._add("keyboard",y),e.interactive&&e.keyboard&&t.keyboard.enable(),this._add("blockableMapEvent",new Fi(t))}_add(e,t,r){this._handlers.push({handlerName:e,handler:t,allowed:r}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(vn(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,r){for(const i in e)if(i!==r&&(!t||t.indexOf(i)<0))return!0;return!1}_getMapTouches(e){const t=[];for(const r of e)this._el.contains(r.target)&&t.push(r);return t}mergeHandlerResult(e,r,i,n,o){if(!i)return;t.e(e,i);const a={handlerName:n,originalEvent:i.originalEvent||o};void 0!==i.zoomDelta&&(r.zoom=a),void 0!==i.panDelta&&(r.drag=a),void 0!==i.pitchDelta&&(r.pitch=a),void 0!==i.bearingDelta&&(r.rotate=a)}_applyChanges(){const e={},r={},i={};for(const[n,o,a]of this._changes)n.panDelta&&(e.panDelta=(e.panDelta||new t.P(0,0))._add(n.panDelta)),n.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(e.around=n.around),void 0!==n.pinchAround&&(e.pinchAround=n.pinchAround),n.noInertia&&(e.noInertia=n.noInertia),t.e(r,o),t.e(i,a);this._updateMapTransform(e,r,i),this._changes=[]}_updateMapTransform(e,t,r){const i=this._map,n=i._getTransformForUpdate(),o=i.terrain;if(!(wn(e)||o&&this._terrainMovement))return this._fireEvents(t,r,!0);let{panDelta:a,zoomDelta:s,bearingDelta:l,pitchDelta:c,around:u,pinchAround:d}=e;void 0!==d&&(u=d),i._stop(!0),u=u||i.transform.centerPoint;const h=n.pointLocation(a?u.sub(a):u);l&&(n.bearing+=l),c&&(n.pitch+=c),s&&(n.zoom+=s),o?this._terrainMovement||!t.drag&&!t.zoom?t.drag&&this._terrainMovement?n.center=n.pointLocation(n.centerPoint.sub(a)):n.setLocationAtPoint(h,u):(this._terrainMovement=!0,this._map._elevationFreeze=!0,n.setLocationAtPoint(h,u)):n.setLocationAtPoint(h,u),i._applyUpdatedTransform(n),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(t,r,!0)}_fireEvents(e,r,i){const n=vn(this._eventsInProgress),a=vn(e),s={};for(const t in e){const{originalEvent:r}=e[t];this._eventsInProgress[t]||(s[`${t}start`]=r),this._eventsInProgress[t]=e[t]}!n&&a&&this._fireEvent("movestart",a.originalEvent);for(const t in s)this._fireEvent(t,s[t]);a&&this._fireEvent("move",a.originalEvent);for(const t in e){const{originalEvent:r}=e[t];this._fireEvent(t,r)}const l={};let c;for(const t in this._eventsInProgress){const{handlerName:e,originalEvent:i}=this._eventsInProgress[t];this._handlersById[e].isActive()||(delete this._eventsInProgress[t],c=r[e]||i,l[`${t}end`]=c)}for(const t in l)this._fireEvent(t,l[t]);const u=vn(this._eventsInProgress),d=(n||a)&&!u;if(d&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const e=this._map._getTransformForUpdate();e.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(e)}if(i&&d){this._updatingCamera=!0;const e=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),r=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;!e||!e.essential&&o.prefersReducedMotion?(this._map.fire(new t.k("moveend",{originalEvent:c})),r(this._map.getBearing())&&this._map.resetNorth()):(r(e.bearing||this._map.getBearing())&&(e.bearing=0),e.freezeElevation=!0,this._map.easeTo(e,{originalEvent:c})),this._updatingCamera=!1}}_fireEvent(e,r){this._map.fire(new t.k(e,r?{originalEvent:r}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new xn("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class In extends t.E{constructor(e,t){super(),this._renderFrameCallback=()=>{const e=Math.min((o.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=t.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new t.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(e,r,i){return e=t.P.convert(e).mult(-1),this.panTo(this.transform.center,t.e({offset:e},r),i)}panTo(e,r,i){return this.easeTo(t.e({center:e},r),i)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(e,r,i){return this.easeTo(t.e({zoom:e},r),i)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(e,r,i){return this.easeTo(t.e({bearing:e},r),i)}resetNorth(e,r){return this.rotateTo(0,t.e({duration:1e3},e),r),this}resetNorthPitch(e,r){return this.easeTo(t.e({bearing:0,pitch:0,duration:1e3},e),r),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(e,t){e=G.convert(e).adjustAntiMeridian();const r=t&&t.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,t)}_cameraForBoxAndBearing(e,r,i,n){const o={top:0,bottom:0,right:0,left:0};if("number"==typeof(n=t.e({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},n)).padding){const e=n.padding;n.padding={top:e,bottom:e,right:e,left:e}}n.padding=t.e(o,n.padding);const a=this.transform,s=a.padding,l=new G(e,r),c=a.project(l.getNorthWest()),u=a.project(l.getNorthEast()),d=a.project(l.getSouthEast()),h=a.project(l.getSouthWest()),p=t.ba(-i),f=c.rotate(p),m=u.rotate(p),g=d.rotate(p),y=h.rotate(p),_=new t.P(Math.max(f.x,m.x,y.x,g.x),Math.max(f.y,m.y,y.y,g.y)),b=new t.P(Math.min(f.x,m.x,y.x,g.x),Math.min(f.y,m.y,y.y,g.y)),v=_.sub(b),x=(a.width-(s.left+s.right+n.padding.left+n.padding.right))/v.x,w=(a.height-(s.top+s.bottom+n.padding.top+n.padding.bottom))/v.y;if(w<0||x<0)return void t.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const S=Math.min(a.scaleZoom(a.scale*Math.min(x,w)),n.maxZoom),I=t.P.convert(n.offset),T=new t.P((n.padding.left-n.padding.right)/2,(n.padding.top-n.padding.bottom)/2).rotate(t.ba(i)),k=I.add(T).mult(a.scale/a.zoomScale(S));return{center:a.unproject(c.add(d).div(2).sub(k)),zoom:S,bearing:i}}fitBounds(e,t,r){return this._fitInternal(this.cameraForBounds(e,t),t,r)}fitScreenCoordinates(e,r,i,n,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.P.convert(e)),this.transform.pointLocation(t.P.convert(r)),i,n),n,o)}_fitInternal(e,r,i){return e?(delete(r=t.e(e,r)).padding,r.linear?this.easeTo(r,i):this.flyTo(r,i)):this}jumpTo(e,r){this.stop();const i=this._getTransformForUpdate();let n=!1,o=!1,a=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(n=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=t.N.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(a=!0,i.pitch=+e.pitch),null==e.padding||i.isPaddingEqual(e.padding)||(i.padding=e.padding),this._applyUpdatedTransform(i),this.fire(new t.k("movestart",r)).fire(new t.k("move",r)),n&&this.fire(new t.k("zoomstart",r)).fire(new t.k("zoom",r)).fire(new t.k("zoomend",r)),o&&this.fire(new t.k("rotatestart",r)).fire(new t.k("rotate",r)).fire(new t.k("rotateend",r)),a&&this.fire(new t.k("pitchstart",r)).fire(new t.k("pitch",r)).fire(new t.k("pitchend",r)),this.fire(new t.k("moveend",r))}calculateCameraOptionsFromTo(e,r,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=t.Z.fromLngLat(e,r),a=t.Z.fromLngLat(i,n),s=a.x-o.x,l=a.y-o.y,c=a.z-o.z,u=Math.hypot(s,l,c);if(0===u)throw new Error("Can't calculate camera options with same From and To");const d=Math.hypot(s,l),h=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),p=180*Math.atan2(s,-l)/Math.PI;let f=180*Math.acos(d/u)/Math.PI;return f=c<0?90-f:90+f,{center:a.toLngLat(),zoom:h,pitch:f,bearing:p}}easeTo(e,r){var i;this._stop(!1,e.easeId),(!1===(e=t.e({offset:[0,0],duration:500,easing:t.b9},e)).animate||!e.essential&&o.prefersReducedMotion)&&(e.duration=0);const n=this._getTransformForUpdate(),a=n.zoom,s=n.bearing,l=n.pitch,c=n.padding,u="bearing"in e?this._normalizeBearing(e.bearing,s):s,d="pitch"in e?+e.pitch:l,h="padding"in e?e.padding:n.padding,p=t.P.convert(e.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),{center:g,zoom:y}=n.getConstrained(t.N.convert(e.center||m),null!==(i=e.zoom)&&void 0!==i?i:a);this._normalizeCenter(g,n);const _=n.project(m),b=n.project(g).sub(_),v=n.zoomScale(y-a);let x,w;e.around&&(x=t.N.convert(e.around),w=n.locationPoint(x));const S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||y!==a,this._rotating=this._rotating||s!==u,this._pitching=this._pitching||d!==l,this._padding=!n.isPaddingEqual(h),this._easeId=e.easeId,this._prepareEase(r,e.noMoveStart,S),this.terrain&&this._prepareElevation(g),this._ease((i=>{if(this._zooming&&(n.zoom=t.y.number(a,y,i)),this._rotating&&(n.bearing=t.y.number(s,u,i)),this._pitching&&(n.pitch=t.y.number(l,d,i)),this._padding&&(n.interpolatePadding(c,h,i),f=n.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(i),x)n.setLocationAtPoint(x,w);else{const e=n.zoomScale(n.zoom-a),t=y>a?Math.min(2,v):Math.max(.5,v),r=Math.pow(t,1-i),o=n.unproject(_.add(b.mult(i*r)).mult(e));n.setLocationAtPoint(n.renderWorldCopies?o.wrap():o,f)}this._applyUpdatedTransform(n),this._fireMoveEvents(r)}),(t=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r,t)}),e),this}_prepareEase(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,r||i.moving||this.fire(new t.k("movestart",e)),this._zooming&&!i.zooming&&this.fire(new t.k("zoomstart",e)),this._rotating&&!i.rotating&&this.fire(new t.k("rotatestart",e)),this._pitching&&!i.pitching&&this.fire(new t.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const r=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&r!==this._elevationTarget){const t=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(t-(r-(t*e+this._elevationStart))/(1-e)),this._elevationTarget=r}this.transform.elevation=t.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const t=e.getCameraPosition(),r=this.terrain.getElevationForLngLatZoom(t.lngLat,e.zoom);if(t.altitude<r){const i=this.calculateCameraOptionsFromTo(t.lngLat,r,e.center,e.elevation);return{pitch:i.pitch,zoom:i.zoom}}return{}}_applyUpdatedTransform(e){const t=[];if(this.terrain&&t.push((e=>this._elevateCameraIfInsideTerrain(e))),this.transformCameraUpdate&&t.push((e=>this.transformCameraUpdate(e))),!t.length)return;const r=e.clone();for(const i of t){const e=r.clone(),{center:t,zoom:n,pitch:o,bearing:a,elevation:s}=i(e);t&&(e.center=t),void 0!==n&&(e.zoom=n),void 0!==o&&(e.pitch=o),void 0!==a&&(e.bearing=a),void 0!==s&&(e.elevation=s),r.apply(e)}this.transform.apply(r)}_fireMoveEvents(e){this.fire(new t.k("move",e)),this._zooming&&this.fire(new t.k("zoom",e)),this._rotating&&this.fire(new t.k("rotate",e)),this._pitching&&this.fire(new t.k("pitch",e))}_afterEase(e,r){if(this._easeId&&r&&this._easeId===r)return;delete this._easeId;const i=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new t.k("zoomend",e)),n&&this.fire(new t.k("rotateend",e)),o&&this.fire(new t.k("pitchend",e)),this.fire(new t.k("moveend",e))}flyTo(e,r){var i;if(!e.essential&&o.prefersReducedMotion){const i=t.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,r)}this.stop(),e=t.e({offset:[0,0],speed:1.2,curve:1.42,easing:t.b9},e);const n=this._getTransformForUpdate(),a=n.zoom,s=n.bearing,l=n.pitch,c=n.padding,u="bearing"in e?this._normalizeBearing(e.bearing,s):s,d="pitch"in e?+e.pitch:l,h="padding"in e?e.padding:n.padding,p=t.P.convert(e.offset);let f=n.centerPoint.add(p);const m=n.pointLocation(f),{center:g,zoom:y}=n.getConstrained(t.N.convert(e.center||m),null!==(i=e.zoom)&&void 0!==i?i:a);this._normalizeCenter(g,n);const _=n.zoomScale(y-a),b=n.project(m),v=n.project(g).sub(b);let x=e.curve;const w=Math.max(n.width,n.height),S=w/_,I=v.mag();if("minZoom"in e){const r=t.ac(Math.min(e.minZoom,a,y),n.minZoom,n.maxZoom),i=w/n.zoomScale(r-a);x=Math.sqrt(i/I*2)}const T=x*x;function k(e){const t=(S*S-w*w+(e?-1:1)*T*T*I*I)/(2*(e?S:w)*T*I);return Math.log(Math.sqrt(t*t+1)-t)}function E(e){return(Math.exp(e)-Math.exp(-e))/2}function A(e){return(Math.exp(e)+Math.exp(-e))/2}const P=k(!1);let C=function(e){return A(P)/A(P+x*e)},M=function(e){return w*((A(P)*(E(t=P+x*e)/A(t))-E(P))/T)/I;var t},O=(k(!0)-P)/x;if(Math.abs(I)<1e-6||!isFinite(O)){if(Math.abs(w-S)<1e-6)return this.easeTo(e,r);const t=S<w?-1:1;O=Math.abs(Math.log(S/w))/x,M=()=>0,C=e=>Math.exp(t*x*e)}return e.duration="duration"in e?+e.duration:1e3*O/("screenSpeed"in e?+e.screenSpeed/x:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==u,this._pitching=d!==l,this._padding=!n.isPaddingEqual(h),this._prepareEase(r,!1),this.terrain&&this._prepareElevation(g),this._ease((i=>{const o=i*O,m=1/C(o);n.zoom=1===i?y:a+n.scaleZoom(m),this._rotating&&(n.bearing=t.y.number(s,u,i)),this._pitching&&(n.pitch=t.y.number(l,d,i)),this._padding&&(n.interpolatePadding(c,h,i),f=n.centerPoint.add(p)),this.terrain&&!e.freezeElevation&&this._updateElevation(i);const _=1===i?g:n.unproject(b.add(v.mult(M(o))).mult(m));n.setLocationAtPoint(n.renderWorldCopies?_.wrap():_,f),this._applyUpdatedTransform(n),this._fireMoveEvents(r)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(r)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){var r;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}return e||null===(r=this.handlers)||void 0===r||r.stop(!1),this}_ease(e,t,r){!1===r.animate||0===r.duration?(e(1),t()):(this._easeStart=o.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=t,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,r){e=t.b3(e,-180,180);const i=Math.abs(e-r);return Math.abs(e-360-r)<i&&(e-=360),Math.abs(e+360-r)<i&&(e+=360),e}_normalizeCenter(e,t){if(!t.renderWorldCopies||t.lngRange)return;const r=e.lng-t.center.lng;e.lng+=r>180?-360:r<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(t.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const Tn={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class kn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tn;this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=e=>{!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType&&"terrain"!==e.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=a.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=a.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const r=this._map._getUIString(`AttributionControl.${t}`);e.title=r,e.setAttribute("aria-label",r)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((e=>"string"!=typeof e?"":e))):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style.sourceCaches;for(const i in t){const r=t[i];if(r.used||r.usedForTerrain){const t=r.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e=e.filter((e=>String(e).trim())),e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,r)=>{for(let i=r+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0}));const r=e.join(" | ");r!==this._attribHTML&&(this._attribHTML=r,e.length?(this._innerContainer.innerHTML=r,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class En{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._updateCompact=()=>{const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&t.classList.add("maplibregl-compact"):t.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=a.create("div","maplibregl-ctrl");const t=a.create("a","maplibregl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://maplibre.org/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){a.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class An{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,r=t?this._queue.concat(t):this._queue;for(const i of r)if(i.id===e)return void(i.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const t=this._currentlyRunning=this._queue;this._queue=[];for(const r of t)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Pn=t.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Cn extends t.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,r){this.sourceCache.update(e,r),this._renderableTilesKeys=[];const i={};for(const n of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:r}))i[n.key]=!0,this._renderableTilesKeys.push(n.key),this._tiles[n.key]||(n.posMatrix=new Float64Array(16),t.aP(n.posMatrix,0,t.X,0,t.X,0,1),this._tiles[n.key]=new le(n,this.tileSize));for(const t in this._tiles)i[t]||delete this._tiles[t]}freeRtt(e){for(const t in this._tiles){const r=this._tiles[t];(!e||r.tileID.equals(e)||r.tileID.isChildOf(e)||e.isChildOf(r.tileID))&&(r.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const r={};for(const i of this._renderableTilesKeys){const n=this._tiles[i].tileID;if(n.canonical.equals(e.canonical)){const n=e.clone();n.posMatrix=new Float64Array(16),t.aP(n.posMatrix,0,t.X,0,t.X,0,1),r[i]=n}else if(n.canonical.isChildOf(e.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=n.canonical.z-e.canonical.z,s=n.canonical.x-(n.canonical.x>>a<<a),l=n.canonical.y-(n.canonical.y>>a<<a),c=t.X>>a;t.aP(o.posMatrix,0,c,0,c,0,1),t.J(o.posMatrix,o.posMatrix,[-s*c,-l*c,0]),r[i]=o}else if(e.canonical.isChildOf(n.canonical)){const o=e.clone();o.posMatrix=new Float64Array(16);const a=e.canonical.z-n.canonical.z,s=e.canonical.x-(e.canonical.x>>a<<a),l=e.canonical.y-(e.canonical.y>>a<<a),c=t.X>>a;t.aP(o.posMatrix,0,t.X,0,t.X,0,1),t.J(o.posMatrix,o.posMatrix,[s*c,l*c,0]),t.K(o.posMatrix,o.posMatrix,[1/2**a,1/2**a,0]),r[i]=o}}return r}getSourceTile(e,t){const r=this.sourceCache._source;let i=e.overscaledZ-this.deltaZoom;if(i>r.maxzoom&&(i=r.maxzoom),i<r.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(i).key);let n=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!n||!n.dem)&&t)for(;i>=r.minzoom&&(!n||!n.dem);)n=this.sourceCache.getTileByID(e.scaledTo(i--).key);return n}tilesAfterTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();return Object.values(this._tiles).filter((t=>t.timeAdded>=e))}}class Mn{constructor(e,t,r){this.painter=e,this.sourceCache=new Cn(t),this.options=r,this.exaggeration="number"==typeof r.exaggeration?r.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,r,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.X;var o;if(!(r>=0&&r<n&&i>=0&&i<n))return 0;const a=this.getTerrainData(e),s=null===(o=a.tile)||void 0===o?void 0:o.dem;if(!s)return 0;const l=function(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}([],[r/n*t.X,i/n*t.X],a.u_terrain_matrix),c=[l[0]*s.dim,l[1]*s.dim],u=Math.floor(c[0]),d=Math.floor(c[1]),h=c[0]-u,p=c[1]-d;return s.get(u,d)*(1-h)*(1-p)+s.get(u+1,d)*h*(1-p)+s.get(u,d+1)*(1-h)*p+s.get(u+1,d+1)*h*p}getElevationForLngLatZoom(e,r){if(!t.bb(r,e.wrap()))return 0;const{tileID:i,mercatorX:n,mercatorY:o}=this._getOverscaledTileIDFromLngLatZoom(e,r);return this.getElevation(i,n%t.X,o%t.X,t.X)}getElevation(e,r,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.X;return this.getDEMElevation(e,r,i,n)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const e=this.painter.context,r=new t.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new x(e,r,e.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new x(e,new t.R({width:1,height:1}),e.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=t.an([])}const r=this.sourceCache.getSourceTile(e,!0);if(r&&r.dem&&(!r.demTexture||r.needsTerrainPrepare)){const e=this.painter.context;r.demTexture=this.painter.getTileTexture(r.dem.stride),r.demTexture?r.demTexture.update(r.dem.getPixels(),{premultiply:!1}):r.demTexture=new x(e,r.dem.getPixels(),e.gl.RGBA,{premultiply:!1}),r.demTexture.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),r.needsTerrainPrepare=!1}const i=r&&r+r.tileID.key+e.key;if(i&&!this._demMatrixCache[i]){const i=this.sourceCache.sourceCache._source.maxzoom;let n=e.canonical.z-r.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=i?n=e.canonical.z-i:t.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const o=e.canonical.x-(e.canonical.x>>n<<n),a=e.canonical.y-(e.canonical.y>>n<<n),s=t.bc(new Float64Array(16),[1/(t.X<<n),1/(t.X<<n),0]);t.J(s,s,[o*t.X,a*t.X,0]),this._demMatrixCache[e.key]={matrix:s,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:r&&r.dem&&r.dem.dim||1,u_terrain_matrix:i?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:r&&r.dem&&r.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(r&&r.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:r}}getFramebuffer(e){const t=this.painter,r=t.width/devicePixelRatio,i=t.height/devicePixelRatio;return!this._fbo||this._fbo.width===r&&this._fbo.height===i||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new x(t.context,{width:r,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new x(t.context,{width:r,height:i,data:null},t.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(t.context.gl.NEAREST,t.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=t.context.createFramebuffer(r,i,!0,!1),this._fbo.depthAttachment.set(t.context.createRenderbuffer(t.context.gl.DEPTH_COMPONENT16,r,i))),this._fbo.colorAttachment.set("coords"===e?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const r=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let t=0,o=0;t<this._coordsTextureSize;t++)for(let e=0;e<this._coordsTextureSize;e++,o+=4)r[o+0]=255&e,r[o+1]=255&t,r[o+2]=e>>8<<4|t>>8,r[o+3]=0;const i=new t.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(r.buffer)),n=new x(e,i,e.gl.RGBA,{premultiply:!1});return n.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=n,n}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const r=new Uint8Array(4),i=this.painter.context,n=i.gl,o=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),a=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),s=Math.round(this.painter.height/devicePixelRatio);i.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),n.readPixels(o,s-a-1,1,1,n.RGBA,n.UNSIGNED_BYTE,r),i.bindFramebuffer.set(null);const l=r[0]+(r[2]>>4<<8),c=r[1]+((15&r[2])<<8),u=this.coordsIndex[255-r[3]],d=u&&this.sourceCache.getTileByID(u);if(!d)return null;const h=this._coordsTextureSize,p=(1<<d.tileID.canonical.z)*h;return new t.Z((d.tileID.canonical.x*h+l)/p+d.tileID.wrap,(d.tileID.canonical.y*h+c)/p,this.getElevation(d.tileID,l,c,h))}depthAtPoint(e){const t=new Uint8Array(4),r=this.painter.context,i=r.gl;return r.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),i.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,i.RGBA,i.UNSIGNED_BYTE,t),r.bindFramebuffer.set(null),(t[0]/16777216+t[1]/65536+t[2]/256+t[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,r=new t.bd,i=new t.aY,n=this.meshSize,o=t.X/n,a=n*n;for(let t=0;t<=n;t++)for(let e=0;e<=n;e++)r.emplaceBack(e*o,t*o,0);for(let t=0;t<a;t+=n+1)for(let e=0;e<n;e++)i.emplaceBack(e+t,n+e+t+1,n+e+t+2),i.emplaceBack(e+t,n+e+t+2,e+t+1);const s=r.length,l=s+2*(n+1);for(const d of[0,1])for(let e=0;e<=n;e++)for(const i of[0,1])r.emplaceBack(e*o,d*t.X,i);for(let t=0;t<2*n;t+=2)i.emplaceBack(l+t,l+t+1,l+t+3),i.emplaceBack(l+t,l+t+3,l+t+2),i.emplaceBack(s+t,s+t+3,s+t+1),i.emplaceBack(s+t,s+t+2,s+t+3);const c=r.length,u=c+2*(n+1);for(const d of[0,1])for(let e=0;e<=n;e++)for(const i of[0,1])r.emplaceBack(d*t.X,e*o,i);for(let t=0;t<2*n;t+=2)i.emplaceBack(c+t,c+t+1,c+t+3),i.emplaceBack(c+t,c+t+3,c+t+2),i.emplaceBack(u+t,u+t+3,u+t+1),i.emplaceBack(u+t,u+t+2,u+t+3);return this._mesh=new yi(e.createVertexBuffer(r,Pn.members),e.createIndexBuffer(i),t.a0.simpleSegment(0,0,r.length,i.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*t.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,t){var r;const{tileID:i}=this._getOverscaledTileIDFromLngLatZoom(e,t);return null!==(r=this.getMinMaxElevation(i).minElevation)&&void 0!==r?r:0}getMinMaxElevation(e){const t=this.getTerrainData(e).tile,r={minElevation:null,maxElevation:null};return t&&t.dem&&(r.minElevation=t.dem.min*this.exaggeration,r.maxElevation=t.dem.max*this.exaggeration),r}_getOverscaledTileIDFromLngLatZoom(e,r){const i=t.Z.fromLngLat(e.wrap()),n=(1<<r)*t.X,o=i.x*n,a=i.y*n,s=Math.floor(o/t.X),l=Math.floor(a/t.X);return{tileID:new t.S(r,0,r,s,l),mercatorX:o,mercatorY:a}}}class On{constructor(e,t,r){this._context=e,this._size=t,this._tileSize=r,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const t=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),r=new x(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return r.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),t.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),t.colorAttachment.set(r.texture),{id:e,fbo:t,texture:r,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((t=>e.id!==t)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const t of this._recentlyUsed)if(!this._objects[t].inUse)return this._objects[t];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((e=>!e.inUse))}}const Rn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Bn{constructor(e,t){this.painter=e,this.terrain=t,this.pool=new On(e.context,30,t.sourceCache.tileSize*t.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,t){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((r=>!e._layers[r].isHidden(t))),this._coordsDescendingInv={};for(const r in e.sourceCaches){this._coordsDescendingInv[r]={};const t=e.sourceCaches[r].getVisibleCoordinates();for(const e of t){const t=this.terrain.sourceCache.getTerrainCoords(e);for(const e in t)this._coordsDescendingInv[r][e]||(this._coordsDescendingInv[r][e]=[]),this._coordsDescendingInv[r][e].push(t[e])}}this._coordsDescendingInvStr={};for(const r of e._order){const t=e._layers[r],i=t.source;if(Rn[t.type]&&!this._coordsDescendingInvStr[i]){this._coordsDescendingInvStr[i]={};for(const e in this._coordsDescendingInv[i])this._coordsDescendingInvStr[i][e]=this._coordsDescendingInv[i][e].map((e=>e.key)).sort().join()}}for(const r of this._renderableTiles)for(const e in this._coordsDescendingInvStr){const t=this._coordsDescendingInvStr[e][r.tileID.key];t&&t!==r.rttCoords[e]&&(r.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const r=e.type,i=this.painter,n=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Rn[r]&&(this._prevType&&Rn[this._prevType]||this._stacks.push([]),this._prevType=r,this._stacks[this._stacks.length-1].push(e.id),!n))return!0;if(Rn[this._prevType]||Rn[r]&&n){this._prevType=r;const e=this._stacks.length-1,n=this._stacks[e]||[];for(const r of this._renderableTiles){if(this.pool.isFull()&&(gi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(r),r.rtt[e]){const t=this.pool.getObjectForId(r.rtt[e].id);if(t.stamp===r.rtt[e].stamp){this.pool.useObject(t);continue}}const o=this.pool.getOrCreateFreeObject();this.pool.useObject(o),this.pool.stampObject(o),r.rtt[e]={id:o.id,stamp:o.stamp},i.context.bindFramebuffer.set(o.fbo.framebuffer),i.context.clear({color:t.aM.transparent,stencil:0}),i.currentStencilSource=void 0;for(let e=0;e<n.length;e++){const t=i.style._layers[n[e]],a=t.source?this._coordsDescendingInv[t.source][r.tileID.key]:[r.tileID];i.context.viewport.set([0,0,o.fbo.width,o.fbo.height]),i._renderTileClippingMasks(t,a),i.renderLayer(i,i.style.sourceCaches[t.source],t,a),t.source&&(r.rttCoords[t.source]=this._coordsDescendingInvStr[t.source][r.tileID.key])}}return gi(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Rn[r]}return!1}}const Dn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},zn=r,Ln={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Tn,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:t.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Fn=e=>{e.touchstart=e.dragStart,e.touchmoveWindow=e.dragMove,e.touchend=e.dragEnd},Nn={showCompass:!0,showZoom:!0,visualizePitch:!1};class jn{constructor(e,r){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.mousedown=e=>{this.startMouse(t.e({},e,{ctrlKey:!0,preventDefault:()=>e.preventDefault()}),a.mousePos(this.element,e)),a.addEventListener(window,"mousemove",this.mousemove),a.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=e=>{this.moveMouse(e,a.mousePos(this.element,e))},this.mouseup=e=>{this.mouseRotate.dragEnd(e),this.mousePitch&&this.mousePitch.dragEnd(e),this.offTemp()},this.touchstart=e=>{1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.startTouch(e,this._startPos),a.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.addEventListener(window,"touchend",this.touchend))},this.touchmove=e=>{1!==e.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,e.targetTouches)[0],this.moveTouch(e,this._lastPos))},this.touchend=e=>{0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const n=e.dragRotate._mouseRotate.getClickTolerance(),o=e.dragRotate._mousePitch.getClickTolerance();this.element=r,this.mouseRotate=Yi({clickTolerance:n,enable:!0}),this.touchRotate=(e=>{let{enable:t,clickTolerance:r,bearingDegreesPerPixelMoved:i=.8}=e;const n=new Zi;return new Hi({clickTolerance:r,move:(e,t)=>({bearingDelta:(t.x-e.x)*i}),moveStateManager:n,enable:t,assignEvents:Fn})})({clickTolerance:n,enable:!0}),this.map=e,i&&(this.mousePitch=Ki({clickTolerance:o,enable:!0}),this.touchPitch=(e=>{let{enable:t,clickTolerance:r,pitchDegreesPerPixelMoved:i=-.5}=e;const n=new Zi;return new Hi({clickTolerance:r,move:(e,t)=>({pitchDelta:(t.y-e.y)*i}),moveStateManager:n,enable:t,assignEvents:Fn})})({clickTolerance:o,enable:!0})),a.addEventListener(r,"mousedown",this.mousedown),a.addEventListener(r,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(r,"touchcancel",this.reset)}startMouse(e,t){this.mouseRotate.dragStart(e,t),this.mousePitch&&this.mousePitch.dragStart(e,t),a.disableDrag()}startTouch(e,t){this.touchRotate.dragStart(e,t),this.touchPitch&&this.touchPitch.dragStart(e,t),a.disableDrag()}moveMouse(e,t){const r=this.map,{bearingDelta:i}=this.mouseRotate.dragMove(e,t)||{};if(i&&r.setBearing(r.getBearing()+i),this.mousePitch){const{pitchDelta:i}=this.mousePitch.dragMove(e,t)||{};i&&r.setPitch(r.getPitch()+i)}}moveTouch(e,t){const r=this.map,{bearingDelta:i}=this.touchRotate.dragMove(e,t)||{};if(i&&r.setBearing(r.getBearing()+i),this.touchPitch){const{pitchDelta:i}=this.touchPitch.dragMove(e,t)||{};i&&r.setPitch(r.getPitch()+i)}}off(){const e=this.element;a.removeEventListener(e,"mousedown",this.mousedown),a.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend),a.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){a.enableDrag(),a.removeEventListener(window,"mousemove",this.mousemove),a.removeEventListener(window,"mouseup",this.mouseup),a.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),a.removeEventListener(window,"touchend",this.touchend)}}let Un;function Vn(e,r,i){const n=new t.N(e.lng,e.lat);if(e=new t.N(e.lng,e.lat),r){const n=new t.N(e.lng-360,e.lat),o=new t.N(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(r);i.locationPoint(n).distSqr(r)<a?e=n:i.locationPoint(o).distSqr(r)<a&&(e=o)}for(;Math.abs(e.lng-i.center.lng)>180;){const t=i.locationPoint(e);if(t.x>=0&&t.y>=0&&t.x<=i.width&&t.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e.lng!==n.lng&&i.locationPoint(e).y>i.height/2-i.getHorizon()?e:n}const $n={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wn(e,t,r){const i=e.classList;for(const n in $n)i.remove(`maplibregl-${r}-anchor-${n}`);i.add(`maplibregl-${r}-anchor-${t}`)}class Hn extends t.E{constructor(e){if(super(),this._onKeyPress=e=>{const t=e.code,r=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==r&&13!==r||this.togglePopup()},this._onMapClick=e=>{const t=e.originalEvent.target,r=this._element;this._popup&&(t===r||r.contains(t))&&this.togglePopup()},this._update=e=>{var t;if(!this._map)return;const r=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==e?void 0:e.type)||"render"===(null==e?void 0:e.type)&&!r)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Vn(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let i="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?i=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(i=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let n="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?n="rotateX(0deg)":"map"===this._pitchAlignment&&(n=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||e&&"moveend"!==e.type||(this._pos=this._pos.round()),a.setTransform(this._element,`${$n[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${n} ${i}`),o.frameAsync(new AbortController).then((()=>{this._updateOpacity(e&&"moveend"===e.type)})).catch((()=>{}))},this._onMove=e=>{if(!this._isDragging){const t=this._clickTolerance||this._map._clickTolerance;this._isDragging=e.point.dist(this._pointerdownPos)>=t}this._isDragging&&(this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.k("dragstart"))),this.fire(new t.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.k("dragend")),this._state="inactive"},this._addDragHandler=e=>{this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._offset),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&"auto"!==e.pitchAlignment?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(null==e?void 0:e.opacity,null==e?void 0:e.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=t.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div");const r=a.createNS("http://www.w3.org/2000/svg","svg"),i=41,n=27;r.setAttributeNS(null,"display","block"),r.setAttributeNS(null,"height",`${i}px`),r.setAttributeNS(null,"width",`${n}px`),r.setAttributeNS(null,"viewBox",`0 0 ${n} ${i}`);const o=a.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");const s=a.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"fill-rule","nonzero");const l=a.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=a.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=a.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const d=a.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(d);const h=a.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"opacity","0.25"),h.setAttributeNS(null,"fill","#000000");const p=a.createNS("http://www.w3.org/2000/svg","path");p.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),h.appendChild(p);const f=a.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(6.0, 7.0)"),f.setAttributeNS(null,"fill","#FFFFFF");const m=a.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"transform","translate(8.0, 8.0)");const g=a.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#000000"),g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962");const y=a.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),m.appendChild(g),m.appendChild(y),s.appendChild(l),s.appendChild(u),s.appendChild(h),s.appendChild(f),s.appendChild(m),r.appendChild(s),r.setAttributeNS(null,"height",i*this._scale+"px"),r.setAttributeNS(null,"width",n*this._scale+"px"),this._element.appendChild(r),this._offset=t.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()})),Wn(this._element,this._anchor,"marker"),e&&e.className)for(const t of e.className.split(" "))this._element.classList.add(t);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,r=13.5,i=Math.abs(r)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-r+i)],"bottom-right":[-i,-1*(t-r+i)],left:[r,-1*(t-r)],right:[-r,-1*(t-r)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var r,i;if(!(null===(r=this._map)||void 0===r?void 0:r.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const n=this._map,o=n.terrain.depthAtPoint(this._pos),a=n.terrain.getElevationForLngLatZoom(this._lngLat,n.transform.tileZoom);if(n.transform.lngLatToCameraDepth(this._lngLat,a)-o<.006)return void(this._element.style.opacity=this._opacity);const s=-this._offset.y/n.transform._pixelPerMeter,l=Math.sin(n.getPitch()*Math.PI/180)*s,c=n.terrain.depthAtPoint(new t.P(this._pos.x,this._pos.y-this._offset.y)),u=n.transform.lngLatToCameraDepth(this._lngLat,a+l)-c>.006;(null===(i=this._popup)||void 0===i?void 0:i.isOpen())&&u&&this._popup.remove(),this._element.style.opacity=u?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=t.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,t){return void 0===e&&void 0===t&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==e&&(this._opacity=e),void 0!==t&&(this._opacityWhenCovered=t),this._map&&this._updateOpacity(!0),this}}const Gn={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let qn=0,Zn=!1;const Xn={maxWidth:100,unit:"metric"};function Yn(e,t,r){const i=r&&r.maxWidth||100,n=e._container.clientHeight/2,o=e.unproject([0,n]),a=e.unproject([i,n]),s=o.distanceTo(a);if(r&&"imperial"===r.unit){const r=3.2808*s;r>5280?Kn(t,i,r/5280,e._getUIString("ScaleControl.Miles")):Kn(t,i,r,e._getUIString("ScaleControl.Feet"))}else r&&"nautical"===r.unit?Kn(t,i,s/1852,e._getUIString("ScaleControl.NauticalMiles")):s>=1e3?Kn(t,i,s/1e3,e._getUIString("ScaleControl.Kilometers")):Kn(t,i,s,e._getUIString("ScaleControl.Meters"))}function Kn(e,t,r,i){const n=function(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let r=e/t;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:r>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(r),t*r}(r);e.style.width=t*(n/r)+"px",e.innerHTML=`${n}&nbsp;${i}`}const Jn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Qn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function eo(e){if(e){if("number"==typeof e){const r=Math.round(Math.abs(e)/Math.SQRT2);return{center:new t.P(0,0),top:new t.P(0,e),"top-left":new t.P(r,r),"top-right":new t.P(-r,r),bottom:new t.P(0,-e),"bottom-left":new t.P(r,-r),"bottom-right":new t.P(-r,-r),left:new t.P(e,0),right:new t.P(-e,0)}}if(e instanceof t.P||Array.isArray(e)){const r=t.P.convert(e);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:t.P.convert(e.center||[0,0]),top:t.P.convert(e.top||[0,0]),"top-left":t.P.convert(e["top-left"]||[0,0]),"top-right":t.P.convert(e["top-right"]||[0,0]),bottom:t.P.convert(e.bottom||[0,0]),"bottom-left":t.P.convert(e["bottom-left"]||[0,0]),"bottom-right":t.P.convert(e["bottom-right"]||[0,0]),left:t.P.convert(e.left||[0,0]),right:t.P.convert(e.right||[0,0])}}return eo(new t.P(0,0))}const to=r;e.AJAXError=t.bh,e.Evented=t.E,e.LngLat=t.N,e.MercatorCoordinate=t.Z,e.Point=t.P,e.addProtocol=t.bi,e.config=t.a,e.removeProtocol=t.bj,e.AttributionControl=kn,e.BoxZoomHandler=ji,e.CanvasSource=te,e.CooperativeGesturesHandler=bn,e.DoubleClickZoomHandler=pn,e.DragPanHandler=gn,e.DragRotateHandler=yn,e.EdgeInsets=xi,e.FullscreenControl=class extends t.E{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._onFullscreenChange=()=>{var e;let t=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(e=null==t?void 0:t.shadowRoot)||void 0===e?void 0:e.fullscreenElement;)t=t.shadowRoot.fullscreenElement;t===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,e&&e.container&&(e.container instanceof HTMLElement?this._container=e.container:t.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){a.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const e=this._fullscreenButton=a.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);a.create("span","maplibregl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new t.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new t.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},e.GeoJSONSource=K,e.GeolocateControl=class extends t.E{constructor(e){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new t.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const r=new t.N(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy,n=this._map.getBearing(),o=t.e({bearing:n},this.options.fitBoundsOptions),a=G.fromLngLat(r,i);this._map.fitBounds(a,o,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const r=new t.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(r).addTo(this._map),this._userLocationDotMarker.setLngLat(r).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&Zn)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new t.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=a.create("button","maplibregl-ctrl-geolocate",this._container),a.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(!1===e){t.w("Geolocation support is not available so the GeolocateControl will be disabled.");const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Hn({element:this._dotElement}),this._circleElement=a.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Hn({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(e=>{e.geolocateSource||"ACTIVE_LOCK"!==this._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new t.k("trackuserlocationend")),this.fire(new t.k("userlocationlostfocus")))}))}},this.options=t.e({},Gn,e)}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return t._(this,arguments,void 0,(function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function*(){if(void 0!==Un&&!e)return Un;if(void 0===window.navigator.permissions)return Un=!!window.navigator.geolocation,Un;try{const e=yield window.navigator.permissions.query({name:"geolocation"});Un="denied"!==e.state}catch(e){Un=!!window.navigator.geolocation}return Un}()}))}().then((e=>this._finishSetupUI(e))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,qn=0,Zn=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),r=e.coords;return t&&(r.longitude<t.getWest()||r.longitude>t.getEast()||r.latitude<t.getSouth()||r.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const e=this._map.getBounds(),t=e.getSouthEast(),r=e.getNorthEast(),i=t.distanceTo(r),n=Math.ceil(this._accuracy/(i/this._map._container.clientHeight)*2);this._circleElement.style.width=`${n}px`,this._circleElement.style.height=`${n}px`}trigger(){if(!this._setup)return t.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":qn--,Zn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new t.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.k("trackuserlocationstart")),this.fire(new t.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),qn++,qn>1?(e={maximumAge:6e5,timeout:0},Zn=!0):(e=this.options.positionOptions,Zn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},e.Hash=Ti,e.ImageSource=Q,e.KeyboardHandler=cn,e.LngLatBounds=G,e.LogoControl=En,e.Map=class extends In{constructor(e){t.bf.mark(t.bg.create);const r=Object.assign(Object.assign({},Ln),e);if(null!=r.minZoom&&null!=r.maxZoom&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=r.minPitch&&null!=r.maxPitch&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=r.minPitch&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=r.maxPitch&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Si(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new An,this._controls=[],this._mapId=t.a4(),this._contextLost=e=>{e.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new t.k("webglcontextlost",{originalEvent:e}))},this._contextRestored=e=>{this._setupPainter(),this.resize(),this._update(),this.fire(new t.k("webglcontextrestored",{originalEvent:e}))},this._onMapScroll=e=>{if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=!0===r.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=!0===r.preserveDrawingBuffer,this._antialias=!0===r.antialias,this._trackResize=!0===r.trackResize,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=!0===r.refreshExpiredTiles,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=!0===r.crossSourceCollisions,this._collectResourceTiming=!0===r.collectResourceTiming,this._locale=Object.assign(Object.assign({},Dn),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===r.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=p.addThrottleControl((()=>this.isMoving())),this._requestManager=new f(r.transformRequest),"string"==typeof r.container){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let e=!1;const t=Ii((e=>{this._trackResize&&!this._removed&&(this.resize(e),this.redraw())}),50);this._resizeObserver=new ResizeObserver((r=>{e?t(r):e=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Sn(this,r),this._hash=r.hash&&new Ti("string"==typeof r.hash&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,t.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new kn("boolean"==typeof r.attributionControl?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new En,r.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(e=>{this._update("style"===e.dataType),this.fire(new t.k(`${e.dataType}data`,e))})),this.on("dataloading",(e=>{this.fire(new t.k(`${e.dataType}dataloading`,e))})),this.on("dataabort",(e=>{this.fire(new t.k("sourcedataabort",e))}))}_getMapId(){return this._mapId}addControl(e,r){if(void 0===r&&(r=e.getDefaultPosition?e.getDefaultPosition():"top-right"),!e||!e.onAdd)return this.fire(new t.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=e.onAdd(this);this._controls.push(e);const n=this._controlPositions[r];return-1!==r.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this}removeControl(e){if(!e||!e.onRemove)return this.fire(new t.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(e);return r>-1&&this._controls.splice(r,1),e.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}calculateCameraOptionsFromTo(e,t,r,i){return null==i&&this.terrain&&(i=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(e,t,r,i)}resize(e){var r;const i=this._containerDimensions(),n=i[0],o=i[1],a=this._getClampedPixelRatio(n,o);if(this._resizeCanvas(n,o,a),this.painter.resize(n,o,a),this.painter.overLimit()){const e=this.painter.context.gl;this._maxCanvasSize=[e.drawingBufferWidth,e.drawingBufferHeight];const t=this._getClampedPixelRatio(n,o);this._resizeCanvas(n,o,t),this.painter.resize(n,o,t)}this.transform.resize(n,o),null===(r=this._requestedCameraState)||void 0===r||r.resize(n,o);const s=!this._moving;return s&&(this.stop(),this.fire(new t.k("movestart",e)).fire(new t.k("move",e))),this.fire(new t.k("resize",e)),s&&this.fire(new t.k("moveend",e)),this}_getClampedPixelRatio(e,t){const{0:r,1:i}=this._maxCanvasSize,n=this.getPixelRatio(),o=e*n,a=t*n;return Math.min(o>r?r/o:1,a>i?i/a:1)*n}getPixelRatio(){var e;return null!==(e=this._overridePixelRatio)&&void 0!==e?e:devicePixelRatio}setPixelRatio(e){this._overridePixelRatio=e,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(G.convert(e)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?60:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(e){return this.transform.locationPoint(t.N.convert(e),this.style&&this.terrain)}unproject(e){return this.transform.pointLocation(t.P.convert(e),this.terrain)}isMoving(){var e;return this._moving||(null===(e=this.handlers)||void 0===e?void 0:e.isMoving())}isZooming(){var e;return this._zooming||(null===(e=this.handlers)||void 0===e?void 0:e.isZooming())}isRotating(){var e;return this._rotating||(null===(e=this.handlers)||void 0===e?void 0:e.isRotating())}_createDelegatedListener(e,t,r){if("mouseenter"===e||"mouseover"===e){let i=!1;const n=n=>{const o=t.filter((e=>this.getLayer(e))),a=0!==o.length?this.queryRenderedFeatures(n.point,{layers:o}):[];a.length?i||(i=!0,r.call(this,new Bi(e,this,n.originalEvent,{features:a}))):i=!1};return{layers:t,listener:r,delegates:{mousemove:n,mouseout:()=>{i=!1}}}}if("mouseleave"===e||"mouseout"===e){let i=!1;const n=n=>{const o=t.filter((e=>this.getLayer(e)));(0!==o.length?this.queryRenderedFeatures(n.point,{layers:o}):[]).length?i=!0:i&&(i=!1,r.call(this,new Bi(e,this,n.originalEvent)))},o=t=>{i&&(i=!1,r.call(this,new Bi(e,this,t.originalEvent)))};return{layers:t,listener:r,delegates:{mousemove:n,mouseout:o}}}{const i=e=>{const i=t.filter((e=>this.getLayer(e))),n=0!==i.length?this.queryRenderedFeatures(e.point,{layers:i}):[];n.length&&(e.features=n,r.call(this,e),delete e.features)};return{layers:t,listener:r,delegates:{[e]:i}}}}_saveDelegatedListener(e,t){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(t)}_removeDelegatedListener(e,t,r){if(!this._delegatedListeners||!this._delegatedListeners[e])return;const i=this._delegatedListeners[e];for(let n=0;n<i.length;n++){const e=i[n];if(e.listener===r&&e.layers.length===t.length&&e.layers.every((e=>t.includes(e)))){for(const t in e.delegates)this.off(t,e.delegates[t]);return void i.splice(n,1)}}}on(e,t,r){if(void 0===r)return super.on(e,t);const i=this._createDelegatedListener(e,"string"==typeof t?[t]:t,r);this._saveDelegatedListener(e,i);for(const n in i.delegates)this.on(n,i.delegates[n]);return this}once(e,t,r){var i=this;if(void 0===r)return super.once(e,t);const n="string"==typeof t?[t]:t,o=this._createDelegatedListener(e,n,r);for(const a in o.delegates){const t=o.delegates[a];o.delegates[a]=function(){i._removeDelegatedListener(e,n,r),t(...arguments)}}this._saveDelegatedListener(e,o);for(const a in o.delegates)this.once(a,o.delegates[a]);return this}off(e,t,r){return void 0===r?super.off(e,t):(this._removeDelegatedListener(e,"string"==typeof t?[t]:t,r),this)}queryRenderedFeatures(e,r){if(!this.style)return[];let i;const n=e instanceof t.P||Array.isArray(e),o=n?e:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(n?{}:e)||{},o instanceof t.P||"number"==typeof o[0])i=[t.P.convert(o)];else{const e=t.P.convert(o[0]),r=t.P.convert(o[1]);i=[e,new t.P(r.x,e.y),r,new t.P(e.x,r.y),e]}return this.style.queryRenderedFeatures(i,r,this.transform)}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(e,r){return!1!==(r=t.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(e,r))}setTransformRequest(e){return this._requestManager.setTransformRequest(e),this}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(e,t)));const r=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!e)),e?(this.style=new ht(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e,t,r):this.style.loadJSON(e,t,r),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ht(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(e,r){if("string"==typeof e){const i=this._requestManager.transformRequest(e,"Style");t.h(i,new AbortController).then((e=>{this._updateDiff(e.data,r)})).catch((e=>{e&&this.fire(new t.j(e))}))}else"object"==typeof e&&this._updateDiff(e,r)}_updateDiff(e,r){try{this.style.setState(e,r)&&this._update(!0)}catch(i){t.w(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(e,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():t.w("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){const r=this.style&&this.style.sourceCaches[e];if(void 0!==r)return r.loaded();this.fire(new t.j(new Error(`There is no source with ID '${e}'`)))}setTerrain(e){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),e){const r=this.style.sourceCaches[e.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${e.source}`);null===this.terrain&&r.reload();for(const i in this.style._layers){const r=this.style._layers[i];"hillshade"===r.type&&r.source===e.source&&t.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Mn(this.painter,r,e),this.painter.renderToTexture=new Bn(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=t=>{"style"===t.dataType?this.terrain.sourceCache.freeRtt():"source"===t.dataType&&t.tile&&(t.sourceId!==e.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(t.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new t.k("terrain",{terrain:e})),this}getTerrain(){var e,t;return null!==(t=null===(e=this.terrain)||void 0===e?void 0:e.options)&&void 0!==t?t:null}areTilesLoaded(){const e=this.style&&this.style.sourceCaches;for(const t in e){const r=e[t]._tiles;for(const e in r){const t=r[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}removeSource(e){return this.style.removeSource(e),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{pixelRatio:n=1,sdf:a=!1,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:d}=i;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||t.b(r))){if(void 0===r.width||void 0===r.height)return this.fire(new t.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:i,height:o,data:h}=r,p=r;return this.style.addImage(e,{data:new t.R({width:i,height:o},new Uint8Array(h)),pixelRatio:n,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:d,sdf:a,version:0,userImage:p}),p.onAdd&&p.onAdd(this,e),this}}{const{width:i,height:h,data:p}=o.getImageData(r);this.style.addImage(e,{data:new t.R({width:i,height:h},p),pixelRatio:n,stretchX:s,stretchY:l,content:c,textFitWidth:u,textFitHeight:d,sdf:a,version:0})}}updateImage(e,r){const i=this.style.getImage(e);if(!i)return this.fire(new t.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const n=r instanceof HTMLImageElement||t.b(r)?o.getImageData(r):r,{width:a,height:s,data:l}=n;if(void 0===a||void 0===s)return this.fire(new t.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==i.data.width||s!==i.data.height)return this.fire(new t.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const c=!(r instanceof HTMLImageElement||t.b(r));return i.data.replace(l,c),this.style.updateImage(e,i),this}getImage(e){return this.style.getImage(e)}hasImage(e){return e?!!this.style.getImage(e):(this.fire(new t.j(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(e){return p.getImage(this._requestManager.transformRequest(e,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(e,t,r){return this.style.setLayerZoomRange(e,t,r),this._update(!0)}setFilter(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,r),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,r,i),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,r,i),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setGlyphs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setGlyphs(e,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._lazyInitEmptyStyle(),this.style.addSprite(e,t,r,(e=>{e||this._update(!0)})),this}removeSprite(e){return this._lazyInitEmptyStyle(),this.style.removeSprite(e),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setSprite(e,t,(e=>{e||this._update(!0)})),this}setLight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setSky(e){return this._lazyInitEmptyStyle(),this.style.setSky(e),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_setupContainer(){const e=this._container;e.classList.add("maplibregl-map");const t=this._canvasContainer=a.create("div","maplibregl-canvas-container",e);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=a.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const r=this._containerDimensions(),i=this._getClampedPixelRatio(r[0],r[1]);this._resizeCanvas(r[0],r[1],i);const n=this._controlContainer=a.create("div","maplibregl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{o[e]=a.create("div",`maplibregl-ctrl-${e} `,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(e,t,r){this._canvas.width=Math.floor(r*e),this._canvas.height=Math.floor(r*t),this._canvas.style.width=`${e}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const e={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",(r=>{t={requestedAttributes:e},r&&(t.statusMessage=r.statusMessage,t.type=r.type)}),{once:!0});const r=this._canvas.getContext("webgl2",e)||this._canvas.getContext("webgl",e);if(!r){const e="Failed to initialize WebGL";throw t?(t.message=e,new Error(JSON.stringify(t))):new Error(e)}this.painter=new _i(r,this.transform),s.testSupport(r)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(e),this._removed)return;let i=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const e=this.transform.zoom,n=o.now();this.style.zoomHistory.update(e,n);const a=new t.z(e,{now:n,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=a.crossFadingFactor();1===s&&s===this._crossFadingFactor||(i=!0,this._crossFadingFactor=s),this.style.update(a)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new t.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,t.bf.mark(t.bg.load),this.fire(new t.k("load"))),this.style&&(this.style.hasTransitions()||i)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const n=this._sourcesDirty||this._styleDirty||this._placementDirty;return n||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new t.k("idle")),!this._loaded||this._fullyLoaded||n||(this._fullyLoaded=!0,t.bf.mark(t.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var e;this._hash&&this._hash.remove();for(const t of this._controls)t.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),p.removeThrottleControl(this._imageQueueHandle),null===(e=this._resizeObserver)||void 0===e||e.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==r?void 0:r.loseContext)&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),a.remove(this._canvasContainer),a.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),t.bf.clearMetrics(),this._removed=!0,this.fire(new t.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,o.frameAsync(this._frameRequest).then((e=>{t.bf.frame(e),this._frameRequest=null,this._render(e)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get version(){return zn}getCameraTargetElevation(){return this.transform.elevation}},e.MapMouseEvent=Bi,e.MapTouchEvent=Di,e.MapWheelEvent=zi,e.Marker=Hn,e.NavigationControl=class{constructor(e){this._updateZoomButtons=()=>{const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),r=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,t)=>{const r=this._map._getUIString(`NavigationControl.${t}`);e.title=r,e.setAttribute("aria-label",r)},this.options=t.e({},Nn,e),this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),a.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),a.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=a.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new jn(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const r=a.create("button",e,this._container);return r.type="button",r.addEventListener("click",t),r}},e.Popup=class extends t.E{constructor(e){super(),this.remove=()=>(this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new t.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var t;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=a.create("div","maplibregl-popup",this._map.getContainer()),this._tip=a.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const e of this.options.className.split(" "))this._container.classList.add(e);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Vn(this._lngLat,this._flatPos,this._map.transform):null===(t=this._lngLat)||void 0===t?void 0:t.wrap(),this._trackPointer&&!e)return;const r=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let i=this.options.anchor;const n=eo(this.options.offset);if(!i){const e=this._container.offsetWidth,t=this._container.offsetHeight;let o;o=r.y+n.bottom.y<t?["top"]:r.y>this._map.transform.height-t?["bottom"]:[],r.x<e/2?o.push("left"):r.x>this._map.transform.width-e/2&&o.push("right"),i=0===o.length?"bottom":o.join("-")}let o=r.add(n[i]);this.options.subpixelPositioning||(o=o.round()),a.setTransform(this._container,`${$n[i]} translate(${o.x}px,${o.y}px)`),Wn(this._container,i,"popup")},this._onClose=()=>{this.remove()},this.options=t.e(Object.create(Jn),e)}addTo(e){return this._map&&this.remove(),this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new t.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=t.N.convert(e),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),r=document.createElement("body");let i;for(r.innerHTML=e;i=r.firstChild,i;)t.appendChild(i);return this.setDOMContent(t)}getMaxWidth(){var e;return null===(e=this._container)||void 0===e?void 0:e.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=a.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){return this._container&&this._container.classList.add(e),this}removeClassName(e){return this._container&&this._container.classList.remove(e),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}setSubpixelPositioning(e){this.options.subpixelPositioning=e}_createCloseButton(){this.options.closeButton&&(this._closeButton=a.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Qn);e&&e.focus()}},e.RasterDEMTileSource=Y,e.RasterTileSource=X,e.ScaleControl=class{constructor(e){this._onMove=()=>{Yn(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,Yn(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Xn),e)}getDefaultPosition(){return"bottom-left"}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},e.ScrollZoomHandler=hn,e.Style=ht,e.TerrainControl=class{constructor(e){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=e}onAdd(e){return this._map=e,this._container=a.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=a.create("button","maplibregl-ctrl-terrain",this._container),a.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},e.TwoFingersTouchPitchHandler=sn,e.TwoFingersTouchRotateHandler=on,e.TwoFingersTouchZoomHandler=rn,e.TwoFingersTouchZoomRotateHandler=_n,e.VectorTileSource=Z,e.VideoSource=ee,e.addSourceType=(e,r)=>t._(void 0,void 0,void 0,(function*(){if(ie(e))throw new Error(`A source type called "${e}" already exists.`);((e,t)=>{re[e]=t})(e,r)})),e.clearPrewarmedResources=function(){const e=L;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(B),L=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.getMaxParallelImageRequests=function(){return t.a.MAX_PARALLEL_IMAGE_REQUESTS},e.getRTLTextPluginStatus=function(){return se().getRTLTextPluginStatus()},e.getVersion=function(){return to},e.getWorkerCount=function(){return D.workerCount},e.getWorkerUrl=function(){return t.a.WORKER_URL},e.importScriptInWorkers=function(e){return U().broadcast("IS",e)},e.prewarm=function(){N().acquire(B)},e.setMaxParallelImageRequests=function(e){t.a.MAX_PARALLEL_IMAGE_REQUESTS=e},e.setRTLTextPlugin=function(e,t){return se().setRTLTextPlugin(e,t)},e.setWorkerCount=function(e){D.workerCount=e},e.setWorkerUrl=function(e){t.a.WORKER_URL=e}})),e}()},6326:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__addDisposableResource:()=>D,__assign:()=>o,__asyncDelegator:()=>T,__asyncGenerator:()=>I,__asyncValues:()=>k,__await:()=>S,__awaiter:()=>f,__classPrivateFieldGet:()=>O,__classPrivateFieldIn:()=>B,__classPrivateFieldSet:()=>R,__createBinding:()=>g,__decorate:()=>s,__disposeResources:()=>L,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>n,__generator:()=>m,__importDefault:()=>M,__importStar:()=>C,__makeTemplateObject:()=>E,__metadata:()=>p,__param:()=>l,__propKey:()=>d,__read:()=>b,__rest:()=>a,__rewriteRelativeImportExtension:()=>F,__runInitializers:()=>u,__setFunctionName:()=>h,__spread:()=>v,__spreadArray:()=>w,__spreadArrays:()=>x,__values:()=>_,default:()=>N});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},i(e,t)};function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};function a(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}function s(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,i){t(r,i,e)}}function c(e,t,r,i,n,o){function a(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var s,l=i.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?i.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,r[p])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(d.get=s),(s=a(g.set))&&(d.set=s),(s=a(g.init))&&n.unshift(s)}else(s=a(g))&&("field"===l?n.unshift(s):d[c]=s)}u&&Object.defineProperty(u,i.name,d),h=!0}function u(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0}function d(e){return"symbol"===typeof e?e:"".concat(e)}function h(e,t,r){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function p(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,r,i){return new(r||(r=Promise))((function(n,o){function a(e){try{l(i.next(e))}catch(t){o(t)}}function s(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){e.done?n(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function m(e,t){var r,i,n,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},a=Object.create(("function"===typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(r=1,i&&(n=2&s[0]?i.return:s[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,s[1])).done)return n;switch(i=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(l){s=[6,l],i=0}finally{r=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var g=Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function y(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||g(t,e,r)}function _(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)a.push(i.value)}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function x(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,n++)i[n]=o[a];return i}function w(e,t,r){if(r||2===arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function S(e){return this instanceof S?(this.v=e,this):new S(e)}function I(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),o=[];return i=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){n[e]&&(i[e]=function(t){return new Promise((function(r,i){o.push([e,t,r,i])>1||s(e,t)}))},t&&(i[e]=t(i[e])))}function s(e,t){try{(r=n[e](t)).value instanceof S?Promise.resolve(r.value.v).then(l,c):u(o[0][2],r)}catch(i){u(o[0][3],i)}var r}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function T(e){var t,r;return t={},i("next"),i("throw",(function(e){throw e})),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:S(e[i](t)),done:!1}:n?n(t):t}:n}}function k(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=_(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){(function(e,t,r,i){Promise.resolve(i).then((function(t){e({value:t,done:r})}),t)})(i,n,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var A=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},P=function(e){return P=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t},P(e)};function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=P(e),i=0;i<r.length;i++)"default"!==r[i]&&g(t,e,r[i]);return A(t,e),t}function M(e){return e&&e.__esModule?e:{default:e}}function O(e,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function R(e,t,r,i,n){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}function B(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function D(e,t,r){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var i,n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(n=i)}if("function"!==typeof i)throw new TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var z="function"===typeof SuppressedError?SuppressedError:function(e,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function L(e){function t(t){e.error=e.hasError?new z(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,i=0;return function n(){for(;r=e.stack.pop();)try{if(!r.async&&1===i)return i=0,e.stack.push(r),Promise.resolve().then(n);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(o).then(n,(function(e){return t(e),n()}))}else i|=1}catch(a){t(a)}if(1===i)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function F(e,t){return"string"===typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,(function(e,r,i,n,o){return r?t?".jsx":".js":!i||n&&o?i+n+"."+o.toLowerCase()+"js":e})):e}const N={__extends:n,__assign:o,__rest:a,__decorate:s,__param:l,__esDecorate:c,__runInitializers:u,__propKey:d,__setFunctionName:h,__metadata:p,__awaiter:f,__generator:m,__createBinding:g,__exportStar:y,__values:_,__read:b,__spread:v,__spreadArrays:x,__spreadArray:w,__await:S,__asyncGenerator:I,__asyncDelegator:T,__asyncValues:k,__makeTemplateObject:E,__importStar:C,__importDefault:M,__classPrivateFieldGet:O,__classPrivateFieldSet:R,__classPrivateFieldIn:B,__addDisposableResource:D,__disposeResources:L,__rewriteRelativeImportExtension:F}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,r),o.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"===typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"===typeof i.then)return i}var o=Object.create(null);r.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&n&&i;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>i[e]));return a.default=()=>i,r.d(o,a),o}})(),r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>"static/js/"+e+".8a2d6927.chunk.js",r.miniCssF=e=>{},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="spatial-access-measures:";r.l=(i,n,o,a)=>{if(e[i])e[i].push(n);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=i),e[i]=[n];var h=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var n=e[i];if(delete e[i],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((e=>e(r))),t)return t(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/spatial-access-measures/",(()=>{var e={792:0};r.f.j=(t,i)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var o=new Promise(((r,i)=>n=e[t]=[r,i]));i.push(n[2]=o);var a=r.p+r.u(t),s=new Error;r.l(a,(i=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}}),"chunk-"+t,t)}};var t=(t,i)=>{var n,o,a=i[0],s=i[1],l=i[2],c=0;if(a.some((t=>0!==e[t]))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(l)l(r)}for(t&&t(i);c<a.length;c++)o=a[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkspatial_access_measures=self.webpackChunkspatial_access_measures||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e=r(5043),t=r.t(e,2),i=r(4391),n=r(4066),o=r.n(n);function a(e,t,r){if(null!==e)for(var i,n,o,s,l,c,u,d,h=0,p=0,f=e.type,m="FeatureCollection"===f,g="Feature"===f,y=m?e.features.length:1,_=0;_<y;_++){l=(d=!!(u=m?e.features[_].geometry:g?e.geometry:e)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var b=0;b<l;b++){var v=0,x=0;if(null!==(s=d?u.geometries[b]:u)){c=s.coordinates;var w=s.type;switch(h=!r||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===t(c,p,_,v,x))return!1;p++,v++;break;case"LineString":case"MultiPoint":for(i=0;i<c.length;i++){if(!1===t(c[i],p,_,v,x))return!1;p++,"MultiPoint"===w&&v++}"LineString"===w&&v++;break;case"Polygon":case"MultiLineString":for(i=0;i<c.length;i++){for(n=0;n<c[i].length-h;n++){if(!1===t(c[i][n],p,_,v,x))return!1;p++}"MultiLineString"===w&&v++,"Polygon"===w&&x++}"Polygon"===w&&v++;break;case"MultiPolygon":for(i=0;i<c.length;i++){for(x=0,n=0;n<c[i].length;n++){for(o=0;o<c[i][n].length-h;o++){if(!1===t(c[i][n][o],p,_,v,x))return!1;p++}x++}v++}break;case"GeometryCollection":for(i=0;i<s.geometries.length;i++)if(!1===a(s.geometries[i],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!=e.bbox&&!0!==t.recompute)return e.bbox;const r=[1/0,1/0,-1/0,-1/0];return a(e,(e=>{r[0]>e[0]&&(r[0]=e[0]),r[1]>e[1]&&(r[1]=e[1]),r[2]<e[0]&&(r[2]=e[0]),r[3]<e[1]&&(r[3]=e[1])})),r}function l(){}function c(e){return null==e?l:function(){return this.querySelector(e)}}function u(){return[]}function d(e){return null==e?u:function(){return this.querySelectorAll(e)}}function h(e){return function(){return function(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}(e.apply(this,arguments))}}function p(e){return function(){return this.matches(e)}}function f(e){return function(t){return t.matches(e)}}var m=Array.prototype.find;function g(){return this.firstElementChild}var y=Array.prototype.filter;function _(){return Array.from(this.children)}function b(e){return new Array(e.length)}function v(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function x(e,t,r,i,n,o){for(var a,s=0,l=t.length,c=o.length;s<c;++s)(a=t[s])?(a.__data__=o[s],i[s]=a):r[s]=new v(e,o[s]);for(;s<l;++s)(a=t[s])&&(n[s]=a)}function w(e,t,r,i,n,o,a){var s,l,c,u=new Map,d=t.length,h=o.length,p=new Array(d);for(s=0;s<d;++s)(l=t[s])&&(p[s]=c=a.call(l,l.__data__,s,t)+"",u.has(c)?n[s]=l:u.set(c,l));for(s=0;s<h;++s)c=a.call(e,o[s],s,o)+"",(l=u.get(c))?(i[s]=l,l.__data__=o[s],u.delete(c)):r[s]=new v(e,o[s]);for(s=0;s<d;++s)(l=t[s])&&u.get(p[s])===l&&(n[s]=l)}function S(e){return e.__data__}function I(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function T(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}v.prototype={constructor:v,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var k="http://www.w3.org/1999/xhtml";const E={svg:"http://www.w3.org/2000/svg",xhtml:k,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function A(e){var t=e+="",r=t.indexOf(":");return r>=0&&"xmlns"!==(t=e.slice(0,r))&&(e=e.slice(r+1)),E.hasOwnProperty(t)?{space:E[t],local:e}:e}function P(e){return function(){this.removeAttribute(e)}}function C(e){return function(){this.removeAttributeNS(e.space,e.local)}}function M(e,t){return function(){this.setAttribute(e,t)}}function O(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function R(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}function B(e,t){return function(){var r=t.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function D(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function z(e){return function(){this.style.removeProperty(e)}}function L(e,t,r){return function(){this.style.setProperty(e,t,r)}}function F(e,t,r){return function(){var i=t.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function N(e,t){return e.style.getPropertyValue(t)||D(e).getComputedStyle(e,null).getPropertyValue(t)}function j(e){return function(){delete this[e]}}function U(e,t){return function(){this[e]=t}}function V(e,t){return function(){var r=t.apply(this,arguments);null==r?delete this[e]:this[e]=r}}function $(e){return e.trim().split(/^|\s+/)}function W(e){return e.classList||new H(e)}function H(e){this._node=e,this._names=$(e.getAttribute("class")||"")}function G(e,t){for(var r=W(e),i=-1,n=t.length;++i<n;)r.add(t[i])}function q(e,t){for(var r=W(e),i=-1,n=t.length;++i<n;)r.remove(t[i])}function Z(e){return function(){G(this,e)}}function X(e){return function(){q(this,e)}}function Y(e,t){return function(){(t.apply(this,arguments)?G:q)(this,e)}}function K(){this.textContent=""}function J(e){return function(){this.textContent=e}}function Q(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ee(){this.innerHTML=""}function te(e){return function(){this.innerHTML=e}}function re(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function ie(){this.nextSibling&&this.parentNode.appendChild(this)}function ne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function oe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===k&&t.documentElement.namespaceURI===k?t.createElement(e):t.createElementNS(r,e)}}function ae(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function se(e){var t=A(e);return(t.local?ae:oe)(t)}function le(){return null}function ce(){var e=this.parentNode;e&&e.removeChild(this)}function ue(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function de(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function he(e){return function(){var t=this.__on;if(t){for(var r,i=0,n=-1,o=t.length;i<o;++i)r=t[i],e.type&&r.type!==e.type||r.name!==e.name?t[++n]=r:this.removeEventListener(r.type,r.listener,r.options);++n?t.length=n:delete this.__on}}}function pe(e,t,r){return function(){var i,n=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(n)for(var a=0,s=n.length;a<s;++a)if((i=n[a]).type===e.type&&i.name===e.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=r),void(i.value=t);this.addEventListener(e.type,o,r),i={type:e.type,name:e.name,value:t,listener:o,options:r},n?n.push(i):this.__on=[i]}}function fe(e,t,r){var i=D(e),n=i.CustomEvent;"function"===typeof n?n=new n(t,r):(n=i.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function me(e,t){return function(){return fe(this,e,t)}}function ge(e,t){return function(){return fe(this,e,t.apply(this,arguments))}}H.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var ye=[null];function _e(e,t){this._groups=e,this._parents=t}function be(){return new _e([[document.documentElement]],ye)}_e.prototype=be.prototype={constructor:_e,select:function(e){"function"!==typeof e&&(e=c(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var o,a,s=t[n],l=s.length,u=i[n]=new Array(l),d=0;d<l;++d)(o=s[d])&&(a=e.call(o,o.__data__,d,s))&&("__data__"in o&&(a.__data__=o.__data__),u[d]=a);return new _e(i,this._parents)},selectAll:function(e){e="function"===typeof e?h(e):d(e);for(var t=this._groups,r=t.length,i=[],n=[],o=0;o<r;++o)for(var a,s=t[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(i.push(e.call(a,a.__data__,c,s)),n.push(a));return new _e(i,n)},selectChild:function(e){return this.select(null==e?g:function(e){return function(){return m.call(this.children,e)}}("function"===typeof e?e:f(e)))},selectChildren:function(e){return this.selectAll(null==e?_:function(e){return function(){return y.call(this.children,e)}}("function"===typeof e?e:f(e)))},filter:function(e){"function"!==typeof e&&(e=p(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var o,a=t[n],s=a.length,l=i[n]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new _e(i,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,S);var r=t?w:x,i=this._parents,n=this._groups;"function"!==typeof e&&(e=function(e){return function(){return e}}(e));for(var o=n.length,a=new Array(o),s=new Array(o),l=new Array(o),c=0;c<o;++c){var u=i[c],d=n[c],h=d.length,p=I(e.call(u,u&&u.__data__,c,i)),f=p.length,m=s[c]=new Array(f),g=a[c]=new Array(f);r(u,d,m,g,l[c]=new Array(h),p,t);for(var y,_,b=0,v=0;b<f;++b)if(y=m[b]){for(b>=v&&(v=b+1);!(_=g[v])&&++v<f;);y._next=_||null}}return(a=new _e(a,i))._enter=s,a._exit=l,a},enter:function(){return new _e(this._enter||this._groups.map(b),this._parents)},exit:function(){return new _e(this._exit||this._groups.map(b),this._parents)},join:function(e,t,r){var i=this.enter(),n=this,o=this.exit();return"function"===typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=t&&(n=t(n))&&(n=n.selection()),null==r?o.remove():r(o),i&&n?i.merge(n).order():n},merge:function(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,n=r.length,o=i.length,a=Math.min(n,o),s=new Array(n),l=0;l<a;++l)for(var c,u=r[l],d=i[l],h=u.length,p=s[l]=new Array(h),f=0;f<h;++f)(c=u[f]||d[f])&&(p[f]=c);for(;l<n;++l)s[l]=r[l];return new _e(s,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i,n=e[t],o=n.length-1,a=n[o];--o>=0;)(i=n[o])&&(a&&4^i.compareDocumentPosition(a)&&a.parentNode.insertBefore(i,a),a=i);return this},sort:function(e){function t(t,r){return t&&r?e(t.__data__,r.__data__):!t-!r}e||(e=T);for(var r=this._groups,i=r.length,n=new Array(i),o=0;o<i;++o){for(var a,s=r[o],l=s.length,c=n[o]=new Array(l),u=0;u<l;++u)(a=s[u])&&(c[u]=a);c.sort(t)}return new _e(n,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],n=0,o=i.length;n<o;++n){var a=i[n];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var n,o=t[r],a=0,s=o.length;a<s;++a)(n=o[a])&&e.call(n,n.__data__,a,o);return this},attr:function(e,t){var r=A(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==t?r.local?C:P:"function"===typeof t?r.local?B:R:r.local?O:M)(r,t))},style:function(e,t,r){return arguments.length>1?this.each((null==t?z:"function"===typeof t?F:L)(e,t,null==r?"":r)):N(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?j:"function"===typeof t?V:U)(e,t)):this.node()[e]},classed:function(e,t){var r=$(e+"");if(arguments.length<2){for(var i=W(this.node()),n=-1,o=r.length;++n<o;)if(!i.contains(r[n]))return!1;return!0}return this.each(("function"===typeof t?Y:t?Z:X)(r,t))},text:function(e){return arguments.length?this.each(null==e?K:("function"===typeof e?Q:J)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ee:("function"===typeof e?re:te)(e)):this.node().innerHTML},raise:function(){return this.each(ie)},lower:function(){return this.each(ne)},append:function(e){var t="function"===typeof e?e:se(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var r="function"===typeof e?e:se(e),i=null==t?le:"function"===typeof t?t:c(t);return this.select((function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)}))},remove:function(){return this.each(ce)},clone:function(e){return this.select(e?de:ue)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,r){var i,n,o=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",r=e.indexOf(".");return r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),{type:e,name:t}}))}(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?pe:he,i=0;i<a;++i)this.each(s(o[i],t,r));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(i=0,l=s[c];i<a;++i)if((n=o[i]).type===l.type&&n.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"===typeof t?ge:me)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i,n=e[t],o=0,a=n.length;o<a;++o)(i=n[o])&&(yield i)}};const ve=be;var xe={value:()=>{}};function we(){for(var e,t=0,r=arguments.length,i={};t<r;++t){if(!(e=arguments[t]+"")||e in i||/[\s.]/.test(e))throw new Error("illegal type: "+e);i[e]=[]}return new Se(i)}function Se(e){this._=e}function Ie(e,t){for(var r,i=0,n=e.length;i<n;++i)if((r=e[i]).name===t)return r.value}function Te(e,t,r){for(var i=0,n=e.length;i<n;++i)if(e[i].name===t){e[i]=xe,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=r&&e.push({name:t,value:r}),e}Se.prototype=we.prototype={constructor:Se,on:function(e,t){var r,i,n=this._,o=(i=n,(e+"").trim().split(/^|\s+/).map((function(e){var t="",r=e.indexOf(".");if(r>=0&&(t=e.slice(r+1),e=e.slice(0,r)),e&&!i.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=o[a]).type)n[r]=Te(n[r],e.name,t);else if(null==t)for(r in n)n[r]=Te(n[r],e.name,null);return this}for(;++a<s;)if((r=(e=o[a]).type)&&(r=Ie(n[r],e.name)))return r},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Se(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var r,i,n=new Array(r),o=0;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,r=(i=this._[e]).length;o<r;++o)i[o].value.apply(t,n)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],n=0,o=i.length;n<o;++n)i[n].value.apply(t,r)}};const ke=we;var Ee,Ae,Pe=0,Ce=0,Me=0,Oe=0,Re=0,Be=0,De="object"===typeof performance&&performance.now?performance:Date,ze="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Le(){return Re||(ze(Fe),Re=De.now()+Be)}function Fe(){Re=0}function Ne(){this._call=this._time=this._next=null}function je(e,t,r){var i=new Ne;return i.restart(e,t,r),i}function Ue(){Re=(Oe=De.now())+Be,Pe=Ce=0;try{!function(){Le(),++Pe;for(var e,t=Ee;t;)(e=Re-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Pe}()}finally{Pe=0,function(){var e,t,r=Ee,i=1/0;for(;r;)r._call?(i>r._time&&(i=r._time),e=r,r=r._next):(t=r._next,r._next=null,r=e?e._next=t:Ee=t);Ae=e,$e(i)}(),Re=0}}function Ve(){var e=De.now(),t=e-Oe;t>1e3&&(Be-=t,Oe=e)}function $e(e){Pe||(Ce&&(Ce=clearTimeout(Ce)),e-Re>24?(e<1/0&&(Ce=setTimeout(Ue,e-De.now()-Be)),Me&&(Me=clearInterval(Me))):(Me||(Oe=De.now(),Me=setInterval(Ve,1e3)),Pe=1,ze(Ue)))}function We(e,t,r){var i=new Ne;return t=null==t?0:+t,i.restart((r=>{i.stop(),e(r+t)}),t,r),i}Ne.prototype=je.prototype={constructor:Ne,restart:function(e,t,r){if("function"!==typeof e)throw new TypeError("callback is not a function");r=(null==r?Le():+r)+(null==t?0:+t),this._next||Ae===this||(Ae?Ae._next=this:Ee=this,Ae=this),this._call=e,this._time=r,$e()},stop:function(){this._call&&(this._call=null,this._time=1/0,$e())}};var He=ke("start","end","cancel","interrupt"),Ge=[];function qe(e,t,r,i,n,o){var a=e.__transition;if(a){if(r in a)return}else e.__transition={};!function(e,t,r){var i,n=e.__transition;function o(e){r.state=1,r.timer.restart(a,r.delay,r.time),r.delay<=e&&a(e-r.delay)}function a(o){var c,u,d,h;if(1!==r.state)return l();for(c in n)if((h=n[c]).name===r.name){if(3===h.state)return We(a);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[c]):+c<t&&(h.state=6,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[c])}if(We((function(){3===r.state&&(r.state=4,r.timer.restart(s,r.delay,r.time),s(o))})),r.state=2,r.on.call("start",e,e.__data__,r.index,r.group),2===r.state){for(r.state=3,i=new Array(d=r.tween.length),c=0,u=-1;c<d;++c)(h=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(i[++u]=h);i.length=u+1}}function s(t){for(var n=t<r.duration?r.ease.call(null,t/r.duration):(r.timer.restart(l),r.state=5,1),o=-1,a=i.length;++o<a;)i[o].call(e,n);5===r.state&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){for(var i in r.state=6,r.timer.stop(),delete n[t],n)return;delete e.__transition}n[t]=r,r.timer=je(o,0,r.time)}(e,r,{name:t,index:i,group:n,on:He,tween:Ge,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ze(e,t){var r=Ye(e,t);if(r.state>0)throw new Error("too late; already scheduled");return r}function Xe(e,t){var r=Ye(e,t);if(r.state>3)throw new Error("too late; already running");return r}function Ye(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Ke(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Je,Qe=180/Math.PI,et={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function tt(e,t,r,i,n,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(s=Math.sqrt(r*r+i*i))&&(r/=s,i/=s,l/=s),e*i<t*r&&(e=-e,t=-t,l=-l,a=-a),{translateX:n,translateY:o,rotate:Math.atan2(t,e)*Qe,skewX:Math.atan(l)*Qe,scaleX:a,scaleY:s}}function rt(e,t,r,i){function n(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,i,n,o,a,s){if(e!==n||i!==o){var l=a.push("translate(",null,t,null,r);s.push({i:l-4,x:Ke(e,n)},{i:l-2,x:Ke(i,o)})}else(n||o)&&a.push("translate("+n+t+o+r)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,r,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:r.push(n(r)+"rotate(",null,i)-2,x:Ke(e,t)})):t&&r.push(n(r)+"rotate("+t+i)}(o.rotate,a.rotate,s,l),function(e,t,r,o){e!==t?o.push({i:r.push(n(r)+"skewX(",null,i)-2,x:Ke(e,t)}):t&&r.push(n(r)+"skewX("+t+i)}(o.skewX,a.skewX,s,l),function(e,t,r,i,o,a){if(e!==r||t!==i){var s=o.push(n(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Ke(e,r)},{i:s-2,x:Ke(t,i)})}else 1===r&&1===i||o.push(n(o)+"scale("+r+","+i+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,r=-1,i=l.length;++r<i;)s[(t=l[r]).i]=t.x(e);return s.join("")}}}var it=rt((function(e){const t=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?et:tt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),nt=rt((function(e){return null==e?et:(Je||(Je=document.createElementNS("http://www.w3.org/2000/svg","g")),Je.setAttribute("transform",e),(e=Je.transform.baseVal.consolidate())?tt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):et)}),", ",")",")");function ot(e,t){var r,i;return function(){var n=Xe(this,e),o=n.tween;if(o!==r)for(var a=0,s=(i=r=o).length;a<s;++a)if(i[a].name===t){(i=i.slice()).splice(a,1);break}n.tween=i}}function at(e,t,r){var i,n;if("function"!==typeof r)throw new Error;return function(){var o=Xe(this,e),a=o.tween;if(a!==i){n=(i=a).slice();for(var s={name:t,value:r},l=0,c=n.length;l<c;++l)if(n[l].name===t){n[l]=s;break}l===c&&n.push(s)}o.tween=n}}function st(e,t,r){var i=e._id;return e.each((function(){var e=Xe(this,i);(e.value||(e.value={}))[t]=r.apply(this,arguments)})),function(e){return Ye(e,i).value[t]}}function lt(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ct(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function ut(){}var dt=.7,ht=1/dt,pt="\\s*([+-]?\\d+)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",gt=/^#([0-9a-f]{3,8})$/,yt=new RegExp(`^rgb\\(${pt},${pt},${pt}\\)$`),_t=new RegExp(`^rgb\\(${mt},${mt},${mt}\\)$`),bt=new RegExp(`^rgba\\(${pt},${pt},${pt},${ft}\\)$`),vt=new RegExp(`^rgba\\(${mt},${mt},${mt},${ft}\\)$`),xt=new RegExp(`^hsl\\(${ft},${mt},${mt}\\)$`),wt=new RegExp(`^hsla\\(${ft},${mt},${mt},${ft}\\)$`),St={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function It(){return this.rgb().formatHex()}function Tt(){return this.rgb().formatRgb()}function kt(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=gt.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?Et(t):3===r?new Ct(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?At(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?At(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=yt.exec(e))?new Ct(t[1],t[2],t[3],1):(t=_t.exec(e))?new Ct(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=bt.exec(e))?At(t[1],t[2],t[3],t[4]):(t=vt.exec(e))?At(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=xt.exec(e))?zt(t[1],t[2]/100,t[3]/100,1):(t=wt.exec(e))?zt(t[1],t[2]/100,t[3]/100,t[4]):St.hasOwnProperty(e)?Et(St[e]):"transparent"===e?new Ct(NaN,NaN,NaN,0):null}function Et(e){return new Ct(e>>16&255,e>>8&255,255&e,1)}function At(e,t,r,i){return i<=0&&(e=t=r=NaN),new Ct(e,t,r,i)}function Pt(e,t,r,i){return 1===arguments.length?((n=e)instanceof ut||(n=kt(n)),n?new Ct((n=n.rgb()).r,n.g,n.b,n.opacity):new Ct):new Ct(e,t,r,null==i?1:i);var n}function Ct(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function Mt(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}`}function Ot(){const e=Rt(this.opacity);return`${1===e?"rgb(":"rgba("}${Bt(this.r)}, ${Bt(this.g)}, ${Bt(this.b)}${1===e?")":`, ${e})`}`}function Rt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Bt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Dt(e){return((e=Bt(e))<16?"0":"")+e.toString(16)}function zt(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ft(e,t,r,i)}function Lt(e){if(e instanceof Ft)return new Ft(e.h,e.s,e.l,e.opacity);if(e instanceof ut||(e=kt(e)),!e)return new Ft;if(e instanceof Ft)return e;var t=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),o=Math.max(t,r,i),a=NaN,s=o-n,l=(o+n)/2;return s?(a=t===o?(r-i)/s+6*(r<i):r===o?(i-t)/s+2:(t-r)/s+4,s/=l<.5?o+n:2-o-n,a*=60):s=l>0&&l<1?0:a,new Ft(a,s,l,e.opacity)}function Ft(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function Nt(e){return(e=(e||0)%360)<0?e+360:e}function jt(e){return Math.max(0,Math.min(1,e||0))}function Ut(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function Vt(e,t,r,i,n){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*r+(1+3*e+3*o-3*a)*i+a*n)/6}lt(ut,kt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:It,formatHex:It,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Lt(this).formatHsl()},formatRgb:Tt,toString:Tt}),lt(Ct,Pt,ct(ut,{brighter(e){return e=null==e?ht:Math.pow(ht,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?dt:Math.pow(dt,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ct(Bt(this.r),Bt(this.g),Bt(this.b),Rt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mt,formatHex:Mt,formatHex8:function(){return`#${Dt(this.r)}${Dt(this.g)}${Dt(this.b)}${Dt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ot,toString:Ot})),lt(Ft,(function(e,t,r,i){return 1===arguments.length?Lt(e):new Ft(e,t,r,null==i?1:i)}),ct(ut,{brighter(e){return e=null==e?ht:Math.pow(ht,e),new Ft(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?dt:Math.pow(dt,e),new Ft(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new Ct(Ut(e>=240?e-240:e+120,n,i),Ut(e,n,i),Ut(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new Ft(Nt(this.h),jt(this.s),jt(this.l),Rt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rt(this.opacity);return`${1===e?"hsl(":"hsla("}${Nt(this.h)}, ${100*jt(this.s)}%, ${100*jt(this.l)}%${1===e?")":`, ${e})`}`}}));const $t=e=>()=>e;function Wt(e,t){return function(r){return e+r*t}}function Ht(e){return 1===(e=+e)?Gt:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}(t,r,e):$t(isNaN(t)?r:t)}}function Gt(e,t){var r=t-e;return r?Wt(e,r):$t(isNaN(e)?t:e)}const qt=function e(t){var r=Ht(t);function i(e,t){var i=r((e=Pt(e)).r,(t=Pt(t)).r),n=r(e.g,t.g),o=r(e.b,t.b),a=Gt(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=n(t),e.b=o(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);function Zt(e){return function(t){var r,i,n=t.length,o=new Array(n),a=new Array(n),s=new Array(n);for(r=0;r<n;++r)i=Pt(t[r]),o[r]=i.r||0,a[r]=i.g||0,s[r]=i.b||0;return o=e(o),a=e(a),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=a(e),i.b=s(e),i+""}}}var Xt=Zt((function(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],o=e[i+1],a=i>0?e[i-1]:2*n-o,s=i<t-1?e[i+2]:2*o-n;return Vt((r-i/t)*t,a,n,o,s)}})),Yt=(Zt((function(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return Vt((r-i/t)*t,n,o,a,s)}})),/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g),Kt=new RegExp(Yt.source,"g");function Jt(e,t){var r,i,n,o=Yt.lastIndex=Kt.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(r=Yt.exec(e))&&(i=Kt.exec(t));)(n=i.index)>o&&(n=t.slice(o,n),s[a]?s[a]+=n:s[++a]=n),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Ke(r,i)})),o=Kt.lastIndex;return o<t.length&&(n=t.slice(o),s[a]?s[a]+=n:s[++a]=n),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,i=0;i<t;++i)s[(r=l[i]).i]=r.x(e);return s.join("")})}function Qt(e,t){var r;return("number"===typeof t?Ke:t instanceof kt?qt:(r=kt(t))?(t=r,qt):Jt)(e,t)}function er(e){return function(){this.removeAttribute(e)}}function tr(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rr(e,t,r){var i,n,o=r+"";return function(){var a=this.getAttribute(e);return a===o?null:a===i?n:n=t(i=a,r)}}function ir(e,t,r){var i,n,o=r+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===i?n:n=t(i=a,r)}}function nr(e,t,r){var i,n,o;return function(){var a,s,l=r(this);if(null!=l)return(a=this.getAttribute(e))===(s=l+"")?null:a===i&&s===n?o:(n=s,o=t(i=a,l));this.removeAttribute(e)}}function or(e,t,r){var i,n,o;return function(){var a,s,l=r(this);if(null!=l)return(a=this.getAttributeNS(e.space,e.local))===(s=l+"")?null:a===i&&s===n?o:(n=s,o=t(i=a,l));this.removeAttributeNS(e.space,e.local)}}function ar(e,t){var r,i;function n(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&function(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}(e,n)),r}return n._value=t,n}function sr(e,t){var r,i;function n(){var n=t.apply(this,arguments);return n!==i&&(r=(i=n)&&function(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}(e,n)),r}return n._value=t,n}function lr(e,t){return function(){Ze(this,e).delay=+t.apply(this,arguments)}}function cr(e,t){return t=+t,function(){Ze(this,e).delay=t}}function ur(e,t){return function(){Xe(this,e).duration=+t.apply(this,arguments)}}function dr(e,t){return t=+t,function(){Xe(this,e).duration=t}}var hr=ve.prototype.constructor;function pr(e){return function(){this.style.removeProperty(e)}}var fr=0;function mr(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function gr(){return++fr}var yr=ve.prototype;mr.prototype=function(e){return ve().transition(e)}.prototype={constructor:mr,select:function(e){var t=this._name,r=this._id;"function"!==typeof e&&(e=c(e));for(var i=this._groups,n=i.length,o=new Array(n),a=0;a<n;++a)for(var s,l,u=i[a],d=u.length,h=o[a]=new Array(d),p=0;p<d;++p)(s=u[p])&&(l=e.call(s,s.__data__,p,u))&&("__data__"in s&&(l.__data__=s.__data__),h[p]=l,qe(h[p],t,r,p,h,Ye(s,r)));return new mr(o,this._parents,t,r)},selectAll:function(e){var t=this._name,r=this._id;"function"!==typeof e&&(e=d(e));for(var i=this._groups,n=i.length,o=[],a=[],s=0;s<n;++s)for(var l,c=i[s],u=c.length,h=0;h<u;++h)if(l=c[h]){for(var p,f=e.call(l,l.__data__,h,c),m=Ye(l,r),g=0,y=f.length;g<y;++g)(p=f[g])&&qe(p,t,r,g,f,m);o.push(f),a.push(l)}return new mr(o,a,t,r)},selectChild:yr.selectChild,selectChildren:yr.selectChildren,filter:function(e){"function"!==typeof e&&(e=p(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var o,a=t[n],s=a.length,l=i[n]=[],c=0;c<s;++c)(o=a[c])&&e.call(o,o.__data__,c,a)&&l.push(o);return new mr(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,n=r.length,o=Math.min(i,n),a=new Array(i),s=0;s<o;++s)for(var l,c=t[s],u=r[s],d=c.length,h=a[s]=new Array(d),p=0;p<d;++p)(l=c[p]||u[p])&&(h[p]=l);for(;s<i;++s)a[s]=t[s];return new mr(a,this._parents,this._name,this._id)},selection:function(){return new hr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,r=gr(),i=this._groups,n=i.length,o=0;o<n;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var u=Ye(a,t);qe(a,e,r,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new mr(i,this._parents,e,r)},call:yr.call,nodes:yr.nodes,node:yr.node,size:yr.size,empty:yr.empty,each:yr.each,on:function(e,t){var r=this._id;return arguments.length<2?Ye(this.node(),r).on.on(e):this.each(function(e,t,r){var i,n,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Ze:Xe;return function(){var a=o(this,e),s=a.on;s!==i&&(n=(i=s).copy()).on(t,r),a.on=n}}(r,e,t))},attr:function(e,t){var r=A(e),i="transform"===r?nt:Qt;return this.attrTween(e,"function"===typeof t?(r.local?or:nr)(r,i,st(this,"attr."+e,t)):null==t?(r.local?tr:er)(r):(r.local?ir:rr)(r,i,t))},attrTween:function(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!==typeof t)throw new Error;var i=A(e);return this.tween(r,(i.local?ar:sr)(i,t))},style:function(e,t,r){var i="transform"===(e+="")?it:Qt;return null==t?this.styleTween(e,function(e,t){var r,i,n;return function(){var o=N(this,e),a=(this.style.removeProperty(e),N(this,e));return o===a?null:o===r&&a===i?n:n=t(r=o,i=a)}}(e,i)).on("end.style."+e,pr(e)):"function"===typeof t?this.styleTween(e,function(e,t,r){var i,n,o;return function(){var a=N(this,e),s=r(this),l=s+"";return null==s&&(this.style.removeProperty(e),l=s=N(this,e)),a===l?null:a===i&&l===n?o:(n=l,o=t(i=a,s))}}(e,i,st(this,"style."+e,t))).each(function(e,t){var r,i,n,o,a="style."+t,s="end."+a;return function(){var l=Xe(this,e),c=l.on,u=null==l.value[a]?o||(o=pr(t)):void 0;c===r&&n===u||(i=(r=c).copy()).on(s,n=u),l.on=i}}(this._id,e)):this.styleTween(e,function(e,t,r){var i,n,o=r+"";return function(){var a=N(this,e);return a===o?null:a===i?n:n=t(i=a,r)}}(e,i,t),r).on("end.style."+e,null)},styleTween:function(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==t)return this.tween(i,null);if("function"!==typeof t)throw new Error;return this.tween(i,function(e,t,r){var i,n;function o(){var o=t.apply(this,arguments);return o!==n&&(i=(n=o)&&function(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}(e,o,r)),i}return o._value=t,o}(e,t,null==r?"":r))},text:function(e){return this.tween("text","function"===typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(st(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!==typeof e)throw new Error;return this.tween(t,function(e){var t,r;function i(){var i=e.apply(this,arguments);return i!==r&&(t=(r=i)&&function(e){return function(t){this.textContent=e.call(this,t)}}(i)),t}return i._value=e,i}(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i,n=Ye(this.node(),r).tween,o=0,a=n.length;o<a;++o)if((i=n[o]).name===e)return i.value;return null}return this.each((null==t?ot:at)(r,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?lr:cr)(t,e)):Ye(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"===typeof e?ur:dr)(t,e)):Ye(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!==typeof t)throw new Error;return function(){Xe(this,e).ease=t}}(t,e)):Ye(this.node(),t).ease},easeVarying:function(e){if("function"!==typeof e)throw new Error;return this.each(function(e,t){return function(){var r=t.apply(this,arguments);if("function"!==typeof r)throw new Error;Xe(this,e).ease=r}}(this._id,e))},end:function(){var e,t,r=this,i=r._id,n=r.size();return new Promise((function(o,a){var s={value:a},l={value:function(){0===--n&&o()}};r.each((function(){var r=Xe(this,i),n=r.on;n!==e&&((t=(e=n).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),r.on=t})),0===n&&o()}))},[Symbol.iterator]:yr[Symbol.iterator]};var _r={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function br(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}ve.prototype.interrupt=function(e){return this.each((function(){!function(e,t){var r,i,n,o=e.__transition,a=!0;if(o){for(n in t=null==t?null:t+"",o)(r=o[n]).name===t?(i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete o[n]):a=!1;a&&delete e.__transition}}(this,e)}))},ve.prototype.transition=function(e){var t,r;e instanceof mr?(t=e._id,e=e._name):(t=gr(),(r=_r).time=Le(),e=null==e?null:e+"");for(var i=this._groups,n=i.length,o=0;o<n;++o)for(var a,s=i[o],l=s.length,c=0;c<l;++c)(a=s[c])&&qe(a,e,t,c,s,r||br(a,t));return new mr(i,this._parents,e,t)};const{abs:vr,max:xr,min:wr}=Math;function Sr(e){return[+e[0],+e[1]]}function Ir(e){return[Sr(e[0]),Sr(e[1])]}["w","e"].map(Tr),["n","s"].map(Tr),["n","w","e","s","nw","ne","sw","se"].map(Tr);function Tr(e){return{type:e}}function kr(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Er(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ar(e){let t,r,i;function n(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(n<o){if(0!==t(i,i))return o;do{const t=n+o>>>1;r(e[t],i)<0?n=t+1:o=t}while(n<o)}return n}return 2!==e.length?(t=kr,r=(t,r)=>kr(e(t),r),i=(t,r)=>e(t)-r):(t=e===kr||e===Er?e:Pr,r=e,i=e),{left:n,center:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=n(e,t,r,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>r&&i(e[o-1],t)>-i(e[o],t)?o-1:o},right:function(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(n<o){if(0!==t(i,i))return o;do{const t=n+o>>>1;r(e[t],i)<=0?n=t+1:o=t}while(n<o)}return n}}}function Pr(){return 0}const Cr=Ar(kr),Mr=Cr.right,Or=(Cr.left,Ar((function(e){return null===e?NaN:+e})).center,Mr),Rr=Math.sqrt(50),Br=Math.sqrt(10),Dr=Math.sqrt(2);function zr(e,t,r){const i=(t-e)/Math.max(0,r),n=Math.floor(Math.log10(i)),o=i/Math.pow(10,n),a=o>=Rr?10:o>=Br?5:o>=Dr?2:1;let s,l,c;return n<0?(c=Math.pow(10,-n)/a,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,n)*a,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=r&&r<2?zr(e,t,2*r):[s,l,c]}function Lr(e,t,r){return zr(e=+e,t=+t,r=+r)[2]}var Fr,Nr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function jr(e){if(!(t=Nr.exec(e)))throw new Error("invalid format: "+e);var t;return new Ur({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Ur(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Vr(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function $r(e){return(e=Vr(Math.abs(e)))?e[1]:NaN}function Wr(e,t){var r=Vr(e,t);if(!r)return e+"";var i=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")}jr.prototype=Ur.prototype,Ur.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Hr={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Wr(100*e,t),r:Wr,s:function(e,t){var r=Vr(e,t);if(!r)return e+"";var i=r[0],n=r[1],o=n-(Fr=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,a=i.length;return o===a?i:o>a?i+new Array(o-a+1).join("0"):o>0?i.slice(0,o)+"."+i.slice(o):"0."+new Array(1-o).join("0")+Vr(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Gr(e){return e}var qr,Zr,Xr,Yr=Array.prototype.map,Kr=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Jr(e){var t,r,i=void 0===e.grouping||void 0===e.thousands?Gr:(t=Yr.call(e.grouping,Number),r=e.thousands+"",function(e,i){for(var n=e.length,o=[],a=0,s=t[0],l=0;n>0&&s>0&&(l+s+1>i&&(s=Math.max(1,i-l)),o.push(e.substring(n-=s,n+s)),!((l+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(r)}),n=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Gr:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Yr.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=jr(e)).fill,r=e.align,d=e.sign,h=e.symbol,p=e.zero,f=e.width,m=e.comma,g=e.precision,y=e.trim,_=e.type;"n"===_?(m=!0,_="g"):Hr[_]||(void 0===g&&(g=12),y=!0,_="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var b="$"===h?n:"#"===h&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",v="$"===h?o:/[%p]/.test(_)?l:"",x=Hr[_],w=/[defgprs%]/.test(_);function S(e){var n,o,l,h=b,S=v;if("c"===_)S=x(e)+S,e="";else{var I=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:x(Math.abs(e),g),y&&(e=function(e){e:for(var t,r=e.length,i=1,n=-1;i<r;++i)switch(e[i]){case".":n=t=i;break;case"0":0===n&&(n=i),t=i;break;default:if(!+e[i])break e;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),I&&0===+e&&"+"!==d&&(I=!1),h=(I?"("===d?d:c:"-"===d||"("===d?"":d)+h,S=("s"===_?Kr[8+Fr/3]:"")+S+(I&&"("===d?")":""),w)for(n=-1,o=e.length;++n<o;)if(48>(l=e.charCodeAt(n))||l>57){S=(46===l?a+e.slice(n+1):e.slice(n))+S,e=e.slice(0,n);break}}m&&!p&&(e=i(e,1/0));var T=h.length+e.length+S.length,k=T<f?new Array(f-T+1).join(t):"";switch(m&&p&&(e=i(k+e,k.length?f-S.length:1/0),k=""),r){case"<":e=h+e+S+k;break;case"=":e=h+k+e+S;break;case"^":e=k.slice(0,T=k.length>>1)+h+e+S+k.slice(T);break;default:e=k+h+e+S}return s(e)}return g=void 0===g?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),S.toString=function(){return e+""},S}return{format:d,formatPrefix:function(e,t){var r=d(((e=jr(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor($r(t)/3))),n=Math.pow(10,-i),o=Kr[8+i/3];return function(e){return r(n*e)+o}}}}function Qr(e,t,r,i){var n,o=function(e,t,r){r=+r;const i=(t=+t)<(e=+e),n=i?Lr(t,e,r):Lr(e,t,r);return(i?-1:1)*(n<0?1/-n:n)}(e,t,r);switch((i=jr(null==i?",f":i)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=i.precision||isNaN(n=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor($r(t)/3)))-$r(Math.abs(e)))}(o,a))||(i.precision=n),Xr(i,a);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(n=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$r(t)-$r(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(i.precision=n-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(n=function(e){return Math.max(0,-$r(Math.abs(e)))}(o))||(i.precision=n-2*("%"===i.type))}return Zr(i)}function ei(e){var t=e.domain;return e.ticks=function(e){var r=t();return function(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const i=t<e,[n,o,a]=i?zr(t,e,r):zr(e,t,r);if(!(o>=n))return[];const s=o-n+1,l=new Array(s);if(i)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(n+c)/-a;else for(let c=0;c<s;++c)l[c]=(n+c)*a;return l}(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var i=t();return Qr(i[0],i[i.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var i,n,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(n=l,l=c,c=n,n=a,a=s,s=n);u-- >0;){if((n=Lr(l,c,r))===i)return o[a]=l,o[s]=c,t(o);if(n>0)l=Math.floor(l/n)*n,c=Math.ceil(c/n)*n;else{if(!(n<0))break;l=Math.ceil(l*n)/n,c=Math.floor(c*n)/n}i=n}return e},e}function ti(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ri(){var e,t=0,r=1,i=1,n=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[Or(n,t,0,i)]:e}function s(){var e=-1;for(n=new Array(i);++e<i;)n[e]=((e+1)*r-(e-i)*t)/(i+1);return a}return a.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,s()):[t,r]},a.range=function(e){return arguments.length?(i=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,n[0]]:a>=i?[n[i-1],r]:[n[a-1],n[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return n.slice()},a.copy=function(){return ri().domain([t,r]).range(o).unknown(e)},ti.apply(ei(a),arguments)}qr=Jr({thousands:",",grouping:[3],currency:["$",""]}),Zr=qr.format,Xr=qr.formatPrefix;var ii=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map((function(e){for(var t=e.length/6|0,r=new Array(t),i=0;i<t;)r[i]="#"+e.slice(6*i,6*++i);return r}));(e=>{Xt(e[e.length-1])})(ii);function ni(e,t,r){this.k=e,this.x=t,this.y=r}ni.prototype={constructor:ni,scale:function(e){return 1===e?this:new ni(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new ni(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new ni(1,0,0);ni.prototype;const oi=(e,t)=>{let r=function(e,t){let r,i;if(void 0===t)for(const n of e)null!=n&&(void 0===r?n>=n&&(r=i=n):(r>n&&(r=n),i<n&&(i=n)));else{let n=-1;for(let o of e)null!=(o=t(o,++n,e))&&(void 0===r?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}return[r,i]}(e.features.map((e=>{var r;return null===(r=e.properties)||void 0===r?void 0:r[t]}))),i=ri(r,ii[9]);return function(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var i=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(n);++i<n;)o[i]=e+i*r;return o}(r[0],r[1],.01).map((e=>[e,i(e)]))};var ai=r(579);function si(t){const r=(0,e.useRef)(null),i=(0,e.useRef)(null),[n]=(0,e.useState)(-123.112),[a]=(0,e.useState)(49.2488),[l]=(0,e.useState)(11.5);return(0,e.useEffect)((()=>{i.current||(i.current=new(o().Map)({container:r.current,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[n,a],zoom:l,maxZoom:14}),i.current.on("load",(function(){var e,r;i.current.addSource("da",{type:"geojson",data:JSON.parse(null===(e=t.data)||void 0===e?void 0:e.toArray().map(Object.fromEntries)[0].feature_collection)}),i.current.addLayer({id:"da",minzoom:9.5,type:"fill",source:"da",layout:{},paint:{"fill-color":{property:t.access_measure,stops:oi(JSON.parse(null===(r=t.data)||void 0===r?void 0:r.toArray().map(Object.fromEntries)[0].feature_collection),t.access_measure)},"fill-opacity":.8}})})))}),[n,a,l]),(0,e.useEffect)((()=>{var e;if(!i.current.isSourceLoaded("da")||void 0==t.data)return;let r=JSON.parse(null===(e=t.data)||void 0===e?void 0:e.toArray().map(Object.fromEntries)[0].feature_collection),n=s(r);i.current.getSource("da").setData(r),i.current.setPaintProperty("da","fill-color",{property:t.access_measure,stops:oi(r,t.access_measure)}),i.current.fitBounds(n,{padding:30})}),[t.data]),(0,e.useEffect)((()=>{var e;i.current.isSourceLoaded("da")&&void 0!=t.data&&i.current.setPaintProperty("da","fill-color",{property:t.access_measure,stops:oi(JSON.parse(null===(e=t.data)||void 0===e?void 0:e.toArray().map(Object.fromEntries)[0].feature_collection),t.access_measure)})}),[t.access_measure]),(0,ai.jsx)("div",{children:(0,ai.jsx)("div",{ref:r,className:"map"})})}var li,ci,ui,di,hi,pi=Object.create,fi=Object.defineProperty,mi=Object.getOwnPropertyDescriptor,gi=Object.getOwnPropertyNames,yi=Object.getPrototypeOf,_i=Object.prototype.hasOwnProperty,bi=(li=(e,t)=>{t.exports=Worker},()=>(ci||li((ci={exports:{}}).exports,ci),ci.exports)),vi=((ui=vi||{})[ui.UNDEFINED=0]="UNDEFINED",ui[ui.AUTOMATIC=1]="AUTOMATIC",ui[ui.READ_ONLY=2]="READ_ONLY",ui[ui.READ_WRITE=3]="READ_WRITE",ui),xi=((di=xi||{})[di.IDENTIFIER=0]="IDENTIFIER",di[di.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",di[di.STRING_CONSTANT=2]="STRING_CONSTANT",di[di.OPERATOR=3]="OPERATOR",di[di.KEYWORD=4]="KEYWORD",di[di.COMMENT=5]="COMMENT",di),wi=((hi=wi||{})[hi.NONE=0]="NONE",hi[hi.DEBUG=1]="DEBUG",hi[hi.INFO=2]="INFO",hi[hi.WARNING=3]="WARNING",hi[hi.ERROR=4]="ERROR",hi),Si=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(Si||{}),Ii=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(Ii||{}),Ti=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(Ti||{});var ki,Ei,Ai=(e=>(e[e.SUCCESS=0]="SUCCESS",e))(Ai||{}),Pi=(Symbol.asyncIterator,(Ei=Pi||{}).CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",Ei.CLOSE_PREPARED="CLOSE_PREPARED",Ei.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",Ei.CONNECT="CONNECT",Ei.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",Ei.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",Ei.CREATE_PREPARED="CREATE_PREPARED",Ei.DISCONNECT="DISCONNECT",Ei.DROP_FILE="DROP_FILE",Ei.DROP_FILES="DROP_FILES",Ei.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",Ei.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",Ei.FLUSH_FILES="FLUSH_FILES",Ei.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",Ei.GET_TABLE_NAMES="GET_TABLE_NAMES",Ei.GET_VERSION="GET_VERSION",Ei.GLOB_FILE_INFOS="GLOB_FILE_INFOS",Ei.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",Ei.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",Ei.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",Ei.INSTANTIATE="INSTANTIATE",Ei.OPEN="OPEN",Ei.PING="PING",Ei.POLL_PENDING_QUERY="POLL_PENDING_QUERY",Ei.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",Ei.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",Ei.REGISTER_FILE_URL="REGISTER_FILE_URL",Ei.RESET="RESET",Ei.RUN_PREPARED="RUN_PREPARED",Ei.RUN_QUERY="RUN_QUERY",Ei.SEND_PREPARED="SEND_PREPARED",Ei.START_PENDING_QUERY="START_PENDING_QUERY",Ei.TOKENIZE="TOKENIZE",Ei),Ci=((ki=Ci||{}).CONNECTION_INFO="CONNECTION_INFO",ki.ERROR="ERROR",ki.FEATURE_FLAGS="FEATURE_FLAGS",ki.FILE_BUFFER="FILE_BUFFER",ki.FILE_INFOS="FILE_INFOS",ki.FILE_SIZE="FILE_SIZE",ki.FILE_STATISTICS="FILE_STATISTICS",ki.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",ki.LOG="LOG",ki.OK="OK",ki.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",ki.QUERY_PLAN="QUERY_PLAN",ki.QUERY_RESULT="QUERY_RESULT",ki.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",ki.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",ki.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",ki.REGISTERED_FILE="REGISTERED_FILE",ki.SCRIPT_TOKENS="SCRIPT_TOKENS",ki.SUCCESS="SUCCESS",ki.TABLE_NAMES="TABLE_NAMES",ki.VERSION_STRING="VERSION_STRING",ki);new TextEncoder;var Mi={name:"@duckdb/duckdb-wasm",version:"1.29.0",description:"DuckDB powered by WebAssembly",license:"MIT",repository:{type:"git",url:"https://github.com/duckdb/duckdb-wasm.git"},keywords:["sql","duckdb","relational","database","data","query","wasm","analytics","olap","arrow","parquet","json","csv"],dependencies:{"apache-arrow":"^17.0.0"},devDependencies:{"@types/emscripten":"^1.39.10","@types/jasmine":"^5.1.4","@typescript-eslint/eslint-plugin":"^6.21.0","@typescript-eslint/parser":"^6.21.0",esbuild:"^0.20.2",eslint:"^8.57.0","eslint-plugin-jasmine":"^4.1.3","eslint-plugin-react":"^7.34.0","fast-glob":"^3.3.2",jasmine:"^5.1.0","jasmine-core":"^5.1.2","jasmine-spec-reporter":"^7.0.0","js-sha256":"^0.11.0",karma:"^6.4.2","karma-chrome-launcher":"^3.2.0","karma-coverage":"^2.2.1","karma-firefox-launcher":"^2.1.3","karma-jasmine":"^5.1.0","karma-jasmine-html-reporter":"^2.1.0","karma-sourcemap-loader":"^0.4.0","karma-spec-reporter":"^0.0.36","make-dir":"^4.0.0",nyc:"^15.1.0",prettier:"^3.2.5",puppeteer:"^22.8.0",rimraf:"^5.0.5",s3rver:"^3.7.1",typedoc:"^0.25.13",typescript:"^5.3.3","wasm-feature-detect":"^1.6.1","web-worker":"^1.2.0"},scripts:{"build:debug":"node bundle.mjs debug && tsc --emitDeclarationOnly","build:release":"node bundle.mjs release && tsc --emitDeclarationOnly",docs:"typedoc",report:"node ./coverage.mjs","test:node":"node --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:debug":"node --inspect-brk --enable-source-maps ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:node:coverage":"nyc -r json --report-dir ./coverage/node node ../../node_modules/jasmine/bin/jasmine ./dist/tests-node.cjs","test:firefox":"karma start ./karma/tests-firefox.cjs","test:chrome":"karma start ./karma/tests-chrome.cjs","test:chrome:eh":"karma start ./karma/tests-chrome-eh.cjs","test:chrome:coverage":"karma start ./karma/tests-chrome-coverage.cjs","test:browser":"karma start ./karma/tests-all.cjs","test:browser:debug":"karma start ./karma/tests-debug.cjs",test:"npm run test:chrome && npm run test:node","test:coverage":"npm run test:chrome:coverage && npm run test:node:coverage && npm run report",lint:"eslint src test"},files:["dist","!dist/tests-*","!dist/duckdb-browser-mvp.worker.js.map","!dist/types/test"],main:"dist/duckdb-browser.cjs",module:"dist/duckdb-browser.mjs",types:"dist/duckdb-browser.d.ts",jsdelivr:"dist/duckdb-browser.cjs",unpkg:"dist/duckdb-browser.mjs",sideEffects:!1,browser:{fs:!1,path:!1,perf_hooks:!1,os:!1,worker_threads:!1},exports:{"./dist/duckdb-mvp.wasm":"./dist/duckdb-mvp.wasm","./dist/duckdb-eh.wasm":"./dist/duckdb-eh.wasm","./dist/duckdb-coi.wasm":"./dist/duckdb-coi.wasm","./dist/duckdb-browser":"./dist/duckdb-browser.mjs","./dist/duckdb-browser.cjs":"./dist/duckdb-browser.cjs","./dist/duckdb-browser.mjs":"./dist/duckdb-browser.mjs","./dist/duckdb-browser-coi.pthread.worker.js":"./dist/duckdb-browser-coi.pthread.worker.js","./dist/duckdb-browser-coi.worker.js":"./dist/duckdb-browser-coi.worker.js","./dist/duckdb-browser-eh.worker.js":"./dist/duckdb-browser-eh.worker.js","./dist/duckdb-browser-mvp.worker.js":"./dist/duckdb-browser-mvp.worker.js","./dist/duckdb-node":"./dist/duckdb-node.cjs","./dist/duckdb-node.cjs":"./dist/duckdb-node.cjs","./dist/duckdb-node-blocking":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-blocking.cjs":"./dist/duckdb-node-blocking.cjs","./dist/duckdb-node-eh.worker.cjs":"./dist/duckdb-node-eh.worker.cjs","./dist/duckdb-node-mvp.worker.cjs":"./dist/duckdb-node-mvp.worker.cjs","./blocking":{node:{types:"./dist/duckdb-node-blocking.d.ts",require:"./dist/duckdb-node-blocking.cjs",import:"./dist/duckdb-node-blocking.cjs"},types:"./dist/duckdb-node-blocking.d.ts",import:"./dist/duckdb-node-blocking.mjs",require:"./dist/duckdb-node-blocking.cjs"},".":{browser:{types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"},node:{types:"./dist/duckdb-node.d.ts",import:"./dist/duckdb-node.cjs",require:"./dist/duckdb-node.cjs"},types:"./dist/duckdb-browser.d.ts",import:"./dist/duckdb-browser.mjs",require:"./dist/duckdb-browser.cjs"}}},Oi=(Mi.name,Mi.version,Mi.version.split("."));Oi[0],Oi[1],Oi[2];((e,t,r)=>{r=null!=e?pi(yi(e)):{},((e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of gi(t))!_i.call(e,n)&&n!==r&&fi(e,n,{get:()=>t[n],enumerable:!(i=mi(t,n))||i.enumerable})})(!t&&e&&e.__esModule?r:fi(r,"default",{value:e,enumerable:!0}),e)})(bi());!function(){let e=new TextDecoder}();var Ri=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(Ri||{}),Bi=r(2308);var Di=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(ci){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),zi=Math.abs,Li=String.fromCharCode,Fi=Object.assign;function Ni(e){return e.trim()}function ji(e,t,r){return e.replace(t,r)}function Ui(e,t){return e.indexOf(t)}function Vi(e,t){return 0|e.charCodeAt(t)}function $i(e,t,r){return e.slice(t,r)}function Wi(e){return e.length}function Hi(e){return e.length}function Gi(e,t){return t.push(e),e}var qi=1,Zi=1,Xi=0,Yi=0,Ki=0,Ji="";function Qi(e,t,r,i,n,o,a){return{value:e,root:t,parent:r,type:i,props:n,children:o,line:qi,column:Zi,length:a,return:""}}function en(e,t){return Fi(Qi("",null,null,"",null,null,0),e,{length:-e.length},t)}function tn(){return Ki=Yi>0?Vi(Ji,--Yi):0,Zi--,10===Ki&&(Zi=1,qi--),Ki}function rn(){return Ki=Yi<Xi?Vi(Ji,Yi++):0,Zi++,10===Ki&&(Zi=1,qi++),Ki}function nn(){return Vi(Ji,Yi)}function on(){return Yi}function an(e,t){return $i(Ji,e,t)}function sn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ln(e){return qi=Zi=1,Xi=Wi(Ji=e),Yi=0,[]}function cn(e){return Ji="",e}function un(e){return Ni(an(Yi-1,pn(91===e?e+2:40===e?e+1:e)))}function dn(e){for(;(Ki=nn())&&Ki<33;)rn();return sn(e)>2||sn(Ki)>3?"":" "}function hn(e,t){for(;--t&&rn()&&!(Ki<48||Ki>102||Ki>57&&Ki<65||Ki>70&&Ki<97););return an(e,on()+(t<6&&32==nn()&&32==rn()))}function pn(e){for(;rn();)switch(Ki){case e:return Yi;case 34:case 39:34!==e&&39!==e&&pn(Ki);break;case 40:41===e&&pn(e);break;case 92:rn()}return Yi}function fn(e,t){for(;rn()&&e+Ki!==57&&(e+Ki!==84||47!==nn()););return"/*"+an(t,Yi-1)+"*"+Li(47===e?e:rn())}function mn(e){for(;!sn(nn());)rn();return an(e,Yi)}var gn="-ms-",yn="-moz-",_n="-webkit-",bn="comm",vn="rule",xn="decl",wn="@keyframes";function Sn(e,t){for(var r="",i=Hi(e),n=0;n<i;n++)r+=t(e[n],n,e,t)||"";return r}function In(e,t,r,i){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case xn:return e.return=e.return||e.value;case bn:return"";case wn:return e.return=e.value+"{"+Sn(e.children,i)+"}";case vn:e.value=e.props.join(",")}return Wi(r=Sn(e.children,i))?e.return=e.value+"{"+r+"}":""}function Tn(e){return cn(kn("",null,null,null,[""],e=ln(e),0,[0],e))}function kn(e,t,r,i,n,o,a,s,l){for(var c=0,u=0,d=a,h=0,p=0,f=0,m=1,g=1,y=1,_=0,b="",v=n,x=o,w=i,S=b;g;)switch(f=_,_=rn()){case 40:if(108!=f&&58==Vi(S,d-1)){-1!=Ui(S+=ji(un(_),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:S+=un(_);break;case 9:case 10:case 13:case 32:S+=dn(f);break;case 92:S+=hn(on()-1,7);continue;case 47:switch(nn()){case 42:case 47:Gi(An(fn(rn(),on()),t,r),l);break;default:S+="/"}break;case 123*m:s[c++]=Wi(S)*y;case 125*m:case 59:case 0:switch(_){case 0:case 125:g=0;case 59+u:-1==y&&(S=ji(S,/\f/g,"")),p>0&&Wi(S)-d&&Gi(p>32?Pn(S+";",i,r,d-1):Pn(ji(S," ","")+";",i,r,d-2),l);break;case 59:S+=";";default:if(Gi(w=En(S,t,r,c,u,n,s,b,v=[],x=[],d),o),123===_)if(0===u)kn(S,t,w,w,v,o,d,s,x);else switch(99===h&&110===Vi(S,3)?100:h){case 100:case 108:case 109:case 115:kn(e,w,w,i&&Gi(En(e,w,w,0,0,n,s,b,n,v=[],d),x),n,x,d,s,i?v:x);break;default:kn(S,w,w,w,[""],x,0,s,x)}}c=u=p=0,m=y=1,b=S="",d=a;break;case 58:d=1+Wi(S),p=f;default:if(m<1)if(123==_)--m;else if(125==_&&0==m++&&125==tn())continue;switch(S+=Li(_),_*m){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[c++]=(Wi(S)-1)*y,y=1;break;case 64:45===nn()&&(S+=un(rn())),h=nn(),u=d=Wi(b=S+=mn(on())),_++;break;case 45:45===f&&2==Wi(S)&&(m=0)}}return o}function En(e,t,r,i,n,o,a,s,l,c,u){for(var d=n-1,h=0===n?o:[""],p=Hi(h),f=0,m=0,g=0;f<i;++f)for(var y=0,_=$i(e,d+1,d=zi(m=a[f])),b=e;y<p;++y)(b=Ni(m>0?h[y]+" "+_:ji(_,/&\f/g,h[y])))&&(l[g++]=b);return Qi(e,t,r,0===n?vn:s,l,c,u)}function An(e,t,r){return Qi(e,t,r,bn,Li(Ki),$i(e,2,-2),0)}function Pn(e,t,r,i){return Qi(e,t,r,xn,$i(e,0,i),$i(e,i+1,-1),i)}var Cn=function(e,t,r){for(var i=0,n=0;i=n,n=nn(),38===i&&12===n&&(t[r]=1),!sn(n);)rn();return an(e,Yi)},Mn=function(e,t){return cn(function(e,t){var r=-1,i=44;do{switch(sn(i)){case 0:38===i&&12===nn()&&(t[r]=1),e[r]+=Cn(Yi-1,t,r);break;case 2:e[r]+=un(i);break;case 4:if(44===i){e[++r]=58===nn()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=Li(i)}}while(i=rn());return e}(ln(e),t))},On=new WeakMap,Rn=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||On.get(r))&&!i){On.set(e,!0);for(var n=[],o=Mn(t,n),a=r.props,s=0,l=0;s<o.length;s++)for(var c=0;c<a.length;c++,l++)e.props[l]=n[s]?o[s].replace(/&\f/g,a[c]):a[c]+" "+o[s]}}},Bn=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function Dn(e,t){switch(function(e,t){return 45^Vi(e,0)?(((t<<2^Vi(e,0))<<2^Vi(e,1))<<2^Vi(e,2))<<2^Vi(e,3):0}(e,t)){case 5103:return _n+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _n+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return _n+e+yn+e+gn+e+e;case 6828:case 4268:return _n+e+gn+e+e;case 6165:return _n+e+gn+"flex-"+e+e;case 5187:return _n+e+ji(e,/(\w+).+(:[^]+)/,_n+"box-$1$2"+gn+"flex-$1$2")+e;case 5443:return _n+e+gn+"flex-item-"+ji(e,/flex-|-self/,"")+e;case 4675:return _n+e+gn+"flex-line-pack"+ji(e,/align-content|flex-|-self/,"")+e;case 5548:return _n+e+gn+ji(e,"shrink","negative")+e;case 5292:return _n+e+gn+ji(e,"basis","preferred-size")+e;case 6060:return _n+"box-"+ji(e,"-grow","")+_n+e+gn+ji(e,"grow","positive")+e;case 4554:return _n+ji(e,/([^-])(transform)/g,"$1"+_n+"$2")+e;case 6187:return ji(ji(ji(e,/(zoom-|grab)/,_n+"$1"),/(image-set)/,_n+"$1"),e,"")+e;case 5495:case 3959:return ji(e,/(image-set\([^]*)/,_n+"$1$`$1");case 4968:return ji(ji(e,/(.+:)(flex-)?(.*)/,_n+"box-pack:$3"+gn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_n+e+e;case 4095:case 3583:case 4068:case 2532:return ji(e,/(.+)-inline(.+)/,_n+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Wi(e)-1-t>6)switch(Vi(e,t+1)){case 109:if(45!==Vi(e,t+4))break;case 102:return ji(e,/(.+:)(.+)-([^]+)/,"$1"+_n+"$2-$3$1"+yn+(108==Vi(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Ui(e,"stretch")?Dn(ji(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==Vi(e,t+1))break;case 6444:switch(Vi(e,Wi(e)-3-(~Ui(e,"!important")&&10))){case 107:return ji(e,":",":"+_n)+e;case 101:return ji(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_n+(45===Vi(e,14)?"inline-":"")+"box$3$1"+_n+"$2$3$1"+gn+"$2box$3")+e}break;case 5936:switch(Vi(e,t+11)){case 114:return _n+e+gn+ji(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return _n+e+gn+ji(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return _n+e+gn+ji(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return _n+e+gn+e+e}return e}var zn=[function(e,t,r,i){if(e.length>-1&&!e.return)switch(e.type){case xn:e.return=Dn(e.value,e.length);break;case wn:return Sn([en(e,{value:ji(e.value,"@","@"+_n)})],i);case vn:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Sn([en(e,{props:[ji(t,/:(read-\w+)/,":-moz-$1")]})],i);case"::placeholder":return Sn([en(e,{props:[ji(t,/:(plac\w+)/,":"+_n+"input-$1")]}),en(e,{props:[ji(t,/:(plac\w+)/,":-moz-$1")]}),en(e,{props:[ji(t,/:(plac\w+)/,gn+"input-$1")]})],i)}return""}))}}],Ln=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i,n,o=e.stylisPlugins||zn,a={},s=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;s.push(e)}));var l,c,u=[In,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=Hi(e);return function(r,i,n,o){for(var a="",s=0;s<t;s++)a+=e[s](r,i,n,o)||"";return a}}([Rn,Bn].concat(o,u));n=function(e,t,r,i){l=r,Sn(Tn(e?e+"{"+t.styles+"}":t.styles),d),i&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new Di({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:a,registered:{},insert:n};return h.sheet.hydrate(s),h};function Fn(e){for(var t,r=0,i=0,n=e.length;n>=4;++i,n-=4)t=1540483477*(65535&(t=255&e.charCodeAt(i)|(255&e.charCodeAt(++i))<<8|(255&e.charCodeAt(++i))<<16|(255&e.charCodeAt(++i))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(n){case 3:r^=(255&e.charCodeAt(i+2))<<16;case 2:r^=(255&e.charCodeAt(i+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(i)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)}var Nn={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function jn(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}var Un=/[A-Z]|^ms/g,Vn=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$n=function(e){return 45===e.charCodeAt(1)},Wn=function(e){return null!=e&&"boolean"!==typeof e},Hn=jn((function(e){return $n(e)?e:e.replace(Un,"-$&").toLowerCase()})),Gn=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(Vn,(function(e,t,r){return Zn={name:t,styles:r,next:Zn},t}))}return 1===Nn[e]||$n(e)||"number"!==typeof t||0===t?t:t+"px"};function qn(e,t,r){if(null==r)return"";var i=r;if(void 0!==i.__emotion_styles)return i;switch(typeof r){case"boolean":return"";case"object":var n=r;if(1===n.anim)return Zn={name:n.name,styles:n.styles,next:Zn},n.name;var o=r;if(void 0!==o.styles){var a=o.next;if(void 0!==a)for(;void 0!==a;)Zn={name:a.name,styles:a.styles,next:Zn},a=a.next;return o.styles+";"}return function(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=qn(e,t,r[n])+";";else for(var o in r){var a=r[o];if("object"!==typeof a){var s=a;null!=t&&void 0!==t[s]?i+=o+"{"+t[s]+"}":Wn(s)&&(i+=Hn(o)+":"+Gn(o,s)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=qn(e,t,a);switch(o){case"animation":case"animationName":i+=Hn(o)+":"+l+";";break;default:i+=o+"{"+l+"}"}}else for(var c=0;c<a.length;c++)Wn(a[c])&&(i+=Hn(o)+":"+Gn(o,a[c])+";")}return i}(e,t,r);case"function":if(void 0!==e){var s=Zn,l=r(e);return Zn=s,qn(e,t,l)}}var c=r;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var Zn,Xn=/label:\s*([^\s;{]+)\s*(;|$)/g;var Yn=!!t.useInsertionEffect&&t.useInsertionEffect,Kn=Yn||function(e){return e()},Jn=Yn||e.useLayoutEffect,Qn=e.createContext("undefined"!==typeof HTMLElement?Ln({key:"css"}):null),eo=(Qn.Provider,function(t){return(0,e.forwardRef)((function(r,i){var n=(0,e.useContext)(Qn);return t(r,n,i)}))}),to=e.createContext({});r(219);var ro=eo((function(t,r){var i=function(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,n="";Zn=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,n+=qn(r,t,o)):n+=o[0];for(var a=1;a<e.length;a++)n+=qn(r,t,e[a]),i&&(n+=o[a]);Xn.lastIndex=0;for(var s,l="";null!==(s=Xn.exec(n));)l+="-"+s[1];return{name:Fn(n)+l,styles:n,next:Zn}}([t.styles],void 0,e.useContext(to)),n=e.useRef();return Jn((function(){var e=r.key+"-global",t=new r.sheet.constructor({key:e,nonce:r.sheet.nonce,container:r.sheet.container,speedy:r.sheet.isSpeedy}),o=!1,a=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return r.sheet.tags.length&&(t.before=r.sheet.tags[0]),null!==a&&(o=!0,a.setAttribute("data-emotion",e),t.hydrate([a])),n.current=[t,o],function(){t.flush()}}),[r]),Jn((function(){var e=n.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&function(e,t,r){!function(e,t,r){var i=e.key+"-"+t.name;!1===r&&void 0===e.registered[i]&&(e.registered[i]=t.styles)}(e,t,r);var i=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var n=t;do{e.insert(t===n?"."+i:"",n,e.sheet,!0),n=n.next}while(void 0!==n)}}(r,i.next,!0),t.tags.length){var o=t.tags[t.tags.length-1].nextElementSibling;t.before=o,t.flush()}r.insert("",i,t,!1)}}),[r,i.name]),null}));function io(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:r,strict:i=!0,hookName:n="useContext",providerName:o="Provider",errorMessage:a,defaultValue:s}=t,l=(0,e.createContext)(s);return l.displayName=r,[l.Provider,function t(){const r=(0,e.useContext)(l);if(!r&&i){const e=new Error(a??`${n} returned \`undefined\`. Seems you forgot to wrap component within ${o}`);throw e.name="ContextError",Error.captureStackTrace?.(e,t),e}return r},l]}const[no,oo]=io({name:"ChakraContext",strict:!0,providerName:"<ChakraProvider />"});function ao(e){const{value:t,children:r}=e;return(0,ai.jsxs)(no,{value:t,children:[!t._config.disableLayers&&(0,ai.jsx)(ro,{styles:t.layers.atRule}),(0,ai.jsx)(ro,{styles:[t.getPreflightCss(),t.getGlobalCss(),t.getTokenCss()]}),r]})}var so=(e,t,r,i,n,o,a,s)=>{let l=document.documentElement,c=["light","dark"];function u(t){(Array.isArray(e)?e:[e]).forEach((e=>{let r="class"===e,i=r&&o?n.map((e=>o[e]||e)):n;r?(l.classList.remove(...i),l.classList.add(t)):l.setAttribute(e,t)})),function(e){s&&c.includes(e)&&(l.style.colorScheme=e)}(t)}if(i)u(i);else try{let e=localStorage.getItem(t)||r;u(a&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)}catch(hi){}},lo=["light","dark"],co="(prefers-color-scheme: dark)",uo="undefined"==typeof window,ho=e.createContext(void 0),po=t=>e.useContext(ho)?e.createElement(e.Fragment,null,t.children):e.createElement(mo,{...t}),fo=["light","dark"],mo=t=>{let{forcedTheme:r,disableTransitionOnChange:i=!1,enableSystem:n=!0,enableColorScheme:o=!0,storageKey:a="theme",themes:s=fo,defaultTheme:l=(n?"system":"light"),attribute:c="data-theme",value:u,children:d,nonce:h,scriptProps:p}=t,[f,m]=e.useState((()=>yo(a,l))),[g,y]=e.useState((()=>yo(a))),_=u?Object.values(u):s,b=e.useCallback((e=>{let t=e;if(!t)return;"system"===e&&n&&(t=bo());let r=u?u[t]:t,a=i?_o(h):null,s=document.documentElement,d=e=>{"class"===e?(s.classList.remove(..._),r&&s.classList.add(r)):e.startsWith("data-")&&(r?s.setAttribute(e,r):s.removeAttribute(e))};if(Array.isArray(c)?c.forEach(d):d(c),o){let e=lo.includes(l)?l:null,r=lo.includes(t)?t:e;s.style.colorScheme=r}null==a||a()}),[h]),v=e.useCallback((e=>{let t="function"==typeof e?e(f):e;m(t);try{localStorage.setItem(a,t)}catch(r){}}),[f]),x=e.useCallback((e=>{let t=bo(e);y(t),"system"===f&&n&&!r&&b("system")}),[f,r]);e.useEffect((()=>{let e=window.matchMedia(co);return e.addListener(x),x(e),()=>e.removeListener(x)}),[x]),e.useEffect((()=>{let e=e=>{if(e.key!==a)return;let t=e.newValue||l;v(t)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}),[v]),e.useEffect((()=>{b(null!=r?r:f)}),[r,f]);let w=e.useMemo((()=>({theme:f,setTheme:v,forcedTheme:r,resolvedTheme:"system"===f?g:f,themes:n?[...s,"system"]:s,systemTheme:n?g:void 0})),[f,v,r,g,n,s]);return e.createElement(ho.Provider,{value:w},e.createElement(go,{forcedTheme:r,storageKey:a,attribute:c,enableSystem:n,enableColorScheme:o,defaultTheme:l,value:u,themes:s,nonce:h,scriptProps:p}),d)},go=e.memo((t=>{let{forcedTheme:r,storageKey:i,attribute:n,enableSystem:o,enableColorScheme:a,defaultTheme:s,value:l,themes:c,nonce:u,scriptProps:d}=t,h=JSON.stringify([n,i,s,r,c,l,o,a]).slice(1,-1);return e.createElement("script",{...d,suppressHydrationWarning:!0,nonce:"undefined"==typeof window?u:"",dangerouslySetInnerHTML:{__html:`(${so.toString()})(${h})`}})})),yo=(e,t)=>{if(uo)return;let r;try{r=localStorage.getItem(e)||void 0}catch(i){}return r||t},_o=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout((()=>{document.head.removeChild(t)}),1)}},bo=e=>(e||(e=window.matchMedia(co)),e.matches?"dark":"light");function vo(e){return(0,ai.jsx)(po,{attribute:"class",disableTransitionOnChange:!0,...e})}function xo(e){if(null===e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map((e=>xo(e)));const t=Object.create(Object.getPrototypeOf(e));for(const r of Object.keys(e))t[r]=xo(e[r]);return t}function wo(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)&&!Array.isArray(e)}function So(e){return"[object String]"===Object.prototype.toString.call(e)}function Io(e){return"function"===typeof e}function To(e,t){if(null==t)return e;for(const r of Object.keys(t))if(void 0!==t[r]&&"__proto__"!==r)if(!wo(e[r])&&wo(t[r]))Object.assign(e,{[r]:t[r]});else if(e[r]&&wo(t[r]))To(e[r],t[r]);else if(Array.isArray(t[r])&&Array.isArray(e[r])){let i=0;for(;i<t[r].length;i++)wo(e[r][i])&&wo(t[r][i])?To(e[r][i],t[r][i]):e[r][i]=t[r][i]}else Object.assign(e,{[r]:t[r]});return e}function ko(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(const n of r)To(e,n);return e}function Eo(){const e=e=>e;return new Proxy(e,{get:()=>e})}const Ao=Eo(),Po=Eo(),Co=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return ko({},...t.map(xo))};var Mo="".split(","),Oo="WebkitAppearance,WebkitBorderBefore,WebkitBorderBeforeColor,WebkitBorderBeforeStyle,WebkitBorderBeforeWidth,WebkitBoxReflect,WebkitLineClamp,WebkitMask,WebkitMaskAttachment,WebkitMaskClip,WebkitMaskComposite,WebkitMaskImage,WebkitMaskOrigin,WebkitMaskPosition,WebkitMaskPositionX,WebkitMaskPositionY,WebkitMaskRepeat,WebkitMaskRepeatX,WebkitMaskRepeatY,WebkitMaskSize,WebkitOverflowScrolling,WebkitTapHighlightColor,WebkitTextFillColor,WebkitTextStroke,WebkitTextStrokeColor,WebkitTextStrokeWidth,WebkitTouchCallout,WebkitUserModify,accentColor,alignContent,alignItems,alignSelf,alignTracks,all,animation,animationComposition,animationDelay,animationDirection,animationDuration,animationFillMode,animationIterationCount,animationName,animationPlayState,animationRange,animationRangeEnd,animationRangeStart,animationTimingFunction,animationTimeline,appearance,aspectRatio,azimuth,backdropFilter,backfaceVisibility,background,backgroundAttachment,backgroundBlendMode,backgroundClip,backgroundColor,backgroundImage,backgroundOrigin,backgroundPosition,backgroundPositionX,backgroundPositionY,backgroundRepeat,backgroundSize,blockSize,border,borderBlock,borderBlockColor,borderBlockStyle,borderBlockWidth,borderBlockEnd,borderBlockEndColor,borderBlockEndStyle,borderBlockEndWidth,borderBlockStart,borderBlockStartColor,borderBlockStartStyle,borderBlockStartWidth,borderBottom,borderBottomColor,borderBottomLeftRadius,borderBottomRightRadius,borderBottomStyle,borderBottomWidth,borderCollapse,borderColor,borderEndEndRadius,borderEndStartRadius,borderImage,borderImageOutset,borderImageRepeat,borderImageSlice,borderImageSource,borderImageWidth,borderInline,borderInlineEnd,borderInlineColor,borderInlineStyle,borderInlineWidth,borderInlineEndColor,borderInlineEndStyle,borderInlineEndWidth,borderInlineStart,borderInlineStartColor,borderInlineStartStyle,borderInlineStartWidth,borderLeft,borderLeftColor,borderLeftStyle,borderLeftWidth,borderRadius,borderRight,borderRightColor,borderRightStyle,borderRightWidth,borderSpacing,borderStartEndRadius,borderStartStartRadius,borderStyle,borderTop,borderTopColor,borderTopLeftRadius,borderTopRightRadius,borderTopStyle,borderTopWidth,borderWidth,bottom,boxAlign,boxDecorationBreak,boxDirection,boxFlex,boxFlexGroup,boxLines,boxOrdinalGroup,boxOrient,boxPack,boxShadow,boxSizing,breakAfter,breakBefore,breakInside,captionSide,caret,caretColor,caretShape,clear,clip,clipPath,color,colorScheme,columnCount,columnFill,columnGap,columnRule,columnRuleColor,columnRuleStyle,columnRuleWidth,columnSpan,columnWidth,columns,contain,containIntrinsicSize,containIntrinsicBlockSize,containIntrinsicHeight,containIntrinsicInlineSize,containIntrinsicWidth,container,containerName,containerType,content,contentVisibility,counterIncrement,counterReset,counterSet,cursor,direction,display,emptyCells,filter,flex,flexBasis,flexDirection,flexFlow,flexGrow,flexShrink,flexWrap,float,font,fontFamily,fontFeatureSettings,fontKerning,fontLanguageOverride,fontOpticalSizing,fontPalette,fontVariationSettings,fontSize,fontSizeAdjust,fontSmooth,fontStretch,fontStyle,fontSynthesis,fontSynthesisPosition,fontSynthesisSmallCaps,fontSynthesisStyle,fontSynthesisWeight,fontVariant,fontVariantAlternates,fontVariantCaps,fontVariantEastAsian,fontVariantEmoji,fontVariantLigatures,fontVariantNumeric,fontVariantPosition,fontWeight,forcedColorAdjust,gap,grid,gridArea,gridAutoColumns,gridAutoFlow,gridAutoRows,gridColumn,gridColumnEnd,gridColumnGap,gridColumnStart,gridGap,gridRow,gridRowEnd,gridRowGap,gridRowStart,gridTemplate,gridTemplateAreas,gridTemplateColumns,gridTemplateRows,hangingPunctuation,height,hyphenateCharacter,hyphenateLimitChars,hyphens,imageOrientation,imageRendering,imageResolution,imeMode,initialLetter,initialLetterAlign,inlineSize,inputSecurity,inset,insetBlock,insetBlockEnd,insetBlockStart,insetInline,insetInlineEnd,insetInlineStart,isolation,justifyContent,justifyItems,justifySelf,justifyTracks,left,letterSpacing,lineBreak,lineClamp,lineHeight,lineHeightStep,listStyle,listStyleImage,listStylePosition,listStyleType,margin,marginBlock,marginBlockEnd,marginBlockStart,marginBottom,marginInline,marginInlineEnd,marginInlineStart,marginLeft,marginRight,marginTop,marginTrim,mask,maskBorder,maskBorderMode,maskBorderOutset,maskBorderRepeat,maskBorderSlice,maskBorderSource,maskBorderWidth,maskClip,maskComposite,maskImage,maskMode,maskOrigin,maskPosition,maskRepeat,maskSize,maskType,masonryAutoFlow,mathDepth,mathShift,mathStyle,maxBlockSize,maxHeight,maxInlineSize,maxLines,maxWidth,minBlockSize,minHeight,minInlineSize,minWidth,mixBlendMode,objectFit,objectPosition,offset,offsetAnchor,offsetDistance,offsetPath,offsetPosition,offsetRotate,opacity,order,orphans,outline,outlineColor,outlineOffset,outlineStyle,outlineWidth,overflow,overflowAnchor,overflowBlock,overflowClipBox,overflowClipMargin,overflowInline,overflowWrap,overflowX,overflowY,overlay,overscrollBehavior,overscrollBehaviorBlock,overscrollBehaviorInline,overscrollBehaviorX,overscrollBehaviorY,padding,paddingBlock,paddingBlockEnd,paddingBlockStart,paddingBottom,paddingInline,paddingInlineEnd,paddingInlineStart,paddingLeft,paddingRight,paddingTop,page,pageBreakAfter,pageBreakBefore,pageBreakInside,paintOrder,perspective,perspectiveOrigin,placeContent,placeItems,placeSelf,pointerEvents,position,printColorAdjust,quotes,resize,right,rotate,rowGap,rubyAlign,rubyMerge,rubyPosition,scale,scrollbarColor,scrollbarGutter,scrollbarWidth,scrollBehavior,scrollMargin,scrollMarginBlock,scrollMarginBlockStart,scrollMarginBlockEnd,scrollMarginBottom,scrollMarginInline,scrollMarginInlineStart,scrollMarginInlineEnd,scrollMarginLeft,scrollMarginRight,scrollMarginTop,scrollPadding,scrollPaddingBlock,scrollPaddingBlockStart,scrollPaddingBlockEnd,scrollPaddingBottom,scrollPaddingInline,scrollPaddingInlineStart,scrollPaddingInlineEnd,scrollPaddingLeft,scrollPaddingRight,scrollPaddingTop,scrollSnapAlign,scrollSnapCoordinate,scrollSnapDestination,scrollSnapPointsX,scrollSnapPointsY,scrollSnapStop,scrollSnapType,scrollSnapTypeX,scrollSnapTypeY,scrollTimeline,scrollTimelineAxis,scrollTimelineName,shapeImageThreshold,shapeMargin,shapeOutside,tabSize,tableLayout,textAlign,textAlignLast,textCombineUpright,textDecoration,textDecorationColor,textDecorationLine,textDecorationSkip,textDecorationSkipInk,textDecorationStyle,textDecorationThickness,textEmphasis,textEmphasisColor,textEmphasisPosition,textEmphasisStyle,textIndent,textJustify,textOrientation,textOverflow,textRendering,textShadow,textSizeAdjust,textTransform,textUnderlineOffset,textUnderlinePosition,textWrap,timelineScope,top,touchAction,transform,transformBox,transformOrigin,transformStyle,transition,transitionBehavior,transitionDelay,transitionDuration,transitionProperty,transitionTimingFunction,translate,unicodeBidi,userSelect,verticalAlign,viewTimeline,viewTimelineAxis,viewTimelineInset,viewTimelineName,viewTransitionName,visibility,whiteSpace,whiteSpaceCollapse,widows,width,willChange,wordBreak,wordSpacing,wordWrap,writingMode,zIndex,zoom,alignmentBaseline,baselineShift,clipRule,colorInterpolation,colorRendering,dominantBaseline,fill,fillOpacity,fillRule,floodColor,floodOpacity,glyphOrientationVertical,lightingColor,marker,markerEnd,markerMid,markerStart,shapeRendering,stopColor,stopOpacity,stroke,strokeDasharray,strokeDashoffset,strokeLinecap,strokeLinejoin,strokeMiterlimit,strokeOpacity,strokeWidth,textAnchor,vectorEffect".split(",").concat(Mo),Ro=new Map(Oo.map((e=>[e,!0])));function Bo(e){const t=Object.create(null);return r=>(void 0===t[r]&&(t[r]=e(r)),t[r])}var Do=/&|@/,zo=Bo((e=>Ro.has(e)||e.startsWith("--")||Do.test(e)));function Lo(e){const t=Object.assign({},e);for(let r in t)void 0===t[r]&&delete t[r];return t}function Fo(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{stop:i,getKey:n}=r;return function e(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(wo(r)||Array.isArray(r)){const a={};for(const[s,l]of Object.entries(r)){const c=n?.(s,l)??s,u=[...o,c];if(i?.(r,u))return t(r,o);const d=e(l,u);null!=d&&(a[c]=d)}return a}return t(r,o)}(e)}function No(e,t){return Array.isArray(e)?e.map((e=>t(e))):wo(e)?Fo(e,(e=>t(e))):null!==e&&void 0!==e?t(e):e}function jo(e,t){const r={};return Fo(e,((e,t)=>{e&&(r[t.join(".")]=e.value)}),{stop:t}),r}const Uo=e=>{const t=Object.create(null);return function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];const o=JSON.stringify(i);return void 0===t[o]&&(t[o]=e(...i)),t[o]}},Vo=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i=Object.keys(r),n=e=>{const t={};for(let i=0;i<e.length;i++){const n=e[i];r[n]&&(Object.defineProperty(t,n,r[n]),delete r[n])}return t};return[t].map((e=>n(Array.isArray(e)?e:i.filter(e)))).concat(n(i))},$o="px",Wo="em",Ho="rem";function Go(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=new RegExp(String.raw`-?\d+(?:\.\d+|\d*)`),r=new RegExp(`${$o}|${Wo}|${Ho}`),i=e.match(new RegExp(`${t.source}(${r.source})`));return i?.[1]}function qo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("number"===typeof e)return`${e}px`;const t=Go(e);return t?t===$o?e:t===Wo||t===Ho?`${16*parseFloat(e)}${$o}`:void 0:e}function Zo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=Go(e);return t?t===Ho?e:t===Wo?`${parseFloat(e)}${Ho}`:t===$o?`${parseFloat(e)/16}${Ho}`:void 0:e}function Xo(e){const t=function(e){const t=Object.entries(e).sort(((e,t)=>{let[,r]=e,[,i]=t;return parseInt(r,10)<parseInt(i,10)?-1:1}));return t.map(((e,t,r)=>{let[i,n]=e,o=null;return t<=r.length-1&&(o=r[t+1]?.[1]),null!=o&&(o=Yo(o)),[i,{name:i,min:Zo(n),max:o}]}))}(e),r=Object.fromEntries(t);function i(e){return r[e]}function n(e){return Ko(i(e))}const o=function(){const e=function(){const e=Object.keys(r),t=function(e){const t=[];return e.forEach(((r,i)=>{let n=i;n++;let o=e[n];for(;o;)t.push([r,o]),n++,o=e[n]})),t}(e),o=e.flatMap((e=>{const t=i(e),r=[`${e}Down`,Ko({max:Yo(t.min)})];return[[e,Ko({min:t.min})],[`${e}Only`,n(e)],r]})).filter((e=>{let[,t]=e;return""!==t})).concat(t.map((e=>{let[t,r]=e;const n=i(t),o=i(r);return[`${t}To${a=r,a.charAt(0).toUpperCase()+a.slice(1)}`,Ko({min:n.min,max:Yo(o.min)})];var a})));return Object.fromEntries(o)}();return Object.fromEntries(Object.entries(e))}();return{values:Object.values(r),only:n,keys:function(){return["base",...Object.keys(r)]},conditions:o,getCondition:e=>o[e],up:function(e){return Ko({min:i(e).min})},down:function(e){return Ko({max:Yo(i(e).min)})}}}function Yo(e){return Zo(`${parseFloat(qo(e)??"")-.04}px`)}function Ko(e){let{min:t,max:r}=e;return null==t&&null==r?"":["@media screen",t&&`(min-width: ${t})`,r&&`(max-width: ${r})`].filter(Boolean).join(" and ")}const Jo=e=>{const{breakpoints:t,conditions:r={}}=e,i=(n=r,o=(e,t)=>[`_${e}`,t],Object.fromEntries(Object.entries(n).map((e=>{let[t,r]=e;return o(t,r)}))));var n,o;const a=Object.assign({},i,t.conditions);function s(){return Object.keys(a)}function l(e){return s().includes(e)||/^@|&|&$/.test(e)||e.startsWith("_")}return{keys:s,sort:function(e){return e.filter((e=>"base"!==e)).sort(((e,t)=>{const r=l(e),i=l(t);return r&&!i?1:!r&&i?-1:0}))},has:l,resolve:function(e){return Reflect.get(a,e)||e},breakpoints:t.keys(),expandAtRule:function(e){return e.startsWith("@breakpoint")?t.getCondition(e.replace("@breakpoint ","")):e}}},Qo=e=>({minMax:new RegExp(`(!?\\(\\s*min(-device-)?-${e})(.|\n)+\\(\\s*max(-device)?-${e}`,"i"),min:new RegExp(`\\(\\s*min(-device)?-${e}`,"i"),maxMin:new RegExp(`(!?\\(\\s*max(-device)?-${e})(.|\n)+\\(\\s*min(-device)?-${e}`,"i"),max:new RegExp(`\\(\\s*max(-device)?-${e}`,"i")}),ea=Qo("width"),ta=Qo("height"),ra=e=>({isMin:fa(e.minMax,e.maxMin,e.min),isMax:fa(e.maxMin,e.minMax,e.max)}),{isMin:ia,isMax:na}=ra(ea),{isMin:oa,isMax:aa}=ra(ta),sa=/print/i,la=/^print$/i,ca=/(-?\d*\.?\d+)(ch|em|ex|px|rem)/,ua=/(\d)/,da=Number.MAX_VALUE,ha={ch:8.8984375,em:16,rem:16,ex:8.296875,px:1};function pa(e){const t=ca.exec(e)||(ia(e)||oa(e)?ua.exec(e):null);if(!t)return da;if("0"===t[0])return 0;const r=parseFloat(t[1]),i=t[2];return r*(ha[i]||1)}function fa(e,t,r){return i=>e.test(i)||!t.test(i)&&r.test(i)}const ma=Uo(((e,t)=>{const r=function(e,t){const r=sa.test(e),i=la.test(e),n=sa.test(t),o=la.test(t);return r&&n?!i&&o?1:i&&!o?-1:e.localeCompare(t):r?1:n?-1:null}(e,t);if(null!==r)return r;const i=ia(e)||oa(e),n=na(e)||aa(e),o=ia(t)||oa(t),a=na(t)||aa(t);if(i&&a)return-1;if(n&&o)return 1;const s=pa(e),l=pa(t);return s===da&&l===da?e.localeCompare(t):s===da?1:l===da?-1:s!==l?s>l?n?-1:1:n?1:-1:e.localeCompare(t)}));function ga(e){return e.sort(((e,t)=>{let[r]=e,[i]=t;return ma(r,i)}))}function ya(e){const t=[],r=[],i={};for(const[a,s]of Object.entries(e))a.startsWith("@media")?t.push([a,s]):a.startsWith("@container")?r.push([a,s]):wo(s)?i[a]=ya(s):i[a]=s;const n=ga(t),o=ga(r);return{...i,...Object.fromEntries(n),...Object.fromEntries(o)}}const _a=/\s*!(important)?/i;function ba(e){const{transform:t,conditions:r,normalize:i}=e,n=function(e){function t(t){const r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e=>wo(e)&&Object.keys(Lo(e)).length>0))}(...t);return 1===r.length?r:r.map((t=>e.normalize(t)))}return Uo((function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return ko({},...t(r))}))}(e);return Uo((function(){const e=n(...arguments),o=i(e),a=Object.create(null);return Fo(o,((e,i)=>{const n=(e=>!!So(e)&&_a.test(e))(e);if(null==e)return;const[o,...s]=r.sort(i).map(r.resolve);n&&(e=(e=>So(e)?e.replace(_a,"").trim():e)(e));let l=t(o,e)??Object.create(null);l=Fo(l,(e=>So(e)&&n?`${e} !important`:e),{getKey:e=>r.expandAtRule(e)}),function(e,t,r){let i=e;for(const n of t)n&&(i[n]||(i[n]=Object.create(null)),i=i[n]);ko(i,r)}(a,s.flat(),l)})),ya(a)}))}const va=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).map((e=>e.trim())).join(" ")};function xa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const r=Object.assign({},e);for(const i of t)i in r&&delete r[i];return r}const wa=e=>({base:{},variants:{},defaultVariants:{},compoundVariants:[],...e});function Sa(e){const{css:t,conditions:r,normalize:i,layers:n}=e;return function o(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{base:s,variants:l,defaultVariants:c,compoundVariants:u}=wa(a),d=ba({conditions:r,normalize:i,transform:(e,t)=>l[e]?.[t]}),h=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=i({...c,...Lo(e)});let o={...s};ko(o,d(r));const a=function(e,r){let i={};return e.forEach((e=>{Object.entries(e).every((e=>{let[t,i]=e;if("css"===t)return!0;return(Array.isArray(i)?i:[i]).some((e=>r[t]===e))}))&&(i=t(i,e.css))})),i}(u,r);return n.wrap("recipes",t(o,a))},p=Object.keys(l),f=Object.fromEntries(Object.entries(l).map((e=>{let[t,r]=e;return[t,Object.keys(r)]})));return Object.assign((e=>t(h(e))),{className:a.className,__cva__:!0,variantMap:f,variantKeys:p,raw:h,config:a,splitVariantProps:e=>{const t=xa(e,["recipe"]),[r,i]=Vo(t,p);return p.includes("colorPalette")||(r.colorPalette=e.colorPalette||c.colorPalette),p.includes("orientation")&&(i.orientation=e.orientation),[r,i]},merge(t){return o(function(e){const{css:t}=e;return function(e,r){const i=wa(r.config),n=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const i=t.filter(Boolean);return Array.from(new Set(i))}(e.variantKeys,Object.keys(r.variants)),o=t(e.base,i.base),a=Object.fromEntries(n.map((r=>[r,t(e.config.variants[r],i.variants[r])]))),s=ko(e.config.defaultVariants,i.defaultVariants),l=[...e.compoundVariants,...i.compoundVariants];return{className:va(e.className,r.className),base:o,variants:a,defaultVariants:s,compoundVariants:l}}}(e)(this,t))}})}}const Ia={reset:"reset",base:"base",tokens:"tokens",recipes:"recipes"},Ta={reset:0,base:1,tokens:2,recipes:3};const ka=(e,t)=>e.filter((e=>e.css[t])).map((e=>({...e,css:e.css[t]})));function Ea(e){const{cva:t}=e;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=Object.entries(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=t=>({base:e.base?.[t]??{},variants:{},defaultVariants:e.defaultVariants??{},compoundVariants:e.compoundVariants?ka(e.compoundVariants,t):[]}),r=(e.slots??[]).map((e=>[e,t(e)]));for(const[i,n]of Object.entries(e.variants??{}))for(const[e,t]of Object.entries(n))r.forEach((r=>{let[n,o]=r;var a;(a=o.variants)[i]??(a[i]={}),o.variants[i][e]=t[n]??{}}));return Object.fromEntries(r)}(e)).map((e=>{let[r,i]=e;return[r,t(i)]}));const i=e.variants??{},n=Object.keys(i);const o=Object.fromEntries(Object.entries(i).map((e=>{let[t,r]=e;return[t,Object.keys(r)]})));let a={};return e.className&&(a=Object.fromEntries(e.slots.map((t=>[t,`${e.className}__${t}`])))),Object.assign((function(e){const t=r.map((t=>{let[r,i]=t;return[r,i(e)]}));return Object.fromEntries(t)}),{variantMap:o,variantKeys:n,splitVariantProps:function(t){const r=xa(t,["recipe"]),[i,o]=Vo(r,n);return n.includes("colorPalette")||(i.colorPalette=t.colorPalette||e.defaultVariants?.colorPalette),n.includes("orientation")&&(o.orientation=t.orientation),[i,o]},classNameMap:a})}}const Aa=/[^a-zA-Z0-9_\u0081-\uffff-]/g;function Pa(e){return`${e}`.replace(Aa,(e=>`\\${e}`))}const Ca=/[A-Z]/g;function Ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{fallback:r="",prefix:i=""}=t,n=function(e){return e.replace(Ca,(e=>`-${e.toLowerCase()}`))}(["-",i,Pa(e)].filter(Boolean).join("-"));return{var:n,ref:`var(${n}${r?`, ${r}`:""})`}}const Oa=/([\0-\x1f\x7f]|^-?\d)|^-$|^-|[^\x80-\uFFFF\w-]/g,Ra=function(e,t){return t?"\0"===e?"\ufffd":"-"===e&&1===e.length?"\\-":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16):"\\"+e},Ba=e=>(e+"").replace(Oa,Ra),Da=(e,t)=>{let r="",i=0,n="char",o="",a="";const s=[];for(;i<e.length;){const l=e[i];if("{"===l){const n=e.indexOf("}",i);if(-1===n)break;const o=e.slice(i+1,n);r+=t(o)??o,i=n+1;continue}if("token"===n&&","===l){""===e[i]&&i++,n="fallback",s.push(n);const l=t(o);l?.endsWith(")")&&(r+=l.slice(0,-1)),o="",a="";continue}if("fallback"===n){if(", var("===a+l){const t=za(e.slice(i+1))+i+1,o=e.slice(i+1,t);if(-1===t)break;r+=", var("+o+")",i=t+1,n=s.pop()??n,a="";continue}}if("token"===n||"fallback"===n){if(i++,")"===l){n=s.pop()??n??"char",a+=l;const e=o?t(o)??Ba(o):o;if(a)if(a=a.slice(1).trim(),!a.startsWith("token(")&&a.endsWith(")")&&(a=a.slice(0,-1)),a.includes("token(")){const e=Da(a,t);e&&(a=e.slice(0,-1))}else if(a){const e=t(a);e&&(a=e)}const i=r.at(-1);a?i?.trim()?r+=e.slice(0,-1)+", "+a+")":r+=a:r+=e||")",o="",a="",n="char";continue}"token"===n&&(o+=l),"fallback"===n&&(a+=l);continue}const c=e.indexOf("token(",i);if(-1===c)r+=l,i++;else{const t=c+6;r+=e.slice(i,c),i=t,n="token",s.push(n)}}return r},za=e=>{let t=0;const r=["("];for(;t<e.length;){const i=e[t];if("("===i)r.push(i);else if(")"===i&&(r.pop(),0===r.length))return t;t++}return t};function La(e){const t={};return e.forEach(((e,r)=>{e instanceof Map?t[r]=Object.fromEntries(e):t[r]=e})),t}const Fa=/({([^}]*)})/g,Na=/[{}]/g,ja=/\w+\.\w+/,Ua=e=>{if(!So(e))return[];const t=e.match(Fa);return t?t.map((e=>e.replace(Na,""))).map((e=>e.trim())):[]};function Va(e){if(!e.extensions?.references)return e.extensions?.cssVar?.ref??e.value;const t=e.extensions.references??{};return e.value=Object.keys(t).reduce(((e,r)=>{const i=t[r];if(i.extensions.conditions)return e;const n=Va(i);return e.replace(`{${r}}`,n)}),e.value),delete e.extensions.references,e.value}function $a(e){return wo(e)&&e.reference?e.reference:String(e)}const Wa=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return r.map($a).join(` ${e} `).replace(/calc/g,"")},Ha=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return`calc(${Wa("+",...t)})`},Ga=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return`calc(${Wa("-",...t)})`},qa=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return`calc(${Wa("*",...t)})`},Za=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return`calc(${Wa("/",...t)})`},Xa=e=>{const t=$a(e);return null==t||Number.isNaN(parseFloat(t))?qa(t,-1):String(t).startsWith("-")?String(t).slice(1):`-${t}`},Ya=Object.assign((e=>({add:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Ya(Ha(e,...r))},subtract:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Ya(Ga(e,...r))},multiply:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Ya(qa(e,...r))},divide:function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return Ya(Za(e,...r))},negate:()=>Ya(Xa(e)),toString:()=>e.toString()})),{add:Ha,subtract:Ga,multiply:qa,divide:Za,negate:Xa}),Ka={enforce:"pre",transform(e){const{prefix:t,allTokens:r,formatCssVar:i,formatTokenName:n,registerToken:o}=e;r.filter((e=>{let{extensions:t}=e;return"spacing"===t.category})).forEach((e=>{const r=e.path.slice(),a=i(r,t);if(So(e.value)&&"0rem"===e.value)return;const s=structuredClone(e);Object.assign(s.extensions,{negative:!0,prop:`-${e.extensions.prop}`,originalPath:r}),s.value=Ya.negate(a.ref);const l=s.path[s.path.length-1];null!=l&&(s.path[s.path.length-1]=`-${l}`),s.path&&(s.name=n(s.path)),o(s)}))}},Ja=new Set(["spacing","sizes","borderWidths","fontSizes","radii"]),Qa={enforce:"post",transform(e){const t=e.allTokens.filter((e=>Ja.has(e.extensions.category)&&!e.extensions.negative));t.forEach((e=>{Object.assign(e.extensions,{pixelValue:qo(e.value)})}))}},es={enforce:"post",transform(e){const{allTokens:t,registerToken:r,formatTokenName:i}=e,n=t.filter((e=>{let{extensions:t}=e;return"colors"===t.category})),o=new Map,a=new Map;n.forEach((e=>{const{colorPalette:t}=e.extensions;t&&(t.keys.forEach((e=>{o.set(i(e),e)})),t.roots.forEach((r=>{const n=i(r),s=a.get(n)||[];if(s.push(e),a.set(n,s),e.extensions.default&&1===r.length){const e=t.keys[0]?.filter(Boolean);if(!e.length)return;const n=r.concat(e);o.set(i(n),[])}})))})),o.forEach((e=>{const t=["colors","colorPalette",...e].filter(Boolean),n=i(t),o=i(t.slice(1));r({name:n,value:n,originalValue:n,path:t,extensions:{condition:"base",originalPath:t,category:"colors",prop:o,virtual:!0}},"pre")}))}},ts={enforce:"post",transform(e){e.allTokens=e.allTokens.filter((e=>""!==e.value))}},rs=[Ka,es,Qa,ts],is={type:"extensions",enforce:"pre",name:"tokens/css-var",transform(e,t){const{prefix:r,formatCssVar:i}=t,{negative:n,originalPath:o}=e.extensions;return{cssVar:i((n?o:e.path).filter(Boolean),r)}}},ns={enforce:"post",type:"value",name:"tokens/conditionals",transform(e,t){const{prefix:r,formatCssVar:i}=t,n=Ua(e.value);return n.length?(n.forEach((t=>{const n=i(t.split("."),r);e.value=e.value.replace(`{${n.ref}}`,n)})),e.value):e.value}},os={type:"extensions",enforce:"pre",name:"tokens/colors/colorPalette",match:e=>"colors"===e.extensions.category&&!e.extensions.virtual,transform(e,t){let r=e.path.slice();if(r.pop(),r.shift(),0===r.length){const t=[...e.path];t.shift(),r=t}if(0===r.length)return{};const i=r.reduce(((e,t,r,i)=>{const n=i.slice(0,r+1);return e.push(n),e}),[]),n=r[0],o=t.formatTokenName(r),a=e.path.slice(e.path.indexOf(n)+1).reduce(((e,t,r,i)=>(e.push(i.slice(r)),e)),[]);return 0===a.length&&a.push([""]),{colorPalette:{value:o,roots:i,keys:a}}}},as=[is,ns,os],ss=e=>wo(e)&&Object.prototype.hasOwnProperty.call(e,"value");function ls(e){const{prefix:t="",tokens:r={},semanticTokens:i={},breakpoints:n={}}=e,o=e=>e.join("."),a=[],s=new Map,l=new Map,c=new Map,u=new Map,d=new Map,h=new Map,p=new Map,f=new Map,m=[];function g(e,t){a.push(e),s.set(e.name,e),t&&f.forEach((r=>{r.enforce===t&&k(r,e)}))}const y=function(e){return e?{breakpoints:No(e,(e=>({value:e}))),sizes:Object.fromEntries(Object.entries(e).map((e=>{let[t,r]=e;return[`breakpoint-${t}`,{value:r}]})))}:{breakpoints:{},sizes:{}}}(n),_=Lo({...r,breakpoints:y.breakpoints,sizes:{...r.sizes,...y.sizes}});function b(e){return s.get(e)}let v={};function x(){a.forEach((e=>{!function(e){const{condition:t}=e.extensions;t&&(l.has(t)||l.set(t,new Set),l.get(t).add(e))}(e),function(e){const{category:t,prop:r}=e.extensions;t&&(p.has(t)||p.set(t,new Map),p.get(t).set(r,e))}(e),function(e){const{condition:t,negative:r,virtual:i,cssVar:n}=e.extensions;!r&&!i&&t&&n&&(c.has(t)||c.set(t,new Map),c.get(t).set(n.var,e.value))}(e),function(e){const{category:t,prop:r,cssVar:i,negative:n}=e.extensions;if(!t)return;h.has(t)||h.set(t,new Map);const o=n?e.extensions.conditions?e.originalValue:e.value:i.ref;h.get(t).set(r,o),d.set([t,r].join("."),o)}(e),function(e){const{colorPalette:t,virtual:r,default:i}=e.extensions;t&&!r&&t.roots.forEach((r=>{const n=o(r);u.has(n)||u.set(n,new Map);const a=function(e,t){const r=e.findIndex(((r,i)=>t.every(((t,r)=>e[i+r]===t))));return-1===r||(e.splice(r,t.length),e.splice(r,0,"colorPalette")),e}([...e.path],[...r]),s=b(o(a));if(!s||!s.extensions.cssVar)return;const{var:l}=s.extensions.cssVar;if(u.get(n).set(l,e.extensions.cssVar.ref),i&&1===r.length){const i=b(o(["colors","colorPalette"]));if(!i)return;const n=b(o(e.path));if(!n)return;const a=t.keys[0]?.filter(Boolean);if(!a.length)return;const s=o(r.concat(a));u.has(s)||u.set(s,new Map),u.get(s).set(i.extensions.cssVar.var,n.extensions.cssVar.ref)}}))}(e)})),v=La(h)}const w=Uo(((e,t)=>d.get(e)??t)),S=Uo((e=>v[e]||null)),I=Uo((e=>Da(e,(e=>{if(!e)return;if(e.includes("/")){const t=((e,t)=>{if(!e||"string"!==typeof e)return{invalid:!0,value:e};const[r,i]=e.split("/");if(!r||!i)return{invalid:!0,value:r};const n=t(r),o=b(`opacity.${i}`)?.value;if(!o&&isNaN(Number(i)))return{invalid:!0,value:r};const a=n??r;return{invalid:!1,color:a,value:`color-mix(in srgb, ${a} ${o?100*Number(o)+"%":`${i}%`}, transparent)`}})(e,(e=>w(e)));if(t.invalid)throw new Error("Invalid color mix at "+e+": "+t.value);return t.value}const t=w(e);return t||(ja.test(e)?Ba(e):e)})))),T={prefix:t,allTokens:a,tokenMap:s,registerToken:g,getByName:b,formatTokenName:o,formatCssVar:(e,t)=>Ma(e.join("-"),{prefix:t}),flatMap:d,cssVarMap:c,categoryMap:p,colorPaletteMap:u,getVar:w,getCategoryValues:S,expandReferenceInValue:I};function k(e,t){if(t.extensions.references)return;if(Io(e.match)&&!e.match(t))return;const r=(t=>e.transform(t,T))(t);switch(!0){case"extensions"===e.type:Object.assign(t.extensions,r);break;case"value"===e.type:t.value=r;break;default:t[e.type]=r}}function E(e){m.forEach((t=>{t.enforce===e&&t.transform(T)}))}function A(e){f.forEach((t=>{t.enforce===e&&a.forEach((e=>{k(t,e)}))}))}function P(){a.forEach((e=>{const t=function(e){if(!e.extensions.conditions)return;const{conditions:t}=e.extensions,r=[];return Fo(t,((t,i)=>{const n=us(i);if(!n.length)return;const o=structuredClone(e);o.value=t,o.extensions.condition=n.join(":"),r.push(o)})),r}(e);t&&0!==t.length&&t.forEach((e=>{g(e)}))}))}function C(){a.forEach((e=>{if(!(e=>Fa.test(e))(e.value))return;const t=function(e){return Ua(e).map((e=>b(e))).filter(Boolean)}(e.value);e.extensions.references=t.reduce(((e,t)=>(e[t.name]=t,e)),{})}))}function M(){a.forEach((e=>{Va(e)}))}return Fo(_,((e,t)=>{const r=t.includes("DEFAULT"),i=(t=cs(t))[0],n=o(t),a=So(e)?{value:e}:e,s={value:a.value,originalValue:a.value,name:n,path:t,extensions:{condition:"base",originalPath:t,category:i,prop:o(t.slice(1))}};r&&(s.extensions.default=!0),g(s)}),{stop:ss}),Fo(i,((e,t)=>{const r=t.includes("DEFAULT"),i=(t=us(cs(t)))[0],n=o(t),a=So(e.value)?{value:{base:e.value}}:e,s={value:a.value.base||"",originalValue:a.value.base||"",name:n,path:t,extensions:{originalPath:t,category:i,conditions:a.value,condition:"base",prop:o(t.slice(1))}};r&&(s.extensions.default=!0),g(s)}),{stop:ss}),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{f.set(e.name,e)}))}(...as),function(){m.push(...arguments)}(...rs),E("pre"),A("pre"),P(),C(),M(),E("post"),A("post"),x(),T}function cs(e){return"DEFAULT"===e[0]?e:e.filter((e=>"DEFAULT"!==e))}function us(e){return e.filter((e=>"base"!==e))}(e=>{Array.from(new Set(e))})(["aspectRatios","zIndex","opacity","colors","fonts","fontSizes","fontWeights","lineHeights","letterSpacings","sizes","shadows","spacing","radii","cursor","borders","borderWidths","borderStyles","durations","easings","animations","blurs","gradients","breakpoints","assets"]);const ds=e=>(t,r)=>{const i=r.utils.colorMix(t);if(i.invalid)return{[e]:t};const n="--mix-"+e;return{[n]:i.value,[e]:`var(${n}, ${i.color})`}};function hs(e){const t=(r=e.config,Object.fromEntries(Object.entries(r).map((e=>{let[t,r]=e;return[t,r]}))));var r;const i=e.tokens,n=new Map,o=new Map;function a(e,r){t[e]=r,s(e,r)}const s=(e,t)=>{const r=u(t);r&&(o.set(e,r),c(e,t))},l=new Map,c=(e,t)=>{if(!t)return;const r=u(t,(e=>`type:Tokens["${e}"]`));if("object"===typeof r&&r.type)return void l.set(e,new Set([`type:${r.type}`]));if(r){const t=new Set(Object.keys(r));l.set(e,t)}const i=l.get(e)??new Set;t.property&&l.set(e,i.add(`CssProperties["${t.property}"]`))},u=(e,t)=>{const{values:r}=e,n=e=>{const r=t?.(e);return r?{[r]:r}:void 0};return So(r)?n?.(r)??i.getCategoryValues(r)??{}:Array.isArray(r)?r.reduce(((e,t)=>(e[t]=t,e)),{}):Io(r)?r(t?n:i.getCategoryValues):r},d=Uo(((e,t)=>({[e]:e.startsWith("--")?i.getVar(t,t):t}))),h=Object.assign(i.getVar,{raw:e=>i.getByName(e)}),p=Uo(((e,r)=>{const n=m(e);So(r)&&!r.includes("_EMO_")&&(r=i.expandReferenceInValue(r));const a=t[n];if(!a)return d(n,r);const s=o.get(n)?.[r];if(!a.transform)return d(e,s??r);return a.transform(s??r,{raw:r,token:h,utils:{colorMix:e=>((e,t)=>{if(!e||"string"!==typeof e)return{invalid:!0,value:e};const[r,i]=e.split("/");if(!r||!i||"currentBg"===r)return{invalid:!0,value:r};const n=t(`colors.${r}`),o=t.raw(`opacity.${i}`)?.value;if(!o&&isNaN(Number(i)))return{invalid:!0,value:r};const a=n??r;return{invalid:!1,color:a,value:`color-mix(in srgb, ${a} ${o?100*Number(o)+"%":`${i}%`}, transparent)`}})(e,h)}})}));(()=>{for(const[e,r]of Object.entries(t)){const{shorthand:t}=r??{};t&&(Array.isArray(t)?t:[t]).forEach((t=>n.set(t,e)))}})(),(()=>{const e=La(i.colorPaletteMap);a("colorPalette",{values:Object.keys(e),transform:Uo((t=>e[t]))})})(),(()=>{for(const[e,r]of Object.entries(t))r&&s(e,r)})(),(()=>{for(const[e,r]of Object.entries(t))r&&c(e,r)})();const f=n.size>0,m=Uo((e=>n.get(e)??e)),g={keys:()=>[...Array.from(n.keys()),...Object.keys(t)],hasShorthand:f,transform:p,shorthands:n,resolveShorthand:m,register:a,getTypes:()=>{const e=new Map;for(const[t,r]of l.entries()){if(0===r.size){e.set(t,["string"]);continue}const i=Array.from(r).map((e=>e.startsWith("CssProperties")?e:e.startsWith("type:")?e.replace("type:",""):JSON.stringify(e)));e.set(t,i)}return e},addPropertyType:(e,t)=>{const r=l.get(e)??new Set;l.set(e,new Set([...r,...t]))}};return g}function ps(){const e=Co(...arguments),{theme:t={},utilities:r={},globalCss:i={},cssVarsRoot:n=":where(:root, :host)",cssVarsPrefix:o="chakra",preflight:a}=e,s=function(e){const t=e.layers??Ia,r=Object.values(t).sort(((e,t)=>Ta[e]-Ta[t]));return{names:r,atRule:`@layer ${r.join(", ")};`,wrap(r,i){if(e.disableLayers)return i;const n=t[r];return{[`@layer ${n}`]:i}}}}(e),l=ls({breakpoints:t.breakpoints,tokens:t.tokens,semanticTokens:t.semanticTokens,prefix:o}),c=Xo(t.breakpoints??{}),u=Jo({conditions:e.conditions??{},breakpoints:c}),d=hs({config:r,tokens:l});!function(){const{textStyles:e,layerStyles:r,animationStyles:i}=t,n=Lo({textStyle:e,layerStyle:r,animationStyle:i});for(const[t,o]of Object.entries(n)){const e=jo(o??{},(e=>wo(e)&&"value"in e));d.register(t,{values:Object.keys(e),transform:t=>y(e[t])})}}(),d.addPropertyType("animationName",Object.keys(t.keyframes??{}));const h=new Set(["css",...d.keys(),...u.keys()]),p=Uo((e=>h.has(e)||zo(e))),f=e=>Array.isArray(e)?e.reduce(((e,t,r)=>{const i=u.breakpoints[r];return null!=t&&(e[i]=t),e}),{}):e,m=function(e){const{utility:t,normalize:r}=e,{hasShorthand:i,resolveShorthand:n}=t;return function(e){return Fo(e,r,{stop:e=>Array.isArray(e),getKey:i?n:void 0})}}({utility:d,normalize:f}),g=function(e){const{conditions:t,isValidProperty:r}=e;return function(e){return Fo(e,(e=>e),{getKey:(e,i)=>wo(i)?t.has(e)||r(e)?e:function(e){const t=[];let r=0,i="",n=!1;for(let o=0;o<e.length;o++){const a=e[o];"\\"!==a||n?n?(n=!1,i+=a):("("===a?r++:")"===a&&r--,","===a&&0===r?(t.push(i.trim()),i=""):i+=a):(n=!0,i+=a)}return i&&t.push(i.trim()),t}(e).map((e=>"&"+e)).join(", "):e})}}({conditions:u,isValidProperty:p}),y=ba({transform:d.transform,conditions:u,normalize:m}),_=Sa({css:y,conditions:u,normalize:m,layers:s}),b=Ea({cva:_});const v=function(e){const t=new Map;return e.allTokens.forEach((e=>{const{cssVar:r,virtual:i,conditions:n}=e.extensions,o=n||i?r.ref:e.value;t.set(e.name,{value:o,variable:r.ref})})),t}(l),x=(e,t)=>v.get(e)?.value||t;function w(e){return Object.hasOwnProperty.call(t.recipes??{},e)}function S(e){return Object.hasOwnProperty.call(t.slotRecipes??{},e)}return x.var=(e,t)=>v.get(e)?.variable||t,{$$chakra:!0,_config:e,breakpoints:c,tokens:l,conditions:u,utility:d,token:x,properties:h,layers:s,isValidProperty:p,splitCssProps:function(e){return Vo(e,p)},normalizeValue:f,getTokenCss:function(){const e={};for(const[t,r]of l.cssVarMap.entries()){const i=Object.fromEntries(r);if(0!==Object.keys(i).length)if("base"===t){ko(e,y(g({[n]:i})))}else{ko(e,y(g({[t]:i})))}}return s.wrap("tokens",e)},getGlobalCss:function(){const e=Object.fromEntries(Object.entries(t.keyframes??{}).map((e=>{let[t,r]=e;return[`@keyframes ${t}`,r]}))),r=Object.assign({},e,y(g(i)));return s.wrap("base",r)},getPreflightCss:function(){const e=function(e){const{preflight:t}=e;if(!t)return{};const{scope:r="",level:i="parent"}=wo(t)?t:{};let n="";r&&"parent"===i?n=`${r} `:r&&"element"===i&&(n=`&${r}`);const o={"*":{margin:"0px",padding:"0px",font:"inherit",wordWrap:"break-word",WebkitTapHighlightColor:"transparent"},"*, *::before, *::after, *::backdrop":{boxSizing:"border-box",borderWidth:"0px",borderStyle:"solid",borderColor:"var(--global-color-border, currentColor)"},hr:{height:"0px",color:"inherit",borderTopWidth:"1px"},body:{minHeight:"100dvh",position:"relative"},img:{borderStyle:"none"},"img, svg, video, canvas, audio, iframe, embed, object":{display:"block",verticalAlign:"middle"},iframe:{border:"none"},"img, video":{maxWidth:"100%",height:"auto"},"p, h1, h2, h3, h4, h5, h6":{overflowWrap:"break-word"},"ol, ul":{listStyle:"none"},"code, kbd, pre, samp":{fontSize:"1em"},"button, [type='button'], [type='reset'], [type='submit']":{WebkitAppearance:"button",backgroundColor:"transparent",backgroundImage:"none"},"button, input, optgroup, select, textarea":{color:"inherit"},"button, select":{textTransform:"none"},table:{textIndent:"0px",borderColor:"inherit",borderCollapse:"collapse"},"*::placeholder":{opacity:"unset",color:"#9ca3af",userSelect:"none"},textarea:{resize:"vertical"},summary:{display:"list-item"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sub:{bottom:"-0.25em"},sup:{top:"-0.5em"},dialog:{padding:"0px"},a:{color:"inherit",textDecoration:"inherit"},"abbr:where([title])":{textDecoration:"underline dotted"},"b, strong":{fontWeight:"bolder"},"code, kbd, samp, pre":{fontSize:"1em","--font-mono-fallback":"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New'",fontFamily:"var(--global-font-mono, var(--font-mono-fallback))"},'input[type="text"], input[type="email"], input[type="search"], input[type="password"]':{WebkitAppearance:"none",MozAppearance:"none"},"input[type='search']":{WebkitAppearance:"textfield",outlineOffset:"-2px"},"::-webkit-search-decoration, ::-webkit-search-cancel-button":{WebkitAppearance:"none"},"::-webkit-file-upload-button":{WebkitAppearance:"button",font:"inherit"},'input[type="number"]::-webkit-inner-spin-button, input[type="number"]::-webkit-outer-spin-button':{height:"auto"},"input[type='number']":{MozAppearance:"textfield"},":-moz-ui-invalid":{boxShadow:"none"},":-moz-focusring":{outline:"auto"},"[hidden]:where(:not([hidden='until-found']))":{display:"none !important"}},a={[r||"html"]:{lineHeight:1.5,"--font-fallback":"ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'",WebkitTextSizeAdjust:"100%",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",textRendering:"optimizeLegibility",touchAction:"manipulation",MozTabSize:"4",tabSize:"4",fontFamily:"var(--global-font-body, var(--font-fallback))"}};if("element"===i){const e=Object.entries(o).reduce(((e,t)=>{let[r,i]=t;return e[r]={[n]:i},e}),{});Object.assign(a,e)}else n?a[n]=o:Object.assign(a,o);return a}({preflight:a});return s.wrap("reset",e)},css:y,cva:_,sva:b,getRecipe:function(e,r){return t.recipes?.[e]??r},getSlotRecipe:function(e,r){return t.slotRecipes?.[e]??r},hasRecipe:function(e){return w(e)||S(e)},isRecipe:w,isSlotRecipe:S}}const fs=(e,t)=>null!=t?`${e}(${t})`:t,ms=e=>{if((e=>/^var\(--.+\)$/.test(e))(e)||null==e)return e;const t="string"===typeof e&&!e.endsWith("deg");return"number"===typeof e||t?`${e}deg`:e},gs=e=>({values:["outside","inside","mixed","none"],transform(t,r){let{token:i}=r;const n=i("colors.colorPalette.focusRing");return{inside:{"--focus-ring-color":n,[e]:{outlineOffset:"0px",outlineWidth:"var(--focus-ring-width, 1px)",outlineColor:"var(--focus-ring-color)",outlineStyle:"var(--focus-ring-style, solid)",borderColor:"var(--focus-ring-color)"}},outside:{"--focus-ring-color":n,[e]:{outlineWidth:"var(--focus-ring-width, 2px)",outlineOffset:"var(--focus-ring-offset, 2px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"var(--focus-ring-color)"}},mixed:{"--focus-ring-color":n,[e]:{outlineWidth:"var(--focus-ring-width, 3px)",outlineStyle:"var(--focus-ring-style, solid)",outlineColor:"color-mix(in srgb, var(--focus-ring-color), transparent 60%)",borderColor:"var(--focus-ring-color)"}},none:{"--focus-ring-color":n,[e]:{outline:"none"}}}[t]??{}}}),ys=ds("borderColor"),_s=e=>({transition:e,transitionTimingFunction:"cubic-bezier(0.4, 0, 0.2, 1)",transitionDuration:"150ms"}),bs={hover:["@media (hover: hover)","&:is(:hover, [data-hover]):not(:disabled, [data-disabled])"],active:"&:is(:active, [data-active]):not(:disabled, [data-disabled], [data-state=open])",focus:"&:is(:focus, [data-focus])",focusWithin:"&:is(:focus-within, [data-focus-within])",focusVisible:"&:is(:focus-visible, [data-focus-visible])",disabled:"&:is(:disabled, [disabled], [data-disabled], [aria-disabled=true])",visited:"&:visited",target:"&:target",readOnly:"&:is([data-readonly], [aria-readonly=true], [readonly])",readWrite:"&:read-write",empty:"&:is(:empty, [data-empty])",checked:"&:is(:checked, [data-checked], [aria-checked=true], [data-state=checked])",enabled:"&:enabled",expanded:"&:is([aria-expanded=true], [data-expanded], [data-state=expanded])",highlighted:"&[data-highlighted]",complete:"&[data-complete]",incomplete:"&[data-incomplete]",dragging:"&[data-dragging]",before:"&::before",after:"&::after",firstLetter:"&::first-letter",firstLine:"&::first-line",marker:"&::marker",selection:"&::selection",file:"&::file-selector-button",backdrop:"&::backdrop",first:"&:first-of-type",last:"&:last-of-type",notFirst:"&:not(:first-of-type)",notLast:"&:not(:last-of-type)",only:"&:only-child",even:"&:nth-of-type(even)",odd:"&:nth-of-type(odd)",peerFocus:".peer:is(:focus, [data-focus]) ~ &",peerHover:".peer:is(:hover, [data-hover]):not(:disabled, [data-disabled]) ~ &",peerActive:".peer:is(:active, [data-active]):not(:disabled, [data-disabled]) ~ &",peerFocusWithin:".peer:focus-within ~ &",peerFocusVisible:".peer:is(:focus-visible, [data-focus-visible]) ~ &",peerDisabled:".peer:is(:disabled, [disabled], [data-disabled]) ~ &",peerChecked:".peer:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) ~ &",peerInvalid:".peer:is(:invalid, [data-invalid], [aria-invalid=true]) ~ &",peerExpanded:".peer:is([aria-expanded=true], [data-expanded], [data-state=expanded]) ~ &",peerPlaceholderShown:".peer:placeholder-shown ~ &",groupFocus:".group:is(:focus, [data-focus]) &",groupHover:".group:is(:hover, [data-hover]):not(:disabled, [data-disabled]) &",groupActive:".group:is(:active, [data-active]):not(:disabled, [data-disabled]) &",groupFocusWithin:".group:focus-within &",groupFocusVisible:".group:is(:focus-visible, [data-focus-visible]) &",groupDisabled:".group:is(:disabled, [disabled], [data-disabled]) &",groupChecked:".group:is(:checked, [data-checked], [aria-checked=true], [data-state=checked]) &",groupExpanded:".group:is([aria-expanded=true], [data-expanded], [data-state=expanded]) &",groupInvalid:".group:invalid &",indeterminate:"&:is(:indeterminate, [data-indeterminate], [aria-checked=mixed], [data-state=indeterminate])",required:"&:is([data-required], [aria-required=true])",valid:"&:is([data-valid], [data-state=valid])",invalid:"&:is([data-invalid], [aria-invalid=true], [data-state=invalid])",autofill:"&:autofill",inRange:"&:is(:in-range, [data-in-range])",outOfRange:"&:is(:out-of-range, [data-outside-range])",placeholder:"&::placeholder, &[data-placeholder]",placeholderShown:"&:is(:placeholder-shown, [data-placeholder-shown])",pressed:"&:is([aria-pressed=true], [data-pressed])",selected:"&:is([aria-selected=true], [data-selected])",grabbed:"&:is([aria-grabbed=true], [data-grabbed])",underValue:"&[data-state=under-value]",overValue:"&[data-state=over-value]",atValue:"&[data-state=at-value]",default:"&:default",optional:"&:optional",open:"&:is([open], [data-open], [data-state=open])",closed:"&:is([closed], [data-closed], [data-state=closed])",fullscreen:"&is(:fullscreen, [data-fullscreen])",loading:"&:is([data-loading], [aria-busy=true])",hidden:"&:is([hidden], [data-hidden])",current:"&[data-current]",currentPage:"&[aria-current=page]",currentStep:"&[aria-current=step]",today:"&[data-today]",unavailable:"&[data-unavailable]",rangeStart:"&[data-range-start]",rangeEnd:"&[data-range-end]",now:"&[data-now]",topmost:"&[data-topmost]",motionReduce:"@media (prefers-reduced-motion: reduce)",motionSafe:"@media (prefers-reduced-motion: no-preference)",print:"@media print",landscape:"@media (orientation: landscape)",portrait:"@media (orientation: portrait)",dark:".dark &, .dark .chakra-theme:not(.light) &",light:":root &, .light &",osDark:"@media (prefers-color-scheme: dark)",osLight:"@media (prefers-color-scheme: light)",highContrast:"@media (forced-colors: active)",lessContrast:"@media (prefers-contrast: less)",moreContrast:"@media (prefers-contrast: more)",ltr:"[dir=ltr] &",rtl:"[dir=rtl] &",scrollbar:"&::-webkit-scrollbar",scrollbarThumb:"&::-webkit-scrollbar-thumb",scrollbarTrack:"&::-webkit-scrollbar-track",horizontal:"&[data-orientation=horizontal]",vertical:"&[data-orientation=vertical]",icon:"& :where(svg)",starting:"@starting-style"},vs=Ma("bg-currentcolor"),xs=e=>e===vs.ref||"currentBg"===e,ws=e=>({...e("colors"),currentBg:vs}),Ss={conditions:bs,utilities:{background:{values:ws,shorthand:["bg"],transform(e,t){if(xs(t.raw))return{background:vs.ref};const r=ds("background")(e,t);return{...r,[vs.var]:r?.background}}},backgroundColor:{values:ws,shorthand:["bgColor"],transform(e,t){if(xs(t.raw))return{backgroundColor:vs.ref};const r=ds("backgroundColor")(e,t);return{...r,[vs.var]:r?.backgroundColor}}},backgroundSize:{shorthand:["bgSize"]},backgroundPosition:{shorthand:["bgPos"]},backgroundRepeat:{shorthand:["bgRepeat"]},backgroundAttachment:{shorthand:["bgAttachment"]},backgroundClip:{shorthand:["bgClip"],values:["text"],transform:e=>"text"===e?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},backgroundGradient:{shorthand:["bgGradient"],values:e=>({...e("gradients"),"to-t":"linear-gradient(to top, var(--gradient))","to-tr":"linear-gradient(to top right, var(--gradient))","to-r":"linear-gradient(to right, var(--gradient))","to-br":"linear-gradient(to bottom right, var(--gradient))","to-b":"linear-gradient(to bottom, var(--gradient))","to-bl":"linear-gradient(to bottom left, var(--gradient))","to-l":"linear-gradient(to left, var(--gradient))","to-tl":"linear-gradient(to top left, var(--gradient))"}),transform:e=>({"--gradient-stops":"var(--gradient-from), var(--gradient-to)","--gradient":"var(--gradient-via-stops, var(--gradient-stops))",backgroundImage:e})},gradientFrom:{values:ws,transform:ds("--gradient-from")},gradientTo:{values:ws,transform:ds("--gradient-to")},gradientVia:{values:ws,transform:(e,t)=>({...ds("--gradient-via")(e,t),"--gradient-via-stops":"var(--gradient-from), var(--gradient-via), var(--gradient-to)"})},backgroundImage:{values:"gradients",shorthand:["bgImg","bgImage"]},border:{values:"borders"},borderTop:{values:"borders"},borderLeft:{values:"borders"},borderBlockStart:{values:"borders"},borderRight:{values:"borders"},borderInlineEnd:{values:"borders"},borderBottom:{values:"borders"},borderBlockEnd:{values:"borders"},borderInlineStart:{values:"borders",shorthand:["borderStart"]},borderInline:{values:"borders",shorthand:["borderX"]},borderBlock:{values:"borders",shorthand:["borderY"]},borderColor:{values:ws,transform:ds("borderColor")},borderTopColor:{values:ws,transform:ds("borderTopColor")},borderBlockStartColor:{values:ws,transform:ds("borderBlockStartColor")},borderBottomColor:{values:ws,transform:ds("borderBottomColor")},borderBlockEndColor:{values:ws,transform:ds("borderBlockEndColor")},borderLeftColor:{values:ws,transform:ds("borderLeftColor")},borderInlineStartColor:{values:ws,shorthand:["borderStartColor"],transform:ds("borderInlineStartColor")},borderRightColor:{values:ws,transform:ds("borderRightColor")},borderInlineEndColor:{values:ws,shorthand:["borderEndColor"],transform:ds("borderInlineEndColor")},borderStyle:{values:"borderStyles"},borderTopStyle:{values:"borderStyles"},borderBlockStartStyle:{values:"borderStyles"},borderBottomStyle:{values:"borderStyles"},borderBlockEndStyle:{values:"borderStyles"},borderInlineStartStyle:{values:"borderStyles",shorthand:["borderStartStyle"]},borderInlineEndStyle:{values:"borderStyles",shorthand:["borderEndStyle"]},borderLeftStyle:{values:"borderStyles"},borderRightStyle:{values:"borderStyles"},borderRadius:{values:"radii",shorthand:["rounded"]},borderTopLeftRadius:{values:"radii",shorthand:["roundedTopLeft"]},borderStartStartRadius:{values:"radii",shorthand:["roundedStartStart","borderTopStartRadius"]},borderEndStartRadius:{values:"radii",shorthand:["roundedEndStart","borderBottomStartRadius"]},borderTopRightRadius:{values:"radii",shorthand:["roundedTopRight"]},borderStartEndRadius:{values:"radii",shorthand:["roundedStartEnd","borderTopEndRadius"]},borderEndEndRadius:{values:"radii",shorthand:["roundedEndEnd","borderBottomEndRadius"]},borderBottomLeftRadius:{values:"radii",shorthand:["roundedBottomLeft"]},borderBottomRightRadius:{values:"radii",shorthand:["roundedBottomRight"]},borderInlineStartRadius:{values:"radii",property:"borderRadius",shorthand:["roundedStart","borderStartRadius"],transform:e=>({borderStartStartRadius:e,borderEndStartRadius:e})},borderInlineEndRadius:{values:"radii",property:"borderRadius",shorthand:["roundedEnd","borderEndRadius"],transform:e=>({borderStartEndRadius:e,borderEndEndRadius:e})},borderTopRadius:{values:"radii",property:"borderRadius",shorthand:["roundedTop"],transform:e=>({borderTopLeftRadius:e,borderTopRightRadius:e})},borderBottomRadius:{values:"radii",property:"borderRadius",shorthand:["roundedBottom"],transform:e=>({borderBottomLeftRadius:e,borderBottomRightRadius:e})},borderLeftRadius:{values:"radii",property:"borderRadius",shorthand:["roundedLeft"],transform:e=>({borderTopLeftRadius:e,borderBottomLeftRadius:e})},borderRightRadius:{values:"radii",property:"borderRadius",shorthand:["roundedRight"],transform:e=>({borderTopRightRadius:e,borderBottomRightRadius:e})},borderWidth:{values:"borderWidths"},borderBlockStartWidth:{values:"borderWidths"},borderTopWidth:{values:"borderWidths"},borderBottomWidth:{values:"borderWidths"},borderBlockEndWidth:{values:"borderWidths"},borderRightWidth:{values:"borderWidths"},borderInlineWidth:{values:"borderWidths",shorthand:["borderXWidth"]},borderInlineStartWidth:{values:"borderWidths",shorthand:["borderStartWidth"]},borderInlineEndWidth:{values:"borderWidths",shorthand:["borderEndWidth"]},borderLeftWidth:{values:"borderWidths"},borderBlockWidth:{values:"borderWidths",shorthand:["borderYWidth"]},color:{values:ws,transform:ds("color")},fill:{values:ws,transform:ds("fill")},stroke:{values:ws,transform:ds("stroke")},accentColor:{values:ws,transform:ds("accentColor")},divideX:{values:{type:"string"},transform:e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderInlineStartWidth:e,borderInlineEndWidth:"0px"}})},divideY:{values:{type:"string"},transform:e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderTopWidth:e,borderBottomWidth:"0px"}})},divideColor:{values:ws,transform:(e,t)=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":ys(e,t)})},divideStyle:{property:"borderStyle",transform:e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{borderStyle:e}})},boxShadow:{values:"shadows",shorthand:["shadow"]},boxShadowColor:{values:ws,transform:ds("--shadow-color"),shorthand:["shadowColor"]},mixBlendMode:{shorthand:["blendMode"]},backgroundBlendMode:{shorthand:["bgBlendMode"]},opacity:{values:"opacity"},filter:{transform:e=>"auto"!==e?{filter:e}:{filter:"var(--blur) var(--brightness) var(--contrast) var(--grayscale) var(--hue-rotate) var(--invert) var(--saturate) var(--sepia) var(--drop-shadow)"}},blur:{values:"blurs",transform:e=>({"--blur":fs("blur",e)})},brightness:{transform:e=>({"--brightness":fs("brightness",e)})},contrast:{transform:e=>({"--contrast":fs("contrast",e)})},grayscale:{transform:e=>({"--grayscale":fs("grayscale",e)})},hueRotate:{transform:e=>({"--hue-rotate":fs("hue-rotate",ms(e))})},invert:{transform:e=>({"--invert":fs("invert",e)})},saturate:{transform:e=>({"--saturate":fs("saturate",e)})},sepia:{transform:e=>({"--sepia":fs("sepia",e)})},dropShadow:{transform:e=>({"--drop-shadow":fs("drop-shadow",e)})},backdropFilter:{transform:e=>"auto"!==e?{backdropFilter:e}:{backdropFilter:"var(--backdrop-blur) var(--backdrop-brightness) var(--backdrop-contrast) var(--backdrop-grayscale) var(--backdrop-hue-rotate) var(--backdrop-invert) var(--backdrop-opacity) var(--backdrop-saturate) var(--backdrop-sepia)"}},backdropBlur:{values:"blurs",transform:e=>({"--backdrop-blur":fs("blur",e)})},backdropBrightness:{transform:e=>({"--backdrop-brightness":fs("brightness",e)})},backdropContrast:{transform:e=>({"--backdrop-contrast":fs("contrast",e)})},backdropGrayscale:{transform:e=>({"--backdrop-grayscale":fs("grayscale",e)})},backdropHueRotate:{transform:e=>({"--backdrop-hue-rotate":fs("hue-rotate",ms(e))})},backdropInvert:{transform:e=>({"--backdrop-invert":fs("invert",e)})},backdropOpacity:{transform:e=>({"--backdrop-opacity":fs("opacity",e)})},backdropSaturate:{transform:e=>({"--backdrop-saturate":fs("saturate",e)})},backdropSepia:{transform:e=>({"--backdrop-sepia":fs("sepia",e)})},flexBasis:{values:"sizes"},gap:{values:"spacing"},rowGap:{values:"spacing",shorthand:["gapY"]},columnGap:{values:"spacing",shorthand:["gapX"]},flexDirection:{shorthand:["flexDir"]},gridGap:{values:"spacing"},gridColumnGap:{values:"spacing"},gridRowGap:{values:"spacing"},outlineColor:{values:ws,transform:ds("outlineColor")},focusRing:gs("&:is(:focus, [data-focus])"),focusVisibleRing:gs("&:is(:focus-visible, [data-focus-visible])"),focusRingColor:{values:ws,transform:ds("--focus-ring-color")},focusRingOffset:{values:"spacing",transform:e=>({"--focus-ring-offset":e})},focusRingWidth:{values:"borderWidths",property:"outlineWidth",transform:e=>({"--focus-ring-width":e})},focusRingStyle:{values:"borderStyles",property:"outlineStyle",transform:e=>({"--focus-ring-style":e})},aspectRatio:{values:"aspectRatios"},width:{values:"sizes",shorthand:["w"]},inlineSize:{values:"sizes"},height:{values:"sizes",shorthand:["h"]},blockSize:{values:"sizes"},boxSize:{values:"sizes",property:"width",transform:e=>({width:e,height:e})},minWidth:{values:"sizes",shorthand:["minW"]},minInlineSize:{values:"sizes"},minHeight:{values:"sizes",shorthand:["minH"]},minBlockSize:{values:"sizes"},maxWidth:{values:"sizes",shorthand:["maxW"]},maxInlineSize:{values:"sizes"},maxHeight:{values:"sizes",shorthand:["maxH"]},maxBlockSize:{values:"sizes"},hideFrom:{values:"breakpoints",transform:(e,t)=>{let{raw:r,token:i}=t;const n=i.raw(`breakpoints.${r}`)?`@breakpoint ${r}`:`@media screen and (min-width: ${e})`;return{[n]:{display:"none"}}}},hideBelow:{values:"breakpoints",transform(e,t){let{raw:r,token:i}=t;const n=i.raw(`breakpoints.${r}`)?`@breakpoint ${r}Down`:`@media screen and (max-width: ${e})`;return{[n]:{display:"none"}}}},overscrollBehavior:{shorthand:["overscroll"]},overscrollBehaviorX:{shorthand:["overscrollX"]},overscrollBehaviorY:{shorthand:["overscrollY"]},scrollbar:{values:["visible","hidden"],transform(e){switch(e){case"visible":return{msOverflowStyle:"auto",scrollbarWidth:"auto","&::-webkit-scrollbar":{display:"block"}};case"hidden":return{msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}};default:return{}}}},scrollbarColor:{values:ws,transform:ds("scrollbarColor")},scrollbarGutter:{values:"spacing"},scrollbarWidth:{values:"sizes"},scrollMargin:{values:"spacing"},scrollMarginTop:{values:"spacing"},scrollMarginBottom:{values:"spacing"},scrollMarginLeft:{values:"spacing"},scrollMarginRight:{values:"spacing"},scrollMarginX:{values:"spacing",transform:e=>({scrollMarginLeft:e,scrollMarginRight:e})},scrollMarginY:{values:"spacing",transform:e=>({scrollMarginTop:e,scrollMarginBottom:e})},scrollPadding:{values:"spacing"},scrollPaddingTop:{values:"spacing"},scrollPaddingBottom:{values:"spacing"},scrollPaddingLeft:{values:"spacing"},scrollPaddingRight:{values:"spacing"},scrollPaddingInline:{values:"spacing",shorthand:["scrollPaddingX"]},scrollPaddingBlock:{values:"spacing",shorthand:["scrollPaddingY"]},scrollSnapType:{values:{none:"none",x:"x var(--scroll-snap-strictness)",y:"y var(--scroll-snap-strictness)",both:"both var(--scroll-snap-strictness)"}},scrollSnapStrictness:{values:["mandatory","proximity"],transform:e=>({"--scroll-snap-strictness":e})},scrollSnapMargin:{values:"spacing"},scrollSnapMarginTop:{values:"spacing"},scrollSnapMarginBottom:{values:"spacing"},scrollSnapMarginLeft:{values:"spacing"},scrollSnapMarginRight:{values:"spacing"},listStylePosition:{shorthand:["listStylePos"]},listStyleImage:{shorthand:["listStyleImg"]},position:{shorthand:["pos"]},zIndex:{values:"zIndex"},inset:{values:"spacing"},insetInline:{values:"spacing",shorthand:["insetX"]},insetBlock:{values:"spacing",shorthand:["insetY"]},top:{values:"spacing"},insetBlockStart:{values:"spacing"},bottom:{values:"spacing"},insetBlockEnd:{values:"spacing"},left:{values:"spacing"},right:{values:"spacing"},insetInlineStart:{values:"spacing",shorthand:["insetStart"]},insetInlineEnd:{values:"spacing",shorthand:["insetEnd"]},ring:{transform:e=>({"--ring-offset-shadow":"var(--ring-inset) 0 0 0 var(--ring-offset-width) var(--ring-offset-color)","--ring-shadow":"var(--ring-inset) 0 0 0 calc(var(--ring-width) + var(--ring-offset-width)) var(--ring-color)","--ring-width":e,boxShadow:"var(--ring-offset-shadow), var(--ring-shadow), var(--shadow, 0 0 #0000)"})},ringColor:{values:ws,transform:ds("--ring-color")},ringOffset:{transform:e=>({"--ring-offset-width":e})},ringOffsetColor:{values:ws,transform:ds("--ring-offset-color")},ringInset:{transform:e=>({"--ring-inset":e})},margin:{values:"spacing",shorthand:["m"]},marginTop:{values:"spacing",shorthand:["mt"]},marginBlockStart:{values:"spacing",shorthand:["mt"]},marginRight:{values:"spacing",shorthand:["mr"]},marginBottom:{values:"spacing",shorthand:["mb"]},marginBlockEnd:{values:"spacing"},marginLeft:{values:"spacing",shorthand:["ml"]},marginInlineStart:{values:"spacing",shorthand:["ms","marginStart"]},marginInlineEnd:{values:"spacing",shorthand:["me","marginEnd"]},marginInline:{values:"spacing",shorthand:["mx","marginX"]},marginBlock:{values:"spacing",shorthand:["my","marginY"]},padding:{values:"spacing",shorthand:["p"]},paddingTop:{values:"spacing",shorthand:["pt"]},paddingRight:{values:"spacing",shorthand:["pr"]},paddingBottom:{values:"spacing",shorthand:["pb"]},paddingBlockStart:{values:"spacing"},paddingBlockEnd:{values:"spacing"},paddingLeft:{values:"spacing",shorthand:["pl"]},paddingInlineStart:{values:"spacing",shorthand:["ps","paddingStart"]},paddingInlineEnd:{values:"spacing",shorthand:["pe","paddingEnd"]},paddingInline:{values:"spacing",shorthand:["px","paddingX"]},paddingBlock:{values:"spacing",shorthand:["py","paddingY"]},textDecoration:{shorthand:["textDecor"]},textDecorationColor:{values:ws,transform:ds("textDecorationColor")},textShadow:{values:"shadows"},transform:{transform:e=>{let t=e;return"auto"===e&&(t="translateX(var(--translate-x, 0)) translateY(var(--translate-y, 0)) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),"auto-gpu"===e&&(t="translate3d(var(--translate-x, 0), var(--translate-y, 0), 0) rotate(var(--rotate, 0)) scaleX(var(--scale-x, 1)) scaleY(var(--scale-y, 1)) skewX(var(--skew-x, 0)) skewY(var(--skew-y, 0))"),{transform:t}}},skewX:{transform:e=>({"--skew-x":ms(e)})},skewY:{transform:e=>({"--skew-y":ms(e)})},scaleX:{transform:e=>({"--scale-x":e})},scaleY:{transform:e=>({"--scale-y":e})},scale:{transform:e=>"auto"!==e?{scale:e}:{scale:"var(--scale-x, 1) var(--scale-y, 1)"}},spaceXReverse:{values:{type:"boolean"},transform:e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":e?"1":void 0}})},spaceX:{property:"marginInlineStart",values:"spacing",transform:e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-x-reverse":"0",marginInlineStart:`calc(${e} * calc(1 - var(--space-x-reverse)))`,marginInlineEnd:`calc(${e} * var(--space-x-reverse))`}})},spaceYReverse:{values:{type:"boolean"},transform:e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":e?"1":void 0}})},spaceY:{property:"marginTop",values:"spacing",transform:e=>({"& > :not(style, [hidden]) ~ :not(style, [hidden])":{"--space-y-reverse":"0",marginTop:`calc(${e} * calc(1 - var(--space-y-reverse)))`,marginBottom:`calc(${e} * var(--space-y-reverse))`}})},rotate:{transform:e=>"auto"!==e?{rotate:ms(e)}:{rotate:"var(--rotate-x, 0) var(--rotate-y, 0) var(--rotate-z, 0)"}},rotateX:{transform:e=>({"--rotate-x":ms(e)})},rotateY:{transform:e=>({"--rotate-y":ms(e)})},translate:{transform:e=>"auto"!==e?{translate:e}:{translate:"var(--translate-x) var(--translate-y)"}},translateX:{values:"spacing",transform:e=>({"--translate-x":e})},translateY:{values:"spacing",transform:e=>({"--translate-y":e})},transition:{values:["all","common","colors","opacity","position","backgrounds","size","shadow","transform"],transform(e){switch(e){case"all":return _s("all");case"position":return _s("left, right, top, bottom, inset-inline, inset-block");case"colors":return _s("color, background-color, border-color, text-decoration-color, fill, stroke");case"opacity":return _s("opacity");case"shadow":return _s("box-shadow");case"transform":return _s("transform");case"size":return _s("width, height");case"backgrounds":return _s("background, background-color, background-image, background-position");case"common":return _s("color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter");default:return{transition:e}}}},transitionDuration:{values:"durations"},transitionProperty:{values:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, translate, transform",colors:"background-color, border-color, color, fill, stroke",size:"width, height",position:"left, right, top, bottom, inset-inline, inset-block",background:"background, background-color, background-image, background-position"}},transitionTimingFunction:{values:"easings"},animation:{values:"animations"},animationDuration:{values:"durations"},animationDelay:{values:"durations"},animationTimingFunction:{values:"easings"},fontFamily:{values:"fonts"},fontSize:{values:"fontSizes"},fontWeight:{values:"fontWeights"},lineHeight:{values:"lineHeights"},letterSpacing:{values:"letterSpacings"},textIndent:{values:"spacing"},truncate:{values:{type:"boolean"},transform:e=>!0===e?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:{}},lineClamp:{transform:e=>"none"===e?{WebkitLineClamp:"unset"}:{overflow:"hidden",display:"-webkit-box",WebkitLineClamp:e,WebkitBoxOrient:"vertical",textWrap:"wrap"}},srOnly:{values:{type:"boolean"},transform:e=>Is[e]||{}},debug:{values:{type:"boolean"},transform:e=>e?{outline:"1px solid blue !important","& > *":{outline:"1px solid red !important"}}:{}},caretColor:{values:ws,transform:ds("caretColor")},cursor:{values:"cursor"}}},Is={true:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},false:{position:"static",width:"auto",height:"auto",padding:"0",margin:"0",overflow:"visible",clip:"auto",whiteSpace:"normal"}},Ts="var(--chakra-empty,/*!*/ /*!*/)",ks={"*":{fontFeatureSettings:'"cv11"',"--ring-inset":Ts,"--ring-offset-width":"0px","--ring-offset-color":"#fff","--ring-color":"rgba(66, 153, 225, 0.6)","--ring-offset-shadow":"0 0 #0000","--ring-shadow":"0 0 #0000",...Object.fromEntries(["brightness","contrast","grayscale","hue-rotate","invert","saturate","sepia","drop-shadow"].map((e=>[`--${e}`,Ts]))),...Object.fromEntries(["blur","brightness","contrast","grayscale","hue-rotate","invert","opacity","saturate","sepia"].map((e=>[`--backdrop-${e}`,Ts]))),"--global-font-mono":"fonts.mono","--global-font-body":"fonts.body","--global-color-border":"colors.border"},html:{color:"fg",bg:"bg",lineHeight:"1.5",colorPalette:"gray"},"*::placeholder":{color:"fg.muted/80"},"*::selection":{bg:"colorPalette.muted/80"}},Es={"fill.muted":{value:{background:"colorPalette.muted",color:"colorPalette.fg"}},"fill.subtle":{value:{background:"colorPalette.subtle",color:"colorPalette.fg"}},"fill.surface":{value:{background:"colorPalette.subtle",color:"colorPalette.fg",boxShadow:"0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.muted"}},"fill.solid":{value:{background:"colorPalette.solid",color:"colorPalette.contrast"}},"outline.subtle":{value:{color:"colorPalette.fg",boxShadow:"inset 0 0 0px 1px var(--shadow-color)",boxShadowColor:"colorPalette.subtle"}},"outline.solid":{value:{borderWidth:"1px",borderColor:"colorPalette.solid",color:"colorPalette.fg"}},"indicator.bottom":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",bottom:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.top":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",top:"var(--indicator-offset-y, 0)",insetInline:"var(--indicator-offset-x, 0)",height:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.start":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineStart:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},"indicator.end":{value:{position:"relative","--indicator-color-fallback":"colors.colorPalette.solid",_before:{content:'""',position:"absolute",insetInlineEnd:"var(--indicator-offset-x, 0)",insetBlock:"var(--indicator-offset-y, 0)",width:"var(--indicator-thickness, 2px)",background:"var(--indicator-color, var(--indicator-color-fallback))"}}},disabled:{value:{opacity:"0.5",cursor:"not-allowed"}},none:{value:{}}},As={"slide-fade-in":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-from-bottom, fade-in"},"&[data-placement^=bottom]":{animationName:"slide-from-top, fade-in"},"&[data-placement^=left]":{animationName:"slide-from-right, fade-in"},"&[data-placement^=right]":{animationName:"slide-from-left, fade-in"}}},"slide-fade-out":{value:{transformOrigin:"var(--transform-origin)","&[data-placement^=top]":{animationName:"slide-to-bottom, fade-out"},"&[data-placement^=bottom]":{animationName:"slide-to-top, fade-out"},"&[data-placement^=left]":{animationName:"slide-to-right, fade-out"},"&[data-placement^=right]":{animationName:"slide-to-left, fade-out"}}},"scale-fade-in":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-in, fade-in"}},"scale-fade-out":{value:{transformOrigin:"var(--transform-origin)",animationName:"scale-out, fade-out"}}},Ps={className:"chakra-badge",base:{display:"inline-flex",alignItems:"center",borderRadius:"l2",gap:"1",fontWeight:"medium",fontVariantNumeric:"tabular-nums",whiteSpace:"nowrap",userSelect:"none"},variants:{variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg"},outline:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},plain:{color:"colorPalette.fg"}},size:{xs:{textStyle:"2xs",px:"1",minH:"4"},sm:{textStyle:"xs",px:"1.5",minH:"5"},md:{textStyle:"sm",px:"2",minH:"6"},lg:{textStyle:"sm",px:"2.5",minH:"7"}}},defaultVariants:{variant:"subtle",size:"sm"}},Cs={className:"chakra-button",base:{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",borderRadius:"l2",whiteSpace:"nowrap",verticalAlign:"middle",borderWidth:"1px",borderColor:"transparent",cursor:"button",flexShrink:"0",outline:"0",lineHeight:"1.2",isolation:"isolate",fontWeight:"medium",transitionProperty:"common",transitionDuration:"moderate",focusVisibleRing:"outside",_disabled:{layerStyle:"disabled"},_icon:{flexShrink:"0"}},variants:{size:{"2xs":{h:"6",minW:"6",textStyle:"xs",px:"2",gap:"1",_icon:{width:"3.5",height:"3.5"}},xs:{h:"8",minW:"8",textStyle:"xs",px:"2.5",gap:"1",_icon:{width:"4",height:"4"}},sm:{h:"9",minW:"9",px:"3.5",textStyle:"sm",gap:"2",_icon:{width:"4",height:"4"}},md:{h:"10",minW:"10",textStyle:"sm",px:"4",gap:"2",_icon:{width:"5",height:"5"}},lg:{h:"11",minW:"11",textStyle:"md",px:"5",gap:"3",_icon:{width:"5",height:"5"}},xl:{h:"12",minW:"12",textStyle:"md",px:"5",gap:"2.5",_icon:{width:"5",height:"5"}},"2xl":{h:"16",minW:"16",textStyle:"lg",px:"7",gap:"3",_icon:{width:"6",height:"6"}}},variant:{solid:{bg:"colorPalette.solid",color:"colorPalette.contrast",_hover:{bg:"colorPalette.solid/90"},_expanded:{bg:"colorPalette.solid/90"}},subtle:{bg:"colorPalette.subtle",color:"colorPalette.fg",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},surface:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted",_hover:{bg:"colorPalette.muted"},_expanded:{bg:"colorPalette.muted"}},outline:{borderWidth:"1px",borderColor:"colorPalette.muted",color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},ghost:{color:"colorPalette.fg",_hover:{bg:"colorPalette.subtle"},_expanded:{bg:"colorPalette.subtle"}},plain:{color:"colorPalette.fg"}}},defaultVariants:{size:"md",variant:"solid"}},Ms={className:"chakra-checkmark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"l1",focusVisibleRing:"outside",_icon:{boxSize:"full"},_invalid:{colorPalette:"red",borderColor:"border.error"},_disabled:{opacity:"0.5"}},variants:{size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5",p:"0.5"},lg:{boxSize:"6",p:"0.5"}},variant:{solid:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},outline:{borderColor:"border","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg",borderColor:"colorPalette.solid"}},subtle:{bg:"colorPalette.muted",borderColor:"colorPalette.muted","&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},plain:{"&:is([data-state=checked], [data-state=indeterminate])":{color:"colorPalette.fg"}},inverted:{borderColor:"border",color:"colorPalette.fg","&:is([data-state=checked], [data-state=indeterminate])":{borderColor:"colorPalette.solid"}}}},defaultVariants:{variant:"solid",size:"md"}},{variants:Os,defaultVariants:Rs}=Ps,Bs={className:"color-swatch",base:{boxSize:"var(--swatch-size)",shadow:"inset 0 0 0 1px rgba(0, 0, 0, 0.1)","--checker-size":"8px","--checker-bg":"colors.bg","--checker-fg":"colors.bg.emphasized",background:"linear-gradient(var(--color), var(--color)), repeating-conic-gradient(var(--checker-fg) 0%, var(--checker-fg) 25%, var(--checker-bg) 0%, var(--checker-bg) 50%) 0% 50% / var(--checker-size) var(--checker-size) !important",display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},variants:{size:{"2xs":{"--swatch-size":"sizes.3.5"},xs:{"--swatch-size":"sizes.4"},sm:{"--swatch-size":"sizes.4.5"},md:{"--swatch-size":"sizes.5"},lg:{"--swatch-size":"sizes.6"},xl:{"--swatch-size":"sizes.7"},"2xl":{"--swatch-size":"sizes.8"},inherit:{"--swatch-size":"inherit"},full:{"--swatch-size":"100%"}},shape:{square:{borderRadius:"none"},circle:{borderRadius:"full"},rounded:{borderRadius:"l1"}}},defaultVariants:{size:"md",shape:"rounded"}},Ds={className:"chakra-icon",base:{display:"inline-block",lineHeight:"1em",flexShrink:"0",color:"currentcolor",verticalAlign:"middle",width:"var(--icon-size)",height:"var(--icon-size)"},variants:{size:{inherit:{"--icon-size":"1em"},xs:{"--icon-size":"sizes.3"},sm:{"--icon-size":"sizes.4"},md:{"--icon-size":"sizes.5"},lg:{"--icon-size":"sizes.6"},xl:{"--icon-size":"sizes.7"},"2xl":{"--icon-size":"sizes.8"}}},defaultVariants:{size:"inherit"}},zs={className:"chakra-input",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},height:"var(--input-height)",minW:"var(--input-height)","--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{"2xs":{textStyle:"xs",px:"2","--input-height":"sizes.7"},xs:{textStyle:"xs",px:"2","--input-height":"sizes.8"},sm:{textStyle:"sm",px:"2.5","--input-height":"sizes.9"},md:{textStyle:"sm",px:"3","--input-height":"sizes.10"},lg:{textStyle:"md",px:"4","--input-height":"sizes.11"},xl:{textStyle:"md",px:"4.5","--input-height":"sizes.12"},"2xl":{textStyle:"lg",px:"5","--input-height":"sizes.16"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}},Ls={className:"chakra-radiomark",base:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0,verticalAlign:"top",color:"white",borderWidth:"1px",borderColor:"transparent",borderRadius:"full",cursor:"radio",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing",outlineOffset:"2px"},_invalid:{colorPalette:"red",borderColor:"red.500"},_disabled:{opacity:"0.5",cursor:"disabled"},"& .dot":{height:"100%",width:"100%",borderRadius:"full",bg:"currentColor",scale:"0.4"}},variants:{variant:{solid:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},subtle:{borderWidth:"1px",bg:"colorPalette.muted",borderColor:"colorPalette.muted",color:"transparent",_checked:{color:"colorPalette.fg"}},outline:{borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.fg",borderColor:"colorPalette.solid"},"& .dot":{scale:"0.6"}},inverted:{bg:"bg",borderWidth:"1px",borderColor:"inherit",_checked:{color:"colorPalette.solid",borderColor:"currentcolor"}}},size:{xs:{boxSize:"3"},sm:{boxSize:"4"},md:{boxSize:"5"},lg:{boxSize:"6"}}},defaultVariants:{variant:"solid",size:"md"}},Fs={badge:Ps,button:Cs,code:{className:"chakra-code",base:{fontFamily:"mono",alignItems:"center",display:"inline-flex",borderRadius:"l2"},variants:Os,defaultVariants:Rs},container:{className:"chakra-container",base:{position:"relative",maxWidth:"8xl",w:"100%",mx:"auto",px:{base:"4",md:"6",lg:"8"}},variants:{centerContent:{true:{display:"flex",flexDirection:"column",alignItems:"center"}},fluid:{true:{maxWidth:"full"}}}},heading:{className:"chakra-heading",base:{fontFamily:"heading",fontWeight:"semibold"},variants:{size:{xs:{textStyle:"xs"},sm:{textStyle:"sm"},md:{textStyle:"md"},lg:{textStyle:"lg"},xl:{textStyle:"xl"},"2xl":{textStyle:"2xl"},"3xl":{textStyle:"3xl"},"4xl":{textStyle:"4xl"},"5xl":{textStyle:"5xl"},"6xl":{textStyle:"6xl"},"7xl":{textStyle:"7xl"}}},defaultVariants:{size:"xl"}},input:zs,inputAddon:{className:"chakra-input-addon",base:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap",alignSelf:"stretch",borderRadius:"l2"},variants:{size:zs.variants.size,variant:{outline:{borderWidth:"1px",borderColor:"border",bg:"bg.muted"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.emphasized"},flushed:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}},defaultVariants:{size:"md",variant:"outline"}},kbd:{className:"chakra-kbd",base:{display:"inline-flex",alignItems:"center",fontWeight:"medium",fontFamily:"mono",flexShrink:"0",whiteSpace:"nowrap",wordSpacing:"-0.5em",userSelect:"none",px:"1",borderRadius:"l2"},variants:{variant:{raised:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderWidth:"1px",borderBottomWidth:"2px",borderColor:"colorPalette.muted"},outline:{borderWidth:"1px",color:"colorPalette.fg"},subtle:{bg:"colorPalette.muted",color:"colorPalette.fg"},plain:{color:"colorPalette.fg"}},size:{sm:{textStyle:"xs",height:"4.5"},md:{textStyle:"sm",height:"5"},lg:{textStyle:"md",height:"6"}}},defaultVariants:{size:"md",variant:"raised"}},link:{className:"chakra-link",base:{display:"inline-flex",alignItems:"center",outline:"none",gap:"1.5",cursor:"pointer",borderRadius:"l1",focusRing:"outside"},variants:{variant:{underline:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"},plain:{color:"colorPalette.fg",_hover:{textDecoration:"underline",textUnderlineOffset:"3px",textDecorationColor:"currentColor/20"}}}},defaultVariants:{variant:"plain"}},mark:{className:"chakra-mark",base:{bg:"transparent",color:"inherit",whiteSpace:"nowrap"},variants:{variant:{subtle:{bg:"colorPalette.subtle",color:"inherit"},solid:{bg:"colorPalette.solid",color:"colorPalette.contrast"},text:{fontWeight:"medium"},plain:{}}}},separator:{className:"chakra-separator",base:{display:"block",borderColor:"border"},variants:{variant:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"},dotted:{borderStyle:"dotted"}},orientation:{vertical:{height:"100%",borderInlineStartWidth:"var(--separator-thickness)"},horizontal:{width:"100%",borderTopWidth:"var(--separator-thickness)"}},size:{xs:{"--separator-thickness":"0.5px"},sm:{"--separator-thickness":"1px"},md:{"--separator-thickness":"2px"},lg:{"--separator-thickness":"3px"}}},defaultVariants:{size:"sm",variant:"solid",orientation:"horizontal"}},skeleton:{className:"chakra-skeleton",base:{},variants:{loading:{true:{borderRadius:"l2",boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none",flexShrink:"0","&::before, &::after, *":{visibility:"hidden"}},false:{background:"unset",animation:"fade-in var(--fade-duration, 0.1s) ease-out !important"}},variant:{pulse:{background:"bg.emphasized",animation:"pulse",animationDuration:"var(--duration, 1.2s)"},shine:{"--animate-from":"200%","--animate-to":"-200%","--start-color":"colors.bg.muted","--end-color":"colors.bg.emphasized",backgroundImage:"linear-gradient(270deg,var(--start-color),var(--end-color),var(--end-color),var(--start-color))",backgroundSize:"400% 100%",animation:"bg-position var(--duration, 5s) ease-in-out infinite"},none:{animation:"none"}}},defaultVariants:{variant:"pulse",loading:!0}},skipNavLink:{className:"chakra-skip-nav",base:{display:"inline-flex",bg:"bg.panel",padding:"2.5",borderRadius:"l2",fontWeight:"semibold",focusVisibleRing:"outside",textStyle:"sm",userSelect:"none",border:"0",height:"1px",width:"1px",margin:"-1px",outline:"0",overflow:"hidden",position:"absolute",clip:"rect(0 0 0 0)",_focusVisible:{clip:"auto",width:"auto",height:"auto",position:"fixed",top:"6",insetStart:"6"}}},spinner:{className:"chakra-spinner",base:{display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderWidth:"2px",borderRadius:"full",width:"var(--spinner-size)",height:"var(--spinner-size)",animation:"spin",animationDuration:"slowest","--spinner-track-color":"transparent",borderBottomColor:"var(--spinner-track-color)",borderInlineStartColor:"var(--spinner-track-color)"},variants:{size:{inherit:{"--spinner-size":"1em"},xs:{"--spinner-size":"sizes.3"},sm:{"--spinner-size":"sizes.4"},md:{"--spinner-size":"sizes.5"},lg:{"--spinner-size":"sizes.8"},xl:{"--spinner-size":"sizes.10"}}},defaultVariants:{size:"md"}},textarea:{className:"chakra-textarea",base:{width:"100%",minWidth:"0",outline:"0",position:"relative",appearance:"none",textAlign:"start",borderRadius:"l2",_disabled:{layerStyle:"disabled"},"--focus-color":"colors.colorPalette.focusRing","--error-color":"colors.border.error",_invalid:{focusRingColor:"var(--error-color)",borderColor:"var(--error-color)"}},variants:{size:{xs:{textStyle:"xs",px:"2",py:"1.5",scrollPaddingBottom:"1.5"},sm:{textStyle:"sm",px:"2.5",py:"2",scrollPaddingBottom:"2"},md:{textStyle:"sm",px:"3",py:"2",scrollPaddingBottom:"2"},lg:{textStyle:"md",px:"4",py:"3",scrollPaddingBottom:"3"},xl:{textStyle:"md",px:"4.5",py:"3.5",scrollPaddingBottom:"3.5"}},variant:{outline:{bg:"transparent",borderWidth:"1px",borderColor:"border",focusVisibleRing:"inside"},subtle:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted",focusVisibleRing:"inside"},flushed:{bg:"transparent",borderBottomWidth:"1px",borderBottomColor:"border",borderRadius:"0",px:"0",_focusVisible:{borderColor:"var(--focus-color)",boxShadow:"0px 1px 0px 0px var(--focus-color)"}}}},defaultVariants:{size:"md",variant:"outline"}},icon:Ds,checkmark:Ms,radiomark:Ls,colorSwatch:Bs},Ns=Po.colors({bg:{DEFAULT:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},emphasized:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},inverted:{value:{_light:"{colors.black}",_dark:"{colors.white}"}},panel:{value:{_light:"{colors.white}",_dark:"{colors.gray.950}"}},error:{value:{_light:"{colors.red.50}",_dark:"{colors.red.950}"}},warning:{value:{_light:"{colors.orange.50}",_dark:"{colors.orange.950}"}},success:{value:{_light:"{colors.green.50}",_dark:"{colors.green.950}"}},info:{value:{_light:"{colors.blue.50}",_dark:"{colors.blue.950}"}}},fg:{DEFAULT:{value:{_light:"{colors.black}",_dark:"{colors.gray.50}"}},muted:{value:{_light:"{colors.gray.600}",_dark:"{colors.gray.400}"}},subtle:{value:{_light:"{colors.gray.400}",_dark:"{colors.gray.500}"}},inverted:{value:{_light:"{colors.gray.50}",_dark:"{colors.black}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.300}"}},success:{value:{_light:"{colors.green.600}",_dark:"{colors.green.300}"}},info:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.300}"}}},border:{DEFAULT:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},muted:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},subtle:{value:{_light:"{colors.gray.50}",_dark:"{colors.gray.950}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},inverted:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},error:{value:{_light:"{colors.red.500}",_dark:"{colors.red.400}"}},warning:{value:{_light:"{colors.orange.500}",_dark:"{colors.orange.400}"}},success:{value:{_light:"{colors.green.500}",_dark:"{colors.green.400}"}},info:{value:{_light:"{colors.blue.500}",_dark:"{colors.blue.400}"}}},gray:{contrast:{value:{_light:"{colors.white}",_dark:"{colors.black}"}},fg:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}},subtle:{value:{_light:"{colors.gray.100}",_dark:"{colors.gray.900}"}},muted:{value:{_light:"{colors.gray.200}",_dark:"{colors.gray.800}"}},emphasized:{value:{_light:"{colors.gray.300}",_dark:"{colors.gray.700}"}},solid:{value:{_light:"{colors.gray.900}",_dark:"{colors.white}"}},focusRing:{value:{_light:"{colors.gray.800}",_dark:"{colors.gray.200}"}}},red:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.red.700}",_dark:"{colors.red.300}"}},subtle:{value:{_light:"{colors.red.100}",_dark:"{colors.red.900}"}},muted:{value:{_light:"{colors.red.200}",_dark:"{colors.red.800}"}},emphasized:{value:{_light:"{colors.red.300}",_dark:"{colors.red.700}"}},solid:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}},focusRing:{value:{_light:"{colors.red.600}",_dark:"{colors.red.600}"}}},orange:{contrast:{value:{_light:"white",_dark:"black"}},fg:{value:{_light:"{colors.orange.700}",_dark:"{colors.orange.300}"}},subtle:{value:{_light:"{colors.orange.100}",_dark:"{colors.orange.900}"}},muted:{value:{_light:"{colors.orange.200}",_dark:"{colors.orange.800}"}},emphasized:{value:{_light:"{colors.orange.300}",_dark:"{colors.orange.700}"}},solid:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}},focusRing:{value:{_light:"{colors.orange.600}",_dark:"{colors.orange.500}"}}},green:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.green.700}",_dark:"{colors.green.300}"}},subtle:{value:{_light:"{colors.green.100}",_dark:"{colors.green.900}"}},muted:{value:{_light:"{colors.green.200}",_dark:"{colors.green.800}"}},emphasized:{value:{_light:"{colors.green.300}",_dark:"{colors.green.700}"}},solid:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}},focusRing:{value:{_light:"{colors.green.600}",_dark:"{colors.green.600}"}}},blue:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.blue.700}",_dark:"{colors.blue.300}"}},subtle:{value:{_light:"{colors.blue.100}",_dark:"{colors.blue.900}"}},muted:{value:{_light:"{colors.blue.200}",_dark:"{colors.blue.800}"}},emphasized:{value:{_light:"{colors.blue.300}",_dark:"{colors.blue.700}"}},solid:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}},focusRing:{value:{_light:"{colors.blue.600}",_dark:"{colors.blue.600}"}}},yellow:{contrast:{value:{_light:"black",_dark:"black"}},fg:{value:{_light:"{colors.yellow.800}",_dark:"{colors.yellow.300}"}},subtle:{value:{_light:"{colors.yellow.100}",_dark:"{colors.yellow.900}"}},muted:{value:{_light:"{colors.yellow.200}",_dark:"{colors.yellow.800}"}},emphasized:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.700}"}},solid:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}},focusRing:{value:{_light:"{colors.yellow.300}",_dark:"{colors.yellow.300}"}}},teal:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.teal.700}",_dark:"{colors.teal.300}"}},subtle:{value:{_light:"{colors.teal.100}",_dark:"{colors.teal.900}"}},muted:{value:{_light:"{colors.teal.200}",_dark:"{colors.teal.800}"}},emphasized:{value:{_light:"{colors.teal.300}",_dark:"{colors.teal.700}"}},solid:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}},focusRing:{value:{_light:"{colors.teal.600}",_dark:"{colors.teal.600}"}}},purple:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.purple.700}",_dark:"{colors.purple.300}"}},subtle:{value:{_light:"{colors.purple.100}",_dark:"{colors.purple.900}"}},muted:{value:{_light:"{colors.purple.200}",_dark:"{colors.purple.800}"}},emphasized:{value:{_light:"{colors.purple.300}",_dark:"{colors.purple.700}"}},solid:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}},focusRing:{value:{_light:"{colors.purple.600}",_dark:"{colors.purple.600}"}}},pink:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.pink.700}",_dark:"{colors.pink.300}"}},subtle:{value:{_light:"{colors.pink.100}",_dark:"{colors.pink.900}"}},muted:{value:{_light:"{colors.pink.200}",_dark:"{colors.pink.800}"}},emphasized:{value:{_light:"{colors.pink.300}",_dark:"{colors.pink.700}"}},solid:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}},focusRing:{value:{_light:"{colors.pink.600}",_dark:"{colors.pink.600}"}}},cyan:{contrast:{value:{_light:"white",_dark:"white"}},fg:{value:{_light:"{colors.cyan.700}",_dark:"{colors.cyan.300}"}},subtle:{value:{_light:"{colors.cyan.100}",_dark:"{colors.cyan.900}"}},muted:{value:{_light:"{colors.cyan.200}",_dark:"{colors.cyan.800}"}},emphasized:{value:{_light:"{colors.cyan.300}",_dark:"{colors.cyan.700}"}},solid:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}},focusRing:{value:{_light:"{colors.cyan.600}",_dark:"{colors.cyan.600}"}}}}),js=Po.radii({l1:{value:"{radii.xs}"},l2:{value:"{radii.sm}"},l3:{value:"{radii.md}"}}),Us=Po.shadows({xs:{value:{_light:"0px 1px 2px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/20}",_dark:"0px 1px 1px {black/64}, 0px 0px 1px inset {colors.gray.300/20}"}},sm:{value:{_light:"0px 2px 4px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 2px 4px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},md:{value:{_light:"0px 4px 8px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 4px 8px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},lg:{value:{_light:"0px 8px 16px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 8px 16px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},xl:{value:{_light:"0px 16px 24px {colors.gray.900/10}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 16px 24px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},"2xl":{value:{_light:"0px 24px 40px {colors.gray.900/16}, 0px 0px 1px {colors.gray.900/30}",_dark:"0px 24px 40px {black/64}, 0px 0px 1px inset {colors.gray.300/30}"}},inner:{value:{_light:"inset 0 2px 4px 0 {black/5}",_dark:"inset 0 2px 4px 0 black"}},inset:{value:{_light:"inset 0 0 0 1px {black/5}",_dark:"inset 0 0 0 1px {colors.gray.300/5}"}}});var Vs=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{parts:function(){if(Ws(t)){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return Vs(e,i)}throw new Error("createAnatomy().parts(...) should only be called once. Did you mean to use .extendWith(...) ?")},extendWith:function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return Vs(e,[...t,...i])},rename:e=>Vs(e,t),keys:()=>t,build:()=>[...new Set(t)].reduce(((t,r)=>Object.assign(t,{[r]:{selector:[`&[data-scope="${$s(e)}"][data-part="${$s(r)}"]`,`& [data-scope="${$s(e)}"][data-part="${$s(r)}"]`].join(", "),attrs:{"data-scope":$s(e),"data-part":$s(r)}}})),{})}},$s=e=>e.replace(/([A-Z])([A-Z])/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[\s_]+/g,"-").toLowerCase(),Ws=e=>0===e.length,Hs=e=>e?"":void 0,Gs=e=>"object"===typeof e&&null!==e,qs=e=>Gs(e)&&1===e.nodeType&&"string"===typeof e.nodeName,Zs=e=>Gs(e)&&9===e.nodeType,Xs=e=>qs(e)?e.localName||"":"#document";var Ys=e=>(e=>Gs(e)&&void 0!==e.nodeType)(e)&&11===e.nodeType&&"host"in e;function Ks(e,t){return!(!e||!t)&&(!(!qs(e)||!qs(t))&&(e===t||e.contains(t)))}function Js(e){return Zs(e)?e:(e=>Gs(e)&&e===e.window)(e)?e.document:e?.ownerDocument??document}function Qs(e){return Ys(e)?Qs(e.host):Zs(e)?e.defaultView??window:qs(e)?e.ownerDocument?.defaultView??window:window}var el=()=>"undefined"!==typeof document;var tl=e=>el()&&e.test(function(){const e=navigator.userAgentData;return e?.platform??navigator.platform}()),rl=()=>il()&&(e=>el()&&e.test(navigator.vendor))(/apple/i),il=()=>tl(/mac|iphone|ipad|ipod/i);function nl(e){const t=function(e){return e.composedPath?.()??e.nativeEvent?.composedPath?.()}(e);return t?.[0]??e.target}var ol=e=>e.id;function al(e,t){const r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ol;return e.find((e=>r(e)===t))}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:ol);return r?e.indexOf(r):-1}function sl(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=al(e,t);return i=r?(i+1)%e.length:Math.min(i+1,e.length-1),e[i]}function ll(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=al(e,t);return-1===i?r?e[e.length-1]:null:(i=r?(i-1+e.length)%e.length:Math.max(0,i-1),e[i])}function cl(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ol;const n=r?al(e,r,i):-1;let o=r?((e,t)=>e.map(((r,i)=>e[(Math.max(t,0)+i)%e.length])))(e,n):e;return 1===t.length&&(o=o.filter((e=>i(e)!==r))),o.find((e=>{return r=(e=>(e.dataset?.valuetext??e.textContent??"").split("").map((e=>{const t=e.charCodeAt(0);return t>0&&t<128?e:t>=128&&t<=255?`/x${t.toString(16)}`.replace("/","\\"):""})).join("").trim())(e),i=t,r.trim().toLowerCase().startsWith(i.toLowerCase());var r,i}))}function ul(e,t){const{state:r,activeId:i,key:n,timeout:o=350,itemToId:a}=t,s=r.keysSoFar+n,l=s.length>1&&Array.from(s).every((e=>e===s[0]))?s[0]:s;const c=cl(e.slice(),l,i,a);function u(){clearTimeout(r.timer),r.timer=-1}return function e(t){r.keysSoFar=t,u(),""!==t&&(r.timer=+setTimeout((()=>{e(""),u()}),o))}(s),c}var dl=Object.assign(ul,{defaultOptions:{keysSoFar:"",timer:-1},isValidEvent:function(e){return 1===e.key.length&&!e.ctrlKey&&!e.metaKey}});function hl(e){if("html"===Xs(e))return e;const t=e.assignedSlot||e.parentNode||Ys(e)&&e.host||Js(e).documentElement;return Ys(t)?t.host:t}var pl=e=>"object"===typeof e&&null!==e&&1===e.nodeType,fl=e=>pl(e)&&"IFRAME"===e.tagName;var ml="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false']), details > summary:first-of-type",gl=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return[];const r=Array.from(e.querySelectorAll(ml));(1==t||"if-empty"==t&&0===r.length)&&pl(e)&&yl(e)&&r.unshift(e);const i=r.filter(yl);return i.forEach(((e,t)=>{if(fl(e)&&e.contentDocument){const r=e.contentDocument.body;i.splice(t,1,...gl(r))}})),i};function yl(e){return!(!e||e.closest("[inert]"))&&(e.matches(ml)&&(!!pl(t=e)&&(t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0)));var t}function _l(e,t){if(!e)return[];const r=Array.from(e.querySelectorAll(ml)),i=r.filter(bl);return t&&bl(e)&&i.unshift(e),i.forEach(((e,t)=>{if(fl(e)&&e.contentDocument){const r=_l(e.contentDocument.body);i.splice(t,1,...r)}})),!i.length&&t?r:i}function bl(e){return null!=e&&e.tabIndex>0||yl(e)&&!(parseInt(e.getAttribute("tabindex")||"0",10)<0)}function vl(e,t){const r=_l(e,t);return[r[0]||null,r[r.length-1]||null]}var xl=/auto|scroll|overlay|hidden|clip/;function wl(e){const t=Qs(e),{overflow:r,overflowX:i,overflowY:n,display:o}=t.getComputedStyle(e);return xl.test(r+n+i)&&!["inline","contents"].includes(o)}function Sl(e){const t=globalThis.requestAnimationFrame(e);return()=>{globalThis.cancelAnimationFrame(t)}}function Il(e,t){const{defer:r}=t,i=r?Sl:e=>e(),n=[];return n.push(i((()=>{const r="function"===typeof e?e():e;n.push(function(e,t){if(!e)return;const{attributes:r,callback:i}=t,n=new(e.ownerDocument.defaultView||window).MutationObserver((e=>{for(const t of e)"attributes"===t.type&&t.attributeName&&r.includes(t.attributeName)&&i(t)}));return n.observe(e,{attributes:!0,attributeFilter:r}),()=>n.disconnect()}(r,t))}))),()=>{n.forEach((e=>e?.()))}}function Tl(e){const t=hl(e);return function(e){return["html","body","#document"].includes(Xs(e))}(t)?Js(t).body:qs(t)&&wl(t)?t:Tl(t)}function kl(e,t){return Array.from(e?.querySelectorAll(t)??[])}function El(e){const t={getRootNode:e=>e.getRootNode?.()??document,getDoc:e=>Js(t.getRootNode(e)),getWin:e=>t.getDoc(e).defaultView??window,getActiveElement:e=>function(e){let t=e.activeElement;for(;t?.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}(t.getRootNode(e)),isActiveElement:(e,r)=>r===t.getActiveElement(e),getById:(e,r)=>t.getRootNode(e).getElementById(r),setValue:(e,t)=>{if(null==e||null==t)return;const r=t.toString();e.value!==r&&(e.value=t.toString())}};return{...t,...e}}var Al=new WeakMap;function Pl(e,t,r){Al.has(e)||Al.set(e,new Map);const i=Al.get(e),n=i.get(t);if(!n)return i.set(t,r()),()=>{i.get(t)?.(),i.delete(t)};const o=r(),a=()=>{o(),n(),i.delete(t)};return i.set(t,a),()=>{i.get(t)===a&&(o(),i.set(t,n))}}var Cl={border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"},Ml=1e3/60;function Ol(e,t){const r=[];return e?.forEach((e=>{const i=function(e,t){const r=e();if(qs(r)&&r.isConnected)return t(r),()=>{};{const r=setInterval((()=>{const i=e();qs(i)&&i.isConnected&&(t(i),clearInterval(r))}),Ml);return()=>clearInterval(r)}}(e,t);r.push(i)})),()=>{r.forEach((e=>e()))}}var Rl=e=>e[0],Bl=e=>e[e.length-1],Dl=(e,t)=>((e,t)=>-1!==e.indexOf(t))(e,t)?function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e.filter((e=>!r.includes(e)))}(e,t):function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return e.concat(r)}(e,t);var zl=e=>"Array"===e?.constructor.name,Ll=(e,t)=>{if(Object.is(e,t))return!0;if(null==e&&null!=t||null!=e&&null==t)return!1;if("function"===typeof e?.isEqual&&"function"===typeof t?.isEqual)return e.isEqual(t);if("function"===typeof e&&"function"===typeof t)return e.toString()===t.toString();if(zl(e)&&zl(t))return((e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Ll(e[r],t[r]))return!1;return!0})(Array.from(e),Array.from(t));if("object"!==typeof e||"object"!==typeof t)return!1;const r=Object.keys(t??Object.create(null)),i=r.length;for(let n=0;n<i;n++){if(!Reflect.has(e,r[n]))return!1}for(let n=0;n<i;n++){const i=r[n];if(!Ll(e[i],t[i]))return!1}return!0},Fl=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return("function"===typeof e?e(...r):e)??void 0},Nl=()=>{},jl=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t.forEach((function(e){e?.(...r)}))}},Ul=(()=>{let e=0;return()=>(e++,e.toString(36))})();var Vl=e=>Array.isArray(e),$l=e=>null!=e&&"object"===typeof e,Wl=e=>$l(e)&&!Vl(e),Hl=e=>"string"===typeof e,Gl=e=>"function"===typeof e,ql=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Zl=Function.prototype.toString,Xl=Zl.call(Object),Yl=e=>{if(!$l(e)||"[object Object]"!=(e=>Object.prototype.toString.call(e))(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const r=ql(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Zl.call(r)==Xl};var Kl=e=>function(t){return function(e,t){const r={},i={},n=new Set(t);for(const o in e)n.has(o)?i[o]=e[o]:r[o]=e[o];return[i,r]}(t,e)};function Jl(e){if(!Ql(e)||void 0===e)return e;const t=Reflect.ownKeys(e).filter((e=>"string"===typeof e)),r={};for(const i of t){const t=e[i];void 0!==t&&(r[i]=Jl(t))}return r}var Ql=e=>e&&"object"===typeof e&&e.constructor===Object;const ec=Symbol(),tc=Symbol(),rc="a",ic="f",nc="n",oc="g",ac="w";let sc=(e,t)=>new Proxy(e,t);const lc=Object.getPrototypeOf,cc=new WeakMap,uc=e=>e&&(cc.has(e)?cc.get(e):lc(e)===Object.prototype||lc(e)===Array.prototype),dc=e=>"object"===typeof e&&null!==e,hc=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach((e=>{e.configurable=!0})),Object.create(lc(e),t)},pc=(e,t)=>{const r={[ic]:t};let i=!1;const n=(t,n)=>{if(!i){let i=r[rc].get(e);if(i||(i={},r[rc].set(e,i)),t===ac)i[ac]=!0;else{let e=i[t];e||(e=new Set,i[t]=e),e.add(n)}}},o={get:(t,i)=>i===tc?e:(n("k",i),mc(Reflect.get(t,i),r[rc],r.c,r.t)),has:(t,o)=>o===ec?(i=!0,r[rc].delete(e),!0):(n("h",o),Reflect.has(t,o)),getOwnPropertyDescriptor:(e,t)=>(n("o",t),Reflect.getOwnPropertyDescriptor(e,t)),ownKeys:e=>(n(ac),Reflect.ownKeys(e))};return t&&(o.set=o.deleteProperty=()=>!1),[o,r]},fc=e=>e[tc]||e,mc=(e,t,r,i)=>{if(!uc(e))return e;let n=i&&i.get(e);if(!n){const t=fc(e);n=(e=>Object.values(Object.getOwnPropertyDescriptors(e)).some((e=>!e.configurable&&!e.writable)))(t)?[t,hc(t)]:[t],null===i||void 0===i||i.set(e,n)}const[o,a]=n;let s=r&&r.get(o);return s&&s[1].f===!!a||(s=pc(o,!!a),s[1].p=sc(a||o,s[0]),r&&r.set(o,s)),s[1][rc]=t,s[1].c=r,s[1].t=i,s[1].p},gc=function(e,t,r,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Object.is;if(n(e,t))return!1;if(!dc(e)||!dc(t))return!0;const o=r.get(fc(e));if(!o)return!0;if(i){const r=i.get(e);if(r&&r.n===t)return r.g;i.set(e,{[nc]:t,[oc]:!1})}let a=null;try{for(const r of o.h||[])if(a=Reflect.has(e,r)!==Reflect.has(t,r),a)return a;if(!0===o[ac]){if(a=((e,t)=>{const r=Reflect.ownKeys(e),i=Reflect.ownKeys(t);return r.length!==i.length||r.some(((e,t)=>e!==i[t]))})(e,t),a)return a}else for(const r of o.o||[]){const i=!!Reflect.getOwnPropertyDescriptor(e,r);if(a=i!==!!Reflect.getOwnPropertyDescriptor(t,r),a)return a}for(const s of o.k||[])if(a=gc(e[s],t[s],r,i,n),a)return a;return null===a&&(a=!0),a}finally{i&&i.set(e,{[nc]:t,[oc]:a})}},yc=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];cc.set(e,t)};function _c(e,t){const r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:void 0;return r?(r[e]||(r[e]=t()),r[e]):t()}var bc=e=>"object"===typeof e&&null!==e,vc=_c("__zag__proxyStateMap",(()=>new WeakMap)),xc=_c("__zag__refSet",(()=>new WeakSet)),[wc]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.is,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>new Proxy(e,t),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>bc(e)&&!xc.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e=>(e=>"object"===typeof e&&null!==e&&"$$typeof"in e)(e)||(e=>"object"===typeof e&&null!==e&&"__v_isVNode"in e)(e)||(e=>"object"===typeof e&&null!==e&&"nodeType"in e&&"string"===typeof e.nodeName)(e))(e)&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new WeakMap,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;const o=n.get(e);if(o?.[0]===t)return o[1];const a=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return yc(a,!0),n.set(e,[t,a]),Reflect.ownKeys(e).forEach((t=>{const i=Reflect.get(e,t);xc.has(i)?(yc(i,!1),a[t]=i):i instanceof Promise?Object.defineProperty(a,t,{get:()=>r(i)}):vc.has(i)?a[t]=Tc(i,r):a[t]=i})),Object.freeze(a)},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new WeakMap,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[1,1],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:i=>{if(!bc(i))throw new Error("object required");const n=a.get(i);if(n)return n;let l=s[0];const c=new Set,u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:++s[0];l!==t&&(l=t,c.forEach((r=>r(e,t))))};let d=s[1];const h=e=>(t,r)=>{const i=[...t];i[1]=[e,...i[1]],u(i,r)},p=new Map,f=e=>{const t=p.get(e);t&&(p.delete(e),t[1]?.())},m=Array.isArray(i)?[]:Object.create(Object.getPrototypeOf(i)),g={deleteProperty(e,t){const r=Reflect.get(e,t);f(t);const i=Reflect.deleteProperty(e,t);return i&&u(["delete",[t],r]),i},set(t,i,n,o){const s=Reflect.has(t,i),l=Reflect.get(t,i,o);if(s&&(e(l,n)||a.has(n)&&e(l,a.get(n))))return!0;var d;f(i),bc(n)&&(n=uc(d=n)&&d[tc]||null||n);let m=n;if(Object.getOwnPropertyDescriptor(t,i)?.set);else if(n instanceof Promise)n.then((e=>{Object.assign(n,{status:"fulfilled",value:e}),u(["resolve",[i],e])})).catch((e=>{Object.assign(n,{status:"rejected",reason:e}),u(["reject",[i],e])}));else{!vc.has(n)&&r(n)&&(m=Sc(n));const e=!xc.has(m)&&vc.get(m);e&&((e,t)=>{if(c.size){const r=t[3](h(e));p.set(e,[t,r])}else p.set(e,[t])})(i,e)}return Reflect.set(t,i,m,o),u(["set",[i],n,l]),!0}},y=t(m,g);a.set(i,y);const _=[m,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:++s[1];return d===e||c.size||(d=e,p.forEach((t=>{let[r]=t;const i=r[1](e);i>l&&(l=i)}))),l},o,e=>{c.add(e),1===c.size&&p.forEach(((e,t)=>{let[r,i]=e;const n=r[3](h(t));p.set(t,[r,n])}));return()=>{c.delete(e),0===c.size&&p.forEach(((e,t)=>{let[r,i]=e;i&&(i(),p.set(t,[r]))}))}}];return vc.set(y,_),Reflect.ownKeys(i).forEach((e=>{const t=Object.getOwnPropertyDescriptor(i,e);t.get||t.set?Object.defineProperty(m,e,t):y[e]=i[e]})),y};return[l,vc,xc,e,t,r,i,n,o,a,s]}();function Sc(){return wc(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function Ic(e,t,r){const i=vc.get(e);let n;const o=[],a=i[3];let s=!1;const l=a((e=>{o.push(e),r?t(o.splice(0)):n||(n=Promise.resolve().then((()=>{n=void 0,s&&t(o.splice(0))})))}));return s=!0,()=>{s=!1,l()}}function Tc(e,t){const r=vc.get(e);const[i,n,o]=r;return o(i,n(),t)}function kc(e){return xc.add(e),e}function Ec(e,t){Object.keys(t).forEach((i=>{if(Object.getOwnPropertyDescriptor(e,i))throw new Error("object property already defined");const n=t[i],{get:o,set:a}="function"===typeof n?{get:n}:n,s={get:()=>o(Tc(r))};a&&(s.set=e=>a(r,e)),Object.defineProperty(e,i,s)}));const r=Sc(e);return r}function Ac(e,t,r){"object"===typeof r.value&&(r.value=Pc(r.value)),r.enumerable&&!r.get&&!r.set&&r.configurable&&r.writable&&"__proto__"!==t?e[t]=r.value:Object.defineProperty(e,t,r)}function Pc(e){if("object"!==typeof e)return e;var t,r,i,n=0,o=Object.prototype.toString.call(e);if("[object Object]"===o?i=Object.create(e.__proto__||null):"[object Array]"===o?i=Array(e.length):"[object Set]"===o?(i=new Set,e.forEach((function(e){i.add(Pc(e))}))):"[object Map]"===o?(i=new Map,e.forEach((function(e,t){i.set(Pc(t),Pc(e))}))):"[object Date]"===o?i=new Date(+e):"[object RegExp]"===o?i=new RegExp(e.source,e.flags):"[object DataView]"===o?i=new e.constructor(Pc(e.buffer)):"[object ArrayBuffer]"===o?i=e.slice(0):"Array]"===o.slice(-6)&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)Ac(i,r[n],Object.getOwnPropertyDescriptor(e,r[n]));for(n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++)Object.hasOwnProperty.call(i,t=r[n])&&i[t]===e[t]||Ac(i,t,Object.getOwnPropertyDescriptor(e,t))}return i||e}var Cc=Object.defineProperty,Mc=(e,t,r)=>((e,t,r)=>t in e?Cc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!==typeof t?t+"":t,r);function Oc(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(const n of r){const t=Jl(n);for(const r in t)Yl(n[r])?(e[r]||(e[r]={}),Oc(e[r],n[r])):e[r]=n[r]}return e}function Rc(e){return Pc(e)}function Bc(e){return Hl(e)?{type:e}:e}function Dc(e){return e?Vl(e)?e.slice():[e]:[]}function zc(e){return Wl(e)&&null!=e.predicate}var Lc=()=>!0;function Fc(e,t,r,i){return n=>Hl(n)?!!e[n]?.(t,r,i):Gl(n)?n(t,r,i):n.predicate(e)(t,r,i)}var Nc={or:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{predicate:e=>(r,i,n)=>t.map(Fc(e,r,i,n)).some(Boolean)}},and:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return{predicate:e=>(r,i,n)=>t.map(Fc(e,r,i,n)).every(Boolean)}},not:function(e){return{predicate:t=>(r,i,n)=>!Fc(t,r,i,n)(e)}},stateIn:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(e,r,i)=>i.state.matches(...t)}};function jc(e,t){return e=e??Lc,(r,i,n)=>{if(Hl(e)){const o=t[e];return Gl(o)?o(r,i,n):o}return zc(e)?e.predicate(t)(r,i,n):e?.(r,i,n)}}function Uc(e,t){return(r,i,n)=>zc(e)?e.predicate(t)(r,i,n):e}function Vc(e,t){return(r,i)=>{if((e=>"number"===typeof e&&!Number.isNaN(e))(e))return e;if(Gl(e))return e(r,i);if(Hl(e)){const n=Number.parseFloat(e);if(!Number.isNaN(n))return n;if(t){const n=t?.[e];return Gl(n)?n(r,i):n}}}}function $c(e){return Hl(e)?{target:e}:e}var Wc=class{constructor(e,t){Mc(this,"status","Not Started"),Mc(this,"state"),Mc(this,"initialState"),Mc(this,"initialContext"),Mc(this,"id"),Mc(this,"type","machine"),Mc(this,"activityEvents",new Map),Mc(this,"delayedEvents",new Map),Mc(this,"stateListeners",new Set),Mc(this,"doneListeners",new Set),Mc(this,"contextWatchers",new Set),Mc(this,"removeStateListener",Nl),Mc(this,"parent"),Mc(this,"children",new Map),Mc(this,"guardMap"),Mc(this,"actionMap"),Mc(this,"delayMap"),Mc(this,"activityMap"),Mc(this,"sync"),Mc(this,"options"),Mc(this,"config"),Mc(this,"_created",(()=>{const e=Bc("machine.created");this.executeActions(this.config?.created,e)})),Mc(this,"start",(e=>{if(this.state.value="",this.state.tags=[],"Running"===this.status)return this;this.status="Running",this.removeStateListener=Ic(this.state,(()=>{this.stateListeners.forEach((e=>{e(this.stateSnapshot)}))}),this.sync),this.setupContextWatchers(),this.executeActivities(Bc("machine.start"),Dc(this.config.activities),"machine.start"),this.executeActions(this.config.entry,Bc("machine.start"));const t=Bc("machine.init"),r=Wl(e)?e.value:e,i=Wl(e)?e.context:void 0;i&&this.setContext(i);const n={target:r??this.config.initial},o=this.getNextStateInfo(n,t);return this.initialState=o,this.performStateChangeEffects(this.state.value,o,t),this})),Mc(this,"setupContextWatchers",(()=>{const{watch:e}=this.config;if(!e)return;let t=Tc(this.state.context);const r=Ic(this.state.context,(()=>{const r=Tc(this.state.context);for(const[i,n]of Object.entries(e)){(this.options.compareFns?.[i]??Object.is)(t[i],r[i])||this.executeActions(n,this.state.event)}t=r}));this.contextWatchers.add(r)})),Mc(this,"stop",(()=>{if("Stopped"!==this.status)return this.performExitEffects(this.state.value,Bc("machine.stop")),this.executeActions(this.config.exit,Bc("machine.stop")),this.setState(""),this.setEvent("machine.stop"),this.stopStateListeners(),this.stopChildren(),this.stopActivities(),this.stopDelayedEvents(),this.stopContextWatchers(),this.status="Stopped",this})),Mc(this,"stopStateListeners",(()=>{this.removeStateListener(),this.stateListeners.clear()})),Mc(this,"stopContextWatchers",(()=>{this.contextWatchers.forEach((e=>e())),this.contextWatchers.clear()})),Mc(this,"stopDelayedEvents",(()=>{this.delayedEvents.forEach((e=>{e.forEach((e=>e()))})),this.delayedEvents.clear()})),Mc(this,"stopActivities",(e=>{e?(this.activityEvents.get(e)?.forEach((e=>e())),this.activityEvents.get(e)?.clear(),this.activityEvents.delete(e)):(this.activityEvents.forEach((e=>{e.forEach((e=>e())),e.clear()})),this.activityEvents.clear())})),Mc(this,"sendChild",((e,t)=>{const r=Bc(e),i=Fl(t,this.contextSnapshot),n=this.children.get(i);n||r.type,n.send(r)})),Mc(this,"stopChild",(e=>{this.children.has(e),this.children.get(e).stop(),this.children.delete(e)})),Mc(this,"removeChild",(e=>{this.children.delete(e)})),Mc(this,"stopChildren",(()=>{this.children.forEach((e=>e.stop())),this.children.clear()})),Mc(this,"setParent",(e=>{this.parent=e})),Mc(this,"spawn",((e,t)=>{const r=Fl(e);return t&&(r.id=t),r.type="machine.actor",r.setParent(this),this.children.set(r.id,r),r.onDone((()=>{this.removeChild(r.id)})).start(),kc(r)})),Mc(this,"stopActivity",(e=>{if(!this.state.value)return;const t=this.activityEvents.get(this.state.value);t?.get(e)?.(),t?.delete(e)})),Mc(this,"addActivityCleanup",((e,t,r)=>{e&&(this.activityEvents.has(e)?this.activityEvents.get(e)?.set(t,r):this.activityEvents.set(e,new Map([[t,r]])))})),Mc(this,"setState",(e=>{this.state.previousValue=this.state.value,this.state.value=e;const t=this.getStateNode(e);null==e?function(e){for(;e.length>0;)e.pop()}(this.state.tags):this.state.tags=Dc(t?.tags)})),Mc(this,"setContext",(e=>{e&&Oc(this.state.context,Jl(e))})),Mc(this,"setOptions",(e=>{const t=Jl(e);this.actionMap={...this.actionMap,...t.actions},this.delayMap={...this.delayMap,...t.delays},this.activityMap={...this.activityMap,...t.activities},this.guardMap={...this.guardMap,...t.guards}})),Mc(this,"getStateNode",(e=>{if(e)return this.config.states?.[e]})),Mc(this,"getNextStateInfo",((e,t)=>{const r=this.determineTransition(e,t),i=!r?.target,n=r?.target??this.state.value,o=this.state.value!==n,a=this.getStateNode(n),s={reenter:!i&&!o&&!r?.internal,transition:r,stateNode:a,target:n,changed:o};return this.log("NextState:",`[${t.type}]`,this.state.value,"----\x3e",s.target),s})),Mc(this,"getAfterActions",((e,t)=>{let r;const i=this.state.value;return{entry:()=>{r=globalThis.setTimeout((()=>{const t=this.getNextStateInfo(e,this.state.event);this.performStateChangeEffects(i,t,this.state.event)}),t)},exit:()=>{globalThis.clearTimeout(r)}}})),Mc(this,"getDelayedEventActions",(e=>{const t=this.getStateNode(e),r=this.state.event;if(!t||!t.after)return;const i=[],n=[];if(Vl(t.after)){const e=this.determineTransition(t.after,r);if(!e)return;if(!ql(e,"delay"))throw new Error(`[@zag-js/core > after] Delay is required for after transition: ${JSON.stringify(e)}`);const o=Vc(e.delay,this.delayMap)(this.contextSnapshot,r),a=this.getAfterActions(e,o);return i.push(a.entry),n.push(a.exit),{entries:i,exits:n}}if(Wl(t.after))for(const o in t.after){const e=t.after[o],a=Vc(o,this.delayMap)(this.contextSnapshot,r),s=this.getAfterActions(e,a);i.push(s.entry),n.push(s.exit)}return{entries:i,exits:n}})),Mc(this,"executeActions",((e,t)=>{const r=Uc(e,this.guardMap)(this.contextSnapshot,t,this.guardMeta);for(const i of Dc(r)){const e=Hl(i)?this.actionMap?.[i]:i;Hl(i),e?.(this.state.context,t,this.meta)}})),Mc(this,"executeActivities",((e,t,r)=>{for(const i of t){const t=Hl(i)?this.activityMap?.[i]:i;if(!t)continue;const n=t(this.state.context,e,this.meta);if(n){const e=Hl(i)?i:i.name||Ul();this.addActivityCleanup(r??this.state.value,e,n)}}})),Mc(this,"createEveryActivities",((e,t)=>{if(e)if(Vl(e)){const r=Dc(e).find((e=>{const t=Vc(e.delay,this.delayMap)(this.contextSnapshot,this.state.event);return jc(e.guard,this.guardMap)(this.contextSnapshot,this.state.event,this.guardMeta)??null!=t}));if(!r)return;const i=Vc(r.delay,this.delayMap)(this.contextSnapshot,this.state.event),n=()=>{const e=globalThis.setInterval((()=>{this.executeActions(r.actions,this.state.event)}),i);return()=>{globalThis.clearInterval(e)}};t(n)}else for(const r in e){const i=e?.[r],n=Vc(r,this.delayMap)(this.contextSnapshot,this.state.event),o=()=>{const e=globalThis.setInterval((()=>{this.executeActions(i,this.state.event)}),n);return()=>{globalThis.clearInterval(e)}};t(o)}})),Mc(this,"setEvent",(e=>{this.state.previousEvent=this.state.event,this.state.event=kc(Bc(e))})),Mc(this,"performExitEffects",((e,t)=>{const r=this.state.value;if(""===r)return;const i=e?this.getStateNode(e):void 0;this.stopActivities(r);const n=Dc(Uc(i?.exit,this.guardMap)(this.contextSnapshot,t,this.guardMeta)),o=this.delayedEvents.get(r);o&&n.push(...o),this.executeActions(n,t),this.delayedEvents.delete(r)})),Mc(this,"performEntryEffects",((e,t)=>{const r=this.getStateNode(e),i=Dc(r?.activities);this.createEveryActivities(r?.every,(e=>{i.unshift(e)})),i.length>0&&this.executeActivities(t,i);const n=Dc(Uc(r?.entry,this.guardMap)(this.contextSnapshot,t,this.guardMeta)),o=this.getDelayedEventActions(e);r?.after&&o&&(this.delayedEvents.set(e,o?.exits),n.push(...o.entries)),this.executeActions(n,t),"final"===r?.type&&(this.state.done=!0,this.doneListeners.forEach((e=>{e(this.stateSnapshot)})),this.stop())})),Mc(this,"performTransitionEffects",((e,t)=>{const r=this.determineTransition(e,t);this.executeActions(r?.actions,t)})),Mc(this,"performStateChangeEffects",((e,t,r)=>{this.setEvent(r);const i=t.changed||t.reenter;i&&this.performExitEffects(e,r),this.performTransitionEffects(t.transition,r),this.setState(t.target),i&&this.performEntryEffects(t.target,r)})),Mc(this,"determineTransition",((e,t)=>{const r=(i=e,n=this.guardMap,(e,t,r)=>Dc(i).map($c).find((i=>jc(i.guard,n)(e,t,r)??i.target??i.actions)));var i,n;return r?.(this.contextSnapshot,t,this.guardMeta)})),Mc(this,"sendParent",(e=>{this.parent;const t=Bc(e);this.parent?.send(t)})),Mc(this,"log",(function(){0})),Mc(this,"send",(e=>{const t=Bc(e);this.transition(this.state.value,t)})),Mc(this,"transition",((e,t)=>{const r=Hl(e)?this.getStateNode(e):e?.stateNode,i=Bc(t);if(!r&&!this.config.on){"Stopped"===this.status||i.type;return}const n=r?.on?.[i.type]??this.config.on?.[i.type],o=this.getNextStateInfo(n,i);return this.performStateChangeEffects(this.state.value,o,i),o.stateNode})),Mc(this,"subscribe",(e=>(this.stateListeners.add(e),"Running"===this.status&&e(this.stateSnapshot),()=>{this.stateListeners.delete(e)}))),Mc(this,"onDone",(e=>(this.doneListeners.add(e),this))),Mc(this,"onTransition",(e=>(this.stateListeners.add(e),"Running"===this.status&&e(this.stateSnapshot),this))),this.config=Rc(e),this.options=Rc(t??{}),this.id=this.config.id??`machine-${Ul()}`,this.guardMap=this.options?.guards??{},this.actionMap=this.options?.actions??{},this.delayMap=this.options?.delays??{},this.activityMap=this.options?.activities??{},this.sync=this.options?.sync??!1,this.state=function(e){const t=e.computed??{},r=e.context??{},i=e.initial?e.states?.[e.initial]?.tags:[],n=Sc({value:e.initial??"",previousValue:"",event:{},previousEvent:{},context:Ec(r,t),done:!1,tags:i??[],hasTag(e){return this.tags.includes(e)},matches(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.includes(this.value)},can(e){return this.nextEvents.includes(e)},get nextEvents(){const t=e.states?.[this.value]?.on??{},r=e?.on??{};return Object.keys({...t,...r})},get changed(){return!("machine.init"===this.event.value||!this.previousValue)&&this.value!==this.previousValue}});return n}(this.config),this.initialContext=Tc(this.state.context)}get stateSnapshot(){return Tc(this.state)}getState(){return this.stateSnapshot}get contextSnapshot(){return this.stateSnapshot.context}get self(){const e=this;return{id:this.id,send:this.send.bind(this),sendParent:this.sendParent.bind(this),sendChild:this.sendChild.bind(this),stop:this.stop.bind(this),stopChild:this.stopChild.bind(this),spawn:this.spawn.bind(this),stopActivity:this.stopActivity.bind(this),get state(){return e.stateSnapshot},get initialContext(){return e.initialContext},get initialState(){return e.initialState?.target??""}}}get meta(){return{state:this.stateSnapshot,guards:this.guardMap,send:this.send.bind(this),self:this.self,initialContext:this.initialContext,initialState:this.initialState?.target??"",getState:()=>this.stateSnapshot,getAction:e=>this.actionMap[e],getGuard:e=>this.guardMap[e]}}get guardMeta(){return{state:this.stateSnapshot}}get[Symbol.toStringTag](){return"Machine"}getHydrationState(){const e=this.getState();return{value:e.value,tags:e.tags}}},Hc=(e,t)=>new Wc(e,t),Gc=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map((e=>e?.trim?.())).filter(Boolean).join(" ")},qc=/((?:--)?(?:\w+-?)+)\s*:\s*([^;]*)/g,Zc=e=>{const t={};let r;for(;r=qc.exec(e);)t[r[1]]=r[2];return t},Xc=(e,t)=>{if(Hl(e)){if(Hl(t))return`${e};${t}`;e=Zc(e)}else Hl(t)&&(t=Zc(t));return Object.assign({},e??{},t??{})};function Yc(){let e={};for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(let n of r){for(let t in e)t.startsWith("on")&&"function"===typeof e[t]&&"function"===typeof n[t]?e[t]=jl(n[t],e[t]):e[t]="className"!==t&&"class"!==t?"style"!==t?void 0!==n[t]?n[t]:e[t]:Xc(e[t],n[t]):Gc(e[t],n[t]);for(let t in n)void 0===e[t]&&(e[t]=n[t])}return e}var Kc=()=>e=>Array.from(new Set(e)),Jc=Vs("accordion").parts("root","item","itemTrigger","itemContent","itemIndicator"),Qc=(Jc.build(),El({getRootId:e=>e.ids?.root??`accordion:${e.id}`,getItemId:(e,t)=>e.ids?.item?.(t)??`accordion:${e.id}:item:${t}`,getItemContentId:(e,t)=>e.ids?.itemContent?.(t)??`accordion:${e.id}:content:${t}`,getItemTriggerId:(e,t)=>e.ids?.itemTrigger?.(t)??`accordion:${e.id}:trigger:${t}`,getRootEl:e=>Qc.getById(e,Qc.getRootId(e)),getTriggerEls:e=>{const t=`[aria-controls][data-ownedby='${CSS.escape(Qc.getRootId(e))}']:not([disabled])`;return kl(Qc.getRootEl(e),t)},getFirstTriggerEl:e=>Rl(Qc.getTriggerEls(e)),getLastTriggerEl:e=>Bl(Qc.getTriggerEls(e)),getNextTriggerEl:(e,t)=>sl(Qc.getTriggerEls(e),Qc.getItemTriggerId(e,t)),getPrevTriggerEl:(e,t)=>ll(Qc.getTriggerEls(e),Qc.getItemTriggerId(e,t))}));var{and:eu,not:tu}=Nc;var ru=Kc()(["collapsible","dir","disabled","getRootNode","id","ids","multiple","onFocusChange","onValueChange","orientation","value"]),iu=(Kl(ru),Kc()(["value","disabled"])),nu=(Kl(iu),Vs("dialog").parts("trigger","backdrop","positioner","content","title","description","closeTrigger")),ou=(nu.build(),El({getPositionerId:e=>e.ids?.positioner??`dialog:${e.id}:positioner`,getBackdropId:e=>e.ids?.backdrop??`dialog:${e.id}:backdrop`,getContentId:e=>e.ids?.content??`dialog:${e.id}:content`,getTriggerId:e=>e.ids?.trigger??`dialog:${e.id}:trigger`,getTitleId:e=>e.ids?.title??`dialog:${e.id}:title`,getDescriptionId:e=>e.ids?.description??`dialog:${e.id}:description`,getCloseTriggerId:e=>e.ids?.closeTrigger??`dialog:${e.id}:close`,getContentEl:e=>ou.getById(e,ou.getContentId(e)),getPositionerEl:e=>ou.getById(e,ou.getPositionerId(e)),getBackdropEl:e=>ou.getById(e,ou.getBackdropId(e)),getTriggerEl:e=>ou.getById(e,ou.getTriggerId(e)),getTitleEl:e=>ou.getById(e,ou.getTitleId(e)),getDescriptionEl:e=>ou.getById(e,ou.getDescriptionId(e)),getCloseTriggerEl:e=>ou.getById(e,ou.getCloseTriggerId(e))}));var au=Kc()(["aria-label","closeOnEscape","closeOnInteractOutside","dir","finalFocusEl","getRootNode","getRootNode","id","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","preventScroll","restoreFocus","role","trapFocus"]),su=(Kl(au),Vs("editable").parts("root","area","label","preview","input","editTrigger","submitTrigger","cancelTrigger","control")),lu=(su.build(),El({getRootId:e=>e.ids?.root??`editable:${e.id}`,getAreaId:e=>e.ids?.area??`editable:${e.id}:area`,getLabelId:e=>e.ids?.label??`editable:${e.id}:label`,getPreviewId:e=>e.ids?.preview??`editable:${e.id}:preview`,getInputId:e=>e.ids?.input??`editable:${e.id}:input`,getControlId:e=>e.ids?.control??`editable:${e.id}:control`,getSubmitTriggerId:e=>e.ids?.submitTrigger??`editable:${e.id}:submit`,getCancelTriggerId:e=>e.ids?.cancelTrigger??`editable:${e.id}:cancel`,getEditTriggerId:e=>e.ids?.editTrigger??`editable:${e.id}:edit`,getInputEl:e=>lu.getById(e,lu.getInputId(e)),getPreviewEl:e=>lu.getById(e,lu.getPreviewId(e)),getSubmitTriggerEl:e=>lu.getById(e,lu.getSubmitTriggerId(e)),getCancelTriggerEl:e=>lu.getById(e,lu.getCancelTriggerId(e)),getEditTriggerEl:e=>lu.getById(e,lu.getEditTriggerId(e))}));var cu=Kc()(["activationMode","autoResize","dir","disabled","finalFocusEl","form","getRootNode","id","ids","invalid","maxLength","name","onEditChange","onFocusOutside","onInteractOutside","onPointerDownOutside","onValueChange","onValueCommit","onValueRevert","placeholder","readOnly","required","selectOnFocus","edit","edit.controlled","submitMode","translations","value"]);Kl(cu);const uu=Vs("field").parts("root","errorText","helperText","input","label","select","textarea","requiredIndicator");uu.build();var du=Vs("file-upload").parts("root","dropzone","item","itemDeleteTrigger","itemGroup","itemName","itemPreview","itemPreviewImage","itemSizeText","label","trigger","clearTrigger"),hu=(du.build(),El({getRootId:e=>e.ids?.root??`file:${e.id}`,getDropzoneId:e=>e.ids?.dropzone??`file:${e.id}:dropzone`,getHiddenInputId:e=>e.ids?.hiddenInput??`file:${e.id}:input`,getTriggerId:e=>e.ids?.trigger??`file:${e.id}:trigger`,getLabelId:e=>e.ids?.label??`file:${e.id}:label`,getItemId:(e,t)=>e.ids?.item?.(t)??`file:${e.id}:item:${t}`,getItemNameId:(e,t)=>e.ids?.itemName?.(t)??`file:${e.id}:item-name:${t}`,getItemSizeTextId:(e,t)=>e.ids?.itemSizeText?.(t)??`file:${e.id}:item-size:${t}`,getItemPreviewId:(e,t)=>e.ids?.itemPreview?.(t)??`file:${e.id}:item-preview:${t}`,getHiddenInputEl:e=>hu.getById(e,hu.getHiddenInputId(e)),getDropzoneEl:e=>hu.getById(e,hu.getDropzoneId(e))}));var pu=Kc()(["accept","allowDrop","capture","dir","directory","disabled","getRootNode","id","ids","locale","maxFiles","maxFileSize","minFileSize","name","invalid","onFileAccept","onFileReject","onFileChange","required","translations","validate"]),fu=(Kl(pu),Kc()(["file"])),mu=(Kl(fu),Vs("menu").parts("arrow","arrowTip","content","contextTrigger","indicator","item","itemGroup","itemGroupLabel","itemIndicator","itemText","positioner","separator","trigger","triggerItem")),gu=(mu.build(),El({getTriggerId:e=>e.ids?.trigger??`menu:${e.id}:trigger`,getContextTriggerId:e=>e.ids?.contextTrigger??`menu:${e.id}:ctx-trigger`,getContentId:e=>e.ids?.content??`menu:${e.id}:content`,getArrowId:e=>e.ids?.arrow??`menu:${e.id}:arrow`,getPositionerId:e=>e.ids?.positioner??`menu:${e.id}:popper`,getGroupId:(e,t)=>e.ids?.group?.(t)??`menu:${e.id}:group:${t}`,getGroupLabelId:(e,t)=>e.ids?.groupLabel?.(t)??`menu:${e.id}:group-label:${t}`,getContentEl:e=>gu.getById(e,gu.getContentId(e)),getPositionerEl:e=>gu.getById(e,gu.getPositionerId(e)),getTriggerEl:e=>gu.getById(e,gu.getTriggerId(e)),getHighlightedItemEl:e=>e.highlightedValue?gu.getById(e,e.highlightedValue):null,getArrowEl:e=>gu.getById(e,gu.getArrowId(e)),getElements:e=>{const t=`[role^="menuitem"][data-ownedby=${CSS.escape(gu.getContentId(e))}]:not([data-disabled])`;return kl(gu.getContentEl(e),t)},getFirstEl:e=>Rl(gu.getElements(e)),getLastEl:e=>Bl(gu.getElements(e)),getNextEl:(e,t)=>sl(gu.getElements(e),e.highlightedValue,t??e.loopFocus),getPrevEl:(e,t)=>ll(gu.getElements(e),e.highlightedValue,t??e.loopFocus),getElemByKey:(e,t)=>dl(gu.getElements(e),{state:e.typeaheadState,key:t,activeId:e.highlightedValue}),isTargetDisabled:e=>qs(e)&&(""===e.dataset.disabled||e.hasAttribute("disabled")),isTriggerItem:e=>!!e?.getAttribute("role")?.startsWith("menuitem")&&!!e?.hasAttribute("aria-controls"),getOptionFromItemEl:e=>({id:e.id,name:e.dataset.name,value:e.dataset.value,valueText:e.dataset.valueText,type:e.dataset.type})}));var{not:yu,and:_u,or:bu}=Nc;var vu=Kc()(["anchorPoint","aria-label","closeOnSelect","dir","getRootNode","highlightedValue","id","ids","loopFocus","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","onEscapeKeyDown","onSelect","onHighlightChange","open","open.controlled","positioning","typeahead","composite"]),xu=(Kl(vu),Kc()(["closeOnSelect","disabled","value","valueText"])),wu=(Kl(xu),Kc()(["htmlFor"])),Su=(Kl(wu),Kc()(["id"])),Iu=(Kl(Su),Kc()(["disabled","valueText","closeOnSelect","type","value","checked","onCheckedChange"])),Tu=(Kl(Iu),Vs("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger")),ku=(Tu.build(),El({getAnchorId:e=>e.ids?.anchor??`popover:${e.id}:anchor`,getTriggerId:e=>e.ids?.trigger??`popover:${e.id}:trigger`,getContentId:e=>e.ids?.content??`popover:${e.id}:content`,getPositionerId:e=>e.ids?.positioner??`popover:${e.id}:popper`,getArrowId:e=>e.ids?.arrow??`popover:${e.id}:arrow`,getTitleId:e=>e.ids?.title??`popover:${e.id}:title`,getDescriptionId:e=>e.ids?.description??`popover:${e.id}:desc`,getCloseTriggerId:e=>e.ids?.closeTrigger??`popover:${e.id}:close`,getAnchorEl:e=>ku.getById(e,ku.getAnchorId(e)),getTriggerEl:e=>ku.getById(e,ku.getTriggerId(e)),getContentEl:e=>ku.getById(e,ku.getContentId(e)),getPositionerEl:e=>ku.getById(e,ku.getPositionerId(e)),getTitleEl:e=>ku.getById(e,ku.getTitleId(e)),getDescriptionEl:e=>ku.getById(e,ku.getDescriptionId(e)),getFocusableEls:e=>gl(ku.getContentEl(e)),getFirstFocusableEl:e=>ku.getFocusableEls(e)[0]}));var Eu=Kc()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]),Au=(Kl(Eu),Vs("radio-group").parts("root","label","item","itemText","itemControl","indicator")),Pu=(Au.build(),El({getRootId:e=>e.ids?.root??`radio-group:${e.id}`,getLabelId:e=>e.ids?.label??`radio-group:${e.id}:label`,getItemId:(e,t)=>e.ids?.item?.(t)??`radio-group:${e.id}:radio:${t}`,getItemHiddenInputId:(e,t)=>e.ids?.itemHiddenInput?.(t)??`radio-group:${e.id}:radio:input:${t}`,getItemControlId:(e,t)=>e.ids?.itemControl?.(t)??`radio-group:${e.id}:radio:control:${t}`,getItemLabelId:(e,t)=>e.ids?.itemLabel?.(t)??`radio-group:${e.id}:radio:label:${t}`,getIndicatorId:e=>e.ids?.indicator??`radio-group:${e.id}:indicator`,getRootEl:e=>Pu.getById(e,Pu.getRootId(e)),getItemHiddenInputEl:(e,t)=>Pu.getById(e,Pu.getItemHiddenInputId(e,t)),getIndicatorEl:e=>Pu.getById(e,Pu.getIndicatorId(e)),getFirstEnabledInputEl:e=>Pu.getRootEl(e)?.querySelector("input:not(:disabled)"),getFirstEnabledAndCheckedInputEl:e=>Pu.getRootEl(e)?.querySelector("input:not(:disabled):checked"),getInputEls:e=>{const t=`input[type=radio][data-ownedby='${CSS.escape(Pu.getRootId(e))}']:not([disabled])`;return kl(Pu.getRootEl(e),t)},getActiveRadioEl:e=>{if(e.value)return Pu.getById(e,Pu.getItemId(e,e.value))},getOffsetRect:e=>({left:e?.offsetLeft??0,top:e?.offsetTop??0,width:e?.offsetWidth??0,height:e?.offsetHeight??0}),getRectById:(e,t)=>{const r=Pu.getById(e,Pu.getItemId(e,t));if(r)return Pu.resolveRect(Pu.getOffsetRect(r))},resolveRect:e=>({width:`${e.width}px`,height:`${e.height}px`,left:`${e.left}px`,top:`${e.top}px`})}));var{not:Cu}=Nc;var Mu=Kc()(["dir","disabled","form","getRootNode","id","ids","name","onValueChange","orientation","readOnly","value"]),Ou=(Kl(Mu),Kc()(["value","disabled","invalid"])),Ru=(Kl(Ou),e=>e.ownerDocument.defaultView||window);function Bu(e,t){const{type:r="HTMLInputElement",property:i="value"}=t,n=Ru(e)[r].prototype;return Object.getOwnPropertyDescriptor(n,i)??{}}function Du(e,t){const{value:r,bubbles:i=!0}=t;if(!e)return;const n=Ru(e);e instanceof n.HTMLInputElement&&(!function(e,t){const r=Bu(e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});r.set?.call(e,t),e.setAttribute("value",t)}(e,`${r}`),e.dispatchEvent(new n.Event("input",{bubbles:i})))}function zu(e,t){if(!e)return;const r=function(e){return function(e){return e.matches("textarea, input, select, button")}(e)?e.form:e.closest("form")}(e);return r?.addEventListener("reset",t,{passive:!0}),()=>{r?.removeEventListener("reset",t)}}function Lu(e,t){const r=e?.closest("fieldset");if(!r)return;t(r.disabled);const i=new(r.ownerDocument.defaultView||window).MutationObserver((()=>t(r.disabled)));return i.observe(r,{attributes:!0,attributeFilter:["disabled"]}),()=>i.disconnect()}var Fu=Vs("rating-group").parts("root","label","item","control"),Nu=(Fu.build(),El({getRootId:e=>e.ids?.root??`rating:${e.id}`,getLabelId:e=>e.ids?.label??`rating:${e.id}:label`,getHiddenInputId:e=>e.ids?.hiddenInput??`rating:${e.id}:input`,getControlId:e=>e.ids?.control??`rating:${e.id}:control`,getItemId:(e,t)=>e.ids?.item?.(t)??`rating:${e.id}:item:${t}`,getRootEl:e=>Nu.getById(e,Nu.getRootId(e)),getControlEl:e=>Nu.getById(e,Nu.getControlId(e)),getRadioEl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.value;const r=`[role=radio][aria-posinset='${Math.ceil(t)}']`;return function(e,t){return e?.querySelector(t)??null}(Nu.getControlEl(e),r)},getHiddenInputEl:e=>Nu.getById(e,Nu.getHiddenInputId(e)),dispatchChangeEvent:e=>{const t=Nu.getHiddenInputEl(e);t&&Du(t,{value:e.value})}}));var ju=Kc()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","required","readOnly","translations","value"]),Uu=(Kl(ju),Kc()(["index"])),Vu=(Kl(Uu),Object.defineProperty),$u=(e,t,r)=>((e,t,r)=>t in e?Vu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!==typeof t?t+"":t,r),Wu={itemToValue:e=>"string"===typeof e?e:Wl(e)&&ql(e,"value")?e.value:"",itemToString:e=>"string"===typeof e?e:Wl(e)&&ql(e,"label")?e.label:Wu.itemToValue(e),isItemDisabled:e=>!(!Wl(e)||!ql(e,"disabled"))&&!!e.disabled},Hu=class{constructor(e){this.options=e,$u(this,"items"),this.items=[...e.items]}isEqual(e){return Ll(this.items,e.items)}setItems(e){this.items=Array.from(e)}getValues(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.items;return Array.from(e).map((e=>this.getItemValue(e))).filter(Boolean)}find(e){if(null==e)return null;const t=this.items.findIndex((t=>this.getItemValue(t)===e));return null!=t?this.items[t]:null}findMany(e){return Array.from(e).map((e=>this.find(e))).filter(Boolean)}at(e){return this.items[e]??null}sortFn(e,t){return(this.indexOf(e)??0)-(this.indexOf(t)??0)}sort(e){return[...e].sort(this.sortFn.bind(this))}getItemValue(e){return null==e?null:this.options.itemToValue?.(e)??Wu.itemToValue(e)}getItemDisabled(e){return null!=e&&(this.options.isItemDisabled?.(e)??Wu.isItemDisabled(e))}stringifyItem(e){return null==e?null:this.options.itemToString?.(e)??Wu.itemToString(e)}stringify(e){return null==e?null:this.stringifyItem(this.find(e))}stringifyItems(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:", ";return Array.from(e).map((e=>this.stringifyItem(e))).filter(Boolean).join(t)}stringifyMany(e,t){return this.stringifyItems(this.findMany(e),t)}has(e){return-1!==this.indexOf(e)}hasItem(e){return null!=e&&this.has(this.getItemValue(e))}get size(){return this.items.length}get firstValue(){let e=0;for(;this.getItemDisabled(this.at(e));)e++;return this.getItemValue(this.at(e))}get lastValue(){let e=this.size-1;for(;this.getItemDisabled(this.at(e));)e--;return this.getItemValue(this.at(e))}getNextValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.indexOf(e);if(-1===i)return null;for(i=r?Math.min(i+t,this.size-1):i+t;i<=this.size&&this.getItemDisabled(this.at(i));)i++;return this.getItemValue(this.at(i))}getPreviousValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.indexOf(e);if(-1===i)return null;for(i=r?Math.max(i-t,0):i-t;i>=0&&this.getItemDisabled(this.at(i));)i--;return this.getItemValue(this.at(i))}indexOf(e){return null==e?-1:this.items.findIndex((t=>this.getItemValue(t)===e))}getByText(e,t){let r=null!=t?qu(this.items,this.indexOf(t)):this.items;return 1===e.length&&(r=r.filter((e=>this.getItemValue(e)!==t))),r.find((t=>Gu(this.stringifyItem(t),e)))}search(e,t){const{state:r,currentValue:i,timeout:n=350}=t,o=r.keysSoFar+e,a=o.length>1&&Array.from(o).every((e=>e===o[0]))?o[0]:o,s=this.getByText(a,i),l=this.getItemValue(s);function c(){clearTimeout(r.timer),r.timer=-1}return function e(t){r.keysSoFar=t,c(),""!==t&&(r.timer=+setTimeout((()=>{e(""),c()}),n))}(o),l}*[Symbol.iterator](){yield*this.items}insertBefore(e,t){const r=this.indexOf(e);-1!==r&&this.items.splice(r,0,t)}insertAfter(e,t){const r=this.indexOf(e);-1!==r&&this.items.splice(r+1,0,t)}reorder(e,t){if(-1===e||-1===t)return;if(e===t)return;const[r]=this.items.splice(e,1);this.items.splice(t,0,r)}json(){return{size:this.size,first:this.firstValue,last:this.lastValue}}},Gu=(e,t)=>!!e?.toLowerCase().startsWith(t.toLowerCase()),qu=(e,t)=>e.map(((r,i)=>e[(Math.max(t,0)+i)%e.length]));var Zu=(e,t,r,i)=>{const n="function"===typeof e?e():e;return n?.addEventListener(t,r,i),()=>{n?.removeEventListener(t,r,i)}};var Xu=e=>2===e.button||tl(/^Mac/)&&e.ctrlKey&&0===e.button;function Yu(e,t,r){if(!e)return;const i=new(e.ownerDocument.defaultView||window).CustomEvent(t,r);return e.dispatchEvent(i)}var Ku={Up:"ArrowUp",Down:"ArrowDown",Esc:"Escape"," ":"Space",",":"Comma",Left:"ArrowLeft",Right:"ArrowRight"},Ju={ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"};function Qu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{dir:r="ltr",orientation:i="horizontal"}=t;let{key:n}=e;n=Ku[n]??n;return"rtl"===r&&"horizontal"===i&&n in Ju&&(n=Ju[n]),n}function ed(e){return Math.max(0,Math.min(1,e))}function td(e,t){const{left:r,top:i,width:n,height:o}=t.getBoundingClientRect(),a={x:e.x-r,y:e.y-i},s={x:ed(a.x/n),y:ed(a.y/o)};return{offset:a,percent:s,getPercentValue:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{dir:t="ltr",orientation:r="horizontal",inverted:i}=e,n="object"===typeof i?i.x:i,o="object"===typeof i?i.y:i;return"horizontal"===r?"rtl"===t||n?1-s.x:s.x:o?1-s.y:s.y}}}const rd=["top","right","bottom","left"],id=Math.min,nd=Math.max,od=Math.round,ad=Math.floor,sd=e=>({x:e,y:e}),ld={left:"right",right:"left",bottom:"top",top:"bottom"},cd={start:"end",end:"start"};function ud(e,t,r){return nd(e,id(t,r))}function dd(e,t){return"function"===typeof e?e(t):e}function hd(e){return e.split("-")[0]}function pd(e){return e.split("-")[1]}function fd(e){return"x"===e?"y":"x"}function md(e){return"y"===e?"height":"width"}function gd(e){return["top","bottom"].includes(hd(e))?"y":"x"}function yd(e){return fd(gd(e))}function _d(e){return e.replace(/start|end/g,(e=>cd[e]))}function bd(e){return e.replace(/left|right|bottom|top/g,(e=>ld[e]))}function vd(e){return"number"!==typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function xd(e){const{x:t,y:r,width:i,height:n}=e;return{width:i,height:n,top:r,left:t,right:t+i,bottom:r+n,x:t,y:r}}function wd(e,t,r){let{reference:i,floating:n}=e;const o=gd(t),a=yd(t),s=md(a),l=hd(t),c="y"===o,u=i.x+i.width/2-n.width/2,d=i.y+i.height/2-n.height/2,h=i[s]/2-n[s]/2;let p;switch(l){case"top":p={x:u,y:i.y-n.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-n.width,y:d};break;default:p={x:i.x,y:i.y}}switch(pd(t)){case"start":p[a]-=h*(r&&c?-1:1);break;case"end":p[a]+=h*(r&&c?-1:1)}return p}async function Sd(e,t){var r;void 0===t&&(t={});const{x:i,y:n,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=dd(t,e),f=vd(p),m=s[h?"floating"===d?"reference":"floating":d],g=xd(await o.getClippingRect({element:null==(r=await(null==o.isElement?void 0:o.isElement(m)))||r?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{x:i,y:n,width:a.floating.width,height:a.floating.height}:a.reference,_=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),b=await(null==o.isElement?void 0:o.isElement(_))&&await(null==o.getScale?void 0:o.getScale(_))||{x:1,y:1},v=xd(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:_,strategy:l}):y);return{top:(g.top-v.top+f.top)/b.y,bottom:(v.bottom-g.bottom+f.bottom)/b.y,left:(g.left-v.left+f.left)/b.x,right:(v.right-g.right+f.right)/b.x}}function Id(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Td(e){return rd.some((t=>e[t]>=0))}function kd(){return"undefined"!==typeof window}function Ed(e){return Cd(e)?(e.nodeName||"").toLowerCase():"#document"}function Ad(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Pd(e){var t;return null==(t=(Cd(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Cd(e){return!!kd()&&(e instanceof Node||e instanceof Ad(e).Node)}function Md(e){return!!kd()&&(e instanceof Element||e instanceof Ad(e).Element)}function Od(e){return!!kd()&&(e instanceof HTMLElement||e instanceof Ad(e).HTMLElement)}function Rd(e){return!(!kd()||"undefined"===typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof Ad(e).ShadowRoot)}function Bd(e){const{overflow:t,overflowX:r,overflowY:i,display:n}=jd(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!["inline","contents"].includes(n)}function Dd(e){return["table","td","th"].includes(Ed(e))}function zd(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(ci){return!1}}))}function Ld(e){const t=Fd(),r=Md(e)?jd(e):e;return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some((e=>(r.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(r.contain||"").includes(e)))}function Fd(){return!("undefined"===typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Nd(e){return["html","body","#document"].includes(Ed(e))}function jd(e){return Ad(e).getComputedStyle(e)}function Ud(e){return Md(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vd(e){if("html"===Ed(e))return e;const t=e.assignedSlot||e.parentNode||Rd(e)&&e.host||Pd(e);return Rd(t)?t.host:t}function $d(e){const t=Vd(e);return Nd(t)?e.ownerDocument?e.ownerDocument.body:e.body:Od(t)&&Bd(t)?t:$d(t)}function Wd(e,t,r){var i;void 0===t&&(t=[]),void 0===r&&(r=!0);const n=$d(e),o=n===(null==(i=e.ownerDocument)?void 0:i.body),a=Ad(n);if(o){const e=Hd(a);return t.concat(a,a.visualViewport||[],Bd(n)?n:[],e&&r?Wd(e):[])}return t.concat(n,Wd(n,[],r))}function Hd(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Gd(e){const t=jd(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const n=Od(e),o=n?e.offsetWidth:r,a=n?e.offsetHeight:i,s=od(r)!==o||od(i)!==a;return s&&(r=o,i=a),{width:r,height:i,$:s}}function qd(e){return Md(e)?e:e.contextElement}function Zd(e){const t=qd(e);if(!Od(t))return sd(1);const r=t.getBoundingClientRect(),{width:i,height:n,$:o}=Gd(t);let a=(o?od(r.width):r.width)/i,s=(o?od(r.height):r.height)/n;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Xd=sd(0);function Yd(e){const t=Ad(e);return Fd()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Xd}function Kd(e,t,r,i){void 0===t&&(t=!1),void 0===r&&(r=!1);const n=e.getBoundingClientRect(),o=qd(e);let a=sd(1);t&&(i?Md(i)&&(a=Zd(i)):a=Zd(e));const s=function(e,t,r){return void 0===t&&(t=!1),!(!r||t&&r!==Ad(e))&&t}(o,r,i)?Yd(o):sd(0);let l=(n.left+s.x)/a.x,c=(n.top+s.y)/a.y,u=n.width/a.x,d=n.height/a.y;if(o){const e=Ad(o),t=i&&Md(i)?Ad(i):i;let r=e,n=Hd(r);for(;n&&i&&t!==r;){const e=Zd(n),t=n.getBoundingClientRect(),i=jd(n),o=t.left+(n.clientLeft+parseFloat(i.paddingLeft))*e.x,a=t.top+(n.clientTop+parseFloat(i.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=o,c+=a,r=Ad(n),n=Hd(r)}}return xd({width:u,height:d,x:l,y:c})}function Jd(e,t){const r=Ud(e).scrollLeft;return t?t.left+r:Kd(Pd(e)).left+r}function Qd(e,t,r){void 0===r&&(r=!1);const i=e.getBoundingClientRect();return{x:i.left+t.scrollLeft-(r?0:Jd(e,i)),y:i.top+t.scrollTop}}function eh(e,t,r){let i;if("viewport"===t)i=function(e,t){const r=Ad(e),i=Pd(e),n=r.visualViewport;let o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(n){o=n.width,a=n.height;const e=Fd();(!e||e&&"fixed"===t)&&(s=n.offsetLeft,l=n.offsetTop)}return{width:o,height:a,x:s,y:l}}(e,r);else if("document"===t)i=function(e){const t=Pd(e),r=Ud(e),i=e.ownerDocument.body,n=nd(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),o=nd(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let a=-r.scrollLeft+Jd(e);const s=-r.scrollTop;return"rtl"===jd(i).direction&&(a+=nd(t.clientWidth,i.clientWidth)-n),{width:n,height:o,x:a,y:s}}(Pd(e));else if(Md(t))i=function(e,t){const r=Kd(e,!0,"fixed"===t),i=r.top+e.clientTop,n=r.left+e.clientLeft,o=Od(e)?Zd(e):sd(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:n*o.x,y:i*o.y}}(t,r);else{const r=Yd(e);i={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return xd(i)}function th(e,t){const r=Vd(e);return!(r===t||!Md(r)||Nd(r))&&("fixed"===jd(r).position||th(r,t))}function rh(e,t,r){const i=Od(t),n=Pd(t),o="fixed"===r,a=Kd(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=sd(0);if(i||!i&&!o)if(("body"!==Ed(t)||Bd(n))&&(s=Ud(t)),i){const e=Kd(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else n&&(l.x=Jd(n));const c=!n||i||o?sd(0):Qd(n,s);return{x:a.left+s.scrollLeft-l.x-c.x,y:a.top+s.scrollTop-l.y-c.y,width:a.width,height:a.height}}function ih(e){return"static"===jd(e).position}function nh(e,t){if(!Od(e)||"fixed"===jd(e).position)return null;if(t)return t(e);let r=e.offsetParent;return Pd(e)===r&&(r=r.ownerDocument.body),r}function oh(e,t){const r=Ad(e);if(zd(e))return r;if(!Od(e)){let t=Vd(e);for(;t&&!Nd(t);){if(Md(t)&&!ih(t))return t;t=Vd(t)}return r}let i=nh(e,t);for(;i&&Dd(i)&&ih(i);)i=nh(i,t);return i&&Nd(i)&&ih(i)&&!Ld(i)?r:i||function(e){let t=Vd(e);for(;Od(t)&&!Nd(t);){if(Ld(t))return t;if(zd(t))return null;t=Vd(t)}return null}(e)||r}const ah={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:r,offsetParent:i,strategy:n}=e;const o="fixed"===n,a=Pd(i),s=!!t&&zd(t.floating);if(i===a||s&&o)return r;let l={scrollLeft:0,scrollTop:0},c=sd(1);const u=sd(0),d=Od(i);if((d||!d&&!o)&&(("body"!==Ed(i)||Bd(a))&&(l=Ud(i)),Od(i))){const e=Kd(i);c=Zd(i),u.x=e.x+i.clientLeft,u.y=e.y+i.clientTop}const h=!a||d||o?sd(0):Qd(a,l,!0);return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:r.y*c.y-l.scrollTop*c.y+u.y+h.y}},getDocumentElement:Pd,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:i,strategy:n}=e;const o="clippingAncestors"===r?zd(t)?[]:function(e,t){const r=t.get(e);if(r)return r;let i=Wd(e,[],!1).filter((e=>Md(e)&&"body"!==Ed(e))),n=null;const o="fixed"===jd(e).position;let a=o?Vd(e):e;for(;Md(a)&&!Nd(a);){const t=jd(a),r=Ld(a);r||"fixed"!==t.position||(n=null),(o?!r&&!n:!r&&"static"===t.position&&n&&["absolute","fixed"].includes(n.position)||Bd(a)&&!r&&th(e,a))?i=i.filter((e=>e!==a)):n=t,a=Vd(a)}return t.set(e,i),i}(t,this._c):[].concat(r),a=[...o,i],s=a[0],l=a.reduce(((e,r)=>{const i=eh(t,r,n);return e.top=nd(i.top,e.top),e.right=id(i.right,e.right),e.bottom=id(i.bottom,e.bottom),e.left=nd(i.left,e.left),e}),eh(t,s,n));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},getOffsetParent:oh,getElementRects:async function(e){const t=this.getOffsetParent||oh,r=this.getDimensions,i=await r(e.floating);return{reference:rh(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:r}=Gd(e);return{width:t,height:r}},getScale:Zd,isElement:Md,isRTL:function(e){return"rtl"===jd(e).direction}};function sh(e,t,r,i){void 0===i&&(i={});const{ancestorScroll:n=!0,ancestorResize:o=!0,elementResize:a="function"===typeof ResizeObserver,layoutShift:s="function"===typeof IntersectionObserver,animationFrame:l=!1}=i,c=qd(e),u=n||o?[...c?Wd(c):[],...Wd(t)]:[];u.forEach((e=>{n&&e.addEventListener("scroll",r,{passive:!0}),o&&e.addEventListener("resize",r)}));const d=c&&s?function(e,t){let r,i=null;const n=Pd(e);function o(){var e;clearTimeout(r),null==(e=i)||e.disconnect(),i=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();const{left:c,top:u,width:d,height:h}=e.getBoundingClientRect();if(s||t(),!d||!h)return;const p={rootMargin:-ad(u)+"px "+-ad(n.clientWidth-(c+d))+"px "+-ad(n.clientHeight-(u+h))+"px "+-ad(c)+"px",threshold:nd(0,id(1,l))||1};let f=!0;function m(e){const t=e[0].intersectionRatio;if(t!==l){if(!f)return a();t?a(!1,t):r=setTimeout((()=>{a(!1,1e-7)}),1e3)}f=!1}try{i=new IntersectionObserver(m,{...p,root:n.ownerDocument})}catch(ci){i=new IntersectionObserver(m,p)}i.observe(e)}(!0),o}(c,r):null;let h,p=-1,f=null;a&&(f=new ResizeObserver((e=>{let[i]=e;i&&i.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var e;null==(e=f)||e.observe(t)}))),r()})),c&&!l&&f.observe(c),f.observe(t));let m=l?Kd(e):null;return l&&function t(){const i=Kd(e);!m||i.x===m.x&&i.y===m.y&&i.width===m.width&&i.height===m.height||r();m=i,h=requestAnimationFrame(t)}(),r(),()=>{var e;u.forEach((e=>{n&&e.removeEventListener("scroll",r),o&&e.removeEventListener("resize",r)})),null==d||d(),null==(e=f)||e.disconnect(),f=null,l&&cancelAnimationFrame(h)}}const lh=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:n,y:o,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:r,platform:i,elements:n}=e,o=await(null==i.isRTL?void 0:i.isRTL(n.floating)),a=hd(r),s=pd(r),l="y"===gd(r),c=["left","top"].includes(a)?-1:1,u=o&&l?-1:1,d=dd(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:f}="number"===typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"===typeof f&&(p="end"===s?-1*f:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}(t,e);return a===(null==(r=s.offset)?void 0:r.placement)&&null!=(i=s.arrow)&&i.alignmentOffset?{}:{x:n+l.x,y:o+l.y,data:{...l,placement:a}}}}},ch=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:n}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...l}=dd(e,t),c={x:r,y:i},u=await Sd(t,l),d=gd(hd(n)),h=fd(d);let p=c[h],f=c[d];if(o){const e="y"===h?"bottom":"right";p=ud(p+u["y"===h?"top":"left"],p,p-u[e])}if(a){const e="y"===d?"bottom":"right";f=ud(f+u["y"===d?"top":"left"],f,f-u[e])}const m=s.fn({...t,[h]:p,[d]:f});return{...m,data:{x:m.x-r,y:m.y-i,enabled:{[h]:o,[d]:a}}}}}},uh=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:n,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:f="none",flipAlignment:m=!0,...g}=dd(e,t);if(null!=(r=o.arrow)&&r.alignmentOffset)return{};const y=hd(n),_=gd(s),b=hd(s)===s,v=await(null==l.isRTL?void 0:l.isRTL(c.floating)),x=h||(b||!m?[bd(s)]:function(e){const t=bd(e);return[_d(e),t,_d(t)]}(s)),w="none"!==f;!h&&w&&x.push(...function(e,t,r,i){const n=pd(e);let o=function(e,t,r){const i=["left","right"],n=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return r?t?n:i:t?i:n;case"left":case"right":return t?o:a;default:return[]}}(hd(e),"start"===r,i);return n&&(o=o.map((e=>e+"-"+n)),t&&(o=o.concat(o.map(_d)))),o}(s,m,f,v));const S=[s,...x],I=await Sd(t,g),T=[];let k=(null==(i=o.flip)?void 0:i.overflows)||[];if(u&&T.push(I[y]),d){const e=function(e,t,r){void 0===r&&(r=!1);const i=pd(e),n=yd(e),o=md(n);let a="x"===n?i===(r?"end":"start")?"right":"left":"start"===i?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=bd(a)),[a,bd(a)]}(n,a,v);T.push(I[e[0]],I[e[1]])}if(k=[...k,{placement:n,overflows:T}],!T.every((e=>e<=0))){var E,A;const e=((null==(E=o.flip)?void 0:E.index)||0)+1,t=S[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let r=null==(A=k.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:A.placement;if(!r)switch(p){case"bestFit":{var P;const e=null==(P=k.filter((e=>{if(w){const t=gd(e.placement);return t===_||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:P[0];e&&(r=e);break}case"initialPlacement":r=s}if(n!==r)return{reset:{placement:r}}}return{}}}},dh=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:n,rects:o,platform:a,elements:s}=t,{apply:l=()=>{},...c}=dd(e,t),u=await Sd(t,c),d=hd(n),h=pd(n),p="y"===gd(n),{width:f,height:m}=o.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=h===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(y=d,g="end"===h?"top":"bottom");const _=m-u.top-u.bottom,b=f-u.left-u.right,v=id(m-u[g],_),x=id(f-u[y],b),w=!t.middlewareData.shift;let S=v,I=x;if(null!=(r=t.middlewareData.shift)&&r.enabled.x&&(I=b),null!=(i=t.middlewareData.shift)&&i.enabled.y&&(S=_),w&&!h){const e=nd(u.left,0),t=nd(u.right,0),r=nd(u.top,0),i=nd(u.bottom,0);p?I=f-2*(0!==e||0!==t?e+t:nd(u.left,u.right)):S=m-2*(0!==r||0!==i?r+i:nd(u.top,u.bottom))}await l({...t,availableWidth:I,availableHeight:S});const T=await a.getDimensions(s.floating);return f!==T.width||m!==T.height?{reset:{rects:!0}}:{}}}},hh=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...n}=dd(e,t);switch(i){case"referenceHidden":{const e=Id(await Sd(t,{...n,elementContext:"reference"}),r.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:Td(e)}}}case"escaped":{const e=Id(await Sd(t,{...n,altBoundary:!0}),r.floating);return{data:{escapedOffsets:e,escaped:Td(e)}}}default:return{}}}}},ph=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:n,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:c,padding:u=0}=dd(e,t)||{};if(null==c)return{};const d=vd(u),h={x:r,y:i},p=yd(n),f=md(p),m=await a.getDimensions(c),g="y"===p,y=g?"top":"left",_=g?"bottom":"right",b=g?"clientHeight":"clientWidth",v=o.reference[f]+o.reference[p]-h[p]-o.floating[f],x=h[p]-o.reference[p],w=await(null==a.getOffsetParent?void 0:a.getOffsetParent(c));let S=w?w[b]:0;S&&await(null==a.isElement?void 0:a.isElement(w))||(S=s.floating[b]||o.floating[f]);const I=v/2-x/2,T=S/2-m[f]/2-1,k=id(d[y],T),E=id(d[_],T),A=k,P=S-m[f]-E,C=S/2-m[f]/2+I,M=ud(A,C,P),O=!l.arrow&&null!=pd(n)&&C!==M&&o.reference[f]/2-(C<A?k:E)-m[f]/2<0,R=O?C<A?C-A:C-P:0;return{[p]:h[p]+R,data:{[p]:M,centerOffset:C-M-R,...O&&{alignmentOffset:R}},reset:O}}}),fh=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:n,rects:o,middlewareData:a}=t,{offset:s=0,mainAxis:l=!0,crossAxis:c=!0}=dd(e,t),u={x:r,y:i},d=gd(n),h=fd(d);let p=u[h],f=u[d];const m=dd(s,t),g="number"===typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===h?"height":"width",t=o.reference[h]-o.floating[e]+g.mainAxis,r=o.reference[h]+o.reference[e]-g.mainAxis;p<t?p=t:p>r&&(p=r)}if(c){var y,_;const e="y"===h?"width":"height",t=["top","left"].includes(hd(n)),r=o.reference[d]-o.floating[e]+(t&&(null==(y=a.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),i=o.reference[d]+o.reference[e]+(t?0:(null==(_=a.offset)?void 0:_[d])||0)-(t?g.crossAxis:0);f<r?f=r:f>i&&(f=i)}return{[h]:p,[d]:f}}}},mh=(e,t,r)=>{const i=new Map,n={platform:ah,...r},o={...n.platform,_c:i};return(async(e,t,r)=>{const{placement:i="bottom",strategy:n="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let c=await a.getElementRects({reference:e,floating:t,strategy:n}),{x:u,y:d}=wd(c,i,l),h=i,p={},f=0;for(let m=0;m<s.length;m++){const{name:r,fn:o}=s[m],{x:g,y:y,data:_,reset:b}=await o({x:u,y:d,initialPlacement:i,placement:h,strategy:n,middlewareData:p,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=g?g:u,d=null!=y?y:d,p={...p,[r]:{...p[r],..._}},b&&f<=50&&(f++,"object"===typeof b&&(b.placement&&(h=b.placement),b.rects&&(c=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:n}):b.rects),({x:u,y:d}=wd(c,h,l))),m=-1)}return{x:u,y:d,placement:h,strategy:n,middlewareData:p}})(e,t,{...n,platform:o})};function gh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("function"===typeof DOMRect)return new DOMRect(e,t,r,i);const n={x:e,y:t,width:r,height:i,top:t,right:e+r,bottom:t+i,left:e};return{...n,toJSON:()=>n}}function yh(e,t){return{contextElement:qs(e)?e:void 0,getBoundingClientRect:()=>{const r=e,i=t?.(r);return i||!r?function(e){if(!e)return gh();const{x:t,y:r,width:i,height:n}=e;return gh(t,r,i,n)}(i):r.getBoundingClientRect()}}}var _h=e=>({variable:e,reference:`var(${e})`}),bh={arrowSize:_h("--arrow-size"),arrowSizeHalf:_h("--arrow-size-half"),arrowBg:_h("--arrow-background"),transformOrigin:_h("--transform-origin"),arrowOffset:_h("--arrow-offset")},vh={name:"transformOrigin",fn(e){let{placement:t,elements:r,middlewareData:i}=e;const{arrow:n}=i,o=(e=>({top:"bottom center","top-start":e?`${e.x}px bottom`:"left bottom","top-end":e?`${e.x}px bottom`:"right bottom",bottom:"top center","bottom-start":e?`${e.x}px top`:"top left","bottom-end":e?`${e.x}px top`:"top right",left:"right center","left-start":e?`right ${e.y}px`:"right top","left-end":e?`right ${e.y}px`:"right bottom",right:"left center","right-start":e?`left ${e.y}px`:"left top","right-end":e?`left ${e.y}px`:"left bottom"}))(n)[t],{floating:a}=r;return a.style.setProperty(bh.transformOrigin.variable,o),{data:{transformOrigin:o}}}},xh={name:"rects",fn(e){let{rects:t}=e;return{data:t}}},wh=e=>{if(e)return{name:"shiftArrow",fn(t){let{placement:r,middlewareData:i}=t;if(!i.arrow)return{};const{x:n,y:o}=i.arrow,a=r.split("-")[0];return Object.assign(e.style,{left:null!=n?`${n}px`:"",top:null!=o?`${o}px`:"",[a]:`calc(100% + ${bh.arrowOffset.reference})`}),{}}}};var Sh={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function Ih(e,t){const r=e.devicePixelRatio||1;return Math.round(t*r)/r}function Th(e){return Fl(e.boundary)}function kh(e,t){if(e)return ph({element:e,padding:t.arrowPadding})}function Eh(e,t){if(!(e=>null==e)(t.offset??t.gutter))return lh((r=>{let{placement:i}=r;const n=(e?.clientHeight||0)/2,o=t.offset?.mainAxis??t.gutter,a="number"===typeof o?o+n:o??n,{hasAlign:s}=function(e){const[t,r]=e.split("-");return{side:t,align:r,hasAlign:null!=r}}(i),l=s?void 0:t.shift;return Jl({crossAxis:t.offset?.crossAxis??l,mainAxis:a,alignmentAxis:t.shift})}))}function Ah(e){if(e.flip)return uh({boundary:Th(e),padding:e.overflowPadding,fallbackPlacements:!0===e.flip?void 0:e.flip})}function Ph(e){if(e.slide||e.overlap)return ch({boundary:Th(e),mainAxis:e.slide,crossAxis:e.overlap,padding:e.overflowPadding,limiter:fh()})}function Ch(e){return dh({padding:e.overflowPadding,apply(e){let{elements:t,rects:r,availableHeight:i,availableWidth:n}=e;const o=t.floating,a=Math.round(r.reference.width);n=Math.floor(n),i=Math.floor(i),o.style.setProperty("--reference-width",`${a}px`),o.style.setProperty("--available-width",`${n}px`),o.style.setProperty("--available-height",`${i}px`)}})}function Mh(e){if(e.hideWhenDetached)return hh({strategy:"referenceHidden",boundary:e.boundary?.()??"clippingAncestors"})}function Oh(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{defer:i,...n}=r,o=i?Sl:e=>e(),a=[];return a.push(o((()=>{const r="function"===typeof e?e():e,i="function"===typeof t?t():t;a.push(function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=yh(e,r.getAnchorRect);if(!t||!i)return;const n=Object.assign({},Sh,r),o=t.querySelector("[data-part=arrow]"),a=[Eh(o,n),Ah(n),Ph(n),kh(o,n),wh(o),vh,Ch(n),Mh(n),xh],{placement:s,strategy:l,onComplete:c,onPositioned:u}=n,d=async()=>{if(!i||!t)return;const e=await mh(i,t,{placement:s,middleware:a,strategy:l});c?.(e),u?.({placed:!0});const r=Qs(t),o=Ih(r,e.x),d=Ih(r,e.y);t.style.setProperty("--x",`${o}px`),t.style.setProperty("--y",`${d}px`),n.hideWhenDetached&&e.middlewareData.hide?.referenceHidden&&t.style.setProperty("visibility","hidden");const h=t.firstElementChild;if(h){const e=r.getComputedStyle(h).zIndex;t.style.setProperty("--z-index",e)}},h=async()=>{r.updatePosition?(await r.updatePosition({updatePosition:d}),u?.({placed:!0})):await d()},p=function(e){return e?!0===e?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:e:{}}(n.listeners),f=n.listeners?sh(i,t,h,p):Nl;return h(),()=>{f?.(),u?.({placed:!1})}}(r,i,n))}))),()=>{a.forEach((e=>e?.()))}}var Rh={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};var Bh="pointerdown.outside",Dh="focus.outside";function zh(e){for(const t of e)if(qs(t)&&yl(t))return!0;return!1}var Lh=e=>"clientY"in e;function Fh(e,t){if(!t||!Lh(e))return!1;const r=t.scrollHeight>t.clientHeight&&e.clientX>t.clientWidth,i=t.scrollWidth>t.clientWidth&&e.clientY>t.clientHeight;return r||i}function Nh(e,t){const{exclude:r,onFocusOutside:i,onPointerDownOutside:n,onInteractOutside:o,defer:a}=t;if(!e)return;const s=Js(e),l=Qs(e),c=function(e){const t={each(t){for(let r=0;r<e.frames?.length;r+=1){const i=e.frames[r];i&&t(i)}},addEventListener:(e,r,i)=>(t.each((t=>{try{t.document.addEventListener(e,r,i)}catch{}})),()=>{try{t.removeEventListener(e,r,i)}catch{}}),removeEventListener(e,r,i){t.each((t=>{try{t.document.removeEventListener(e,r,i)}catch{}}))}};return t}(l),u=function(e){const t=null!=e.frameElement?e.parent:null;return{addEventListener:(e,r,i)=>{try{t?.addEventListener(e,r,i)}catch{}return()=>{try{t?.removeEventListener(e,r,i)}catch{}}},removeEventListener:(e,r,i)=>{try{t?.removeEventListener(e,r,i)}catch{}}}}(l);function d(t){const i=nl(t);if(!qs(i))return!1;if(Ks(e,i))return!1;if(function(e,t){if(!Lh(t)||!e)return!1;const r=e.getBoundingClientRect();return 0!==r.width&&0!==r.height&&r.top<=t.clientY&&t.clientY<=r.top+r.height&&r.left<=t.clientX&&t.clientX<=r.left+r.width}(e,t))return!1;if(Fh(t,i))return!1;return!Fh(t,Tl(e))&&!r?.(i)}const h=new Set;function p(t){function r(){const r=a?Sl:e=>e(),i=t.composedPath?.()??[t.target];r((()=>{if(e&&d(t)){if(n||o){const t=jl(n,o);e.addEventListener(Bh,t,{once:!0})}Yu(e,Bh,{bubbles:!1,cancelable:!0,detail:{originalEvent:t,contextmenu:Xu(t),focusable:zh(i)}})}}))}"touch"===t.pointerType?(h.forEach((e=>e())),h.add(Zu(s,"click",r,{once:!0})),h.add(u.addEventListener("click",r,{once:!0})),h.add(c.addEventListener("click",r,{once:!0}))):r()}const f=new Set,m=setTimeout((()=>{f.add(Zu(s,"pointerdown",p,!0)),f.add(u.addEventListener("pointerdown",p,!0)),f.add(c.addEventListener("pointerdown",p,!0))}),0);function g(t){const r=a?Sl:e=>e();r((()=>{if(e&&d(t)){if(i||o){const t=jl(i,o);e.addEventListener(Dh,t,{once:!0})}Yu(e,Dh,{bubbles:!1,cancelable:!0,detail:{originalEvent:t,contextmenu:!1,focusable:yl(nl(t))}})}}))}return f.add(Zu(s,"focusin",g,!0)),f.add(u.addEventListener("focusin",g,!0)),f.add(c.addEventListener("focusin",g,!0)),()=>{clearTimeout(m),h.forEach((e=>e())),f.forEach((e=>e()))}}function jh(e,t){const{defer:r}=t,i=r?Sl:e=>e(),n=[];return n.push(i((()=>{const r="function"===typeof e?e():e;n.push(Nh(r,t))}))),()=>{n.forEach((e=>e?.()))}}function Uh(e,t){return Zu(Js(e),"keydown",(e=>{"Escape"===e.key&&(e.isComposing||t?.(e))}),{capture:!0})}var Vh,$h={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter((e=>e.pointerBlocking))},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(e){return this.indexOf(e)<(this.topMostPointerBlockingLayer()?this.indexOf(this.topMostPointerBlockingLayer()?.node):-1)},isTopMost(e){const t=this.layers[this.count()-1];return t?.node===e},getNestedLayers(e){return Array.from(this.layers).slice(this.indexOf(e)+1)},isInNestedLayer(e,t){return this.getNestedLayers(e).some((e=>Ks(e.node,t)))},isInBranch(e){return Array.from(this.branches).some((t=>Ks(t,e)))},add(e){const t=this.layers.push(e);e.node.style.setProperty("--layer-index",`${t}`)},addBranch(e){this.branches.push(e)},remove(e){const t=this.indexOf(e);if(!(t<0)){if(t<this.count()-1){this.getNestedLayers(e).forEach((e=>e.dismiss()))}this.layers.splice(t,1),e.style.removeProperty("--layer-index")}},removeBranch(e){const t=this.branches.indexOf(e);t>=0&&this.branches.splice(t,1)},indexOf(e){return this.layers.findIndex((t=>t.node===e))},dismiss(e){this.layers[this.indexOf(e)]?.dismiss()},clear(){this.remove(this.layers[0].node)}};function Wh(){$h.layers.forEach((e=>{let{node:t}=e;t.style.pointerEvents=$h.isBelowPointerBlockingLayer(t)?"none":"auto"}))}function Hh(e,t){const r=Js(e),i=[];if($h.hasPointerBlockingLayer()&&!r.body.hasAttribute("data-inert")&&(Vh=document.body.style.pointerEvents,queueMicrotask((()=>{r.body.style.pointerEvents="none",r.body.setAttribute("data-inert","")}))),t){const e=Ol(t,(e=>{i.push(function(e,t){return e?Pl(e,"style",(()=>{const r=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=r}})):()=>{}}(e,{pointerEvents:"auto"}))}));i.push(e)}return()=>{$h.hasPointerBlockingLayer()||(queueMicrotask((()=>{r.body.style.pointerEvents=Vh,r.body.removeAttribute("data-inert"),0===r.body.style.length&&r.body.removeAttribute("style")})),i.forEach((e=>e())))}}function Gh(e,t){const{defer:r}=t,i=r?Sl:e=>e(),n=[];return n.push(i((()=>{const r=Gl(e)?e():e;n.push(function(e,t){if(!e)return;const{onDismiss:r,pointerBlocking:i,exclude:n,debug:o}=t,a={dismiss:r,node:e,pointerBlocking:i};$h.add(a),Wh();const s=[i?Hh(e,t.persistentElements):void 0,Uh(e,(function(i){$h.isTopMost(e)&&(t.onEscapeKeyDown?.(i),!i.defaultPrevented&&r&&(i.preventDefault(),r()))})),jh(e,{exclude:function(r){if(!e)return!1;const i="function"===typeof n?n():n,o=Array.isArray(i)?i:[i],a=t.persistentElements?.map((e=>e())).filter(qs);return a&&o.push(...a),o.some((e=>Ks(e,r)))||$h.isInNestedLayer(e,r)},onFocusOutside:function(e){const i=nl(e.detail.originalEvent);$h.isInBranch(i)||(t.onFocusOutside?.(e),t.onInteractOutside?.(e),e.defaultPrevented||(o&&console.log("onFocusOutside:",e.detail.originalEvent),r?.()))},onPointerDownOutside:function(i){const n=nl(i.detail.originalEvent);$h.isBelowPointerBlockingLayer(e)||$h.isInBranch(n)||(t.onPointerDownOutside?.(i),t.onInteractOutside?.(i),i.defaultPrevented||(o&&console.log("onPointerDownOutside:",i.detail.originalEvent),r?.()))},defer:t.defer})];return()=>{$h.remove(e),Wh(),function(e){e.style.pointerEvents=""}(e),s.forEach((e=>e?.()))}}(r,t))}))),()=>{n.forEach((e=>e?.()))}}var qh=Vs("select").parts("label","positioner","trigger","indicator","clearTrigger","item","itemText","itemIndicator","itemGroup","itemGroupLabel","list","content","root","control","valueText"),Zh=qh.build(),Xh=e=>kc(new Hu(e));Xh.empty=()=>kc(new Hu({items:[]}));var Yh=El({getRootId:e=>e.ids?.root??`select:${e.id}`,getContentId:e=>e.ids?.content??`select:${e.id}:content`,getTriggerId:e=>e.ids?.trigger??`select:${e.id}:trigger`,getClearTriggerId:e=>e.ids?.clearTrigger??`select:${e.id}:clear-trigger`,getLabelId:e=>e.ids?.label??`select:${e.id}:label`,getControlId:e=>e.ids?.control??`select:${e.id}:control`,getItemId:(e,t)=>e.ids?.item?.(t)??`select:${e.id}:option:${t}`,getHiddenSelectId:e=>e.ids?.hiddenSelect??`select:${e.id}:select`,getPositionerId:e=>e.ids?.positioner??`select:${e.id}:positioner`,getItemGroupId:(e,t)=>e.ids?.itemGroup?.(t)??`select:${e.id}:optgroup:${t}`,getItemGroupLabelId:(e,t)=>e.ids?.itemGroupLabel?.(t)??`select:${e.id}:optgroup-label:${t}`,getHiddenSelectEl:e=>Yh.getById(e,Yh.getHiddenSelectId(e)),getContentEl:e=>Yh.getById(e,Yh.getContentId(e)),getControlEl:e=>Yh.getById(e,Yh.getControlId(e)),getTriggerEl:e=>Yh.getById(e,Yh.getTriggerId(e)),getClearTriggerEl:e=>Yh.getById(e,Yh.getClearTriggerId(e)),getPositionerEl:e=>Yh.getById(e,Yh.getPositionerId(e)),getHighlightedOptionEl:e=>e.highlightedValue?Yh.getById(e,Yh.getItemId(e,e.highlightedValue)):null});function Kh(e,t,r){const i=e.context.isDisabled,n=e.context.invalid,o=e.context.readOnly,a=e.context.isInteractive,s=e.context.composite,l=e.hasTag("open"),c=e.matches("focused"),u=e.context.highlightedValue,d=e.context.highlightedItem,h=e.context.selectedItems,p=e.context.isTypingAhead,f=e.context.collection,m=u?Yh.getItemId(e.context,u):void 0;function g(t){const r=f.getItemDisabled(t.item),n=f.getItemValue(t.item);return{value:n,disabled:Boolean(i||r),highlighted:u===n,selected:e.context.value.includes(n)}}const y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{placement:t,sameWidth:r,fitViewport:i,strategy:n="absolute"}=e;return{arrow:{position:"absolute",width:bh.arrowSize.reference,height:bh.arrowSize.reference,[bh.arrowSizeHalf.variable]:`calc(${bh.arrowSize.reference} / 2)`,[bh.arrowOffset.variable]:`calc(${bh.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:t?Rh[t.split("-")[0]]:void 0,background:bh.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:n,isolation:"isolate",minWidth:r?void 0:"max-content",width:r?"var(--reference-width)":void 0,maxWidth:i?"var(--available-width)":void 0,maxHeight:i?"var(--available-height)":void 0,top:"0px",left:"0px",transform:t?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}({...e.context.positioning,placement:e.context.currentPlacement});return{open:l,focused:c,empty:0===e.context.value.length,highlightedItem:d,highlightedValue:u,selectedItems:h,hasSelectedItems:e.context.hasSelectedItems,value:e.context.value,valueAsString:e.context.valueAsString,collection:f,multiple:!!e.context.multiple,disabled:!!i,setCollection(e){t({type:"COLLECTION.SET",value:e})},reposition(){t({type:"POSITIONING.SET",options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}})},focus(){Yh.getTriggerEl(e.context)?.focus({preventScroll:!0})},setOpen(e){e!==l&&t(e?"OPEN":"CLOSE")},selectValue(e){t({type:"ITEM.SELECT",value:e})},setValue(e){t({type:"VALUE.SET",value:e})},selectAll(){t({type:"VALUE.SET",value:f.getValues()})},highlightValue(e){t({type:"HIGHLIGHTED_VALUE.SET",value:e})},clearValue(e){t(e?{type:"ITEM.CLEAR",value:e}:{type:"VALUE.CLEAR"})},getItemState:g,getRootProps:()=>r.element({...Zh.root.attrs,dir:e.context.dir,id:Yh.getRootId(e.context),"data-invalid":Hs(n),"data-readonly":Hs(o)}),getLabelProps:()=>r.label({dir:e.context.dir,id:Yh.getLabelId(e.context),...Zh.label.attrs,"data-disabled":Hs(i),"data-invalid":Hs(n),"data-readonly":Hs(o),htmlFor:Yh.getHiddenSelectId(e.context),onClick(t){t.defaultPrevented||i||Yh.getTriggerEl(e.context)?.focus({preventScroll:!0})}}),getControlProps:()=>r.element({...Zh.control.attrs,dir:e.context.dir,id:Yh.getControlId(e.context),"data-state":l?"open":"closed","data-focus":Hs(c),"data-disabled":Hs(i),"data-invalid":Hs(n)}),getValueTextProps:()=>r.element({...Zh.valueText.attrs,dir:e.context.dir,"data-disabled":Hs(i),"data-invalid":Hs(n),"data-focus":Hs(c)}),getTriggerProps:()=>r.button({id:Yh.getTriggerId(e.context),disabled:i,dir:e.context.dir,type:"button",role:"combobox","aria-controls":Yh.getContentId(e.context),"aria-expanded":l,"aria-haspopup":"listbox","data-state":l?"open":"closed","aria-invalid":n,"aria-labelledby":Yh.getLabelId(e.context),...Zh.trigger.attrs,"data-disabled":Hs(i),"data-invalid":Hs(n),"data-readonly":Hs(o),"data-placement":e.context.currentPlacement,"data-placeholder-shown":Hs(!e.context.hasSelectedItems),onClick(e){a&&(e.defaultPrevented||t({type:"TRIGGER.CLICK"}))},onFocus(){t("TRIGGER.FOCUS")},onBlur(){t("TRIGGER.BLUR")},onKeyDown(r){if(r.defaultPrevented)return;if(!a)return;const i={ArrowUp(){t({type:"TRIGGER.ARROW_UP"})},ArrowDown(e){t({type:e.altKey?"OPEN":"TRIGGER.ARROW_DOWN"})},ArrowLeft(){t({type:"TRIGGER.ARROW_LEFT"})},ArrowRight(){t({type:"TRIGGER.ARROW_RIGHT"})},Home(){t({type:"TRIGGER.HOME"})},End(){t({type:"TRIGGER.END"})},Enter(){t({type:"TRIGGER.ENTER"})},Space(e){t(p?{type:"TRIGGER.TYPEAHEAD",key:e.key}:{type:"TRIGGER.ENTER"})}}[Qu(r,e.context)];if(i)return i(r),void r.preventDefault();dl.isValidEvent(r)&&(t({type:"TRIGGER.TYPEAHEAD",key:r.key}),r.preventDefault())}}),getIndicatorProps:()=>r.element({...Zh.indicator.attrs,dir:e.context.dir,"aria-hidden":!0,"data-state":l?"open":"closed","data-disabled":Hs(i),"data-invalid":Hs(n),"data-readonly":Hs(o)}),getItemProps(i){const n=g(i);return r.element({id:Yh.getItemId(e.context,n.value),role:"option",...Zh.item.attrs,dir:e.context.dir,"data-value":n.value,"aria-selected":n.selected,"data-state":n.selected?"checked":"unchecked","data-highlighted":Hs(n.highlighted),"data-disabled":Hs(n.disabled),"aria-disabled":(o=n.disabled,o?"true":void 0),onPointerMove(r){n.disabled||"mouse"!==r.pointerType||n.value!==e.context.highlightedValue&&t({type:"ITEM.POINTER_MOVE",value:n.value})},onClick(e){e.defaultPrevented||n.disabled||t({type:"ITEM.CLICK",src:"pointerup",value:n.value})},onPointerLeave(r){if(n.disabled)return;if(i.persistFocus)return;if("mouse"!==r.pointerType)return;e.previousEvent.type.includes("POINTER")&&t({type:"ITEM.POINTER_LEAVE"})}});var o},getItemTextProps(e){const t=g(e);return r.element({...Zh.itemText.attrs,"data-state":t.selected?"checked":"unchecked","data-disabled":Hs(t.disabled),"data-highlighted":Hs(t.highlighted)})},getItemIndicatorProps(e){const t=g(e);return r.element({"aria-hidden":!0,...Zh.itemIndicator.attrs,"data-state":t.selected?"checked":"unchecked",hidden:!t.selected})},getItemGroupLabelProps(t){const{htmlFor:i}=t;return r.element({...Zh.itemGroupLabel.attrs,id:Yh.getItemGroupLabelId(e.context,i),role:"group",dir:e.context.dir})},getItemGroupProps(t){const{id:n}=t;return r.element({...Zh.itemGroup.attrs,"data-disabled":Hs(i),id:Yh.getItemGroupId(e.context,n),"aria-labelledby":Yh.getItemGroupLabelId(e.context,n),dir:e.context.dir})},getClearTriggerProps:()=>r.button({...Zh.clearTrigger.attrs,id:Yh.getClearTriggerId(e.context),type:"button","aria-label":"Clear value","data-invalid":Hs(n),disabled:i,hidden:!e.context.hasSelectedItems,dir:e.context.dir,onClick(e){e.defaultPrevented||t("CLEAR.CLICK")}}),getHiddenSelectProps:()=>r.select({name:e.context.name,form:e.context.form,disabled:i,multiple:e.context.multiple,required:e.context.required,"aria-hidden":!0,id:Yh.getHiddenSelectId(e.context),defaultValue:e.context.multiple?e.context.value:e.context.value[0],style:Cl,tabIndex:-1,onFocus(){Yh.getTriggerEl(e.context)?.focus({preventScroll:!0})},"aria-labelledby":Yh.getLabelId(e.context)}),getPositionerProps:()=>r.element({...Zh.positioner.attrs,dir:e.context.dir,id:Yh.getPositionerId(e.context),style:y.floating}),getContentProps:()=>r.element({hidden:!l,dir:e.context.dir,id:Yh.getContentId(e.context),role:s?"listbox":"dialog",...Zh.content.attrs,"data-state":l?"open":"closed","data-placement":e.context.currentPlacement,"data-activedescendant":m,"aria-activedescendant":s?m:void 0,"aria-multiselectable":!(!e.context.multiple||!s)||void 0,"aria-labelledby":Yh.getLabelId(e.context),tabIndex:0,onKeyDown(e){if(!a)return;if(!(e=>Ks(e.currentTarget,nl(e)))(e))return;if("Tab"===e.key){const t=function(e){const t=e.currentTarget;if(!t)return!1;const[r,i]=vl(t),n=t.ownerDocument||document;return(n.activeElement!==r||!e.shiftKey)&&!(n.activeElement===i&&!e.shiftKey)&&!(!r&&!i)}(e);if(!t)return void e.preventDefault()}const r={ArrowUp(){t({type:"CONTENT.ARROW_UP"})},ArrowDown(){t({type:"CONTENT.ARROW_DOWN"})},Home(){t({type:"CONTENT.HOME"})},End(){t({type:"CONTENT.END"})},Enter(){t({type:"ITEM.CLICK",src:"keydown.enter"})},Space(e){p?t({type:"CONTENT.TYPEAHEAD",key:e.key}):r.Enter?.(e)}},i=r[Qu(e)];if(i)return i(e),void e.preventDefault();(function(e){if(null==e||!qs(e))return!1;try{return e instanceof Qs(e).HTMLInputElement&&null!=e.selectionStart||/(textarea|select)/.test(e.localName)||e.isContentEditable}catch{return!1}})(nl(e))||dl.isValidEvent(e)&&(t({type:"CONTENT.TYPEAHEAD",key:e.key}),e.preventDefault())}}),getListProps:()=>r.element({...Zh.list.attrs,tabIndex:0,role:s?void 0:"listbox","aria-labelledby":Yh.getTriggerId(e.context),"aria-activedescendant":s?void 0:m,"aria-multiselectable":!(s||!e.context.multiple)||void 0})}}var{and:Jh,not:Qh,or:ep}=Nc;function tp(e){const t=Jl(e);return Hc({id:"select",context:{value:[],highlightedValue:null,loopFocus:!1,closeOnSelect:!t.multiple,disabled:!1,readOnly:!1,composite:!0,...t,highlightedItem:null,selectedItems:[],valueAsString:"",collection:t.collection??Xh.empty(),typeahead:dl.defaultOptions,fieldsetDisabled:!1,positioning:{placement:"bottom-start",gutter:8,...t.positioning}},computed:{hasSelectedItems:e=>e.value.length>0,isTypingAhead:e=>""!==e.typeahead.keysSoFar,isDisabled:e=>!!e.disabled||e.fieldsetDisabled,isInteractive:e=>!(e.isDisabled||e.readOnly)},initial:t.open?"open":"idle",created:["syncCollection"],entry:["syncSelectElement"],watch:{open:["toggleVisibility"],value:["syncSelectedItems","syncSelectElement"],highlightedValue:["syncHighlightedItem"],collection:["syncCollection"]},on:{"HIGHLIGHTED_VALUE.SET":{actions:["setHighlightedItem"]},"ITEM.SELECT":{actions:["selectItem"]},"ITEM.CLEAR":{actions:["clearItem"]},"VALUE.SET":{actions:["setSelectedItems"]},"VALUE.CLEAR":{actions:["clearSelectedItems"]},"CLEAR.CLICK":{actions:["clearSelectedItems","focusTriggerEl"]},"COLLECTION.SET":{actions:["setCollection"]}},activities:["trackFormControlState"],states:{idle:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{target:"open",actions:["setInitialFocus"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus","highlightFirstSelectedItem"]}],"TRIGGER.FOCUS":{target:"focused"},OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}]}},focused:{tags:["closed"],on:{"CONTROLLED.OPEN":[{guard:"isTriggerClickEvent",target:"open",actions:["setInitialFocus","highlightFirstSelectedItem"]},{guard:"isTriggerArrowUpEvent",target:"open",actions:["setInitialFocus","highlightComputedLastItem"]},{guard:ep("isTriggerArrowDownEvent","isTriggerEnterEvent"),target:"open",actions:["setInitialFocus","highlightComputedFirstItem"]},{target:"open",actions:["setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen"]}],"TRIGGER.BLUR":{target:"idle"},"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightFirstSelectedItem"]}],"TRIGGER.ENTER":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_UP":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedLastItem"]}],"TRIGGER.ARROW_DOWN":[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["setInitialFocus","invokeOnOpen","highlightComputedFirstItem"]}],"TRIGGER.ARROW_LEFT":[{guard:Jh(Qh("multiple"),"hasSelectedItems"),actions:["selectPreviousItem"]},{guard:Qh("multiple"),actions:["selectLastItem"]}],"TRIGGER.ARROW_RIGHT":[{guard:Jh(Qh("multiple"),"hasSelectedItems"),actions:["selectNextItem"]},{guard:Qh("multiple"),actions:["selectFirstItem"]}],"TRIGGER.HOME":{guard:Qh("multiple"),actions:["selectFirstItem"]},"TRIGGER.END":{guard:Qh("multiple"),actions:["selectLastItem"]},"TRIGGER.TYPEAHEAD":{guard:Qh("multiple"),actions:["selectMatchingItem"]}}},open:{tags:["open"],exit:["scrollContentToTop"],activities:["trackDismissableElement","computePlacement","scrollToHighlightedItem"],on:{"CONTROLLED.CLOSE":{target:"focused",actions:["focusTriggerEl","clearHighlightedItem"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","focusTriggerEl","clearHighlightedItem"]}],"TRIGGER.CLICK":[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"focused",actions:["invokeOnClose","clearHighlightedItem"]}],"ITEM.CLICK":[{guard:Jh("closeOnSelect","isOpenControlled"),actions:["selectHighlightedItem","invokeOnClose"]},{guard:"closeOnSelect",target:"focused",actions:["selectHighlightedItem","invokeOnClose","focusTriggerEl","clearHighlightedItem"]},{actions:["selectHighlightedItem"]}],"CONTENT.HOME":{actions:["highlightFirstItem"]},"CONTENT.END":{actions:["highlightLastItem"]},"CONTENT.ARROW_DOWN":[{guard:Jh("hasHighlightedItem","loop","isLastItemHighlighted"),actions:["highlightFirstItem"]},{guard:"hasHighlightedItem",actions:["highlightNextItem"]},{actions:["highlightFirstItem"]}],"CONTENT.ARROW_UP":[{guard:Jh("hasHighlightedItem","loop","isFirstItemHighlighted"),actions:["highlightLastItem"]},{guard:"hasHighlightedItem",actions:["highlightPreviousItem"]},{actions:["highlightLastItem"]}],"CONTENT.TYPEAHEAD":{actions:["highlightMatchingItem"]},"ITEM.POINTER_MOVE":{actions:["highlightItem"]},"ITEM.POINTER_LEAVE":{actions:["clearHighlightedItem"]},"POSITIONING.SET":{actions:["reposition"]}}}}},{guards:{loop:e=>!!e.loopFocus,multiple:e=>!!e.multiple,hasSelectedItems:e=>!!e.hasSelectedItems,hasHighlightedItem:e=>null!=e.highlightedValue,isFirstItemHighlighted:e=>e.highlightedValue===e.collection.firstValue,isLastItemHighlighted:e=>e.highlightedValue===e.collection.lastValue,closeOnSelect:(e,t)=>!!(t.closeOnSelect??e.closeOnSelect),isOpenControlled:e=>!!e["open.controlled"],isTriggerClickEvent:(e,t)=>"TRIGGER.CLICK"===t.previousEvent?.type,isTriggerEnterEvent:(e,t)=>"TRIGGER.ENTER"===t.previousEvent?.type,isTriggerArrowUpEvent:(e,t)=>"TRIGGER.ARROW_UP"===t.previousEvent?.type,isTriggerArrowDownEvent:(e,t)=>"TRIGGER.ARROW_DOWN"===t.previousEvent?.type},activities:{trackFormControlState(e,t,r){let{initialContext:i}=r;return function(e,t){if(!e)return;const{onFieldsetDisabledChange:r,onFormReset:i}=t,n=[zu(e,i),Lu(e,r)];return()=>{n.forEach((e=>e?.()))}}(Yh.getHiddenSelectEl(e),{onFieldsetDisabledChange(t){e.fieldsetDisabled=t},onFormReset(){op.selectedItems(e,i.value)}})},trackDismissableElement(e,t,r){let{send:i}=r;let n=!0;return Gh((()=>Yh.getContentEl(e)),{defer:!0,exclude:[Yh.getTriggerEl(e),Yh.getClearTriggerEl(e)],onFocusOutside:e.onFocusOutside,onPointerDownOutside:e.onPointerDownOutside,onInteractOutside(t){e.onInteractOutside?.(t),n=!(t.detail.focusable||t.detail.contextmenu)},onDismiss(){i({type:"CLOSE",src:"interact-outside",restoreFocus:n})}})},computePlacement(e){e.currentPlacement=e.positioning.placement;return Oh((()=>Yh.getTriggerEl(e)),(()=>Yh.getPositionerEl(e)),{defer:!0,...e.positioning,onComplete(t){e.currentPlacement=t.placement}})},scrollToHighlightedItem(e,t,r){let{getState:i}=r;const n=t=>{if(null==e.highlightedValue)return;if(i().event.type.includes("POINTER"))return;const r=Yh.getHighlightedOptionEl(e),n=Yh.getContentEl(e);if(e.scrollToIndexFn){const r=e.collection.indexOf(e.highlightedValue);e.scrollToIndexFn({index:r,immediate:t})}else!function(e,t){const{rootEl:r,...i}=t||{};e&&r&&wl(r)&&function(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}(r)&&e.scrollIntoView(i)}(r,{rootEl:n,block:"nearest"})};Sl((()=>n(!0)));return Il((()=>Yh.getContentEl(e)),{defer:!0,attributes:["data-activedescendant"],callback(){n(!1)}})}},actions:{reposition(e,t){Oh(Yh.getTriggerEl(e),(()=>Yh.getPositionerEl(e)),{...e.positioning,...t.options,defer:!0,listeners:!1,onComplete(t){e.currentPlacement=t.placement}})},toggleVisibility(e,t,r){let{send:i}=r;i({type:e.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:t})},highlightPreviousItem(e){if(null==e.highlightedValue)return;const t=e.collection.getPreviousValue(e.highlightedValue);op.highlightedItem(e,t)},highlightNextItem(e){if(null==e.highlightedValue)return;const t=e.collection.getNextValue(e.highlightedValue);op.highlightedItem(e,t)},highlightFirstItem(e){const t=e.collection.firstValue;op.highlightedItem(e,t)},highlightLastItem(e){const t=e.collection.lastValue;op.highlightedItem(e,t)},setInitialFocus(e){Sl((()=>{const t=function(e){const{root:t,getInitialEl:r,filter:i,enabled:n=!0}=e;if(!n)return;let o=null;if(o||(o="function"===typeof r?r():r),o||(o=t?.querySelector("[data-autofocus],[autofocus]")),!o){const e=_l(t);o=i?e.filter(i)[0]:e[0]}return o||t||void 0}({root:Yh.getContentEl(e)});t?.focus({preventScroll:!0})}))},focusTriggerEl(e,t){const r=t.restoreFocus??t.previousEvent?.restoreFocus;(null==r||r)&&Sl((()=>{const t=Yh.getTriggerEl(e);t?.focus({preventScroll:!0})}))},selectHighlightedItem(e,t){let r=t.value??e.highlightedValue;if(null==r)return;const i=e.deselectable&&!e.multiple&&e.value.includes(r);r=i?null:r,op.selectedItem(e,r,i)},highlightComputedFirstItem(e){const t=e.hasSelectedItems?e.collection.sort(e.value)[0]:e.collection.firstValue;op.highlightedItem(e,t)},highlightComputedLastItem(e){const t=e.hasSelectedItems?e.collection.sort(e.value)[0]:e.collection.lastValue;op.highlightedItem(e,t)},highlightFirstSelectedItem(e){if(!e.hasSelectedItems)return;const[t]=e.collection.sort(e.value);op.highlightedItem(e,t)},highlightItem(e,t){op.highlightedItem(e,t.value)},highlightMatchingItem(e,t){const r=e.collection.search(t.key,{state:e.typeahead,currentValue:e.highlightedValue});null!=r&&op.highlightedItem(e,r)},setHighlightedItem(e,t){op.highlightedItem(e,t.value)},clearHighlightedItem(e){op.highlightedItem(e,null,!0)},selectItem(e,t){const r=e.deselectable&&!e.multiple&&e.value.includes(t.value),i=r?null:t.value;op.selectedItem(e,i,r)},clearItem(e,t){const r=e.value.filter((e=>e!==t.value));op.selectedItems(e,r)},setSelectedItems(e,t){op.selectedItems(e,t.value)},clearSelectedItems(e){op.selectedItems(e,[])},selectPreviousItem(e){const t=e.collection.getPreviousValue(e.value[0]);op.selectedItem(e,t)},selectNextItem(e){const t=e.collection.getNextValue(e.value[0]);op.selectedItem(e,t)},selectFirstItem(e){const t=e.collection.firstValue;op.selectedItem(e,t)},selectLastItem(e){const t=e.collection.lastValue;op.selectedItem(e,t)},selectMatchingItem(e,t){const r=e.collection.search(t.key,{state:e.typeahead,currentValue:e.value[0]});null!=r&&op.selectedItem(e,r)},scrollContentToTop(e){e.scrollToIndexFn?e.scrollToIndexFn({index:0,immediate:!0}):Yh.getContentEl(e)?.scrollTo(0,0)},invokeOnOpen(e){e.onOpenChange?.({open:!0})},invokeOnClose(e){e.onOpenChange?.({open:!1})},syncSelectElement(e){const t=Yh.getHiddenSelectEl(e);if(t)if(0!==e.value.length||e.multiple)for(const r of t.options)r.selected=e.value.includes(r.value);else t.selectedIndex=-1},setCollection(e,t){e.collection=t.value},syncCollection(e){const t=e.collection.findMany(e.value),r=e.collection.stringifyItems(t);e.highlightedItem=e.collection.find(e.highlightedValue),e.selectedItems=t,e.valueAsString=r},syncSelectedItems(e){rp.valueChange(e)},syncHighlightedItem(e){rp.highlightChange(e)}}})}var rp={valueChange:e=>{const t=e.selectedItems;e.selectedItems=e.value.map((r=>{const i=t.find((t=>e.collection.getItemValue(t)===r));return i||e.collection.find(r)})),e.valueAsString=e.collection.stringifyItems(e.selectedItems)},highlightChange:e=>{e.highlightedItem=e.collection.find(e.highlightedValue)}},ip=e=>{rp.valueChange(e),e.onValueChange?.({value:Array.from(e.value),items:Array.from(e.selectedItems)}),function(e){Sl((()=>{const t=Yh.getHiddenSelectEl(e);if(!t)return;const r=new(Yh.getWin(e).Event)("change",{bubbles:!0,composed:!0});t.dispatchEvent(r)}))}(e)},np=e=>{rp.highlightChange(e),e.onHighlightChange?.({highlightedValue:e.highlightedValue,highlightedItem:e.highlightedItem,highlightedIndex:e.collection.indexOf(e.highlightedValue)})},op={selectedItem:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Ll(e.value,t)&&(null!=t||r)){if(null==t&&r)return e.value=[],void ip(e);e.value=e.multiple?Dl(e.value,t):[t],ip(e)}},selectedItems:(e,t)=>{Ll(e.value,t)||(e.value=t,ip(e))},highlightedItem:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Ll(e.highlightedValue,t)||(null!=t||r)&&(e.highlightedValue=t??null,np(e))}},ap=Kc()(["closeOnSelect","collection","dir","disabled","deselectable","form","getRootNode","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open.controlled","open","composite","positioning","required","readOnly","scrollToIndexFn","value"]),sp=(Kl(ap),Kc()(["item","persistFocus"])),lp=(Kl(sp),Kc()(["id"])),cp=(Kl(lp),Kc()(["htmlFor"]));Kl(cp);function up(e,t,r,i){const n=function(e,t,r){return Math.round((e-t)/r)*r+t}(e*(r-t)+t,t,i);return function(e,t,r){return Math.min(Math.max(e,t),r)}(n,t,r)}function dp(e,t){const r=e[0],i=e[1],n={min:t[0],max:t[1]};return function(e){if(r===i||n.min===n.max)return n.min;return n.min+(n.max-n.min)/(i-r)*(e-r)}}var hp=Vs("slider").parts("root","label","thumb","valueText","track","range","control","markerGroup","marker","draggingIndicator");hp.build();function pp(e,t){if("center"===e.thumbAlignment)return`${t}%`;const r=e.isVertical?function(e){const{height:t=0}=e.thumbSize??{},r=dp([e.min,e.max],[-t/2,t/2]);return parseFloat(r(e.value).toFixed(2))}(e):function(e){const{width:t=0}=e.thumbSize??{};if(e.isRtl){const r=dp([e.max,e.min],[-t/2,t/2]);return-1*parseFloat(r(e.value).toFixed(2))}const r=dp([e.min,e.max],[-t/2,t/2]);return parseFloat(r(e.value).toFixed(2))}(e);return`calc(${t}% - ${r}px)`}function fp(e){let t=100*function(e,t,r){return(e-t)/(r-t)}(e.value,e.min,e.max);return pp(e,t)}function mp(e){let t="visible";return"contain"!==e.thumbAlignment||e.hasMeasuredThumbSize||(t="hidden"),t}var gp={getRootStyle:function(e){const t=function(e){const[t,r]=function(e){return[e[0],e[e.length-1]]}(e.valuePercent);if(1===e.valuePercent.length){if("center"===e.origin){const t=e.valuePercent[0]<50;return{start:t?`${e.valuePercent[0]}%`:"50%",end:t?"50%":100-e.valuePercent[0]+"%"}}return{start:"0%",end:100-r+"%"}}return{start:`${t}%`,end:100-r+"%"}}(e),r=e.value.reduce(((t,r,i)=>{const n=fp({...e,value:r});return{...t,[`--slider-thumb-offset-${i}`]:n}}),{});return{...r,"--slider-thumb-transform":e.isVertical?"translateY(50%)":e.isRtl?"translateX(50%)":"translateX(-50%)","--slider-range-start":t.start,"--slider-range-end":t.end}},getControlStyle:function(){return{touchAction:"none",userSelect:"none",WebkitUserSelect:"none",position:"relative"}},getThumbStyle:function(e,t){const r=e.isVertical?"bottom":"insetInlineStart";return{visibility:mp(e),position:"absolute",transform:"var(--slider-thumb-transform)",[r]:`var(--slider-thumb-offset-${t})`}},getRangeStyle:function(e){return e.isVertical?{position:"absolute",bottom:"var(--slider-range-start)",top:"var(--slider-range-end)"}:{position:"absolute",[e.isRtl?"right":"left"]:"var(--slider-range-start)",[e.isRtl?"left":"right"]:"var(--slider-range-end)"}},getMarkerStyle:function(e,t){return{visibility:mp(e),position:"absolute",pointerEvents:"none",[e.isHorizontal?"insetInlineStart":"bottom"]:fp({...e,value:t}),translate:"var(--tx) var(--ty)","--tx":e.isHorizontal?e.isRtl?"50%":"-50%":"0%","--ty":e.isHorizontal?"0%":"50%"}},getMarkerGroupStyle:function(){return{userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none",position:"relative"}}},yp=El({...gp,getRootId:e=>e.ids?.root??`slider:${e.id}`,getThumbId:(e,t)=>e.ids?.thumb?.(t)??`slider:${e.id}:thumb:${t}`,getHiddenInputId:(e,t)=>e.ids?.hiddenInput?.(t)??`slider:${e.id}:input:${t}`,getControlId:e=>e.ids?.control??`slider:${e.id}:control`,getTrackId:e=>e.ids?.track??`slider:${e.id}:track`,getRangeId:e=>e.ids?.range??`slider:${e.id}:range`,getLabelId:e=>e.ids?.label??`slider:${e.id}:label`,getValueTextId:e=>e.ids?.valueText??`slider:${e.id}:value-text`,getMarkerId:(e,t)=>e.ids?.marker?.(t)??`slider:${e.id}:marker:${t}`,getRootEl:e=>yp.getById(e,yp.getRootId(e)),getThumbEl:(e,t)=>yp.getById(e,yp.getThumbId(e,t)),getHiddenInputEl:(e,t)=>yp.getById(e,yp.getHiddenInputId(e,t)),getControlEl:e=>yp.getById(e,yp.getControlId(e)),getElements:e=>kl(yp.getControlEl(e),"[role=slider]"),getFirstEl:e=>yp.getElements(e)[0],getRangeEl:e=>yp.getById(e,yp.getRangeId(e)),getValueFromPoint(e,t){const r=yp.getControlEl(e);if(!r)return;return up(td(t,r).getPercentValue({orientation:e.orientation,dir:e.dir,inverted:{y:!0}}),e.min,e.max,e.step)},dispatchChangeEvent(e){Array.from(e.value).forEach(((t,r)=>{const i=yp.getHiddenInputEl(e,r);i&&Du(i,{value:t})}))}});var _p=Kc()(["aria-label","aria-labelledby","dir","disabled","form","getAriaValueText","getRootNode","id","ids","invalid","max","min","minStepsBetweenThumbs","name","onFocusChange","onValueChange","onValueChangeEnd","orientation","origin","readOnly","step","thumbAlignment","thumbAlignment","thumbSize","value"]),bp=(Kl(_p),Kc()(["index","name"])),vp=(Kl(bp),Vs("switch").parts("root","label","control","thumb")),xp=(vp.build(),El({getRootId:e=>e.ids?.root??`switch:${e.id}`,getLabelId:e=>e.ids?.label??`switch:${e.id}:label`,getThumbId:e=>e.ids?.thumb??`switch:${e.id}:thumb`,getControlId:e=>e.ids?.control??`switch:${e.id}:control`,getHiddenInputId:e=>e.ids?.hiddenInput??`switch:${e.id}:input`,getRootEl:e=>xp.getById(e,xp.getRootId(e)),getHiddenInputEl:e=>xp.getById(e,xp.getHiddenInputId(e))}));var{not:wp}=Nc;var Sp=Kc()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]);Kl(Sp);const Ip=Jc.extendWith("itemBody"),Tp=Vs("action-bar").parts("positioner","content","separator","selectionTrigger","closeTrigger"),kp=Vs("alert").parts("title","description","root","indicator","content"),Ep=Vs("breadcrumb").parts("link","currentLink","item","list","root","ellipsis","separator"),Ap=Vs("blockquote").parts("root","icon","content","caption"),Pp=Vs("card").parts("root","header","body","footer","title","description"),Cp=Vs("checkbox-card",["root","control","label","description","addon","indicator","content"]),Mp=Vs("data-list").parts("root","item","itemLabel","itemValue"),Op=nu.extendWith("header","body","footer","backdrop"),Rp=nu.extendWith("header","body","footer","backdrop"),Bp=su.extendWith("textarea"),Dp=Vs("empty-state",["root","content","indicator","title","description"]),zp=uu.extendWith("requiredIndicator"),Lp=du.extendWith("itemContent","dropzoneContent"),Fp=Vs("list").parts("root","item","indicator"),Np=mu.extendWith("itemCommand"),jp=Vs("select").parts("root","field","indicator"),Up=Tu.extendWith("header","body","footer"),Vp=Au.extendWith("itemAddon","itemIndicator"),$p=Vp.extendWith("itemContent","itemDescription"),Wp=Fu.extendWith("itemIndicator"),Hp=qh.extendWith("indicatorGroup"),Gp=hp.extendWith("markerIndicator"),qp=Vs("stat").parts("root","label","helpText","valueText","valueUnit","indicator"),Zp=Vs("status").parts("root","indicator"),Xp=Vs("steps",["root","list","item","trigger","indicator","separator","content","title","description","nextTrigger","prevTrigger","progress"]),Yp=vp.extendWith("indicator"),Kp=Vs("table").parts("root","header","body","row","columnHeader","cell","footer","caption"),Jp=Vs("toast").parts("root","title","description","indicator","closeTrigger","actionTrigger"),Qp=Vs("tabs").parts("root","trigger","list","content","contentGroup","indicator"),ef=Vs("tag").parts("root","label","closeTrigger","startElement","endElement"),tf=Vs("timeline").parts("root","item","content","separator","indicator","connector","title","description"),rf={className:"chakra-accordion",slots:Ip.keys(),base:{root:{width:"full","--accordion-radius":"radii.l2"},item:{overflowAnchor:"none"},itemTrigger:{display:"flex",alignItems:"center",width:"full",outline:"0",gap:"3",fontWeight:"medium",borderRadius:"var(--accordion-radius)",_focusVisible:{outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{layerStyle:"disabled"}},itemBody:{pt:"var(--accordion-padding-y)",pb:"calc(var(--accordion-padding-y) * 2)"},itemContent:{overflow:"hidden",borderRadius:"var(--accordion-radius)",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}},itemIndicator:{transition:"rotate 0.2s",transformOrigin:"center",color:"fg.subtle",_open:{rotate:"180deg"},_icon:{width:"1.2em",height:"1.2em"}}},variants:{variant:{outline:{item:{borderBottomWidth:"1px"}},subtle:{itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{borderRadius:"var(--accordion-radius)",_open:{bg:"colorPalette.subtle"}}},enclosed:{root:{borderWidth:"1px",borderRadius:"var(--accordion-radius)",divideY:"1px",overflow:"hidden"},itemTrigger:{px:"var(--accordion-padding-x)"},itemContent:{px:"var(--accordion-padding-x)"},item:{_open:{bg:"bg.subtle"}}},plain:{}},size:{sm:{root:{"--accordion-padding-x":"spacing.3","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"sm",py:"var(--accordion-padding-y)"}},md:{root:{"--accordion-padding-x":"spacing.4","--accordion-padding-y":"spacing.2"},itemTrigger:{textStyle:"md",py:"var(--accordion-padding-y)"}},lg:{root:{"--accordion-padding-x":"spacing.4.5","--accordion-padding-y":"spacing.2.5"},itemTrigger:{textStyle:"lg",py:"var(--accordion-padding-y)"}}}},defaultVariants:{size:"md",variant:"outline"}},nf={className:"chakra-action-bar",slots:Tp.keys(),base:{positioner:{position:"fixed",display:"flex",justifyContent:"center",pointerEvents:"none",insetInline:"0",top:"unset",bottom:"calc(env(safe-area-inset-bottom) + 20px)"},content:{bg:"bg.panel",shadow:"md",display:"flex",alignItems:"center",gap:"3",borderRadius:"l3",py:"2.5",px:"3",pointerEvents:"auto",translate:"calc(-1 * var(--scrollbar-width) / 2) 0px",_open:{animationName:"slide-from-bottom, fade-in",animationDuration:"moderate"},_closed:{animationName:"slide-to-bottom, fade-out",animationDuration:"faster"}},separator:{width:"1px",height:"5",bg:"border"},selectionTrigger:{display:"inline-flex",alignItems:"center",gap:"2",alignSelf:"stretch",textStyle:"sm",px:"4",py:"1",borderRadius:"l2",borderWidth:"1px",borderStyle:"dashed"}}},of={slots:kp.keys(),className:"chakra-alert",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",borderRadius:"l3"},title:{fontWeight:"medium"},description:{display:"inline"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0",width:"1em",height:"1em",_icon:{boxSize:"full"}},content:{display:"flex",flex:"1",gap:"1"}},variants:{status:{info:{root:{colorPalette:"blue"}},warning:{root:{colorPalette:"orange"}},success:{root:{colorPalette:"green"}},error:{root:{colorPalette:"red"}},neutral:{root:{colorPalette:"gray"}}},inline:{true:{content:{display:"inline-flex",flexDirection:"row",alignItems:"center"}},false:{content:{display:"flex",flexDirection:"column"}}},variant:{subtle:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg"}},surface:{root:{bg:"colorPalette.subtle",color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",shadow:"inset 0 0 0px 1px var(--shadow-color)",shadowColor:"colorPalette.muted"},indicator:{color:"colorPalette.fg"}},solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"},indicator:{color:"colorPalette.contrast"}}},size:{sm:{root:{gap:"2",px:"3",py:"3",textStyle:"xs"},indicator:{textStyle:"lg"}},md:{root:{gap:"3",px:"4",py:"4",textStyle:"sm"},indicator:{textStyle:"xl"}},lg:{root:{gap:"3",px:"4",py:"4",textStyle:"md"},indicator:{textStyle:"2xl"}}}},defaultVariants:{status:"info",variant:"subtle",size:"md",inline:!1}};var af=Vs("avatar").parts("root","image","fallback"),sf=(af.build(),El({getRootId:e=>e.ids?.root??`avatar:${e.id}`,getImageId:e=>e.ids?.image??`avatar:${e.id}:image`,getFallbackId:e=>e.ids?.fallback??`avatar:${e.id}:fallback`,getRootEl:e=>sf.getById(e,sf.getRootId(e)),getImageEl:e=>sf.getById(e,sf.getImageId(e))}));var lf=Kc()(["dir","id","ids","onStatusChange","getRootNode"]);Kl(lf);const cf={slots:af.keys(),className:"chakra-avatar",base:{root:{display:"inline-flex",alignItems:"center",justifyContent:"center",fontWeight:"medium",position:"relative",verticalAlign:"top",flexShrink:"0",userSelect:"none",width:"var(--avatar-size)",height:"var(--avatar-size)",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)","&[data-group-item]":{borderWidth:"2px",borderColor:"bg"}},image:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"var(--avatar-radius)"},fallback:{lineHeight:"1",textTransform:"uppercase",fontWeight:"medium",fontSize:"var(--avatar-font-size)",borderRadius:"var(--avatar-radius)"}},variants:{size:{full:{root:{"--avatar-size":"100%","--avatar-font-size":"100%"}},"2xs":{root:{"--avatar-font-size":"fontSizes.2xs","--avatar-size":"sizes.6"}},xs:{root:{"--avatar-font-size":"fontSizes.xs","--avatar-size":"sizes.8"}},sm:{root:{"--avatar-font-size":"fontSizes.sm","--avatar-size":"sizes.9"}},md:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.10"}},lg:{root:{"--avatar-font-size":"fontSizes.md","--avatar-size":"sizes.11"}},xl:{root:{"--avatar-font-size":"fontSizes.lg","--avatar-size":"sizes.12"}},"2xl":{root:{"--avatar-font-size":"fontSizes.xl","--avatar-size":"sizes.16"}}},variant:{solid:{root:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},subtle:{root:{bg:"colorPalette.muted",color:"colorPalette.fg"}},outline:{root:{color:"colorPalette.fg",borderWidth:"1px",borderColor:"colorPalette.muted"}}},shape:{square:{},rounded:{root:{"--avatar-radius":"radii.l3"}},full:{root:{"--avatar-radius":"radii.full"}}},borderless:{true:{root:{"&[data-group-item]":{borderWidth:"0px"}}}}},defaultVariants:{size:"md",shape:"full",variant:"subtle"}},uf={className:"chakra-blockquote",slots:Ap.keys(),base:{root:{position:"relative",display:"flex",flexDirection:"column",gap:"2"},caption:{textStyle:"sm",color:"fg.muted"},icon:{boxSize:"5"}},variants:{justify:{start:{root:{alignItems:"flex-start",textAlign:"start"}},center:{root:{alignItems:"center",textAlign:"center"}},end:{root:{alignItems:"flex-end",textAlign:"end"}}},variant:{subtle:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.muted"},icon:{color:"colorPalette.fg"}},solid:{root:{paddingX:"5",borderStartWidth:"4px",borderStartColor:"colorPalette.solid"},icon:{color:"colorPalette.solid"}},plain:{root:{paddingX:"5"},icon:{color:"colorPalette.solid"}}}},defaultVariants:{variant:"subtle",justify:"start"}},df={className:"chakra-breadcrumb",slots:Ep.keys(),base:{list:{display:"flex",alignItems:"center",wordBreak:"break-word",color:"fg.muted"},link:{outline:"0",textDecoration:"none",borderRadius:"l1",focusRing:"outside",display:"inline-flex",alignItems:"center",gap:"2"},item:{display:"inline-flex",alignItems:"center"},separator:{color:"fg.muted",opacity:"0.8",_icon:{boxSize:"1em"}},ellipsis:{display:"inline-flex",alignItems:"center",justifyContent:"center",_icon:{boxSize:"1em"}}},variants:{variant:{underline:{link:{color:"colorPalette.fg",textDecoration:"underline",textUnderlineOffset:"0.2em",textDecorationColor:"colorPalette.muted"},currentLink:{color:"colorPalette.fg"}},plain:{link:{color:"fg.muted",_hover:{color:"fg"}},currentLink:{color:"fg"}}},size:{sm:{list:{gap:"1",textStyle:"xs"}},md:{list:{gap:"1.5",textStyle:"sm"}},lg:{list:{gap:"2",textStyle:"md"}}}},defaultVariants:{variant:"plain",size:"md"}},hf={className:"chakra-card",slots:Pp.keys(),base:{root:{display:"flex",flexDirection:"column",position:"relative",minWidth:"0",wordWrap:"break-word",borderRadius:"l3",color:"fg",textAlign:"start"},title:{fontWeight:"semibold"},description:{color:"fg.muted",fontSize:"sm"},header:{paddingInline:"var(--card-padding)",paddingTop:"var(--card-padding)",display:"flex",flexDirection:"column",gap:"1.5"},body:{padding:"var(--card-padding)",flex:"1",display:"flex",flexDirection:"column"},footer:{display:"flex",alignItems:"center",gap:"2",paddingInline:"var(--card-padding)",paddingBottom:"var(--card-padding)"}},variants:{size:{sm:{root:{"--card-padding":"spacing.4"},title:{textStyle:"md"}},md:{root:{"--card-padding":"spacing.6"},title:{textStyle:"lg"}},lg:{root:{"--card-padding":"spacing.7"},title:{textStyle:"xl"}}},variant:{elevated:{root:{bg:"bg.panel",boxShadow:"md"}},outline:{root:{bg:"bg.panel",borderWidth:"1px",borderColor:"border"}},subtle:{root:{bg:"bg.muted"}}}},defaultVariants:{variant:"outline",size:"md"}};var pf=Vs("checkbox").parts("root","label","control","indicator"),ff=(pf.build(),El({getRootId:e=>e.ids?.root??`checkbox:${e.id}`,getLabelId:e=>e.ids?.label??`checkbox:${e.id}:label`,getControlId:e=>e.ids?.control??`checkbox:${e.id}:control`,getHiddenInputId:e=>e.ids?.hiddenInput??`checkbox:${e.id}:input`,getRootEl:e=>ff.getById(e,ff.getRootId(e)),getHiddenInputEl:e=>ff.getById(e,ff.getHiddenInputId(e))}));var{not:mf}=Nc;var gf=Kc()(["checked","dir","disabled","form","getRootNode","id","ids","invalid","name","onCheckedChange","readOnly","required","value"]);Kl(gf);const yf={slots:pf.extendWith("group").keys(),className:"chakra-checkbox",base:{root:{display:"inline-flex",gap:"2",alignItems:"center",verticalAlign:"top",position:"relative"},control:Ms.base,label:{fontWeight:"medium",userSelect:"none",_disabled:{opacity:"0.5"}}},variants:{size:{xs:{root:{gap:"1.5"},label:{textStyle:"xs"},control:Ms.variants?.size?.xs},sm:{root:{gap:"2"},label:{textStyle:"sm"},control:Ms.variants?.size?.sm},md:{root:{gap:"2.5"},label:{textStyle:"sm"},control:Ms.variants?.size?.md},lg:{root:{gap:"3"},label:{textStyle:"md"},control:Ms.variants?.size?.lg}},variant:{outline:{control:Ms.variants?.variant?.outline},solid:{control:Ms.variants?.variant?.solid},subtle:{control:Ms.variants?.variant?.subtle}}},defaultVariants:{variant:"solid",size:"md"}},_f={slots:Cp.keys(),className:"chakra-checkbox-card",base:{root:{display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",flex:"1",focusVisibleRing:"outside",_disabled:{opacity:"0.8",borderColor:"border.subtle"},_invalid:{outline:"2px solid",outlineColor:"border.error"}},control:{display:"inline-flex",flex:"1",position:"relative",borderRadius:"inherit",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"},label:{fontWeight:"medium",display:"flex",alignItems:"center",gap:"2",_disabled:{opacity:"0.5"}},description:{opacity:"0.64",textStyle:"sm"},addon:{_disabled:{opacity:"0.5"}},indicator:Ms.base,content:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--checkbox-card-justify)",alignItems:"var(--checkbox-card-align)"}},variants:{size:{sm:{root:{textStyle:"sm"},control:{padding:"3",gap:"1.5"},addon:{px:"3",py:"1.5",borderTopWidth:"1px"},indicator:Ms.variants?.size.sm},md:{root:{textStyle:"sm"},control:{padding:"4",gap:"2.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:Ms.variants?.size.md},lg:{root:{textStyle:"md"},control:{padding:"4",gap:"3.5"},addon:{px:"4",py:"2",borderTopWidth:"1px"},indicator:Ms.variants?.size.lg}},variant:{surface:{root:{borderWidth:"1px",borderColor:"border",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"},_disabled:{bg:"bg.muted"}},indicator:Ms.variants?.variant.solid},subtle:{root:{bg:"bg.muted"},control:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},indicator:Ms.variants?.variant.plain},outline:{root:{borderWidth:"1px",borderColor:"border",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},indicator:Ms.variants?.variant.solid},solid:{root:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},indicator:Ms.variants?.variant.inverted}},justify:{start:{root:{"--checkbox-card-justify":"flex-start"}},end:{root:{"--checkbox-card-justify":"flex-end"}},center:{root:{"--checkbox-card-justify":"center"}}},align:{start:{root:{"--checkbox-card-align":"flex-start"},content:{textAlign:"start"}},end:{root:{"--checkbox-card-align":"flex-end"},content:{textAlign:"end"}},center:{root:{"--checkbox-card-align":"center"},content:{textAlign:"center"}}},orientation:{vertical:{control:{flexDirection:"column"}},horizontal:{control:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}};var bf=Vs("collapsible").parts("root","trigger","content"),vf=(bf.build(),El({getRootId:e=>e.ids?.root??`collapsible:${e.id}`,getContentId:e=>e.ids?.content??`collapsible:${e.id}:content`,getTriggerId:e=>e.ids?.trigger??`collapsible:${e.id}:trigger`,getRootEl:e=>vf.getById(e,vf.getRootId(e)),getContentEl:e=>vf.getById(e,vf.getContentId(e)),getTriggerEl:e=>vf.getById(e,vf.getTriggerId(e))}));var xf=Kc()(["dir","disabled","getRootNode","id","ids","onExitComplete","onOpenChange","open.controlled","open"]);Kl(xf);const wf={slots:bf.keys(),className:"chakra-collapsible",base:{content:{overflow:"hidden",_open:{animationName:"expand-height, fade-in",animationDuration:"moderate"},_closed:{animationName:"collapse-height, fade-out",animationDuration:"moderate"}}}};var Sf=Vs("color-picker",["root","label","control","trigger","positioner","content","area","areaThumb","valueText","areaBackground","channelSlider","channelSliderLabel","channelSliderTrack","channelSliderThumb","channelSliderValueText","channelInput","transparencyGrid","swatchGroup","swatchTrigger","swatchIndicator","swatch","eyeDropperTrigger","formatTrigger","formatSelect"]),If=(Sf.build(),El({getRootId:e=>e.ids?.root??`color-picker:${e.id}`,getLabelId:e=>e.ids?.label??`color-picker:${e.id}:label`,getHiddenInputId:e=>e.ids?.hiddenInput??`color-picker:${e.id}:hidden-input`,getControlId:e=>e.ids?.control??`color-picker:${e.id}:control`,getTriggerId:e=>e.ids?.trigger??`color-picker:${e.id}:trigger`,getContentId:e=>e.ids?.content??`color-picker:${e.id}:content`,getPositionerId:e=>e.ids?.positioner??`color-picker:${e.id}:positioner`,getFormatSelectId:e=>e.ids?.formatSelect??`color-picker:${e.id}:format-select`,getAreaId:e=>e.ids?.area??`color-picker:${e.id}:area`,getAreaGradientId:e=>e.ids?.areaGradient??`color-picker:${e.id}:area-gradient`,getAreaThumbId:e=>e.ids?.areaThumb??`color-picker:${e.id}:area-thumb`,getChannelSliderTrackId:(e,t)=>e.ids?.channelSliderTrack?.(t)??`color-picker:${e.id}:slider-track:${t}`,getChannelSliderThumbId:(e,t)=>e.ids?.channelSliderThumb?.(t)??`color-picker:${e.id}:slider-thumb:${t}`,getContentEl:e=>If.getById(e,If.getContentId(e)),getAreaThumbEl:e=>If.getById(e,If.getAreaThumbId(e)),getChannelSliderThumbEl:(e,t)=>If.getById(e,If.getChannelSliderThumbId(e,t)),getChannelInputEl:(e,t)=>{const r=`input[data-channel="${t}"]`;return[...kl(If.getContentEl(e),r),...kl(If.getControlEl(e),r)]},getFormatSelectEl:e=>If.getById(e,If.getFormatSelectId(e)),getHiddenInputEl:e=>If.getById(e,If.getHiddenInputId(e)),getAreaEl:e=>If.getById(e,If.getAreaId(e)),getAreaValueFromPoint(e,t){const r=If.getAreaEl(e);if(!r)return;const{percent:i}=td(t,r);return i},getControlEl:e=>If.getById(e,If.getControlId(e)),getTriggerEl:e=>If.getById(e,If.getTriggerId(e)),getPositionerEl:e=>If.getById(e,If.getPositionerId(e)),getChannelSliderTrackEl:(e,t)=>If.getById(e,If.getChannelSliderTrackId(e,t)),getChannelSliderValueFromPoint(e,t,r){const i=If.getChannelSliderTrackEl(e,r);if(!i)return;const{percent:n}=td(t,i);return n},getChannelInputEls:e=>[...kl(If.getContentEl(e),"input[data-channel]"),...kl(If.getControlEl(e),"input[data-channel]")]}));var Tf=["hsba","hsla","rgba"];new RegExp(`^(${Tf.join("|")})$`);var{and:kf}=Nc;const Ef={className:"colorPicker",slots:Sf.extendWith("view").keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5"},label:{color:"fg",fontWeight:"medium",textStyle:"sm"},valueText:{textAlign:"start"},control:{display:"flex",alignItems:"center",flexDirection:"row",gap:"2",position:"relative"},swatchTrigger:{display:"flex",alignItems:"center",justifyContent:"center"},trigger:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",flexShrink:"0",gap:"2",textStyle:"sm",minH:"var(--input-height)",minW:"var(--input-height)",px:"1",rounded:"l2",_disabled:{opacity:"0.5"},"--focus-color":"colors.colorPalette.focusRing","&:focus-visible":{borderColor:"var(--focus-color)",outline:"1px solid var(--focus-color)"},"&[data-fit-content]":{"--input-height":"unset",px:"0",border:"0"}},content:{display:"flex",flexDirection:"column",bg:"bg.panel",borderRadius:"l3",boxShadow:"lg",width:"64",p:"4",gap:"3",zIndex:"dropdown",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},area:{height:"180px",borderRadius:"l2",overflow:"hidden"},areaThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",focusVisibleRing:"mixed",focusRingColor:"white"},areaBackground:{height:"full"},channelSlider:{borderRadius:"l2",flex:"1"},channelSliderTrack:{height:"var(--slider-height)",borderRadius:"inherit",boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"},swatchGroup:{display:"flex",flexDirection:"row",flexWrap:"wrap",gap:"2"},swatch:{...Bs.base,borderRadius:"l1"},swatchIndicator:{color:"white",rounded:"full"},channelSliderThumb:{borderRadius:"full",height:"var(--thumb-size)",width:"var(--thumb-size)",borderWidth:"2px",borderColor:"white",shadow:"sm",transform:"translate(-50%, -50%)",focusVisibleRing:"outside",focusRingOffset:"1px"},channelInput:{...zs.base,"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0}},formatSelect:{textStyle:"xs",textTransform:"uppercase",borderWidth:"1px",minH:"6",focusRing:"inside",rounded:"l2"},transparencyGrid:{borderRadius:"l2"},view:{display:"flex",flexDirection:"column",gap:"2"}},variants:{size:{"2xs":{channelInput:zs.variants?.size?.["2xs"],swatch:{"--swatch-size":"sizes.4.5"},trigger:{"--input-height":"sizes.7"},area:{"--thumb-size":"sizes.3"},channelSlider:{"--slider-height":"sizes.3","--thumb-size":"sizes.3"}},xs:{channelInput:zs.variants?.size?.xs,swatch:{"--swatch-size":"sizes.5"},trigger:{"--input-height":"sizes.8"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},sm:{channelInput:zs.variants?.size?.sm,swatch:{"--swatch-size":"sizes.6"},trigger:{"--input-height":"sizes.9"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},md:{channelInput:zs.variants?.size?.md,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.10"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},lg:{channelInput:zs.variants?.size?.lg,swatch:{"--swatch-size":"sizes.7"},trigger:{"--input-height":"sizes.11"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},xl:{channelInput:zs.variants?.size?.xl,swatch:{"--swatch-size":"sizes.8"},trigger:{"--input-height":"sizes.12"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}},"2xl":{channelInput:zs.variants?.size?.["2xl"],swatch:{"--swatch-size":"sizes.10"},trigger:{"--input-height":"sizes.16"},area:{"--thumb-size":"sizes.3.5"},channelSlider:{"--slider-height":"sizes.3.5","--thumb-size":"sizes.3.5"}}},variant:{outline:{channelInput:zs.variants?.variant?.outline,trigger:{borderWidth:"1px"}},subtle:{channelInput:zs.variants?.variant?.subtle,trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}}},defaultVariants:{size:"md",variant:"outline"}},Af={slots:Mp.keys(),className:"chakra-data-list",base:{itemLabel:{display:"flex",alignItems:"center",gap:"1"},itemValue:{display:"flex",minWidth:"0",flex:"1"}},variants:{orientation:{horizontal:{root:{display:"flex",flexDirection:"column"},item:{display:"inline-flex",alignItems:"center",gap:"4"},itemLabel:{minWidth:"120px"}},vertical:{root:{display:"flex",flexDirection:"column"},item:{display:"flex",flexDirection:"column",gap:"1"}}},size:{sm:{root:{gap:"3"},item:{textStyle:"xs"}},md:{root:{gap:"4"},item:{textStyle:"sm"}},lg:{root:{gap:"5"},item:{textStyle:"md"}}},variant:{subtle:{itemLabel:{color:"fg.muted"}},bold:{itemLabel:{fontWeight:"medium"},itemValue:{color:"fg.muted"}}}},defaultVariants:{size:"md",orientation:"vertical",variant:"subtle"}},Pf={slots:Op.keys(),className:"chakra-dialog",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",left:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",left:0,top:0,"--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",justifyContent:"center",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,borderRadius:"l3",textStyle:"sm",my:"var(--dialog-margin, var(--dialog-base-margin))","--dialog-z-index":"zIndex.modal",zIndex:"calc(var(--dialog-z-index) + var(--layer-index, 0))",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"moderate"},_closed:{animationDuration:"faster"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{flex:"1",px:"6",pt:"2",pb:"6"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{placement:{center:{positioner:{alignItems:"center"},content:{"--dialog-base-margin":"auto",mx:"auto"}},top:{positioner:{alignItems:"flex-start"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}},bottom:{positioner:{alignItems:"flex-end"},content:{"--dialog-base-margin":"spacing.16",mx:"auto"}}},scrollBehavior:{inside:{positioner:{overflow:"hidden"},content:{maxH:"calc(100% - 7.5rem)"},body:{overflow:"auto"}},outside:{positioner:{overflow:"auto",pointerEvents:"auto"}}},size:{xs:{content:{maxW:"sm"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},cover:{positioner:{padding:"10"},content:{width:"100%",height:"100%","--dialog-margin":"0"}},full:{content:{maxW:"100vw",minH:"100vh","--dialog-margin":"0",borderRadius:"0"}}},motionPreset:{scale:{content:{_open:{animationName:"scale-in, fade-in"},_closed:{animationName:"scale-out, fade-out"}}},"slide-in-bottom":{content:{_open:{animationName:"slide-from-bottom, fade-in"},_closed:{animationName:"slide-to-bottom, fade-out"}}},"slide-in-top":{content:{_open:{animationName:"slide-from-top, fade-in"},_closed:{animationName:"slide-to-top, fade-out"}}},"slide-in-left":{content:{_open:{animationName:"slide-from-left, fade-in"},_closed:{animationName:"slide-to-left, fade-out"}}},"slide-in-right":{content:{_open:{animationName:"slide-from-right, fade-in"},_closed:{animationName:"slide-to-right, fade-out"}}},none:{}}},defaultVariants:{size:"md",scrollBehavior:"outside",placement:"top",motionPreset:"scale"}},Cf={slots:Rp.keys(),className:"chakra-drawer",base:{backdrop:{bg:"blackAlpha.500",pos:"fixed",insetInlineStart:0,top:0,w:"100vw",h:"100dvh",zIndex:"modal",_open:{animationName:"fade-in",animationDuration:"slow"},_closed:{animationName:"fade-out",animationDuration:"moderate"}},positioner:{display:"flex",width:"100vw",height:"100dvh",position:"fixed",insetInlineStart:0,top:0,zIndex:"modal",overscrollBehaviorY:"none"},content:{display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,zIndex:"modal",textStyle:"sm",maxH:"100dvh",color:"inherit",bg:"bg.panel",boxShadow:"lg",_open:{animationDuration:"slowest",animationTimingFunction:"ease-in-smooth"},_closed:{animationDuration:"slower",animationTimingFunction:"ease-in-smooth"}},header:{flex:0,px:"6",pt:"6",pb:"4"},body:{px:"6",py:"2",flex:"1",overflow:"auto"},footer:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"3",px:"6",pt:"2",pb:"4"},title:{textStyle:"lg",fontWeight:"semibold"},description:{color:"fg.muted"}},variants:{size:{xs:{content:{maxW:"xs"}},sm:{content:{maxW:"md"}},md:{content:{maxW:"lg"}},lg:{content:{maxW:"2xl"}},xl:{content:{maxW:"4xl"}},full:{content:{maxW:"100vw",h:"100dvh"}}},placement:{start:{positioner:{justifyContent:"flex-start"},content:{_open:{animationName:{base:"slide-from-left-full, fade-in",_rtl:"slide-from-right-full, fade-in"}},_closed:{animationName:{base:"slide-to-left-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},end:{positioner:{justifyContent:"flex-end"},content:{_open:{animationName:{base:"slide-from-right-full, fade-in",_rtl:"slide-from-left-full, fade-in"}},_closed:{animationName:{base:"slide-to-right-full, fade-out",_rtl:"slide-to-right-full, fade-out"}}}},top:{positioner:{alignItems:"flex-start"},content:{maxW:"100%",_open:{animationName:"slide-from-top-full, fade-in"},_closed:{animationName:"slide-to-top-full, fade-out"}}},bottom:{positioner:{alignItems:"flex-end"},content:{maxW:"100%",_open:{animationName:"slide-from-bottom-full, fade-in"},_closed:{animationName:"slide-to-bottom-full, fade-out"}}}},contained:{true:{positioner:{padding:"4"},content:{borderRadius:"l3"}}}},defaultVariants:{size:"xs",placement:"end"}},Mf={fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",borderRadius:"l2"},Of={slots:Bp.keys(),className:"chakra-editable",base:{root:{display:"inline-flex",alignItems:"center",position:"relative",gap:"1.5",width:"full"},preview:{...Mf,py:"1",px:"1",display:"inline-flex",alignItems:"center",transitionProperty:"common",transitionDuration:"normal",cursor:"text",_hover:{bg:"bg.muted"},_disabled:{userSelect:"none"}},input:{...Mf,outline:"0",py:"1",px:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",focusVisibleRing:"inside",focusRingWidth:"2px",_placeholder:{opacity:.6}},control:{display:"inline-flex",alignItems:"center",gap:"1.5"}},variants:{size:{sm:{root:{textStyle:"sm"},preview:{minH:"8"},input:{minH:"8"}},md:{root:{textStyle:"sm"},preview:{minH:"9"},input:{minH:"9"}},lg:{root:{textStyle:"md"},preview:{minH:"10"},input:{minH:"10"}}}},defaultVariants:{size:"md"}},Rf={slots:Dp.keys(),className:"chakra-empty-state",base:{root:{width:"full"},content:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:"fg.subtle",_icon:{boxSize:"1em"}},title:{fontWeight:"semibold"},description:{textStyle:"sm",color:"fg.muted"}},variants:{size:{sm:{root:{px:"4",py:"6"},title:{textStyle:"md"},content:{gap:"4"},indicator:{textStyle:"2xl"}},md:{root:{px:"8",py:"12"},title:{textStyle:"lg"},content:{gap:"6"},indicator:{textStyle:"4xl"}},lg:{root:{px:"12",py:"16"},title:{textStyle:"xl"},content:{gap:"8"},indicator:{textStyle:"6xl"}}}},defaultVariants:{size:"md"}},Bf={className:"chakra-field",slots:zp.keys(),base:{requiredIndicator:{color:"fg.error",lineHeight:"1"},root:{display:"flex",width:"100%",position:"relative",gap:"1.5"},label:{display:"flex",alignItems:"center",textAlign:"start",textStyle:"sm",fontWeight:"medium",gap:"1",userSelect:"none",_disabled:{opacity:"0.5"}},errorText:{display:"inline-flex",alignItems:"center",fontWeight:"medium",gap:"1",color:"fg.error",textStyle:"xs"},helperText:{color:"fg.muted",textStyle:"xs"}},variants:{orientation:{vertical:{root:{flexDirection:"column",alignItems:"flex-start"}},horizontal:{root:{flexDirection:"row",alignItems:"center",justifyContent:"space-between"},label:{flex:"0 0 var(--field-label-width, 80px)"}}}},defaultVariants:{orientation:"vertical"}},Df=Vs("fieldset").parts("root","errorText","helperText","legend"),zf=(Df.build(),{className:"fieldset",slots:[...Df.keys(),"content"],base:{root:{display:"flex",flexDirection:"column",width:"full"},content:{display:"flex",flexDirection:"column",width:"full"},legend:{color:"fg",fontWeight:"medium",_disabled:{opacity:"0.5"}},helperText:{color:"fg.muted",textStyle:"sm"},errorText:{display:"inline-flex",alignItems:"center",color:"fg.error",gap:"2",fontWeight:"medium",textStyle:"sm"}},variants:{size:{sm:{root:{spaceY:"2"},content:{gap:"1.5"},legend:{textStyle:"sm"}},md:{root:{spaceY:"4"},content:{gap:"4"},legend:{textStyle:"sm"}},lg:{root:{spaceY:"6"},content:{gap:"4"},legend:{textStyle:"md"}}}},defaultVariants:{size:"md"}}),Lf={className:"chakra-file-upload",slots:Lp.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"4",width:"100%",alignItems:"flex-start"},label:{fontWeight:"medium",textStyle:"sm"},dropzone:{background:"bg",borderRadius:"l3",borderWidth:"2px",borderStyle:"dashed",display:"flex",alignItems:"center",flexDirection:"column",gap:"4",justifyContent:"center",minHeight:"2xs",px:"3",py:"2",transition:"backgrounds",focusVisibleRing:"outside",_hover:{bg:"bg.subtle"},_dragging:{bg:"colorPalette.subtle",borderStyle:"solid",borderColor:"colorPalette.solid"}},dropzoneContent:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",gap:"1",textStyle:"sm"},item:{textStyle:"sm",animationName:"fade-in",animationDuration:"moderate",background:"bg",borderRadius:"l2",borderWidth:"1px",width:"100%",display:"flex",alignItems:"center",gap:"3",p:"4"},itemGroup:{width:"100%",display:"flex",flexDirection:"column",gap:"3"},itemName:{color:"fg",fontWeight:"medium",lineClamp:"1"},itemContent:{display:"flex",flexDirection:"column",gap:"0.5",flex:"1"},itemSizeText:{color:"fg.muted",textStyle:"xs"},itemDeleteTrigger:{alignSelf:"flex-start"},itemPreviewImage:{width:"10",height:"10",objectFit:"scale-down"}},defaultVariants:{}};var Ff=Vs("hoverCard").parts("arrow","arrowTip","trigger","positioner","content"),Nf=(Ff.build(),El({getTriggerId:e=>e.ids?.trigger??`hover-card:${e.id}:trigger`,getContentId:e=>e.ids?.content??`hover-card:${e.id}:content`,getPositionerId:e=>e.ids?.positioner??`hover-card:${e.id}:popper`,getArrowId:e=>e.ids?.arrow??`hover-card:${e.id}:arrow`,getTriggerEl:e=>Nf.getById(e,Nf.getTriggerId(e)),getContentEl:e=>Nf.getById(e,Nf.getContentId(e)),getPositionerEl:e=>Nf.getById(e,Nf.getPositionerId(e))}));var{not:jf,and:Uf}=Nc;var Vf=Kc()(["closeDelay","dir","getRootNode","id","ids","onOpenChange","open.controlled","open","openDelay","positioning"]);Kl(Vf);const $f={className:"chakra-hover-card",slots:Ff.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--hovercard-bg":"colors.bg.panel",bg:"var(--hovercard-bg)",boxShadow:"lg",maxWidth:"80",borderRadius:"l3",zIndex:"popover",transformOrigin:"var(--transform-origin)",outline:"0",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--hovercard-bg)"},arrowTip:{borderTopWidth:"0.5px",borderInlineStartWidth:"0.5px"}},variants:{size:{xs:{content:{padding:"3"}},sm:{content:{padding:"4"}},md:{content:{padding:"5"}},lg:{content:{padding:"6"}}}},defaultVariants:{size:"md"}},Wf={className:"chakra-list",slots:Fp.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"var(--list-gap)","& :where(ul, ol)":{marginTop:"var(--list-gap)"}},item:{whiteSpace:"normal",display:"list-item"},indicator:{marginEnd:"2",minHeight:"1lh",flexShrink:0,display:"inline-block",verticalAlign:"middle"}},variants:{variant:{marker:{root:{listStyle:"revert",listStylePosition:"inside"},item:{_marker:{color:"fg.subtle"}}},plain:{item:{alignItems:"flex-start",display:"inline-flex"}}},align:{center:{item:{alignItems:"center"}},start:{item:{alignItems:"flex-start"}},end:{item:{alignItems:"flex-end"}}}},defaultVariants:{variant:"marker"}},Hf={className:"chakra-menu",slots:Np.keys(),base:{content:{outline:0,bg:"bg.panel",boxShadow:"lg",color:"fg","--menu-z-index":"zIndex.dropdown",zIndex:"calc(var(--menu-z-index) + var(--layer-index, 0))",borderRadius:"l2",overflow:"hidden",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"faster"}},item:{textDecoration:"none",color:"fg",userSelect:"none",borderRadius:"l1",width:"100%",display:"flex",cursor:"menuitem",alignItems:"center",textAlign:"start",position:"relative",flex:"0 0 auto",outline:0,_disabled:{layerStyle:"disabled"}},itemText:{flex:"1"},itemGroupLabel:{px:"2",py:"1.5",fontWeight:"semibold",textStyle:"sm"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:"0"},itemCommand:{opacity:"0.6",textStyle:"xs",ms:"auto",ps:"4",letterSpacing:"widest"},separator:{height:"1px",bg:"bg.muted",my:"1",mx:"-1"}},variants:{variant:{subtle:{item:{_highlighted:{bg:{_light:"bg.muted",_dark:"bg.emphasized"}}}},solid:{item:{_highlighted:{bg:"colorPalette.solid",color:"colorPalette.contrast"}}}},size:{sm:{content:{minW:"8rem",padding:"1"},item:{gap:"1",textStyle:"xs",py:"1",px:"1.5"}},md:{content:{minW:"8rem",padding:"1.5"},item:{gap:"2",textStyle:"sm",py:"1.5",px:"2"}}}},defaultVariants:{size:"md",variant:"subtle"}},Gf={className:"chakra-select",slots:Hp.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",width:"full"},trigger:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"full",minH:"var(--select-trigger-height)",px:"var(--select-trigger-padding-x)",borderRadius:"l2",userSelect:"none",textAlign:"start",focusVisibleRing:"inside",_placeholderShown:{color:"fg.muted"},_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"}},indicatorGroup:{display:"flex",alignItems:"center",gap:"1",pos:"absolute",right:"0",top:"0",bottom:"0",px:"var(--select-trigger-padding-x)",pointerEvents:"none"},indicator:{display:"flex",alignItems:"center",justifyContent:"center",color:{base:"fg.muted",_disabled:"fg.subtle",_invalid:"fg.error"}},content:{background:"bg.panel",display:"flex",flexDirection:"column",zIndex:"dropdown",borderRadius:"l2",outline:0,maxH:"96",overflowY:"auto",boxShadow:"md",_open:{animationStyle:"slide-fade-in",animationDuration:"fast"},_closed:{animationStyle:"slide-fade-out",animationDuration:"fastest"}},item:{position:"relative",userSelect:"none",display:"flex",alignItems:"center",gap:"2",cursor:"option",justifyContent:"space-between",flex:"1",textAlign:"start",borderRadius:"l1",_highlighted:{bg:{_light:"bg.muted",_dark:"bg.emphasized"}},_disabled:{pointerEvents:"none",opacity:"0.5"},_icon:{width:"4",height:"4"}},control:{pos:"relative"},itemText:{flex:"1"},itemGroup:{_first:{mt:"0"}},itemGroupLabel:{py:"1",fontWeight:"medium"},label:{fontWeight:"medium",userSelect:"none",textStyle:"sm",_disabled:{layerStyle:"disabled"}},valueText:{lineClamp:"1",maxW:"80%"}},variants:{variant:{outline:{trigger:{bg:"transparent",borderWidth:"1px",borderColor:"border",_expanded:{borderColor:"border.emphasized"}}},subtle:{trigger:{borderWidth:"1px",borderColor:"transparent",bg:"bg.muted"}}},size:{xs:{root:{"--select-trigger-height":"sizes.8","--select-trigger-padding-x":"spacing.2"},content:{p:"1",gap:"1",textStyle:"xs"},trigger:{textStyle:"xs",gap:"1"},item:{py:"1",px:"2"},itemGroupLabel:{py:"1",px:"2"},indicator:{_icon:{width:"3.5",height:"3.5"}}},sm:{root:{"--select-trigger-height":"sizes.9","--select-trigger-padding-x":"spacing.2.5"},content:{p:"1",textStyle:"sm"},trigger:{textStyle:"sm",gap:"1"},indicator:{_icon:{width:"4",height:"4"}},item:{py:"1",px:"1.5"},itemGroup:{mt:"1"},itemGroupLabel:{py:"1",px:"1.5"}},md:{root:{"--select-trigger-height":"sizes.10","--select-trigger-padding-x":"spacing.3"},content:{p:"1",textStyle:"sm"},itemGroup:{mt:"1.5"},item:{py:"1.5",px:"2"},itemIndicator:{display:"flex",alignItems:"center",justifyContent:"center"},itemGroupLabel:{py:"1.5",px:"2"},trigger:{textStyle:"sm",gap:"2"},indicator:{_icon:{width:"4",height:"4"}}},lg:{root:{"--select-trigger-height":"sizes.12","--select-trigger-padding-x":"spacing.4"},content:{p:"1.5",textStyle:"md"},itemGroup:{mt:"2"},item:{py:"2",px:"3"},itemGroupLabel:{py:"2",px:"3"},trigger:{textStyle:"md",py:"3",gap:"2"},indicator:{_icon:{width:"5",height:"5"}}}}},defaultVariants:{size:"md",variant:"outline"}},qf={className:"chakra-native-select",slots:jp.keys(),base:{root:{height:"fit-content",display:"flex",width:"100%",position:"relative"},field:{width:"100%",minWidth:"0",outline:"0",appearance:"none",borderRadius:"l2",_disabled:{layerStyle:"disabled"},_invalid:{borderColor:"border.error"},focusVisibleRing:"inside",lineHeight:"normal","& > option, & > optgroup":{bg:"inherit"}},indicator:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)",height:"100%",color:"fg.muted",_disabled:{opacity:"0.5"},_invalid:{color:"fg.error"},_icon:{width:"1em",height:"1em"}}},variants:{variant:{outline:{field:Gf.variants?.variant.outline.trigger},subtle:{field:Gf.variants?.variant.subtle.trigger},plain:{field:{bg:"transparent",color:"fg",focusRingWidth:"2px"}}},size:{xs:{field:{textStyle:"xs",ps:"2",pe:"6",height:"6"},indicator:{textStyle:"sm",insetEnd:"1.5"}},sm:{field:{textStyle:"sm",ps:"2.5",pe:"8",height:"8"},indicator:{textStyle:"md",insetEnd:"2"}},md:{field:{textStyle:"sm",ps:"3",pe:"8",height:"10"},indicator:{textStyle:"lg",insetEnd:"2"}},lg:{field:{textStyle:"md",ps:"4",pe:"8",height:"11"},indicator:{textStyle:"xl",insetEnd:"3"}},xl:{field:{textStyle:"md",ps:"4.5",pe:"10",height:"12"},indicator:{textStyle:"xl",insetEnd:"3"}}}},defaultVariants:Gf.defaultVariants};function Zf(e,t){const r={};for(const i in e){const n=t(i,e[i]);r[n[0]]=n[1]}return r}function Xf(e){if("number"!==typeof window.devicePixelRatio)return Math.round(e);const t=window.devicePixelRatio;return Math.floor(e*t+.5)/t}new Intl.NumberFormat("en-US",{style:"decimal",maximumFractionDigits:20});var Yf=Vs("numberInput").parts("root","label","input","control","valueText","incrementTrigger","decrementTrigger","scrubber"),Kf=(Yf.build(),El({getRootId:e=>e.ids?.root??`number-input:${e.id}`,getInputId:e=>e.ids?.input??`number-input:${e.id}:input`,getIncrementTriggerId:e=>e.ids?.incrementTrigger??`number-input:${e.id}:inc`,getDecrementTriggerId:e=>e.ids?.decrementTrigger??`number-input:${e.id}:dec`,getScrubberId:e=>e.ids?.scrubber??`number-input:${e.id}:scrubber`,getCursorId:e=>`number-input:${e.id}:cursor`,getLabelId:e=>e.ids?.label??`number-input:${e.id}:label`,getInputEl:e=>Kf.getById(e,Kf.getInputId(e)),getIncrementTriggerEl:e=>Kf.getById(e,Kf.getIncrementTriggerId(e)),getDecrementTriggerEl:e=>Kf.getById(e,Kf.getDecrementTriggerId(e)),getScrubberEl:e=>Kf.getById(e,Kf.getScrubberId(e)),getCursorEl:e=>Kf.getDoc(e).getElementById(Kf.getCursorId(e)),getPressedTriggerEl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.hint,r=null;return"increment"===t&&(r=Kf.getIncrementTriggerEl(e)),"decrement"===t&&(r=Kf.getDecrementTriggerEl(e)),r},setupVirtualCursor(e){if(!rl())return Kf.createVirtualCursor(e),()=>{Kf.getCursorEl(e)?.remove()}},preventTextSelection(e){const t=Kf.getDoc(e),r=t.documentElement,i=t.body;return i.style.pointerEvents="none",r.style.userSelect="none",r.style.cursor="ew-resize",()=>{i.style.pointerEvents="",r.style.userSelect="",r.style.cursor="",r.style.length||r.removeAttribute("style"),i.style.length||i.removeAttribute("style")}},getMousementValue(e,t){const r=Xf(t.movementX),i=Xf(t.movementY);let n=r>0?"increment":r<0?"decrement":null;e.isRtl&&"increment"===n&&(n="decrement"),e.isRtl&&"decrement"===n&&(n="increment");const o={x:e.scrubberCursorPoint.x+r,y:e.scrubberCursorPoint.y+i},a=Kf.getWin(e).innerWidth,s=Xf(7.5);return o.x=function(e,t){return(e%t+t)%t}(o.x+s,a)-s,{hint:n,point:o}},createVirtualCursor(e){const t=Kf.getDoc(e),r=t.createElement("div");r.className="scrubber--cursor",r.id=Kf.getCursorId(e),Object.assign(r.style,{width:"15px",height:"15px",position:"fixed",pointerEvents:"none",left:"0px",top:"0px",zIndex:2147483647,transform:e.scrubberCursorPoint?`translate3d(${e.scrubberCursorPoint.x}px, ${e.scrubberCursorPoint.y}px, 0px)`:void 0,willChange:"transform"}),r.innerHTML='\n        <svg width="46" height="15" style="left: -15.5px; position: absolute; top: 0; filter: drop-shadow(rgba(0, 0, 0, 0.4) 0px 1px 1.1px);">\n          <g transform="translate(2 3)">\n            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z" style="stroke-width: 2px; stroke: white;"></path>\n            <path fill-rule="evenodd" d="M 15 4.5L 15 2L 11.5 5.5L 15 9L 15 6.5L 31 6.5L 31 9L 34.5 5.5L 31 2L 31 4.5Z"></path>\n          </g>\n        </svg>',t.body.appendChild(r)}}));var{not:Jf,and:Qf}=Nc;const em={display:"flex",justifyContent:"center",alignItems:"center",flex:"1",userSelect:"none",cursor:"button",lineHeight:"1",color:"fg.muted","--stepper-base-radius":"radii.xs","--stepper-radius":"calc(var(--stepper-base-radius) + 1px)",_icon:{boxSize:"1em"},_disabled:{opacity:"0.5"},_hover:{bg:"bg.muted"},_active:{bg:"bg.emphasized"}},tm={className:"chakra-number-input",slots:Yf.keys(),base:{root:{position:"relative",zIndex:"0",isolation:"isolate"},input:{...zs.base,verticalAlign:"top",pe:"calc(var(--stepper-width) + 0.5rem)"},control:{display:"flex",flexDirection:"column",position:"absolute",top:"0",insetEnd:"0px",margin:"1px",width:"var(--stepper-width)",height:"calc(100% - 2px)",zIndex:"1",borderStartWidth:"1px",divideY:"1px"},incrementTrigger:{...em,borderTopEndRadius:"var(--stepper-radius)"},decrementTrigger:{...em,borderBottomEndRadius:"var(--stepper-radius)"},valueText:{fontWeight:"medium",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}},variants:{size:{xs:{input:zs.variants.size.xs,control:{fontSize:"2xs","--stepper-width":"sizes.4"}},sm:{input:zs.variants.size.sm,control:{fontSize:"xs","--stepper-width":"sizes.5"}},md:{input:zs.variants.size.md,control:{fontSize:"sm","--stepper-width":"sizes.6"}},lg:{input:zs.variants.size.lg,control:{fontSize:"sm","--stepper-width":"sizes.6"}}},variant:Zf(zs.variants.variant,((e,t)=>[e,{input:t}]))},defaultVariants:{size:"md",variant:"outline"}};var rm=Vs("pinInput").parts("root","label","input","control"),im=(rm.build(),El({getRootId:e=>e.ids?.root??`pin-input:${e.id}`,getInputId:(e,t)=>e.ids?.input?.(t)??`pin-input:${e.id}:${t}`,getHiddenInputId:e=>e.ids?.hiddenInput??`pin-input:${e.id}:hidden`,getLabelId:e=>e.ids?.label??`pin-input:${e.id}:label`,getControlId:e=>e.ids?.control??`pin-input:${e.id}:control`,getRootEl:e=>im.getById(e,im.getRootId(e)),getInputEls:e=>{const t=`input[data-ownedby=${CSS.escape(im.getRootId(e))}]`;return kl(im.getRootEl(e),t)},getInputEl:(e,t)=>im.getById(e,im.getInputId(e,t)),getFocusedInputEl:e=>im.getInputEls(e)[e.focusedIndex],getFirstInputEl:e=>im.getInputEls(e)[0],getHiddenInputEl:e=>im.getById(e,im.getHiddenInputId(e))}));const{variants:nm,defaultVariants:om}=zs,am={className:"chakra-pin-input",slots:rm.keys(),base:{input:{...zs.base,textAlign:"center",width:"var(--input-height)"}},variants:{size:Zf(nm.size,((e,t)=>[e,{input:t}])),variant:Zf(nm.variant,((e,t)=>[e,{input:t}]))},defaultVariants:om},sm={className:"chakra-popover",slots:Up.keys(),base:{content:{position:"relative",display:"flex",flexDirection:"column",textStyle:"sm","--popover-bg":"colors.bg.panel",bg:"var(--popover-bg)",boxShadow:"lg","--popover-size":"sizes.xs","--popover-mobile-size":"calc(100dvw - 1rem)",width:{base:"min(var(--popover-mobile-size), var(--popover-size))",sm:"var(--popover-size)"},borderRadius:"l3","--popover-z-index":"zIndex.popover",zIndex:"calc(var(--popover-z-index) + var(--layer-index, 0))",outline:"0",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"faster"}},header:{paddingInline:"var(--popover-padding)",paddingTop:"var(--popover-padding)"},body:{padding:"var(--popover-padding)",flex:"1"},footer:{display:"flex",alignItems:"center",paddingInline:"var(--popover-padding)",paddingBottom:"var(--popover-padding)"},arrow:{"--arrow-size":"sizes.3","--arrow-background":"var(--popover-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px"}},variants:{size:{xs:{content:{"--popover-padding":"spacing.3"}},sm:{content:{"--popover-padding":"spacing.4"}},md:{content:{"--popover-padding":"spacing.5"}},lg:{content:{"--popover-padding":"spacing.6"}}}},defaultVariants:{size:"md"}};var lm=Vs("progress").parts("root","label","track","range","valueText","view","circle","circleTrack","circleRange");lm.build(),El({getRootId:e=>e.ids?.root??`progress-${e.id}`,getTrackId:e=>e.ids?.track??`progress-${e.id}-track`,getLabelId:e=>e.ids?.label??`progress-${e.id}-label`,getCircleId:e=>e.ids?.circle??`progress-${e.id}-circle`});var cm=Kc()(["dir","getRootNode","id","ids","max","min","orientation","translations","value"]);Kl(cm);const um={slots:lm.keys(),className:"chakra-progress",base:{root:{textStyle:"sm",position:"relative"},track:{overflow:"hidden",position:"relative"},range:{display:"flex",alignItems:"center",justifyContent:"center",transitionProperty:"width, height",transitionDuration:"slow",height:"100%",bgColor:"var(--track-color)",_indeterminate:{"--animate-from-x":"-40%","--animate-to-x":"100%",position:"absolute",willChange:"left",minWidth:"50%",animation:"position 1s ease infinite normal none running",backgroundImage:"linear-gradient(to right, transparent 0%, var(--track-color) 50%, transparent 100%)"}},label:{display:"inline-flex",fontWeight:"medium",alignItems:"center",gap:"1"},valueText:{textStyle:"xs",lineHeight:"1",fontWeight:"medium"}},variants:{variant:{outline:{track:{shadow:"inset",bgColor:"bg.muted"},range:{bgColor:"colorPalette.solid"}},subtle:{track:{bgColor:"colorPalette.muted"},range:{bgColor:"colorPalette.solid/72"}}},shape:{square:{},rounded:{track:{borderRadius:"l1"}},full:{track:{borderRadius:"full"}}},striped:{true:{range:{backgroundImage:"linear-gradient(45deg, var(--stripe-color) 25%, transparent 25%, transparent 50%, var(--stripe-color) 50%, var(--stripe-color) 75%, transparent 75%, transparent)",backgroundSize:"var(--stripe-size) var(--stripe-size)","--stripe-size":"1rem","--stripe-color":{_light:"rgba(255, 255, 255, 0.3)",_dark:"rgba(0, 0, 0, 0.3)"}}}},animated:{true:{range:{"--animate-from":"var(--stripe-size)",animation:"bg-position 1s linear infinite"}}},size:{xs:{track:{h:"1.5"}},sm:{track:{h:"2"}},md:{track:{h:"2.5"}},lg:{track:{h:"3"}},xl:{track:{h:"4"}}}},defaultVariants:{variant:"outline",size:"md",shape:"rounded"}},dm={className:"chakra-progress-circle",slots:lm.keys(),base:{root:{display:"inline-flex",textStyle:"sm",position:"relative"},circle:{_indeterminate:{animation:"spin 2s linear infinite"}},circleTrack:{"--track-color":"colors.colorPalette.muted",stroke:"var(--track-color)"},circleRange:{stroke:"colorPalette.solid",transitionProperty:"stroke-dasharray",transitionDuration:"0.6s",_indeterminate:{animation:"circular-progress 1.5s linear infinite"}},label:{display:"inline-flex"},valueText:{lineHeight:"1",fontWeight:"medium",letterSpacing:"tight",fontVariantNumeric:"tabular-nums"}},variants:{size:{xs:{circle:{"--size":"24px","--thickness":"4px"},valueText:{textStyle:"2xs"}},sm:{circle:{"--size":"32px","--thickness":"5px"},valueText:{textStyle:"2xs"}},md:{circle:{"--size":"40px","--thickness":"6px"},valueText:{textStyle:"xs"}},lg:{circle:{"--size":"48px","--thickness":"7px"},valueText:{textStyle:"sm"}},xl:{circle:{"--size":"64px","--thickness":"8px"},valueText:{textStyle:"sm"}}}},defaultVariants:{size:"md"}},hm={className:"chakra-radio-card",slots:$p.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5",isolation:"isolate"},item:{flex:"1",display:"flex",flexDirection:"column",userSelect:"none",position:"relative",borderRadius:"l2",_focus:{bg:"colorPalette.muted/20"},_disabled:{opacity:"0.8",borderColor:"border.disabled"},_checked:{zIndex:"1"}},label:{display:"inline-flex",fontWeight:"medium",textStyle:"sm",_disabled:{opacity:"0.5"}},itemText:{fontWeight:"medium"},itemDescription:{opacity:"0.64",textStyle:"sm"},itemControl:{display:"inline-flex",flex:"1",pos:"relative",rounded:"inherit",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)",_disabled:{bg:"bg.muted"}},itemIndicator:Ls.base,itemAddon:{roundedBottom:"inherit",_disabled:{color:"fg.muted"}},itemContent:{display:"flex",flexDirection:"column",flex:"1",gap:"1",justifyContent:"var(--radio-card-justify)",alignItems:"var(--radio-card-align)"}},variants:{size:{sm:{item:{textStyle:"sm"},itemControl:{padding:"3",gap:"1.5"},itemAddon:{px:"3",py:"1.5",borderTopWidth:"1px"},itemIndicator:Ls.variants?.size.sm},md:{item:{textStyle:"sm"},itemControl:{padding:"4",gap:"2.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:Ls.variants?.size.md},lg:{item:{textStyle:"md"},itemControl:{padding:"4",gap:"3.5"},itemAddon:{px:"4",py:"2",borderTopWidth:"1px"},itemIndicator:Ls.variants?.size.lg}},variant:{surface:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.subtle",color:"colorPalette.fg",borderColor:"colorPalette.muted"}},itemIndicator:Ls.variants?.variant.solid},subtle:{item:{bg:"bg.muted"},itemControl:{_checked:{bg:"colorPalette.muted",color:"colorPalette.fg"}},itemIndicator:Ls.variants?.variant.outline},outline:{item:{borderWidth:"1px",_checked:{boxShadow:"0 0 0 1px var(--shadow-color)",boxShadowColor:"colorPalette.solid",borderColor:"colorPalette.solid"}},itemIndicator:Ls.variants?.variant.solid},solid:{item:{borderWidth:"1px",_checked:{bg:"colorPalette.solid",color:"colorPalette.contrast",borderColor:"colorPalette.solid"}},itemIndicator:Ls.variants?.variant.inverted}},justify:{start:{item:{"--radio-card-justify":"flex-start"}},end:{item:{"--radio-card-justify":"flex-end"}},center:{item:{"--radio-card-justify":"center"}}},align:{start:{item:{"--radio-card-align":"flex-start"},itemControl:{textAlign:"start"}},end:{item:{"--radio-card-align":"flex-end"},itemControl:{textAlign:"end"}},center:{item:{"--radio-card-align":"center"},itemControl:{textAlign:"center"}}},orientation:{vertical:{itemControl:{flexDirection:"column"}},horizontal:{itemControl:{flexDirection:"row"}}}},defaultVariants:{size:"md",variant:"outline",align:"start",orientation:"horizontal"}},pm={className:"chakra-radio-group",slots:Vp.keys(),base:{item:{display:"inline-flex",alignItems:"center",position:"relative",fontWeight:"medium",_disabled:{cursor:"disabled"}},itemControl:Ls.base,label:{userSelect:"none",textStyle:"sm",_disabled:{opacity:"0.5"}}},variants:{variant:{outline:{itemControl:Ls.variants?.variant?.outline},subtle:{itemControl:Ls.variants?.variant?.subtle},solid:{itemControl:Ls.variants?.variant?.solid}},size:{xs:{item:{textStyle:"xs",gap:"1.5"},itemControl:Ls.variants?.size?.xs},sm:{item:{textStyle:"sm",gap:"2"},itemControl:Ls.variants?.size?.sm},md:{item:{textStyle:"sm",gap:"2.5"},itemControl:Ls.variants?.size?.md},lg:{item:{textStyle:"md",gap:"3"},itemControl:Ls.variants?.size?.lg}}},defaultVariants:{size:"md",variant:"solid"}},fm={className:"chakra-rating-group",slots:Wp.keys(),base:{root:{display:"inline-flex"},control:{display:"inline-flex",alignItems:"center"},item:{display:"inline-flex",alignItems:"center",justifyContent:"center",userSelect:"none"},itemIndicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"1em",height:"1em",position:"relative",_icon:{stroke:"currentColor",width:"100%",height:"100%",display:"inline-block",flexShrink:0,position:"absolute",left:0,top:0},"& [data-bg]":{color:"bg.emphasized"},"& [data-fg]":{color:"transparent"},"&[data-highlighted]:not([data-half])":{"& [data-fg]":{color:"colorPalette.solid"}},"&[data-half]":{"& [data-fg]":{color:"colorPalette.solid",clipPath:"inset(0 50% 0 0)"}}}},variants:{size:{xs:{item:{textStyle:"sm"}},sm:{item:{textStyle:"md"}},md:{item:{textStyle:"xl"}},lg:{item:{textStyle:"2xl"}}}},defaultVariants:{size:"md"}},mm=Au.rename("segment-group"),gm=(mm.build(),{className:"chakra-segment-group",slots:mm.keys(),base:{root:{"--segment-radius":"radii.l2",borderRadius:"l2",display:"inline-flex",boxShadow:"inset",minW:"max-content",textAlign:"center",position:"relative",isolation:"isolate",bg:"bg.muted"},item:{display:"flex",alignItems:"center",userSelect:"none",fontSize:"sm",position:"relative",color:"fg",borderRadius:"var(--segment-radius)",_disabled:{opacity:"0.5"},"&:has(input:focus-visible)":{focusRing:"outside"},_before:{content:'""',position:"absolute",insetInlineStart:0,insetBlock:"1.5",bg:"border",width:"1px",transition:"opacity 0.2s"},"& + &[data-state=checked], &[data-state=checked] + &, &:first-of-type":{_before:{opacity:"0"}},"&[data-state=checked][data-ssr]":{shadow:"sm",bg:"bg",borderRadius:"var(--segment-radius)"}},indicator:{shadow:"sm",pos:"absolute",bg:{_light:"bg",_dark:"bg.emphasized"},width:"var(--width)",height:"var(--height)",top:"var(--top)",left:"var(--left)",zIndex:-1,borderRadius:"var(--segment-radius)"}},variants:{size:{xs:{root:{height:"6"},item:{textStyle:"xs",px:"3",gap:"1"}},sm:{root:{height:"8"},item:{textStyle:"sm",px:"4",gap:"2"}},md:{root:{height:"10"},item:{textStyle:"sm",px:"4",gap:"2"}},lg:{root:{height:"10"},item:{textStyle:"md",px:"5",gap:"3"}}}},defaultVariants:{size:"md"}}),ym={className:"chakra-slider",slots:Gp.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",fontSize:"sm",position:"relative",isolation:"isolate",touchAction:"none"},control:{display:"inline-flex",alignItems:"center",position:"relative"},track:{overflow:"hidden",borderRadius:"full",flex:"1"},range:{width:"inherit",height:"inherit",_disabled:{bg:"border.emphasized!"}},markerGroup:{position:"absolute!",top:"var(--slider-marker-top)",insetInline:"var(--slider-marker-inset)",zIndex:"1"},marker:{"--marker-bg":{base:"white",_underValue:"colors.bg"},display:"flex",flexDirection:"column",alignItems:"center",gap:"1.5",color:"fg.muted",fontSize:"xs"},markerIndicator:{width:"var(--slider-marker-size)",height:"var(--slider-marker-size)",borderRadius:"full",bg:"var(--marker-bg)"},thumb:{width:"var(--slider-thumb-size)",height:"var(--slider-thumb-size)",display:"flex",alignItems:"center",justifyContent:"center",outline:0,zIndex:"2",borderRadius:"full",_focusVisible:{ring:"2px",ringColor:"colorPalette.focusRing",ringOffset:"2px",ringOffsetColor:"bg"}}},variants:{size:{sm:{root:{"--slider-thumb-size":"sizes.4","--slider-track-size":"sizes.1.5","--slider-marker-top":"6px","--slider-marker-size":"sizes.1","--slider-marker-inset":"3px"}},md:{root:{"--slider-thumb-size":"sizes.5","--slider-track-size":"sizes.2","--slider-marker-top":"8px","--slider-marker-size":"sizes.1","--slider-marker-inset":"4px"}},lg:{root:{"--slider-thumb-size":"sizes.6","--slider-track-size":"sizes.2.5","--slider-marker-top":"9px","--slider-marker-size":"sizes.1.5","--slider-marker-inset":"5px"}}},variant:{outline:{track:{shadow:"inset",bg:"bg.emphasized/72"},range:{bg:"colorPalette.solid"},thumb:{borderWidth:"2px",borderColor:"colorPalette.solid",bg:"bg",_disabled:{bg:"border.emphasized",borderColor:"border.emphasized"}}},solid:{track:{bg:"colorPalette.subtle",_disabled:{bg:"bg.muted"}},range:{bg:"colorPalette.solid"},thumb:{bg:"colorPalette.solid",_disabled:{bg:"border.emphasized"}}}},orientation:{vertical:{root:{display:"inline-flex"},control:{flexDirection:"column",height:"100%",minWidth:"var(--slider-thumb-size)"},track:{width:"var(--slider-track-size)"},thumb:{left:"50%",translate:"-50% 0"}},horizontal:{control:{flexDirection:"row",width:"100%",minHeight:"var(--slider-thumb-size)"},track:{height:"var(--slider-track-size)"},thumb:{top:"50%",translate:"0 -50%"}}}},defaultVariants:{size:"md",variant:"outline",orientation:"horizontal"}},_m={className:"chakra-stat",slots:qp.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1",position:"relative",flex:"1"},label:{color:"fg.muted",textStyle:"sm"},helpText:{color:"fg.muted",textStyle:"xs"},valueUnit:{color:"fg.muted",textStyle:"xs",fontWeight:"initial",letterSpacing:"initial"},valueText:{verticalAlign:"baseline",fontWeight:"semibold",letterSpacing:"tight",fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums",display:"inline-flex",gap:"1"},indicator:{display:"inline-flex",alignItems:"center",justifyContent:"center",marginEnd:1,"& :where(svg)":{w:"1em",h:"1em"},"&[data-type=up]":{color:"fg.success"},"&[data-type=down]":{color:"fg.error"}}},variants:{size:{sm:{valueText:{textStyle:"xl"}},md:{valueText:{textStyle:"2xl"}},lg:{valueText:{textStyle:"3xl"}}}},defaultVariants:{size:"md"}},bm={className:"chakra-status",slots:Zp.keys(),base:{root:{display:"inline-flex",alignItems:"center",gap:"2"},indicator:{width:"0.64em",height:"0.64em",flexShrink:0,borderRadius:"full",forcedColorAdjust:"none",bg:"colorPalette.solid"}},variants:{size:{sm:{root:{textStyle:"xs"}},md:{root:{textStyle:"sm"}},lg:{root:{textStyle:"md"}}}},defaultVariants:{size:"md"}},vm={className:"chakra-steps",slots:Xp.keys(),base:{root:{display:"flex",width:"full"},list:{display:"flex",justifyContent:"space-between","--steps-gutter":"spacing.3","--steps-thickness":"2px"},title:{fontWeight:"medium",color:"fg"},description:{color:"fg.muted"},separator:{bg:"border",flex:"1"},indicator:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0",borderRadius:"full",fontWeight:"medium",width:"var(--steps-size)",height:"var(--steps-size)",_icon:{flexShrink:"0",width:"var(--steps-icon-size)",height:"var(--steps-icon-size)"}},item:{position:"relative",display:"flex",flex:"1 0 0","&:last-of-type":{flex:"initial","& [data-part=separator]":{display:"none"}}},trigger:{display:"flex",alignItems:"center",gap:"3",textAlign:"start",focusVisibleRing:"outside",borderRadius:"l2"},content:{focusVisibleRing:"outside"}},variants:{orientation:{vertical:{root:{flexDirection:"row",height:"100%"},list:{flexDirection:"column",alignItems:"flex-start"},separator:{position:"absolute",width:"var(--steps-thickness)",height:"100%",maxHeight:"calc(100% - var(--steps-size) - var(--steps-gutter) * 2)",top:"calc(var(--steps-size) + var(--steps-gutter))",insetStart:"calc(var(--steps-size) / 2 - 1px)"},item:{alignItems:"flex-start"}},horizontal:{root:{flexDirection:"column",width:"100%"},list:{flexDirection:"row",alignItems:"center"},separator:{width:"100%",height:"var(--steps-thickness)",marginX:"var(--steps-gutter)"},item:{alignItems:"center"}}},variant:{solid:{indicator:{_incomplete:{borderWidth:"var(--steps-thickness)"},_current:{bg:"colorPalette.muted",borderWidth:"var(--steps-thickness)",borderColor:"colorPalette.solid",color:"colorPalette.fg"},_complete:{bg:"colorPalette.solid",borderColor:"colorPalette.solid",color:"colorPalette.contrast"}},separator:{_complete:{bg:"colorPalette.solid"}}},subtle:{indicator:{_incomplete:{bg:"bg.muted"},_current:{bg:"colorPalette.muted",color:"colorPalette.fg"},_complete:{bg:"colorPalette.emphasized",color:"colorPalette.fg"}},separator:{_complete:{bg:"colorPalette.emphasized"}}}},size:{xs:{root:{gap:"2.5"},list:{"--steps-size":"sizes.6","--steps-icon-size":"sizes.3.5",textStyle:"xs"},title:{textStyle:"sm"}},sm:{root:{gap:"3"},list:{"--steps-size":"sizes.8","--steps-icon-size":"sizes.4",textStyle:"xs"},title:{textStyle:"sm"}},md:{root:{gap:"4"},list:{"--steps-size":"sizes.10","--steps-icon-size":"sizes.4",textStyle:"sm"},title:{textStyle:"sm"}},lg:{root:{gap:"6"},list:{"--steps-size":"sizes.11","--steps-icon-size":"sizes.5",textStyle:"md"},title:{textStyle:"md"}}}},defaultVariants:{size:"md",variant:"solid",orientation:"horizontal"}},xm={slots:Yp.keys(),className:"chakra-switch",base:{root:{display:"inline-flex",gap:"2.5",alignItems:"center",position:"relative",verticalAlign:"middle","--switch-diff":"calc(var(--switch-width) - var(--switch-height))","--switch-x":{base:"var(--switch-diff)",_rtl:"calc(var(--switch-diff) * -1)"}},label:{lineHeight:"1",userSelect:"none",fontSize:"sm",fontWeight:"medium",_disabled:{opacity:"0.5"}},indicator:{position:"absolute",height:"var(--switch-height)",width:"var(--switch-height)",fontSize:"var(--switch-indicator-font-size)",fontWeight:"medium",flexShrink:0,userSelect:"none",display:"grid",placeContent:"center",transition:"inset-inline-start 0.12s ease",insetInlineStart:"calc(var(--switch-x) - 2px)",_checked:{insetInlineStart:"2px"}},control:{display:"inline-flex",gap:"0.5rem",flexShrink:0,justifyContent:"flex-start",cursor:"switch",borderRadius:"full",position:"relative",width:"var(--switch-width)",height:"var(--switch-height)",_disabled:{opacity:"0.5",cursor:"not-allowed"},_invalid:{outline:"2px solid",outlineColor:"border.error",outlineOffset:"2px"}},thumb:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transitionProperty:"translate",transitionDuration:"fast",borderRadius:"inherit",_checked:{translate:"var(--switch-x) 0"}}},variants:{variant:{solid:{control:{borderRadius:"full",bg:"bg.emphasized",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}},thumb:{bg:"white",width:"var(--switch-height)",height:"var(--switch-height)",scale:"0.8",boxShadow:"sm",_checked:{bg:"colorPalette.contrast"}}},raised:{control:{borderRadius:"full",height:"calc(var(--switch-height) / 2)",bg:"bg.muted",boxShadow:"inset",_checked:{bg:"colorPalette.solid/60"}},thumb:{width:"var(--switch-height)",height:"var(--switch-height)",position:"relative",top:"calc(var(--switch-height) * -0.25)",bg:"white",boxShadow:"xs",focusVisibleRing:"outside",_checked:{bg:"colorPalette.solid"}}}},size:{xs:{root:{"--switch-width":"sizes.6","--switch-height":"sizes.3","--switch-indicator-font-size":"fontSizes.xs"}},sm:{root:{"--switch-width":"sizes.8","--switch-height":"sizes.4","--switch-indicator-font-size":"fontSizes.xs"}},md:{root:{"--switch-width":"sizes.10","--switch-height":"sizes.5","--switch-indicator-font-size":"fontSizes.sm"}},lg:{root:{"--switch-width":"sizes.12","--switch-height":"sizes.6","--switch-indicator-font-size":"fontSizes.md"}}}},defaultVariants:{variant:"solid",size:"md"}},wm={className:"chakra-table",slots:Kp.keys(),base:{root:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full",textAlign:"start",verticalAlign:"top"},row:{_selected:{bg:"colorPalette.subtle"}},cell:{textAlign:"start",alignItems:"center"},columnHeader:{fontWeight:"medium",textAlign:"start",color:"fg"},caption:{fontWeight:"medium",textStyle:"xs"},footer:{fontWeight:"medium"}},variants:{interactive:{true:{body:{"& tr":{_hover:{bg:"colorPalette.subtle"}}}}},stickyHeader:{true:{header:{"& :where(tr)":{top:"var(--table-sticky-offset, 0)",position:"sticky",zIndex:1}}}},striped:{true:{row:{"&:nth-of-type(odd) td":{bg:"bg.muted"}}}},showColumnBorder:{true:{columnHeader:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}},cell:{"&:not(:last-of-type)":{borderInlineEndWidth:"1px"}}}},variant:{line:{columnHeader:{borderBottomWidth:"1px"},cell:{borderBottomWidth:"1px"},row:{bg:"bg"}},outline:{root:{boxShadow:"0 0 0 1px {colors.border}",overflow:"hidden"},columnHeader:{borderBottomWidth:"1px"},header:{bg:"bg.muted"},row:{"&:not(:last-of-type)":{borderBottomWidth:"1px"}},footer:{borderTopWidth:"1px"}}},size:{sm:{root:{textStyle:"sm"},columnHeader:{px:"2",py:"2"},cell:{px:"2",py:"2"}},md:{root:{textStyle:"sm"},columnHeader:{px:"3",py:"3"},cell:{px:"3",py:"3"}},lg:{root:{textStyle:"md"},columnHeader:{px:"4",py:"3"},cell:{px:"4",py:"3"}}}},defaultVariants:{variant:"line",size:"md"}},Sm={slots:Qp.keys(),className:"chakra-tabs",base:{root:{"--tabs-trigger-radius":"radii.l2",position:"relative",_horizontal:{display:"block"},_vertical:{display:"flex"}},list:{display:"inline-flex",position:"relative",isolation:"isolate","--tabs-indicator-shadow":"shadows.xs","--tabs-indicator-bg":"colors.bg",minH:"var(--tabs-height)",_horizontal:{flexDirection:"row"},_vertical:{flexDirection:"column"}},trigger:{outline:"0",minW:"var(--tabs-height)",height:"var(--tabs-height)",display:"flex",alignItems:"center",fontWeight:"medium",position:"relative",cursor:"button",gap:"2",_focusVisible:{zIndex:1,outline:"2px solid",outlineColor:"colorPalette.focusRing"},_disabled:{cursor:"not-allowed",opacity:.5}},content:{focusVisibleRing:"inside",_horizontal:{width:"100%",pt:"var(--tabs-content-padding)"},_vertical:{height:"100%",ps:"var(--tabs-content-padding)"}},indicator:{width:"var(--width)",height:"var(--height)",borderRadius:"var(--tabs-indicator-radius)",bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",zIndex:-1}},variants:{fitted:{true:{list:{display:"flex"},trigger:{flex:1,textAlign:"center",justifyContent:"center"}}},justify:{start:{list:{justifyContent:"flex-start"}},center:{list:{justifyContent:"center"}},end:{list:{justifyContent:"flex-end"}}},size:{sm:{root:{"--tabs-height":"sizes.9","--tabs-content-padding":"spacing.3"},trigger:{py:"1",px:"3",textStyle:"sm"}},md:{root:{"--tabs-height":"sizes.10","--tabs-content-padding":"spacing.4"},trigger:{py:"2",px:"4",textStyle:"sm"}},lg:{root:{"--tabs-height":"sizes.11","--tabs-content-padding":"spacing.4.5"},trigger:{py:"2",px:"4.5",textStyle:"md"}}},variant:{line:{list:{display:"flex",borderColor:"border",_horizontal:{borderBottomWidth:"1px"},_vertical:{borderEndWidth:"1px"}},trigger:{color:"fg.muted",_disabled:{_active:{bg:"initial"}},_selected:{color:"fg",_horizontal:{layerStyle:"indicator.bottom","--indicator-offset-y":"-1px","--indicator-color":"colors.colorPalette.solid"},_vertical:{layerStyle:"indicator.end","--indicator-offset-x":"-1px"}}}},subtle:{trigger:{borderRadius:"var(--tabs-trigger-radius)",color:"fg.muted",_selected:{bg:"colorPalette.subtle",color:"colorPalette.fg"}}},enclosed:{list:{bg:"bg.muted",padding:"1",borderRadius:"l3",minH:"calc(var(--tabs-height) - 4px)"},trigger:{justifyContent:"center",color:"fg.muted",borderRadius:"var(--tabs-trigger-radius)",_selected:{bg:"bg",color:"colorPalette.fg",shadow:"xs"}}},outline:{list:{"--line-thickness":"1px","--line-offset":"calc(var(--line-thickness) * -1)",borderColor:"border",display:"flex",_horizontal:{_before:{content:'""',position:"absolute",bottom:"0px",width:"100%",borderBottomWidth:"var(--line-thickness)",borderBottomColor:"border"}},_vertical:{_before:{content:'""',position:"absolute",insetInline:"var(--line-offset)",height:"calc(100% - calc(var(--line-thickness) * 2))",borderEndWidth:"var(--line-thickness)",borderEndColor:"border"}}},trigger:{color:"fg.muted",borderWidth:"1px",borderColor:"transparent",_selected:{bg:"currentBg",color:"colorPalette.fg"},_horizontal:{borderTopRadius:"var(--tabs-trigger-radius)",marginBottom:"var(--line-offset)",marginEnd:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderBottomColor:"transparent"}},_vertical:{borderStartRadius:"var(--tabs-trigger-radius)",marginEnd:"var(--line-offset)",marginBottom:{_notLast:"var(--line-offset)"},_selected:{borderColor:"border",borderEndColor:"transparent"}}}},plain:{trigger:{color:"fg.muted",_selected:{color:"colorPalette.fg"},borderRadius:"var(--tabs-trigger-radius)","&[data-selected][data-ssr]":{bg:"var(--tabs-indicator-bg)",shadow:"var(--tabs-indicator-shadow)",borderRadius:"var(--tabs-indicator-radius)"}}}}},defaultVariants:{size:"md",variant:"line"}},Im=Ps.variants?.variant,Tm={slots:ef.keys(),className:"chakra-tag",base:{root:{display:"inline-flex",alignItems:"center",verticalAlign:"top",maxWidth:"100%",userSelect:"none",borderRadius:"l2",focusVisibleRing:"outside"},label:{lineClamp:"1"},closeTrigger:{display:"flex",alignItems:"center",justifyContent:"center",outline:"0",borderRadius:"l1",color:"currentColor",focusVisibleRing:"inside",focusRingWidth:"2px"},startElement:{flexShrink:0,boxSize:"var(--tag-element-size)",ms:"var(--tag-element-offset)","&:has([data-scope=avatar])":{boxSize:"var(--tag-avatar-size)",ms:"calc(var(--tag-element-offset) * 1.5)"},_icon:{boxSize:"100%"}},endElement:{flexShrink:0,boxSize:"var(--tag-element-size)",me:"var(--tag-element-offset)",_icon:{boxSize:"100%"},"&:has(button)":{ms:"calc(var(--tag-element-offset) * -1)"}}},variants:{size:{sm:{root:{px:"1.5",minH:"4.5",gap:"1","--tag-avatar-size":"spacing.3","--tag-element-size":"spacing.3","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},md:{root:{px:"1.5",minH:"5",gap:"1","--tag-avatar-size":"spacing.3.5","--tag-element-size":"spacing.3.5","--tag-element-offset":"-2px"},label:{textStyle:"xs"}},lg:{root:{px:"2",minH:"6",gap:"1.5","--tag-avatar-size":"spacing.4.5","--tag-element-size":"spacing.4","--tag-element-offset":"-3px"},label:{textStyle:"sm"}},xl:{root:{px:"2.5",minH:"8",gap:"1.5","--tag-avatar-size":"spacing.6","--tag-element-size":"spacing.4.5","--tag-element-offset":"-4px"},label:{textStyle:"sm"}}},variant:{subtle:{root:Im?.subtle},solid:{root:Im?.solid},outline:{root:Im?.outline},surface:{root:Im?.surface}}},defaultVariants:{size:"md",variant:"surface"}},km={slots:tf.keys(),className:"chakra-timeline",base:{root:{display:"flex",flexDirection:"column",width:"full","--timeline-thickness":"1px","--timeline-gutter":"4px"},item:{display:"flex",position:"relative",alignItems:"flex-start",flexShrink:0,gap:"4",_last:{"& :where(.chakra-timeline__separator)":{display:"none"}}},separator:{position:"absolute",borderStartWidth:"var(--timeline-thickness)",ms:"calc(-1 * var(--timeline-thickness) / 2)",insetInlineStart:"calc(var(--timeline-indicator-size) / 2)",insetBlock:"0",borderColor:"border"},indicator:{outline:"2px solid {colors.bg}",position:"relative",flexShrink:"0",boxSize:"var(--timeline-indicator-size)",fontSize:"var(--timeline-font-size)",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"full",fontWeight:"medium"},connector:{alignSelf:"stretch",position:"relative"},content:{pb:"6",display:"flex",flexDirection:"column",width:"full",gap:"2"},title:{display:"flex",fontWeight:"medium",flexWrap:"wrap",gap:"1.5",alignItems:"center",mt:"var(--timeline-margin)"},description:{color:"fg.muted",textStyle:"xs"}},variants:{variant:{subtle:{indicator:{bg:"colorPalette.muted"}},solid:{indicator:{bg:"colorPalette.solid",color:"colorPalette.contrast"}},outline:{indicator:{bg:"currentBg",borderWidth:"1px",borderColor:"colorPalette.muted"}},plain:{}},size:{sm:{root:{"--timeline-indicator-size":"sizes.4","--timeline-font-size":"fontSizes.2xs"},title:{textStyle:"xs"}},md:{root:{"--timeline-indicator-size":"sizes.5","--timeline-font-size":"fontSizes.xs"},title:{textStyle:"sm"}},lg:{root:{"--timeline-indicator-size":"sizes.6","--timeline-font-size":"fontSizes.xs"},title:{mt:"0.5",textStyle:"sm"}},xl:{root:{"--timeline-indicator-size":"sizes.8","--timeline-font-size":"fontSizes.sm"},title:{mt:"1.5",textStyle:"sm"}}}},defaultVariants:{size:"md",variant:"solid"}},Em={slots:Jp.keys(),className:"chakra-toast",base:{root:{width:"full",display:"flex",alignItems:"flex-start",position:"relative",gap:"3",py:"4",ps:"4",pe:"6",borderRadius:"l2",translate:"var(--x) var(--y)",scale:"var(--scale)",zIndex:"var(--z-index)",height:"var(--height)",opacity:"var(--opacity)",willChange:"translate, opacity, scale",transition:"translate 400ms, scale 400ms, opacity 400ms, height 400ms, box-shadow 200ms",transitionTimingFunction:"cubic-bezier(0.21, 1.02, 0.73, 1)",_closed:{transition:"translate 400ms, scale 400ms, opacity 200ms",transitionTimingFunction:"cubic-bezier(0.06, 0.71, 0.55, 1)"},bg:"bg.panel",color:"fg",boxShadow:"xl","--toast-trigger-bg":"colors.bg.muted","&[data-type=warning]":{bg:"orange.solid",color:"orange.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=success]":{bg:"green.solid",color:"green.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"},"&[data-type=error]":{bg:"red.solid",color:"red.contrast","--toast-trigger-bg":"{white/10}","--toast-border-color":"{white/40}"}},title:{fontWeight:"medium",textStyle:"sm",marginEnd:"2"},description:{display:"inline",textStyle:"sm",opacity:"0.8"},indicator:{flexShrink:"0",boxSize:"5"},actionTrigger:{textStyle:"sm",fontWeight:"medium",height:"8",px:"3",borderRadius:"l2",alignSelf:"center",borderWidth:"1px",borderColor:"var(--toast-border-color, inherit)",transition:"background 200ms",_hover:{bg:"var(--toast-trigger-bg)"}},closeTrigger:{position:"absolute",top:"1",insetEnd:"1",padding:"1",display:"inline-flex",alignItems:"center",justifyContent:"center",color:"{currentColor/60}",borderRadius:"l2",textStyle:"md",transition:"background 200ms"}}};var Am=Vs("tooltip").parts("trigger","arrow","arrowTip","positioner","content"),Pm=(Am.build(),El({getTriggerId:e=>e.ids?.trigger??`tooltip:${e.id}:trigger`,getContentId:e=>e.ids?.content??`tooltip:${e.id}:content`,getArrowId:e=>e.ids?.arrow??`tooltip:${e.id}:arrow`,getPositionerId:e=>e.ids?.positioner??`tooltip:${e.id}:popper`,getTriggerEl:e=>Pm.getById(e,Pm.getTriggerId(e)),getContentEl:e=>Pm.getById(e,Pm.getContentId(e)),getPositionerEl:e=>Pm.getById(e,Pm.getPositionerId(e)),getArrowEl:e=>Pm.getById(e,Pm.getArrowId(e))}));Sc({id:null,prevId:null,setId(e){this.prevId=this.id,this.id=e}});var{and:Cm,not:Mm}=Nc;var Om=Kc()(["aria-label","closeDelay","closeOnEscape","closeOnPointerDown","closeOnScroll","closeOnClick","dir","disabled","getRootNode","id","ids","interactive","onOpenChange","open.controlled","open","openDelay","positioning"]);Kl(Om);const Rm={accordion:rf,actionBar:nf,alert:of,avatar:cf,blockquote:uf,breadcrumb:df,card:hf,checkbox:yf,checkboxCard:_f,collapsible:wf,dataList:Af,dialog:Pf,drawer:Cf,editable:Of,emptyState:Rf,field:Bf,fieldset:zf,fileUpload:Lf,hoverCard:$f,list:Wf,menu:Hf,nativeSelect:qf,numberInput:tm,pinInput:am,popover:sm,progress:um,progressCircle:dm,radioCard:hm,radioGroup:pm,ratingGroup:fm,segmentGroup:gm,select:Gf,slider:ym,stat:_m,steps:vm,switch:xm,table:wm,tabs:Sm,tag:Tm,toast:Em,tooltip:{slots:Am.keys(),className:"chakra-tooltip",base:{content:{"--tooltip-bg":"colors.bg.inverted",bg:"var(--tooltip-bg)",color:"fg.inverted",px:"2.5",py:"1",borderRadius:"l2",fontWeight:"medium",textStyle:"xs",boxShadow:"md",maxW:"xs",zIndex:"tooltip",transformOrigin:"var(--transform-origin)",_open:{animationStyle:"scale-fade-in",animationDuration:"fast"},_closed:{animationStyle:"scale-fade-out",animationDuration:"fast"}},arrow:{"--arrow-size":"sizes.2","--arrow-background":"var(--tooltip-bg)"},arrowTip:{borderTopWidth:"1px",borderInlineStartWidth:"1px",borderColor:"var(--tooltip-bg)"}}},status:bm,timeline:km,colorPicker:Ef},Bm={"2xs":{value:{fontSize:"2xs",lineHeight:"0.75rem"}},xs:{value:{fontSize:"xs",lineHeight:"1rem"}},sm:{value:{fontSize:"sm",lineHeight:"1.25rem"}},md:{value:{fontSize:"md",lineHeight:"1.5rem"}},lg:{value:{fontSize:"lg",lineHeight:"1.75rem"}},xl:{value:{fontSize:"xl",lineHeight:"1.875rem"}},"2xl":{value:{fontSize:"2xl",lineHeight:"2rem"}},"3xl":{value:{fontSize:"3xl",lineHeight:"2.375rem"}},"4xl":{value:{fontSize:"4xl",lineHeight:"2.75rem",letterSpacing:"-0.025em"}},"5xl":{value:{fontSize:"5xl",lineHeight:"3.75rem",letterSpacing:"-0.025em"}},"6xl":{value:{fontSize:"6xl",lineHeight:"4.5rem",letterSpacing:"-0.025em"}},"7xl":{value:{fontSize:"7xl",lineHeight:"5.75rem",letterSpacing:"-0.025em"}},none:{value:{}}},Dm=Ao.animations({spin:{value:"spin 1s linear infinite"},ping:{value:"ping 1s cubic-bezier(0, 0, 0.2, 1) infinite"},pulse:{value:"pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"},bounce:{value:"bounce 1s infinite"}}),zm=Ao.aspectRatios({square:{value:"1 / 1"},landscape:{value:"4 / 3"},portrait:{value:"3 / 4"},wide:{value:"16 / 9"},ultrawide:{value:"18 / 5"},golden:{value:"1.618 / 1"}}),Lm=Ao.blurs({none:{value:" "},sm:{value:"4px"},md:{value:"8px"},lg:{value:"12px"},xl:{value:"16px"},"2xl":{value:"24px"},"3xl":{value:"40px"},"4xl":{value:"64px"}}),Fm=Ao.borders({xs:{value:"0.5px solid"},sm:{value:"1px solid"},md:{value:"2px solid"},lg:{value:"4px solid"},xl:{value:"8px solid"}}),Nm=Ao.colors({transparent:{value:"transparent"},current:{value:"currentColor"},black:{value:"#09090B"},white:{value:"#FFFFFF"},whiteAlpha:{50:{value:"rgba(255, 255, 255, 0.04)"},100:{value:"rgba(255, 255, 255, 0.06)"},200:{value:"rgba(255, 255, 255, 0.08)"},300:{value:"rgba(255, 255, 255, 0.16)"},400:{value:"rgba(255, 255, 255, 0.24)"},500:{value:"rgba(255, 255, 255, 0.36)"},600:{value:"rgba(255, 255, 255, 0.48)"},700:{value:"rgba(255, 255, 255, 0.64)"},800:{value:"rgba(255, 255, 255, 0.80)"},900:{value:"rgba(255, 255, 255, 0.92)"},950:{value:"rgba(255, 255, 255, 0.95)"}},blackAlpha:{50:{value:"rgba(0, 0, 0, 0.04)"},100:{value:"rgba(0, 0, 0, 0.06)"},200:{value:"rgba(0, 0, 0, 0.08)"},300:{value:"rgba(0, 0, 0, 0.16)"},400:{value:"rgba(0, 0, 0, 0.24)"},500:{value:"rgba(0, 0, 0, 0.36)"},600:{value:"rgba(0, 0, 0, 0.48)"},700:{value:"rgba(0, 0, 0, 0.64)"},800:{value:"rgba(0, 0, 0, 0.80)"},900:{value:"rgba(0, 0, 0, 0.92)"},950:{value:"rgba(0, 0, 0, 0.95)"}},gray:{50:{value:"#fafafa"},100:{value:"#f4f4f5"},200:{value:"#e4e4e7"},300:{value:"#d4d4d8"},400:{value:"#a1a1aa"},500:{value:"#71717a"},600:{value:"#52525b"},700:{value:"#3f3f46"},800:{value:"#27272a"},900:{value:"#18181b"},950:{value:"#111111"}},red:{50:{value:"#fef2f2"},100:{value:"#fee2e2"},200:{value:"#fecaca"},300:{value:"#fca5a5"},400:{value:"#f87171"},500:{value:"#ef4444"},600:{value:"#dc2626"},700:{value:"#991919"},800:{value:"#511111"},900:{value:"#300c0c"},950:{value:"#1f0808"}},orange:{50:{value:"#fff7ed"},100:{value:"#ffedd5"},200:{value:"#fed7aa"},300:{value:"#fdba74"},400:{value:"#fb923c"},500:{value:"#f97316"},600:{value:"#ea580c"},700:{value:"#92310a"},800:{value:"#6c2710"},900:{value:"#3b1106"},950:{value:"#220a04"}},yellow:{50:{value:"#fefce8"},100:{value:"#fef9c3"},200:{value:"#fef08a"},300:{value:"#fde047"},400:{value:"#facc15"},500:{value:"#eab308"},600:{value:"#ca8a04"},700:{value:"#845209"},800:{value:"#713f12"},900:{value:"#422006"},950:{value:"#281304"}},green:{50:{value:"#f0fdf4"},100:{value:"#dcfce7"},200:{value:"#bbf7d0"},300:{value:"#86efac"},400:{value:"#4ade80"},500:{value:"#22c55e"},600:{value:"#16a34a"},700:{value:"#116932"},800:{value:"#124a28"},900:{value:"#042713"},950:{value:"#03190c"}},teal:{50:{value:"#f0fdfa"},100:{value:"#ccfbf1"},200:{value:"#99f6e4"},300:{value:"#5eead4"},400:{value:"#2dd4bf"},500:{value:"#14b8a6"},600:{value:"#0d9488"},700:{value:"#0c5d56"},800:{value:"#114240"},900:{value:"#032726"},950:{value:"#021716"}},blue:{50:{value:"#eff6ff"},100:{value:"#dbeafe"},200:{value:"#bfdbfe"},300:{value:"#a3cfff"},400:{value:"#60a5fa"},500:{value:"#3b82f6"},600:{value:"#2563eb"},700:{value:"#173da6"},800:{value:"#1a3478"},900:{value:"#14204a"},950:{value:"#0c142e"}},cyan:{50:{value:"#ecfeff"},100:{value:"#cffafe"},200:{value:"#a5f3fc"},300:{value:"#67e8f9"},400:{value:"#22d3ee"},500:{value:"#06b6d4"},600:{value:"#0891b2"},700:{value:"#0c5c72"},800:{value:"#134152"},900:{value:"#072a38"},950:{value:"#051b24"}},purple:{50:{value:"#faf5ff"},100:{value:"#f3e8ff"},200:{value:"#e9d5ff"},300:{value:"#d8b4fe"},400:{value:"#c084fc"},500:{value:"#a855f7"},600:{value:"#9333ea"},700:{value:"#641ba3"},800:{value:"#4a1772"},900:{value:"#2f0553"},950:{value:"#1a032e"}},pink:{50:{value:"#fdf2f8"},100:{value:"#fce7f3"},200:{value:"#fbcfe8"},300:{value:"#f9a8d4"},400:{value:"#f472b6"},500:{value:"#ec4899"},600:{value:"#db2777"},700:{value:"#a41752"},800:{value:"#6d0e34"},900:{value:"#45061f"},950:{value:"#2c0514"}}}),jm=Ao.cursor({button:{value:"pointer"},checkbox:{value:"default"},disabled:{value:"not-allowed"},menuitem:{value:"default"},option:{value:"default"},radio:{value:"default"},slider:{value:"default"},switch:{value:"pointer"}}),Um=Ao.durations({fastest:{value:"50ms"},faster:{value:"100ms"},fast:{value:"150ms"},moderate:{value:"200ms"},slow:{value:"300ms"},slower:{value:"400ms"},slowest:{value:"500ms"}}),Vm=Ao.easings({"ease-in":{value:"cubic-bezier(0.42, 0, 1, 1)"},"ease-out":{value:"cubic-bezier(0, 0, 0.58, 1)"},"ease-in-out":{value:"cubic-bezier(0.42, 0, 0.58, 1)"},"ease-in-smooth":{value:"cubic-bezier(0.32, 0.72, 0, 1)"}}),$m=Ao.fontSizes({"2xs":{value:"0.625rem"},xs:{value:"0.75rem"},sm:{value:"0.875rem"},md:{value:"1rem"},lg:{value:"1.125rem"},xl:{value:"1.25rem"},"2xl":{value:"1.5rem"},"3xl":{value:"1.875rem"},"4xl":{value:"2.25rem"},"5xl":{value:"3rem"},"6xl":{value:"3.75rem"},"7xl":{value:"4.5rem"},"8xl":{value:"6rem"},"9xl":{value:"8rem"}}),Wm=Ao.fontWeights({thin:{value:"100"},extralight:{value:"200"},light:{value:"300"},normal:{value:"400"},medium:{value:"500"},semibold:{value:"600"},bold:{value:"700"},extrabold:{value:"800"},black:{value:"900"}}),Hm='-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',Gm=Ao.fonts({heading:{value:`Inter, ${Hm}`},body:{value:`Inter, ${Hm}`},mono:{value:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'}}),qm={spin:{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}},pulse:{"50%":{opacity:"0.5"}},ping:{"75%, 100%":{transform:"scale(2)",opacity:"0"}},bounce:{"0%, 100%":{transform:"translateY(-25%)",animationTimingFunction:"cubic-bezier(0.8,0,1,1)"},"50%":{transform:"none",animationTimingFunction:"cubic-bezier(0,0,0.2,1)"}},"bg-position":{from:{backgroundPosition:"var(--animate-from, 1rem) 0"},to:{backgroundPosition:"var(--animate-to, 0) 0"}},position:{from:{insetInlineStart:"var(--animate-from-x)",insetBlockStart:"var(--animate-from-y)"},to:{insetInlineStart:"var(--animate-to-x)",insetBlockStart:"var(--animate-to-y)"}},"circular-progress":{"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100%"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260%"}},"expand-height":{from:{height:"0"},to:{height:"var(--height)"}},"collapse-height":{from:{height:"var(--height)"},to:{height:"0"}},"expand-width":{from:{width:"0"},to:{width:"var(--width)"}},"collapse-width":{from:{height:"var(--width)"},to:{height:"0"}},"fade-in":{from:{opacity:0},to:{opacity:1}},"fade-out":{from:{opacity:1},to:{opacity:0}},"slide-from-left-full":{from:{translate:"-100% 0"},to:{translate:"0 0"}},"slide-from-right-full":{from:{translate:"100% 0"},to:{translate:"0 0"}},"slide-from-top-full":{from:{translate:"0 -100%"},to:{translate:"0 0"}},"slide-from-bottom-full":{from:{translate:"0 100%"},to:{translate:"0 0"}},"slide-to-left-full":{from:{translate:"0 0"},to:{translate:"-100% 0"}},"slide-to-right-full":{from:{translate:"0 0"},to:{translate:"100% 0"}},"slide-to-top-full":{from:{translate:"0 0"},to:{translate:"0 -100%"}},"slide-to-bottom-full":{from:{translate:"0 0"},to:{translate:"0 100%"}},"slide-from-top":{"0%":{translate:"0 -0.5rem"},to:{translate:"0"}},"slide-from-bottom":{"0%":{translate:"0 0.5rem"},to:{translate:"0"}},"slide-from-left":{"0%":{translate:"-0.5rem 0"},to:{translate:"0"}},"slide-from-right":{"0%":{translate:"0.5rem 0"},to:{translate:"0"}},"slide-to-top":{"0%":{translate:"0"},to:{translate:"0 -0.5rem"}},"slide-to-bottom":{"0%":{translate:"0"},to:{translate:"0 0.5rem"}},"slide-to-left":{"0%":{translate:"0"},to:{translate:"-0.5rem 0"}},"slide-to-right":{"0%":{translate:"0"},to:{translate:"0.5rem 0"}},"scale-in":{from:{scale:"0.95"},to:{scale:"1"}},"scale-out":{from:{scale:"1"},to:{scale:"0.95"}}},Zm=Ao.letterSpacings({tighter:{value:"-0.05em"},tight:{value:"-0.025em"},wide:{value:"0.025em"},wider:{value:"0.05em"},widest:{value:"0.1em"}}),Xm=Ao.lineHeights({shorter:{value:1.25},short:{value:1.375},moderate:{value:1.5},tall:{value:1.625},taller:{value:2}}),Ym=Ao.radii({none:{value:"0"},"2xs":{value:"0.0625rem"},xs:{value:"0.125rem"},sm:{value:"0.25rem"},md:{value:"0.375rem"},lg:{value:"0.5rem"},xl:{value:"0.75rem"},"2xl":{value:"1rem"},"3xl":{value:"1.5rem"},"4xl":{value:"2rem"},full:{value:"9999px"}}),Km=Ao.spacing({.5:{value:"0.125rem"},1:{value:"0.25rem"},1.5:{value:"0.375rem"},2:{value:"0.5rem"},2.5:{value:"0.625rem"},3:{value:"0.75rem"},3.5:{value:"0.875rem"},4:{value:"1rem"},4.5:{value:"1.125rem"},5:{value:"1.25rem"},6:{value:"1.5rem"},7:{value:"1.75rem"},8:{value:"2rem"},9:{value:"2.25rem"},10:{value:"2.5rem"},11:{value:"2.75rem"},12:{value:"3rem"},14:{value:"3.5rem"},16:{value:"4rem"},20:{value:"5rem"},24:{value:"6rem"},28:{value:"7rem"},32:{value:"8rem"},36:{value:"9rem"},40:{value:"10rem"},44:{value:"11rem"},48:{value:"12rem"},52:{value:"13rem"},56:{value:"14rem"},60:{value:"15rem"},64:{value:"16rem"},72:{value:"18rem"},80:{value:"20rem"},96:{value:"24rem"}}),Jm=Ao.sizes({"3xs":{value:"14rem"},"2xs":{value:"16rem"},xs:{value:"20rem"},sm:{value:"24rem"},md:{value:"28rem"},lg:{value:"32rem"},xl:{value:"36rem"},"2xl":{value:"42rem"},"3xl":{value:"48rem"},"4xl":{value:"56rem"},"5xl":{value:"64rem"},"6xl":{value:"72rem"},"7xl":{value:"80rem"},"8xl":{value:"90rem"}}),Qm=Ao.sizes({max:{value:"max-content"},min:{value:"min-content"},fit:{value:"fit-content"},prose:{value:"60ch"},full:{value:"100%"},dvh:{value:"100dvh"},svh:{value:"100svh"},lvh:{value:"100lvh"},dvw:{value:"100dvw"},svw:{value:"100svw"},lvw:{value:"100lvw"},vw:{value:"100vw"},vh:{value:"100vh"}}),eg=Ao.sizes({"1/2":{value:"50%"},"1/3":{value:"33.333333%"},"2/3":{value:"66.666667%"},"1/4":{value:"25%"},"3/4":{value:"75%"},"1/5":{value:"20%"},"2/5":{value:"40%"},"3/5":{value:"60%"},"4/5":{value:"80%"},"1/6":{value:"16.666667%"},"2/6":{value:"33.333333%"},"3/6":{value:"50%"},"4/6":{value:"66.666667%"},"5/6":{value:"83.333333%"},"1/12":{value:"8.333333%"},"2/12":{value:"16.666667%"},"3/12":{value:"25%"},"4/12":{value:"33.333333%"},"5/12":{value:"41.666667%"},"6/12":{value:"50%"},"7/12":{value:"58.333333%"},"8/12":{value:"66.666667%"},"9/12":{value:"75%"},"10/12":{value:"83.333333%"},"11/12":{value:"91.666667%"}}),tg=Ao.sizes({...Jm,...Km,...eg,...Qm}),rg=Ao.zIndex({hide:{value:-1},base:{value:0},docked:{value:10},dropdown:{value:1e3},sticky:{value:1100},banner:{value:1200},overlay:{value:1300},modal:{value:1400},popover:{value:1500},skipNav:{value:1600},toast:{value:1700},tooltip:{value:1800},max:{value:2147483647}}),ig=Co(Ss,{preflight:!0,cssVarsPrefix:"chakra",cssVarsRoot:":where(html, .chakra-theme)",globalCss:ks,theme:{breakpoints:{sm:"480px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px"},keyframes:qm,tokens:{aspectRatios:zm,animations:Dm,blurs:Lm,borders:Fm,colors:Nm,durations:Um,easings:Vm,fonts:Gm,fontSizes:$m,fontWeights:Wm,letterSpacings:Zm,lineHeights:Xm,radii:Ym,spacing:Km,sizes:tg,zIndex:rg,cursor:jm},semanticTokens:{colors:Ns,shadows:Us,radii:js},recipes:Fs,slotRecipes:Rm,textStyles:Bm,layerStyles:Es,animationStyles:As}}),ng=(ps(ig),ps(ig,{theme:{textStyles:{body:{value:{fontFamily:"monospace"}},heading:{value:{fontFamily:"monospace"}}}}}));function og(e){return(0,ai.jsx)(ao,{value:ng,children:(0,ai.jsx)(vo,{...e})})}const ag=e=>kc(new Hu(e));var sg=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,lg=jn((function(e){return sg.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),cg=/[A-Z]|^ms/g,ug=/_EMO_([^_]+?)_([^]*?)_EMO_/g,dg=function(e){return 45===e.charCodeAt(1)},hg=function(e){return null!=e&&"boolean"!==typeof e},pg=jn((function(e){return dg(e)?e:e.replace(cg,"-$&").toLowerCase()})),fg=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(ug,(function(e,t,r){return gg={name:t,styles:r,next:gg},t}))}return 1===Nn[e]||dg(e)||"number"!==typeof t||0===t?t:t+"px"};function mg(e,t,r){if(null==r)return"";var i=r;if(void 0!==i.__emotion_styles)return i;switch(typeof r){case"boolean":return"";case"object":var n=r;if(1===n.anim)return gg={name:n.name,styles:n.styles,next:gg},n.name;var o=r;if(void 0!==o.styles){var a=o.next;if(void 0!==a)for(;void 0!==a;)gg={name:a.name,styles:a.styles,next:gg},a=a.next;return o.styles+";"}return function(e,t,r){var i="";if(Array.isArray(r))for(var n=0;n<r.length;n++)i+=mg(e,t,r[n])+";";else for(var o in r){var a=r[o];if("object"!==typeof a){var s=a;null!=t&&void 0!==t[s]?i+=o+"{"+t[s]+"}":hg(s)&&(i+=pg(o)+":"+fg(o,s)+";")}else if(!Array.isArray(a)||"string"!==typeof a[0]||null!=t&&void 0!==t[a[0]]){var l=mg(e,t,a);switch(o){case"animation":case"animationName":i+=pg(o)+":"+l+";";break;default:i+=o+"{"+l+"}"}}else for(var c=0;c<a.length;c++)hg(a[c])&&(i+=pg(o)+":"+fg(o,a[c])+";")}return i}(e,t,r);case"function":if(void 0!==e){var s=gg,l=r(e);return gg=s,mg(e,t,l)}}var c=r;if(null==t)return c;var u=t[c];return void 0!==u?u:c}var gg,yg=/label:\s*([^\s;{]+)\s*(;|$)/g;var _g=function(e,t,r){var i=e.key+"-"+t.name;!1===r&&void 0===e.registered[i]&&(e.registered[i]=t.styles)};function bg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t.forEach((e=>e?.(...r)))}}const vg=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map((e=>e?.trim?.())).filter(Boolean).join(" ")},xg=/^on[A-Z]/;function wg(){let e={};for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(let n of r){for(let t in e)xg.test(t)&&"function"===typeof e[t]&&"function"===typeof n[t]?e[t]=bg(e[t],n[t]):e[t]="className"!==t&&"class"!==t?"style"!==t?void 0!==n[t]?n[t]:e[t]:Object.assign({},e[t]??{},n[t]??{}):vg(e[t],n[t]);for(let t in n)void 0===e[t]&&(e[t]=n[t])}return e}function Sg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{t.forEach((t=>{!function(e,t){if(null!=e)if("function"!==typeof e)try{e.current=t}catch(r){throw new Error(`Cannot assign value '${t}' to ref '${e}'`)}else e(t)}(t,e)}))}}const Ig=e=>{const t={};for(const r in e)r.startsWith("html")&&(t[r.replace("html","").toLowerCase()]=e[r]);return t},Tg=e=>(Array.isArray(e)?e:[e]).filter(Boolean).flat(),kg=function(e){return e.default||e}(lg),Eg=kg,Ag=e=>"theme"!==e;let Pg="undefined"!==typeof document;const Cg=e=>{let{cache:t,serialized:r,isStringTag:i}=e;_g(t,r,i);const n=Kn((()=>function(e,t,r){_g(e,t,r);var i=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var n=t;do{e.insert(t===n?"."+i:"",n,e.sheet,!0),n=n.next}while(void 0!==n)}}(t,r,i)));if(!Pg&&void 0!==n){let e=r.name,i=r.next;for(;void 0!==i;)e=va(e,i.name),i=i.next;return(0,ai.jsx)("style",{"data-emotion":va(t.key,e),dangerouslySetInnerHTML:{__html:n},nonce:t.sheet.nonce})}return null},Mg=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=t.__emotion_real===t,o=n&&t.__emotion_base||t;let a,s;void 0!==i&&(a=i.label,s=i.target);let l=[];const c=eo(((a,c,u)=>{const{cva:d,isValidProperty:h}=oo(),p=r.__cva__?r:d(r),f=Bg(t.__emotion_cva,p);var m;!i.shouldForwardProp&&i.forwardProps&&(i.shouldForwardProp=(m=i.forwardProps,(e,t)=>!!m.includes(e)||!t?.includes(e)&&!h(e)));const g=((e,t,r)=>{let i;if(t){const r=t.shouldForwardProp;i=e.__emotion_forwardProp&&r?t=>e.__emotion_forwardProp(t)&&r(t):r}return"function"!==typeof i&&r&&(i=e.__emotion_forwardProp),i})(t,i,n)||((e,r)=>{const i="string"===typeof t&&t.charCodeAt(0)>96?Eg:Ag,n=!r?.includes(e)&&!h(e);return i(e)&&n}),y=e.useMemo((()=>Object.assign({},i.defaultProps,Lo(a))),[a]),{props:_,styles:b}=function(t,r,i){const{css:n,isValidProperty:o}=oo(),{children:a,...s}=t,l=(0,e.useMemo)((()=>{const[e,t]=Vo(s,["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]),[n,a]=Vo(t,(e=>i(e,r.variantKeys))),[l,c]=Vo(a,r.variantKeys),[u,d]=Vo(c,o);return{htmlProps:Ig(e),forwardedProps:n,variantProps:l,styleProps:u,elementProps:d}}),[r.variantKeys,i,s,o]),{css:c,...u}=l.styleProps,d=(0,e.useMemo)((()=>r(l.variantProps)),[r,l.variantProps]);return{styles:(0,e.useMemo)((()=>n(d,...Tg(c),u)),[n,d,c,u]),props:{...l.forwardedProps,...l.elementProps,...l.htmlProps,children:a}}}(y,f,g);let v="",x=[b],w=_;if(null==_.theme){w={};for(let e in _)w[e]=_[e];w.theme=e.useContext(to)}"string"===typeof _.className?v=function(e,t,r){var i="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):r&&(i+=r+" ")})),i}(c.registered,x,_.className):null!=_.className&&(v=va(v,_.className));const S=function(e,t,r){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,n="";gg=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,n+=mg(r,t,o)):n+=o[0];for(var a=1;a<e.length;a++)n+=mg(r,t,e[a]),i&&(n+=o[a]);yg.lastIndex=0;for(var s,l="";null!==(s=yg.exec(n));)l+="-"+s[1];return{name:Fn(n)+l,styles:n,next:gg}}(l.concat(x),c.registered,w);v=va(v,`${c.key}-${S.name}`),void 0!==s&&(v=va(v,s));const I=!g("as");let T=I&&_.as||o,k={};for(let e in _)I&&"as"===e||g(e)&&(k[e]=_[e]);k.className=v.trim(),k.ref=u;const E=i.forwardAsChild||i.forwardProps?.includes("asChild");if(_.asChild&&!E){const t=e.Children.only(_.children);T=t.type,k.children=null,k=wg(k,t.props),k.ref=Sg(u,t.ref)}return k.as&&E?(k.as=void 0,(0,ai.jsxs)(ai.Fragment,{children:[(0,ai.jsx)(Cg,{cache:c,serialized:S,isStringTag:"string"===typeof T}),(0,ai.jsx)(T,{asChild:!0,...k,children:(0,ai.jsx)(_.as,{children:k.children})})]})):(0,ai.jsxs)(ai.Fragment,{children:[(0,ai.jsx)(Cg,{cache:c,serialized:S,isStringTag:"string"===typeof T}),(0,ai.jsx)(T,{...k})]})}));return c.displayName=void 0!==a?a:`Styled(${"string"===typeof o?o:o.displayName||o.name||"Component"})`,c.__emotion_real=c,c.__emotion_base=o,c.__emotion_forwardProp=i.shouldForwardProp,c.__emotion_cva=r,Object.defineProperty(c,"toString",{value:()=>`.${s}`}),c}.bind(),Og=new Map,Rg=new Proxy(Mg,{apply:(e,t,r)=>Mg(...r),get:(e,t)=>(Og.has(t)||Og.set(t,Mg(t)),Og.get(t))}),Bg=(e,t)=>e&&!t?e:!e&&t?t:e.merge(t),Dg=Rg("div");Dg.displayName="Box";const zg=Object.freeze({}),Lg=Object.freeze({});function Fg(t){const{key:r,recipe:i}=t,n=(o=r||i.className||"Component").charAt(0).toUpperCase()+o.slice(1);var o;const[a,s]=io({strict:!1,name:`${n}PropsContext`,providerName:`${n}PropsContext`});function l(t){const{unstyled:n,...o}=t,a=function(t){const{key:r,recipe:i}=t,n=oo();return(0,e.useMemo)((()=>{const e=i||(null!=r?n.getRecipe(r):{});return n.cva(structuredClone(e))}),[r,i,n])}({key:r,recipe:o.recipe||i}),[s,l]=a.splitVariantProps(o);return{styles:n?zg:a(s),className:a.className,props:l}}return{withContext:(t,r)=>{const i=Rg(t,{},r),n=(0,e.forwardRef)(((e,t)=>{const r=wg(s(),e),{styles:n,className:o,props:a}=l(r);return(0,ai.jsx)(i,{...a,ref:t,css:[n,r.css],className:va(o,r.className)})}));return n.displayName=t.displayName||t.name,n},PropsProvider:a,withPropsProvider:function(){return a},usePropsContext:s,useRecipeResult:l}}const{withContext:Ng,PropsProvider:jg}=Fg({key:"text"}),Ug=Ng("p");const Vg=(0,e.forwardRef)((function(t,r){const{direction:i="column",align:n,justify:o,gap:a="0.5rem",wrap:s,children:l,separator:c,className:u,...d}=t,h=(0,e.useMemo)((()=>function(e){const{gap:t,direction:r}=e,i={column:{marginY:t,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},"column-reverse":{marginY:t,marginX:0,borderInlineStartWidth:0,borderTopWidth:"1px"},row:{marginX:t,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0},"row-reverse":{marginX:t,marginY:0,borderInlineStartWidth:"1px",borderTopWidth:0}};return{"&":No(r,(e=>i[e]))}}({gap:a,direction:i})),[a,i]),p=(0,e.useMemo)((()=>c?function(t){return e.Children.toArray(t).filter((t=>(0,e.isValidElement)(t)))}(l).map(((t,r,i)=>{const n="undefined"!==typeof t.key?t.key:r,o=(0,e.cloneElement)(c,{css:[h,c.props.css]});return(0,ai.jsxs)(e.Fragment,{children:[t,r===i.length-1?null:o]},n)})):l),[l,c,h]);return(0,ai.jsx)(Rg.div,{ref:r,display:"flex",alignItems:n,justifyContent:o,flexDirection:i,flexWrap:s,gap:c?void 0:a,className:va("chakra-stack",u),...d,children:p})})),$g=Rg("div",{base:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},variants:{axis:{horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}}},defaultVariants:{axis:"both"}});$g.displayName="AbsoluteCenter";function Wg(e,t){"function"===typeof e?e(t):null!==e&&void 0!==e&&(e.current=t)}function Hg(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{for(const r of t)Wg(r,e)}}const Gg=t=>{const r=(0,e.memo)((0,e.forwardRef)(((r,i)=>{const{asChild:n,children:o,...a}=r;if(!n)return(0,e.createElement)(t,{...a,ref:i},o);const s=e.Children.only(o);if(!(0,e.isValidElement)(s))return null;const l=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}(s);return(0,e.cloneElement)(s,{...Yc(a,s.props),ref:i?Hg(i,l):l})})));return r.displayName=t.displayName||t.name,r},qg=(()=>{const e=new Map;return new Proxy(Gg,{apply:(e,t,r)=>Gg(r[0]),get(t,r){const i=r;return e.has(i)||e.set(i,Gg(i)),e.get(i)}})})(),Zg=e=>((e,t)=>t.reduce(((e,t)=>{const[r,i]=e,n=t;return void 0!==i[n]&&(r[n]=i[n]),delete i[n],[r,i]}),[{},{...e}]))(e,["immediate","lazyMount","onExitComplete","present","unmountOnExit"]);function Xg(e){return e?.animationName||"none"}function Yg(e){return 1e3*parseFloat(e||"0")}var Kg,Jg=16.667,Qg=(Kc()(["onExitComplete","present","immediate"]),r(7950)),ey=(Kg=e=>e,new Proxy({},{get:()=>Kg})),ty=e=>"Array"===e?.constructor.name,ry=(e,t)=>{if(Object.is(e,t))return!0;if(null==e&&null!=t||null!=e&&null==t)return!1;if("function"===typeof e?.isEqual&&"function"===typeof t?.isEqual)return e.isEqual(t);if("function"===typeof e&&"function"===typeof t)return e.toString()===t.toString();if(ty(e)&&ty(t))return((e,t)=>{if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!ry(e[r],t[r]))return!1;return!0})(Array.from(e),Array.from(t));if("object"!==typeof e||"object"!==typeof t)return!1;const r=Object.keys(t??Object.create(null)),i=r.length;for(let n=0;n<i;n++){if(!Reflect.has(e,r[n]))return!1}for(let n=0;n<i;n++){const i=r[n];if(!ry(e[i],t[i]))return!1}return!0};function iy(e){if(!ny(e)||void 0===e)return e;const t=Reflect.ownKeys(e).filter((e=>"string"===typeof e)),r={};for(const i of t){const t=e[i];void 0!==t&&(r[i]=iy(t))}return r}Function.prototype.toString.call(Object);var ny=e=>e&&"object"===typeof e&&e.constructor===Object;var{use:oy}=e,ay=_c("__zag__targetCache",(()=>new WeakMap));function sy(t,r){const{actions:i,context:n,sync:o}=r??{},a=(0,e.useRef)(),s=(0,e.useRef)(),l=(0,e.useSyncExternalStore)((0,e.useCallback)((e=>Ic(t.state,e,o)),[o]),(()=>{const e=Tc(t.state,oy);try{if(a.current&&s.current&&!gc(a.current,e,s.current,new WeakMap))return a.current}catch{}return e}),(()=>Tc(t.state,oy)));t.setOptions({actions:i});const c=(0,e.useMemo)((()=>iy(n??{})),[n]);!function(t,r){const i=(0,e.useRef)(!1),n=(0,e.useRef)(!1);(0,e.useEffect)((()=>{if(i.current&&n.current)return t();n.current=!0}),r),(0,e.useEffect)((()=>(i.current=!0,()=>{i.current=!1})),[])}((()=>{const e=Object.entries(c),r=t.contextSnapshot??{};e.map((e=>{let[t,i]=e;return{key:t,curr:i,prev:r[t],equal:ry(r[t],i)}})).every((e=>{let{equal:t}=e;return t}))||t.setContext(c)}),[c]);const u=new WeakMap;(0,e.useEffect)((()=>{a.current=l,s.current=u}));const d=(0,e.useMemo)((()=>new WeakMap),[]);return mc(l,u,d,ay)}var ly="undefined"!==typeof document?e.useLayoutEffect:e.useEffect;function cy(t,r){const{state:i,context:n}=r??{},o=function(t){const r=(0,e.useRef)();return r.current||(r.current={v:t()}),r.current.v}((()=>{const e="function"===typeof t?t():t;return n&&e.setContext(n),e._created(),e})),a=(0,e.useRef)();return ly((()=>{const e=i??a.current;return o.start(e),()=>{o.stop()}}),[]),o}function uy(e,t){const r=cy(e,t);return[sy(r,t),r.send,r]}function dy(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{sync:i=!1}=r,n=function(t){const r=(0,e.useRef)(t);return r.current=t,r}(t);return(0,e.useCallback)((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return i?queueMicrotask((()=>n.current?.(...t))):n.current?.(...t)}),[i,n])}const hy=t=>{const{lazyMount:r,unmountOnExit:i,...n}=t,o=(0,e.useRef)(!1),a={...n,onExitComplete:dy(t.onExitComplete)},[s,l]=uy(Hc({initial:(c=a).present?"mounted":"unmounted",context:{node:null,styles:null,unmountAnimationName:null,prevAnimationName:null,present:!1,initial:!1,...c},exit:["clearInitial"],watch:{present:["setInitial","syncPresence"]},on:{"NODE.SET":{actions:["setNode","setStyles"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]},"UNMOUNT.SUSPEND":"unmountSuspended"}},unmountSuspended:{activities:["trackAnimationEvents"],after:{ANIMATION_DURATION:{target:"unmounted",actions:["invokeOnExitComplete"]}},on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]}}},unmounted:{entry:["clearPrevAnimationName"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}}},{delays:{ANIMATION_DURATION:e=>Yg(e.styles?.animationDuration)+Yg(e.styles?.animationDelay)+Jg},actions:{setInitial(e){e.initial=!0},clearInitial(e){e.initial=!1},invokeOnExitComplete(e){e.onExitComplete?.()},setNode(e,t){e.node=kc(t.node)},setStyles(e,t){const r=t.node.ownerDocument.defaultView||window;e.styles=kc(r.getComputedStyle(t.node))},syncPresence(e,t,r){let{send:i}=r;if(e.present)return void i({type:"MOUNT",src:"presence.changed"});if(!e.present&&"hidden"===e.node?.ownerDocument.visibilityState)return void i({type:"UNMOUNT",src:"visibilitychange"});const n=Xg(e.styles);(e.immediate?queueMicrotask:requestAnimationFrame)((()=>{e.unmountAnimationName=n,"none"===n||n===e.prevAnimationName||"none"===e.styles?.display||"0s"===e.styles?.animationDuration?i({type:"UNMOUNT",src:"presence.changed"}):i({type:"UNMOUNT.SUSPEND"})}))},setPrevAnimationName(e){(e.immediate?queueMicrotask:requestAnimationFrame)((()=>{e.prevAnimationName=Xg(e.styles)}))},clearPrevAnimationName(e){e.prevAnimationName=null}},activities:{trackAnimationEvents(e,t,r){let{send:i}=r;const n=e.node;if(!n)return;const o=t=>{(t.composedPath?.()?.[0]??t.target)===n&&(e.prevAnimationName=Xg(e.styles))},a=t=>{const r=Xg(e.styles);(t.composedPath?.()?.[0]??t.target)===n&&r===e.unmountAnimationName&&i({type:"UNMOUNT",src:"animationend"})};return n.addEventListener("animationstart",o),n.addEventListener("animationcancel",a),n.addEventListener("animationend",a),()=>{n.removeEventListener("animationstart",o),n.removeEventListener("animationcancel",a),n.removeEventListener("animationend",a)}}}}),{context:a});var c;const u=function(e,t){const r=e.matches("mounted","unmountSuspended");return{skip:!e.context.initial&&r,present:r,setNode(e){e&&t({type:"NODE.SET",node:e})},unmount(){t({type:"UNMOUNT"})}}}(s,l);u.present&&(o.current=!0);const d=!u.present&&!o.current&&r||i&&!u.present&&o.current;return{ref:u.setNode,getPresenceProps:()=>({"data-state":t.present?"open":"closed",hidden:!u.present}),present:u.present,unmounted:d}};function py(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:r,strict:i=!0,hookName:n="useContext",providerName:o="Provider",errorMessage:a,defaultValue:s}=t,l=(0,e.createContext)(s);return l.displayName=r,[l.Provider,function t(){const r=(0,e.useContext)(l);if(!r&&i){const e=new Error(a??`${n} returned \`undefined\`. Seems you forgot to wrap component within ${o}`);throw e.name="ContextError",Error.captureStackTrace?.(e,t),e}return r},l]}const[fy,my]=py({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"}),[gy,yy]=py({name:"SelectContext",hookName:"useSelectContext",providerName:"<SelectProvider />"}),_y=(0,e.forwardRef)(((e,t)=>{const[r,i]=Zg(e),[{value:n},o]=((e,t)=>t.reduce(((e,t)=>{const[r,i]=e,n=t;return void 0!==i[n]&&(r[n]=i[n]),delete i[n],[r,i]}),[{},{...e}]))(i,["value"]),a=hy(Yc({present:n.open},r)),s=Yc(n.getRootProps(),o);return(0,ai.jsx)(gy,{value:n,children:(0,ai.jsx)(fy,{value:a,children:(0,ai.jsx)(qg.div,{...s,ref:t})})})})),[by,vy]=py({name:"EnvironmentContext",hookName:"useEnvironmentContext",providerName:"<EnvironmentProvider />",strict:!1,defaultValue:{getRootNode:()=>document,getDocument:()=>document,getWindow:()=>window}}),[xy,wy]=py({name:"LocaleContext",hookName:"useLocaleContext",providerName:"<LocaleProvider />",strict:!1,defaultValue:{dir:"ltr",locale:"en-US"}}),[Sy,Iy]=py({name:"FieldContext",hookName:"useFieldContext",providerName:"<FieldProvider />",strict:!1}),Ty=(0,e.forwardRef)(((t,r)=>{const[i,n]=Zg(t),[o,a]=((e,t)=>t.reduce(((e,t)=>{const[r,i]=e,n=t;return void 0!==i[n]&&(r[n]=i[n]),delete i[n],[r,i]}),[{},{...e}]))(n,["closeOnSelect","collection","composite","defaultOpen","defaultValue","deselectable","disabled","form","highlightedValue","id","ids","invalid","loopFocus","multiple","name","onFocusOutside","onHighlightChange","onInteractOutside","onOpenChange","onPointerDownOutside","onValueChange","open","positioning","readOnly","required","scrollToIndexFn","value"]),s=(t=>{const{collection:r,...i}=t,n=wy(),o=vy(),a=Iy(),s={id:(0,e.useId)(),ids:{label:a?.ids.label,hiddenSelect:a?.ids.control},disabled:a?.disabled,readOnly:a?.readOnly,invalid:a?.invalid,required:a?.required,dir:n.dir,getRootNode:o.getRootNode,collection:r,open:t.defaultOpen,value:t.defaultValue,"open.controlled":void 0!==t.open,...i},l=(()=>{const{collection:e,...r}=s;return{...r,value:t.value,onValueChange:dy(t.onValueChange,{sync:!0}),onHighlightChange:dy(t.onHighlightChange),onOpenChange:dy(t.onOpenChange)}})(),[c,u,d]=uy(tp(s),{context:l});return(0,e.useEffect)((()=>{d.setContext({collection:r})}),[r]),Kh(c,u,ey)})(o),l=hy(Yc({present:s.open},i)),c=Yc(s.getRootProps(),a);return(0,ai.jsx)(gy,{value:s,children:(0,ai.jsx)(fy,{value:l,children:(0,ai.jsx)(qg.div,{...c,ref:r})})})})),ky=(0,e.forwardRef)(((e,t)=>{const r=Yc(yy().getTriggerProps(),e);return(0,ai.jsx)(qg.button,{...r,ref:t})}));ky.displayName="SelectTrigger";const Ey=(0,e.forwardRef)(((e,t)=>{const r=Yc(yy().getPositionerProps(),e);return my().unmounted?null:(0,ai.jsx)(qg.div,{...r,ref:t})}));Ey.displayName="SelectPositioner";const Ay=(0,e.forwardRef)(((e,t)=>{const r=yy(),i=my(),n=Yc(r.getContentProps(),i.getPresenceProps(),e);return i.unmounted?null:(0,ai.jsx)(qg.div,{...n,ref:Hg(i.ref,t)})}));Ay.displayName="SelectContent";const Py=(0,e.forwardRef)(((e,t)=>{const{children:r,placeholder:i,...n}=e,o=yy(),a=Yc(o.getValueTextProps(),n);return(0,ai.jsx)(qg.span,{...a,ref:t,children:r||o.valueAsString||i})}));Py.displayName="SelectValueText";const Cy=(0,e.forwardRef)(((e,t)=>{const r=Yc(yy().getClearTriggerProps(),e);return(0,ai.jsx)(qg.button,{...r,ref:t})}));Cy.displayName="SelectClearTrigger";const[My,Oy]=py({name:"SelectItemGroupPropsContext",hookName:"useSelectItemGroupPropsContext",providerName:"<SelectItemGroupPropsProvider />"}),Ry=(0,e.forwardRef)(((t,r)=>{const i=(0,e.useId)(),[n,o]=((e,t)=>t.reduce(((e,t)=>{const[r,i]=e,n=t;return void 0!==i[n]&&(r[n]=i[n]),delete i[n],[r,i]}),[{},{...e}]))(t,["id"]),a={id:i,...n},s=Yc(yy().getItemGroupProps(a),o);return(0,ai.jsx)(My,{value:a,children:(0,ai.jsx)(qg.div,{...s,ref:r})})}));Ry.displayName="SelectItemGroup";const By=(0,e.forwardRef)(((e,t)=>{const r=yy(),i=Oy(),n=Yc(r.getItemGroupLabelProps({htmlFor:i.id}),e);return(0,ai.jsx)(qg.div,{...n,ref:t})}));By.displayName="SelectItemGroupLabel";const[Dy,zy]=py({name:"SelectItemContext",hookName:"useSelectItemContext",providerName:"<SelectItemProvider />"}),[Ly,Fy]=py({name:"SelectItemPropsContext",hookName:"useSelectItemPropsContext",providerName:"<SelectItemPropsProvider />"}),Ny=(0,e.forwardRef)(((e,t)=>{const[r,i]=((e,t)=>t.reduce(((e,t)=>{const[r,i]=e,n=t;return void 0!==i[n]&&(r[n]=i[n]),delete i[n],[r,i]}),[{},{...e}]))(e,["item","persistFocus"]),n=yy(),o=Yc(n.getItemProps(r),i),a=n.getItemState(r);return(0,ai.jsx)(Ly,{value:r,children:(0,ai.jsx)(Dy,{value:a,children:(0,ai.jsx)(qg.div,{...o,ref:t})})})}));Ny.displayName="SelectItem";const jy=(0,e.forwardRef)(((e,t)=>{const r=yy(),i=Fy(),n=Yc(r.getItemTextProps(i),e);return(0,ai.jsx)(qg.span,{...n,ref:t})}));jy.displayName="SelectItemText";const Uy=(0,e.forwardRef)(((e,t)=>{const r=yy(),i=Fy(),n=Yc(r.getItemIndicatorProps(i),e);return(0,ai.jsx)(qg.div,{...n,ref:t})}));Uy.displayName="SelectItemIndicator";const Vy=(0,e.forwardRef)(((e,t)=>{const r=Yc(yy().getIndicatorProps(),e);return(0,ai.jsx)(qg.div,{...r,ref:t})}));Vy.displayName="SelectIndicator";const $y=(0,e.forwardRef)(((e,t)=>{const r=Yc(yy().getControlProps(),e);return(0,ai.jsx)(qg.div,{...r,ref:t})}));$y.displayName="SelectControl";const Wy=(0,e.forwardRef)(((e,t)=>{const r=Yc(yy().getLabelProps(),e);return(0,ai.jsx)(qg.label,{...r,ref:t})}));Wy.displayName="SelectLabel";const Hy=(0,e.forwardRef)(((e,t)=>{const r=yy(),i=Yc(r.getHiddenSelectProps(),e),n=0===r.value.length,o=Iy();return(0,ai.jsxs)(qg.select,{"aria-describedby":o?.ariaDescribedby,...i,ref:t,children:[n&&(0,ai.jsx)("option",{value:""}),r.collection.items.map(((e,t)=>(0,ai.jsx)("option",{value:r.collection.getItemValue(e)??"",disabled:r.collection.getItemDisabled(e)},t)))]})}));Hy.displayName="SelectHiddenSelect";const Gy=e=>(0,ai.jsx)(Rg.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,ai.jsx)("path",{d:"M20 6 9 17l-5-5"})}),qy=e=>(0,ai.jsx)(Rg.svg,{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:(0,ai.jsx)("path",{d:"m6 9 6 6 6-6"})}),{withProvider:Zy,withContext:Xy,useStyles:Yy,PropsProvider:Ky}=(t=>{const{key:r,recipe:i}=t,n=(o=r||i.className||"Component").charAt(0).toUpperCase()+o.slice(1);var o;const[a,s]=io({name:`${n}StylesContext`,errorMessage:`use${n}Styles returned is 'undefined'. Seems you forgot to wrap the components in "<${n}.Root />" `}),[l,c]=io({name:`${n}ClassNameContext`,errorMessage:`use${n}ClassNames returned is 'undefined'. Seems you forgot to wrap the components in "<${n}.Root />" `,strict:!1}),[u,d]=io({strict:!1,name:`${n}PropsContext`,providerName:`${n}PropsContext`,defaultValue:{}});function h(t){const{unstyled:n,...o}=t,a=function(t){const{key:r,recipe:i}=t,n=oo();return(0,e.useMemo)((()=>{const e=i||(null!=r?n.getSlotRecipe(r):{});return n.sva(structuredClone(e))}),[r,i,n])}({key:r,recipe:o.recipe||i}),[s,l]=a.splitVariantProps(o);return{styles:n?Lg:a(s),classNames:a.classNameMap,props:l}}return{StylesProvider:a,ClassNamesProvider:l,PropsProvider:u,usePropsContext:d,useRecipeResult:h,withProvider:(t,r,i)=>{const{defaultProps:n,...o}=i??{},s=Rg(t,{},o),c=(0,e.forwardRef)(((e,t)=>{const o=wg(n??{},d(),e),{styles:c,props:u,classNames:p}=h(o),f=p[r],m=(0,ai.jsx)(a,{value:c,children:(0,ai.jsx)(l,{value:p,children:(0,ai.jsx)(s,{ref:t,...u,css:[c[r],o.css],className:va(o.className,f)})})});return i?.wrapElement?.(m,o)??m}));return c.displayName=t.displayName||t.name,c},withContext:(t,r,i)=>{const n=Rg(t,{},i),o=(0,e.forwardRef)(((e,t)=>{const i=s(),o=c(),a=o?.[r];return(0,ai.jsx)(n,{...e,css:[r?i[r]:void 0,e.css],ref:t,className:va(e.className,a)})}));return o.displayName=t.displayName||t.name,o},withRootProvider:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{defaultProps:r}=t,i=t=>{const i=wg(r,d(),t),{styles:n,classNames:o,props:s}=h(i);return(0,ai.jsx)(a,{value:n,children:(0,ai.jsx)(l,{value:o,children:(0,ai.jsx)(e,{...s})})})};return i.displayName=e.displayName||e.name,i},useStyles:s,useClassNames:c}})({key:"select"}),Jy=(Zy(_y,"root",{forwardAsChild:!0}),Zy(Ty,"root",{forwardAsChild:!0})),Qy=Xy(ky,"trigger",{forwardAsChild:!0}),e_=Xy(Ey,"positioner",{forwardAsChild:!0}),t_=Xy(Ay,"content",{forwardAsChild:!0}),r_=Xy(Py,"valueText",{forwardAsChild:!0}),i_=Xy(Cy,"clearTrigger",{forwardAsChild:!0}),n_=(Xy(Ry,"itemGroup",{forwardAsChild:!0}),Xy(By,"itemGroupLabel",{forwardAsChild:!0}),Xy(Ny,"item",{forwardAsChild:!0})),o_=(Xy(jy,"itemText",{forwardAsChild:!0}),Xy(Uy,"itemIndicator",{forwardAsChild:!0,defaultProps:{children:(0,ai.jsx)(Gy,{})}})),a_=Xy("div","indicatorGroup"),s_=Xy(Vy,"indicator",{forwardAsChild:!0,defaultProps:{children:(0,ai.jsx)(qy,{})}}),l_=Xy($y,"control",{forwardAsChild:!0}),c_=Xy(Wy,"label",{forwardAsChild:!0}),u_=e=>e.children(yy()),d_=Hy,h_=t=>{const{children:r,disabled:i}=t,[n,o]=(0,e.useState)(t.container?.current),a=(0,e.useSyncExternalStore)(f_,(()=>!1),(()=>!0)),{getRootNode:s}=vy();if((0,e.useEffect)((()=>{o((()=>t.container?.current))}),[t.container]),a||i)return(0,ai.jsx)(ai.Fragment,{children:r});const l=n??p_(s);return(0,ai.jsx)(ai.Fragment,{children:e.Children.map(r,(e=>(0,Qg.createPortal)(e,l)))})},p_=e=>{const t=e?.(),r=t.getRootNode();return Ys(r)?r:Js(t).body},f_=()=>()=>{},{withContext:m_,PropsProvider:g_}=Fg({key:"button"}),y_=m_("button",{defaultProps:{type:"button"}}),__=(0,e.forwardRef)((function(e,t){return(0,ai.jsx)(y_,{px:"0",py:"0",_icon:{fontSize:"1.2em"},ref:t,...e})}));var b_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},v_=e.createContext&&e.createContext(b_),x_=["attr","size","title"];function w_(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},S_.apply(this,arguments)}function I_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function T_(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I_(Object(r),!0).forEach((function(t){k_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I_(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k_(e,t,r){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E_(t){return t&&t.map(((t,r)=>e.createElement(t.tag,T_({key:r},t.attr),E_(t.child))))}function A_(t){return r=>e.createElement(P_,S_({attr:T_({},t.attr)},r),E_(t.child))}function P_(t){var r=r=>{var i,{attr:n,size:o,title:a}=t,s=w_(t,x_),l=o||r.size||"1em";return r.className&&(i=r.className),t.className&&(i=(i?i+" ":"")+t.className),e.createElement("svg",S_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,n,s,{className:i,style:T_(T_({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&e.createElement("title",null,a),t.children)};return void 0!==v_?e.createElement(v_.Consumer,null,(e=>r(e))):r(b_)}function C_(e){return A_({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 6 6 18"},child:[]},{tag:"path",attr:{d:"m6 6 12 12"},child:[]}]})(e)}const M_=e.forwardRef((function(e,t){var r;return(0,ai.jsx)(__,{variant:"ghost","aria-label":"Close",ref:t,...e,children:null!==(r=e.children)&&void 0!==r?r:(0,ai.jsx)(C_,{})})})),O_=e.forwardRef((function(e,t){const{children:r,clearable:i,...n}=e;return(0,ai.jsxs)(l_,{...n,children:[(0,ai.jsx)(Qy,{ref:t,children:r}),(0,ai.jsxs)(a_,{children:[i&&(0,ai.jsx)(R_,{}),(0,ai.jsx)(s_,{})]})]})})),R_=e.forwardRef((function(e,t){return(0,ai.jsx)(i_,{asChild:!0,...e,ref:t,children:(0,ai.jsx)(M_,{size:"xs",variant:"plain",focusVisibleRing:"inside",focusRingWidth:"2px",pointerEvents:"auto"})})})),B_=e.forwardRef((function(e,t){const{portalled:r=!0,portalRef:i,...n}=e;return(0,ai.jsx)(h_,{disabled:!r,container:i,children:(0,ai.jsx)(e_,{children:(0,ai.jsx)(t_,{...n,ref:t})})})})),D_=e.forwardRef((function(e,t){const{item:r,children:i,...n}=e;return(0,ai.jsxs)(n_,{item:r,...n,ref:t,children:[i,(0,ai.jsx)(o_,{})]},r.value)})),z_=e.forwardRef((function(e,t){const{children:r,...i}=e;return(0,ai.jsx)(r_,{...i,ref:t,children:(0,ai.jsx)(u_,{children:t=>{const i=t.selectedItems;return 0===i.length?e.placeholder:r?r(i):1===i.length?t.collection.stringifyItem(i[0]):`${i.length} selected`}})})})),L_=e.forwardRef((function(e,t){return(0,ai.jsx)(Jy,{...e,ref:t,positioning:{sameWidth:!0,...e.positioning},children:e.asChild?e.children:(0,ai.jsxs)(ai.Fragment,{children:[(0,ai.jsx)(d_,{}),e.children]})})})),F_=c_,N_=ag({items:[{label:"Calgary",value:"Calgary"},{label:"Vancouver",value:"Vancouver"},{label:"Edmonton",value:"Edmonton"},{label:"Toronto",value:"Toronto"},{label:"Burnaby",value:"Burnaby"},{label:"London",value:"London"},{label:"Saskatoon",value:"Saskatoon"},{label:"Regina",value:"Regina"},{label:"Winnipeg",value:"Winnipeg"}]}),j_=ag({items:[{label:"Employment",value:"acs_idx_emp"},{label:"Healthcare Facilities",value:"acs_idx_hf"},{label:"Primary and Secondary Education",value:"acs_idx_ef"},{label:"Post-secondary Education",value:"acs_idx_psef"},{label:"Sport and Recreation Facilities",value:"acs_idx_srf"},{label:"Cultural and Arts Facilities",value:"acs_idx_caf"}]}),U_=ag({items:[{label:"10%",value:.1},{label:"25%",value:.25},{label:"40%",value:.4},{label:"50% (Median)",value:.5},{label:"70%",value:.7},{label:"90%",value:.9}]}),V_=ag({items:[{label:"Public Transit (Peak)",value:"acs_public_transit_peak"},{label:"Public Transit (Off Peak)",value:"acs_public_transit_offpeak"},{label:"Cycling",value:"acs_cycling"},{label:"Walking",value:"acs_walking"}]});const $_=function(){const[t,r]=(0,e.useState)(!1),[i,n]=(0,e.useState)(""),[o,a]=(0,e.useState)("Vancouver"),[s,l]=(0,e.useState)("acs_idx_emp"),[c,u]=(0,e.useState)("acs_public_transit_peak"),[d,h]=(0,e.useState)(.99);(0,e.useEffect)((()=>{console.log("setting up db"),async function(){const e=await(0,Bi.initializeDuckDb)({config:{query:{castBigIntToDouble:!0}},debug:!0}),t="access_measures.parquet";await e.registerFileURL(t,"https://gtfs-parquet.s3.us-west-2.amazonaws.com/spatial_access_measures_wkb.parquet",Ri.HTTP,!0);const r=await e.connect();console.log("installing extensions"),await r.query("INSTALL spatial; LOAD spatial;"),await r.query("INSTALL parquet; LOAD parquet;"),console.log("create view"),await r.query(`CREATE VIEW IF NOT EXISTS '${t}' AS SELECT * FROM '${t}'`)}().then((()=>r(!0))).catch((e=>n(e.message)))}),[]);const{arrow:p,loading:f,error:m}=(0,Bi.useDuckDbQuery)(`\n    SELECT CAST({ \n      type: 'FeatureCollection',\n      features: json_group_array(geometry_json) \n    } AS JSON) as feature_collection \n    FROM (SELECT CAST({\n        type:'Feature',\n        geometry:ST_AsGeoJSON(ST_GeomFromWKB(st_aswkb(geometry))),\n        properties: {\n          'acs_idx_emp':acs_idx_emp,\n          'acs_idx_hf':acs_idx_hf,\n          'acs_idx_srf':acs_idx_srf,\n          'acs_idx_psef':acs_idx_psef,\n          'acs_idx_ef':acs_idx_ef,\n          'acs_idx_caf':acs_idx_caf\n        }\n      } AS JSON) as geometry_json, \n    FROM access_measures.parquet WHERE type='${c}' AND CSDNAME='${o}')  ;\n    `);return(0,ai.jsxs)(og,{children:[t&&(0,ai.jsx)(si,{data:p,access_measure:s}),(0,ai.jsxs)(Dg,{bg:"white",w:"20rem",p:"7",position:"absolute",top:"4",left:"4",shadow:"3px 3px 4px 6px rgba(0, 0, 0, .05)",children:[(0,ai.jsx)(Ug,{textStyle:"4xl",children:"Spatial Access Measures "}),(0,ai.jsx)(Ug,{py:"4",children:"Statistics Canada data that quantifies the ease of reaching destinations from an origin dissemination block (DB)."}),(0,ai.jsxs)(Vg,{gap:"5",children:[(0,ai.jsxs)(L_,{size:"sm",collection:V_,onValueChange:function(e){u(e.value[0])},children:[(0,ai.jsx)(O_,{children:(0,ai.jsx)(z_,{placeholder:"Public Transit (Peak)"})}),(0,ai.jsx)(B_,{p:"2",children:V_.items.map((e=>(0,ai.jsx)(D_,{item:e,children:e.label},e.value)))})]},"access_type"),(0,ai.jsxs)(L_,{size:"sm",collection:N_,onValueChange:function(e){a(e.value[0])},children:[(0,ai.jsx)(F_,{children:"City"}),(0,ai.jsx)(O_,{children:(0,ai.jsx)(z_,{placeholder:o})}),(0,ai.jsx)(B_,{p:"2",children:N_.items.map((e=>(0,ai.jsx)(D_,{item:e,children:e.label},e.value)))})]},"cities"),(0,ai.jsxs)(L_,{size:"sm",collection:j_,onValueChange:function(e){l(e.value[0])},children:[(0,ai.jsx)(F_,{children:"Access Measure"}),(0,ai.jsx)(O_,{children:(0,ai.jsx)(z_,{placeholder:"Employment"})}),(0,ai.jsx)(B_,{p:"3",children:j_.items.map((e=>(0,ai.jsx)(D_,{item:e,children:e.label},e.value)))})]},"access"),(0,ai.jsxs)(L_,{size:"sm",collection:U_,onValueChange:function(e){h(e.value[0])},children:[(0,ai.jsx)(F_,{children:"Percentile"}),(0,ai.jsx)(O_,{children:(0,ai.jsx)(z_,{placeholder:"50%"})}),(0,ai.jsx)(B_,{p:"3",children:U_.items.map((e=>(0,ai.jsx)(D_,{item:e,children:e.label},e.value)))})]},"percentile")]})]}),f&&(0,ai.jsx)($g,{bg:"grey",p:"2",color:"white",axis:"both",children:(0,ai.jsx)(Dg,{children:"Loading Data..."})})]})},W_=e=>{e&&e instanceof Function&&r.e(453).then(r.bind(r,6453)).then((t=>{let{getCLS:r,getFID:i,getFCP:n,getLCP:o,getTTFB:a}=t;r(e),i(e),n(e),o(e),a(e)}))};i.createRoot(document.getElementById("root")).render((0,ai.jsx)($_,{})),W_()})()})();
//# sourceMappingURL=main.08320ddb.js.map